(()=>{var Mg=Object.defineProperty;var a=(W,d)=>Mg(W,"name",{value:d,configurable:!0});(window.webpackJsonp=window.webpackJsonp||[]).push([["gantry-v2-vendors-client","gantry-v2-vendors-workflow-builder"],{"+7ft":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");d.default=g},"+D+n":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(t,n,r,c){function f(S){return S instanceof r?S:new r(function(l){l(S)})}return a(f,"adopt"),new(r||(r=Promise))(function(S,l){function y(R){try{O(c.next(R))}catch(F){l(F)}}a(y,"fulfilled");function T(R){try{O(c.throw(R))}catch(F){l(F)}}a(T,"rejected");function O(R){R.done?S(R.value):f(R.value).then(y,T)}a(O,"step"),O((c=c.apply(t,n||[])).next())})},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("dWQL")),m=p(h("t9Fz")),s=p(h("QzVx")),o=h("KyYT"),i=p(h("JTre"));let e=a(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new m.default(new s.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return g(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const n=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,n.destroy()})}bindVideoElement(n,r){const c=this.getVideoTile(n);if(c===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${n}`);return}c.bindVideoElement(r)}unbindVideoElement(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const c=this.getVideoTile(n);if(c===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${n}`);return}this.logger.info("Unbinding the video element");const f=c.stateRef().boundVideoElement;c.bindVideoElement(null),r&&(this.logger.info("Cleaning up the video element"),i.default.disconnectVideoStreamFromVideoElement(f,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===u.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const n=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),n.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(n){const r=this.getVideoTile(n);r&&(this.currentPausedTilesByIds.has(n)||(this.audioVideoController.pauseReceivingStream(r.stateRef().streamId),this.currentPausedTilesByIds.add(n)),r.pause())}unpauseVideoTile(n){const r=this.getVideoTile(n);r&&(this.currentPausedTilesByIds.has(n)&&(this.audioVideoController.resumeReceivingStream(r.stateRef().streamId),this.currentPausedTilesByIds.delete(n)),r.unpause())}getVideoTile(n){return this.tileMap.has(n)?this.tileMap.get(n):null}getVideoTileArea(n){const r=n.state();let c=0,f=0;return r.boundVideoElement&&(c=r.boundVideoElement.clientHeight*r.devicePixelRatio,f=r.boundVideoElement.clientWidth*r.devicePixelRatio),c*f}getAllRemoteVideoTiles(){const n=new Array;return this.tileMap.forEach((r,c)=>{(!this.currentLocalTile||c!==this.currentLocalTile.id())&&n.push(r)}),n}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const r=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const c=this.tileFactory.makeTile(r,n,this,this.devicePixelRatioMonitor);return this.tileMap.set(r,c),c}removeVideoTile(n){if(!this.tileMap.has(n))return;const r=this.tileMap.get(n);this.currentLocalTile===r&&(this.currentLocalTile=null),r.destroy(),this.tileMap.delete(n),this.audioVideoController.forEachObserver(c=>{o.Maybe.of(c.videoTileWasRemoved).map(f=>f.bind(c)(n))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(n){const r=[];for(const c of this.getAllVideoTiles()){const f=c.state();f.boundAttendeeId===n&&(this.removeVideoTile(f.tileId),r.push(f.tileId))}return r}removeAllVideoTiles(){const n=Array.from(this.tileMap.keys());for(const r of n)this.removeVideoTile(r)}sendTileStateUpdate(n){this.audioVideoController.forEachObserver(r=>{o.Maybe.of(r.videoTileDidUpdate).map(c=>c.bind(r)(n))})}haveVideoTilesWithStreams(){for(const n of this.getAllVideoTiles())if(n.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(n){return!!this.getVideoTileForAttendeeId(n)}getVideoTileForAttendeeId(n){for(const r of this.getAllVideoTiles())if(r.state().boundAttendeeId===n)return r}captureVideoTile(n){const r=this.getVideoTile(n);return r?r.capture():null}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(n,r,c){this.tileFactory=n,this.audioVideoController=r,this.logger=c,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=r.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");d.default=e},"+DE9":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(u,m,s,o){function i(e){return e instanceof s?e:new s(function(t){t(e)})}return a(i,"adopt"),new(s||(s=Promise))(function(e,t){function n(f){try{c(o.next(f))}catch(S){t(S)}}a(n,"fulfilled");function r(f){try{c(o.throw(f))}catch(S){t(S)}}a(r,"rejected");function c(f){f.done?e(f.value):i(f.value).then(n,r)}a(c,"step"),c((o=o.apply(u,m||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});let p=a(class{destroy(){return g(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(m){this.observerQueue.add(m),m.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(m){this.observerQueue.delete(m)}constructor(m,s){if(this.devicePixelRatioSource=m,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(i=>{i.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const o=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof o.addEventListener=="function"?(o.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=o):typeof o.addListener=="function"?(o.addListener(this.mediaQueryListener),this.mediaQueryList=o):s.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");d.default=p},"+W1r":function(W,d,h){"use strict";h.d(d,"a",function(){return e});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e=Object(s.a)("help.getRecommendedArticles generated fetcher",function(){var t=Object(g.coroutine)(function*(n,r,c){try{const f=["reason"],S=Object(u.a)(c,f),l=Object(i.b)(S);return yield n(Object(m.apiCall)({method:"help.getRecommendedArticles",args:l,reason:c.reason}))}catch(f){throw Object(o.a)({getState:r}).error(`API call to help.getRecommendedArticles
				with reason ${c.reason} failed, initiated by generated fetcher`),f}});return function(n,r,c){return t.apply(this,arguments)}}());e.meta={name:"createFetcher",key:"createFetcherhelpGetRecommendedArticlesFetcher",description:"help.getRecommendedArticles generated fetcher"}},"+br/":function(W,d,h){"use strict";h.r(d),h.d(d,"__extends",function(){return p}),h.d(d,"__assign",function(){return u}),h.d(d,"__rest",function(){return m}),h.d(d,"__decorate",function(){return s}),h.d(d,"__param",function(){return o}),h.d(d,"__metadata",function(){return i}),h.d(d,"__awaiter",function(){return e}),h.d(d,"__generator",function(){return t}),h.d(d,"__createBinding",function(){return n}),h.d(d,"__exportStar",function(){return r}),h.d(d,"__values",function(){return c}),h.d(d,"__read",function(){return f}),h.d(d,"__spread",function(){return S}),h.d(d,"__spreadArrays",function(){return l}),h.d(d,"__await",function(){return y}),h.d(d,"__asyncGenerator",function(){return T}),h.d(d,"__asyncDelegator",function(){return O}),h.d(d,"__asyncValues",function(){return R}),h.d(d,"__makeTemplateObject",function(){return F}),h.d(d,"__importStar",function(){return U}),h.d(d,"__importDefault",function(){return _}),h.d(d,"__classPrivateFieldGet",function(){return P}),h.d(d,"__classPrivateFieldSet",function(){return L});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var g=a(function(A,M){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,G){k.__proto__=G}||function(k,G){for(var K in G)G.hasOwnProperty(K)&&(k[K]=G[K])},g(A,M)},"extendStatics");function p(A,M){g(A,M);function k(){this.constructor=A}a(k,"__"),A.prototype=M===null?Object.create(M):(k.prototype=M.prototype,new k)}a(p,"__extends");var u=a(function(){return u=Object.assign||a(function(M){for(var k,G=1,K=arguments.length;G<K;G++){k=arguments[G];for(var H in k)Object.prototype.hasOwnProperty.call(k,H)&&(M[H]=k[H])}return M},"__assign"),u.apply(this,arguments)},"__assign");function m(A,M){var k={};for(var G in A)Object.prototype.hasOwnProperty.call(A,G)&&M.indexOf(G)<0&&(k[G]=A[G]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,G=Object.getOwnPropertySymbols(A);K<G.length;K++)M.indexOf(G[K])<0&&Object.prototype.propertyIsEnumerable.call(A,G[K])&&(k[G[K]]=A[G[K]]);return k}a(m,"__rest");function s(A,M,k,G){var K=arguments.length,H=K<3?M:G===null?G=Object.getOwnPropertyDescriptor(M,k):G,X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(A,M,k,G);else for(var oe=A.length-1;oe>=0;oe--)(X=A[oe])&&(H=(K<3?X(H):K>3?X(M,k,H):X(M,k))||H);return K>3&&H&&Object.defineProperty(M,k,H),H}a(s,"__decorate");function o(A,M){return function(k,G){M(k,G,A)}}a(o,"__param");function i(A,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(A,M)}a(i,"__metadata");function e(A,M,k,G){function K(H){return H instanceof k?H:new k(function(X){X(H)})}return a(K,"adopt"),new(k||(k=Promise))(function(H,X){function oe(he){try{re(G.next(he))}catch(Pe){X(Pe)}}a(oe,"fulfilled");function le(he){try{re(G.throw(he))}catch(Pe){X(Pe)}}a(le,"rejected");function re(he){he.done?H(he.value):K(he.value).then(oe,le)}a(re,"step"),re((G=G.apply(A,M||[])).next())})}a(e,"__awaiter");function t(A,M){var k={label:0,sent:function(){if(H[0]&1)throw H[1];return H[1]},trys:[],ops:[]},G,K,H,X;return X={next:oe(0),throw:oe(1),return:oe(2)},typeof Symbol=="function"&&(X[Symbol.iterator]=function(){return this}),X;function oe(re){return function(he){return le([re,he])}}function le(re){if(G)throw new TypeError("Generator is already executing.");for(;k;)try{if(G=1,K&&(H=re[0]&2?K.return:re[0]?K.throw||((H=K.return)&&H.call(K),0):K.next)&&!(H=H.call(K,re[1])).done)return H;switch(K=0,H&&(re=[re[0]&2,H.value]),re[0]){case 0:case 1:H=re;break;case 4:return k.label++,{value:re[1],done:!1};case 5:k.label++,K=re[1],re=[0];continue;case 7:re=k.ops.pop(),k.trys.pop();continue;default:if(H=k.trys,!(H=H.length>0&&H[H.length-1])&&(re[0]===6||re[0]===2)){k=0;continue}if(re[0]===3&&(!H||re[1]>H[0]&&re[1]<H[3])){k.label=re[1];break}if(re[0]===6&&k.label<H[1]){k.label=H[1],H=re;break}if(H&&k.label<H[2]){k.label=H[2],k.ops.push(re);break}H[2]&&k.ops.pop(),k.trys.pop();continue}re=M.call(A,k)}catch(he){re=[6,he],K=0}finally{G=H=0}if(re[0]&5)throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}}a(t,"__generator");function n(A,M,k,G){G===void 0&&(G=k),A[G]=M[k]}a(n,"__createBinding");function r(A,M){for(var k in A)k!=="default"&&!M.hasOwnProperty(k)&&(M[k]=A[k])}a(r,"__exportStar");function c(A){var M=typeof Symbol=="function"&&Symbol.iterator,k=M&&A[M],G=0;if(k)return k.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&G>=A.length&&(A=void 0),{value:A&&A[G++],done:!A}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}a(c,"__values");function f(A,M){var k=typeof Symbol=="function"&&A[Symbol.iterator];if(!k)return A;var G=k.call(A),K,H=[],X;try{for(;(M===void 0||M-- >0)&&!(K=G.next()).done;)H.push(K.value)}catch(oe){X={error:oe}}finally{try{K&&!K.done&&(k=G.return)&&k.call(G)}finally{if(X)throw X.error}}return H}a(f,"__read");function S(){for(var A=[],M=0;M<arguments.length;M++)A=A.concat(f(arguments[M]));return A}a(S,"__spread");function l(){for(var A=0,M=0,k=arguments.length;M<k;M++)A+=arguments[M].length;for(var G=Array(A),K=0,M=0;M<k;M++)for(var H=arguments[M],X=0,oe=H.length;X<oe;X++,K++)G[K]=H[X];return G}a(l,"__spreadArrays");function y(A){return this instanceof y?(this.v=A,this):new y(A)}a(y,"__await");function T(A,M,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=k.apply(A,M||[]),K,H=[];return K={},X("next"),X("throw"),X("return"),K[Symbol.asyncIterator]=function(){return this},K;function X(pe){G[pe]&&(K[pe]=function(Me){return new Promise(function(We,Ae){H.push([pe,Me,We,Ae])>1||oe(pe,Me)})})}function oe(pe,Me){try{le(G[pe](Me))}catch(We){Pe(H[0][3],We)}}function le(pe){pe.value instanceof y?Promise.resolve(pe.value.v).then(re,he):Pe(H[0][2],pe)}function re(pe){oe("next",pe)}function he(pe){oe("throw",pe)}function Pe(pe,Me){pe(Me),H.shift(),H.length&&oe(H[0][0],H[0][1])}}a(T,"__asyncGenerator");function O(A){var M,k;return M={},G("next"),G("throw",function(K){throw K}),G("return"),M[Symbol.iterator]=function(){return this},M;function G(K,H){M[K]=A[K]?function(X){return(k=!k)?{value:y(A[K](X)),done:K==="return"}:H?H(X):X}:H}}a(O,"__asyncDelegator");function R(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=A[Symbol.asyncIterator],k;return M?M.call(A):(A=typeof c=="function"?c(A):A[Symbol.iterator](),k={},G("next"),G("throw"),G("return"),k[Symbol.asyncIterator]=function(){return this},k);function G(H){k[H]=A[H]&&function(X){return new Promise(function(oe,le){X=A[H](X),K(oe,le,X.done,X.value)})}}function K(H,X,oe,le){Promise.resolve(le).then(function(re){H({value:re,done:oe})},X)}}a(R,"__asyncValues");function F(A,M){return Object.defineProperty?Object.defineProperty(A,"raw",{value:M}):A.raw=M,A}a(F,"__makeTemplateObject");function U(A){if(A&&A.__esModule)return A;var M={};if(A!=null)for(var k in A)Object.hasOwnProperty.call(A,k)&&(M[k]=A[k]);return M.default=A,M}a(U,"__importStar");function _(A){return A&&A.__esModule?A:{default:A}}a(_,"__importDefault");function P(A,M){if(!M.has(A))throw new TypeError("attempted to get private field on non-instance");return M.get(A)}a(P,"__classPrivateFieldGet");function L(A,M,k){if(!M.has(A))throw new TypeError("attempted to set private field on non-instance");return M.set(A,k),k}a(L,"__classPrivateFieldSet")},"+j7y":function(W,d,h){"use strict";var g=h("YXGX"),p=h("ifKl"),u=g.a?function(m){return g.a.get(m)}:p.a;d.a=u},"/AJg":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.convertServerSideNetworkAdaptionEnumToSignaled=d.convertServerSideNetworkAdaptionEnumFromSignaled=d.serverSideNetworkAdaptionIsNoneOrDefault=d.ServerSideNetworkAdaption=void 0;const g=h("XCDq");var p;(function(o){o[o.Default=0]="Default",o[o.None=1]="None",o[o.BandwidthProbing=2]="BandwidthProbing",o[o.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(p=d.ServerSideNetworkAdaption||(d.ServerSideNetworkAdaption={})),d.default=p;function u(o){return o===p.None||o===p.Default}a(u,"serverSideNetworkAdaptionIsNoneOrDefault"),d.serverSideNetworkAdaptionIsNoneOrDefault=u;function m(o){switch(o){case g.SdkServerSideNetworkAdaption.DEFAULT:return p.Default;case g.SdkServerSideNetworkAdaption.NONE:return p.None;case g.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return p.BandwidthProbing;case g.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return p.BandwidthProbingAndRemoteVideoQualityAdaption}}a(m,"convertServerSideNetworkAdaptionEnumFromSignaled"),d.convertServerSideNetworkAdaptionEnumFromSignaled=m;function s(o){switch(o){case p.Default:return g.SdkServerSideNetworkAdaption.DEFAULT;case p.None:return g.SdkServerSideNetworkAdaption.NONE;case p.BandwidthProbing:return g.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case p.BandwidthProbingAndRemoteVideoQualityAdaption:return g.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}a(s,"convertServerSideNetworkAdaptionEnumToSignaled"),d.convertServerSideNetworkAdaptionEnumToSignaled=s},"/N6y":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");d.default=g},"/U1e":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("wR/T")),u=g(h("dWQL")),m=h("R4Nl"),s=g(h("v9PG")),o=g(h("a16/")),i=g(h("iNgN"));let e=a(class{constructor(n,r){var c,f;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new p.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new s.default,n){n=m.toLowerCasePropertyNames(n),n.meeting&&(n=n.meeting),this.meetingId=n.meetingid,this.externalMeetingId=n.externalmeetingid,this.urls=new i.default,this.urls.audioHostURL=n.mediaplacement.audiohosturl,this.urls.signalingURL=n.mediaplacement.signalingurl,this.urls.turnControlURL=n.mediaplacement.turncontrolurl,n.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=n.mediaplacement.eventingestionurl);const S=a((l,y)=>{switch(l){case"None":return u.default.VideoDisabled;case"HD":return u.default.VideoResolutionHD;case"FHD":return u.default.VideoResolutionFHD;case"UHD":return u.default.VideoResolutionUHD;default:return y}},"parseVideoResolution");if(((c=n.meetingfeatures)===null||c===void 0?void 0:c.video)!==void 0||((f=n.meetingfeatures)===null||f===void 0?void 0:f.content)!==void 0){const l=n.meetingfeatures.video===void 0?"HD":n.meetingfeatures.video.maxresolution,y=n.meetingfeatures.content===void 0?"FHD":n.meetingfeatures.content.maxresolution;this.meetingFeatures=new s.default(S(l,u.default.VideoResolutionHD),S(y,u.default.VideoResolutionFHD))}}r&&(r=m.toLowerCasePropertyNames(r),r.attendee&&(r=r.attendee),this.credentials=new o.default,this.credentials.attendeeId=r.attendeeid,this.credentials.externalUserId=r.externaluserid,this.credentials.joinToken=r.jointoken)}},"MeetingSessionConfiguration");d.default=e},"/sFY":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{equals(u){return u!==void 0&&this.mid===u.mid&&this.attendeeId===u.attendeeId&&this.streamId===u.streamId&&this.groupId===u.groupId&&this.priority===u.priority&&this.targetBitrateKbps===u.targetBitrateKbps&&this.qualityAdaptationPreference===u.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");d.default=g},"0JTw":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("HbHZ"));let u=a(class{isConnectionTerminated(){switch(this.type){case p.default.WebSocketFailed:case p.default.WebSocketError:case p.default.WebSocketClosing:case p.default.WebSocketClosed:return!0;default:return!1}}constructor(s,o,i,e,t){this.client=s,this.type=o,this.message=i,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");d.default=u},"0Kz9":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(u,m,s,o){function i(e){return e instanceof s?e:new s(function(t){t(e)})}return a(i,"adopt"),new(s||(s=Promise))(function(e,t){function n(f){try{c(o.next(f))}catch(S){t(S)}}a(n,"fulfilled");function r(f){try{c(o.throw(f))}catch(S){t(S)}}a(r,"rejected");function c(f){f.done?e(f.value):i(f.value).then(n,r)}a(c,"step"),c((o=o.apply(u,m||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});let p=a(class{mute(m){return g(this,void 0,void 0,function*(){})}stop(){var m;return g(this,void 0,void 0,function*(){(m=this.node)===null||m===void 0||m.disconnect()})}intrinsicDevice(){return g(this,void 0,void 0,function*(){return this.inner})}createAudioNode(m){var s;return g(this,void 0,void 0,function*(){return(s=this.node)===null||s===void 0||s.disconnect(),this.node=yield this.createSingleAudioNode(m),{start:this.node,end:this.node}})}constructor(m){this.inner=m}},"SingleNodeAudioTransformDevice");d.default=p},"0LIx":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const p=h("XCDq"),u=g(h("MpTp")),m=g(h("OEM7"));let s=a(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(i){return i>0&&i<1e3?1:Math.trunc(i/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const i=[];return this.currentIndex.sources.forEach(e=>{const t=new m.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,i.push(t)}),i}integrateUplinkPolicyDecision(i){if(i&&i.length){const e=i[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(i){if(this.currentIndex=i,!i)return;const e=new Map;let t=!1;for(const n of i.sources){if(!e.has(n.attendeeId)){e.set(n.attendeeId,n.groupId);continue}const r=e.get(n.attendeeId);r<n.groupId&&(this.logger.warn(`Old group ID ${r} found for attendee ID ${n.attendeeId}, replacing with newer group ID ${n.groupId}`),e.set(n.attendeeId,n.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(n=>e.get(n.attendeeId)===n.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}integrateSubscribeAckFrame(i){this.currentSubscribeAck=i,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,i.allocations&&i.allocations!==void 0&&i.allocations.length>0&&(this.sendVideoStreamId=i.allocations[0].streamId)}integrateBitratesFrame(i){if(this.currentIndex)for(const e of i.bitrates){const t=this.currentIndex.sources.find(n=>n.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const i=new u.default;if(this.currentIndex)for(const e of this.currentIndex.sources)i.add(e.streamId);return i}allVideoSendingSourcesExcludingSelf(i){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const n of this.currentIndex.sources){const{attendeeId:r,externalUserId:c,mediaType:f}=n;r!==i&&f===p.SdkStreamMediaType.VIDEO&&(t.has(r)||(e.push({attendee:{attendeeId:r,externalUserId:c}}),t.add(r)))}return e}streamSelectionUnderBandwidthConstraint(i,e,t,n){const r=new Set;if(this.currentIndex)for(const y of this.currentIndex.sources)y.attendeeId===i||y.mediaType!==p.SdkStreamMediaType.VIDEO||!e.has(y.attendeeId)&&!t.has(y.attendeeId)&&r.add(y.attendeeId);const c=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i),f=new Map;let S=0;c.forEach((y,T)=>{f.set(T,y[0]),S+=y[0].maxBitrateKbps}),S=this.trySelectHighBitrateForAttendees(c,e,S,n,f),this.trySelectHighBitrateForAttendees(c,r,S,n,f);const l=new u.default;for(const y of f.values())l.add(y.streamId);return l}highestQualityStreamFromEachGroupExcludingSelf(i){const e=new u.default;if(this.currentIndex){const t=new Map;for(const n of this.currentIndex.sources)n.attendeeId===i||n.mediaType!==p.SdkStreamMediaType.VIDEO||(!t.has(n.groupId)||n.maxBitrateKbps>t.get(n.groupId).maxBitrateKbps)&&t.set(n.groupId,n);for(const n of t.values())e.add(n.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(i){return this.highestQualityStreamFromEachGroupExcludingSelf(i).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${i}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${i}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(i){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(i);return e||(this.logger.info(`stream ID ${i} does not correspond to a known attendee`),"")}attendeeIdForGroupId(i){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(i);return e||(this.logger.info(`group ID ${i} does not correspond to a known attendee`),"")}groupIdForStreamId(i){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===i)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===i)return e.groupId}}}StreamIdsInSameGroup(i,e){return this.groupIdForStreamId(i)===this.groupIdForStreamId(e)}streamIdForTrack(i){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(i)}streamIdForSSRC(i){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(i)}overrideStreamIdMappings(i,e){if(this.subscribeTrackToStreamMap){for(const[t,n]of this.subscribeTrackToStreamMap.entries())if(i===n){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,n]of this.subscribeSsrcToStreamMap.entries())if(i===n){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(i){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(i)}streamsPausedAtSource(){const i=new u.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)i.add(e);return i}sendVideoStreamIdFromRid(i){return this.sendVideoStreamId}buildTrackToStreamMap(i){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(i){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(i){const e=new Map;for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(i){const e=new Map;if(i)for(const t of i.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(i){const e=new Map;for(const t of i.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(i){const e=new Map;if(i)for(const t of i.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(i,e,t,n,r){for(const c of e){if(t>=n)break;if(i.has(c)){const f=i.get(c);for(const S of f.reverse())if(t-r.get(c).maxBitrateKbps+S.maxBitrateKbps<n){t=t-r.get(c).maxBitrateKbps+S.maxBitrateKbps,r.set(c,S);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===i||t.mediaType!==p.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,n)=>{t.sort((r,c)=>r.maxBitrateKbps>c.maxBitrateKbps?1:r.maxBitrateKbps<c.maxBitrateKbps?-1:0)}),e}constructor(i){this.logger=i,this.currentIndex=null,this.indexForSubscribe=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new m.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");d.default=s},"0NFC":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(c,f,S,l){function y(T){return T instanceof S?T:new S(function(O){O(T)})}return a(y,"adopt"),new(S||(S=Promise))(function(T,O){function R(_){try{U(l.next(_))}catch(P){O(P)}}a(R,"fulfilled");function F(_){try{U(l.throw(_))}catch(P){O(P)}}a(F,"rejected");function U(_){_.done?T(_.value):y(_.value).then(R,F)}a(U,"step"),U((l=l.apply(c,f||[])).next())})},p=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("dWQL")),m=p(h("/U1e")),s=p(h("a16/")),o=p(h("bTau")),i=p(h("6/h7")),e=h("KyYT"),t=p(h("NWIo")),n=p(h("34ho"));let r=a(class{static createContentShareMeetingSessionConfigure(f){const S=new m.default;return S.meetingId=f.meetingId,S.externalMeetingId=f.externalMeetingId,S.urls=f.urls,S.disablePeriodicKeyframeRequestOnContentSender=f.disablePeriodicKeyframeRequestOnContentSender,S.credentials=new s.default,S.credentials.attendeeId=f.credentials.attendeeId+n.default.Modality,S.credentials.externalUserId=f.credentials.externalUserId,S.credentials.joinToken=f.credentials.joinToken+n.default.Modality,S.meetingFeatures=f.meetingFeatures.clone(),S}setContentAudioProfile(f){this.contentAudioVideo.setAudioProfile(f)}enableSimulcastForContentShare(f,S){f?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new t.default(this.contentAudioVideo.logger,S)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(f){f?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(f){return g(this,void 0,void 0,function*(){if(f){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===u.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=f;for(let S=0;S<this.mediaStreamBroker.mediaStream.getTracks().length;S++)this.mediaStreamBroker.mediaStream.getTracks()[S].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(f,S){return g(this,void 0,void 0,function*(){const l=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(f,S);return yield this.startContentShare(l),l})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(f=>{e.Maybe.of(f.contentShareDidPause).map(S=>S.call(f))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(f=>{e.Maybe.of(f.contentShareDidUnpause).map(S=>S.call(f))})}setContentShareVideoCodecPreferences(f){this.contentAudioVideo.setVideoCodecSendPreferences(f)}destroy(){return g(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(f){this.observerQueue.add(f)}removeContentShareObserver(f){this.observerQueue.delete(f)}forEachContentShareObserver(f){for(const S of this.observerQueue)i.default.nextTick(()=>{this.observerQueue.has(S)&&f(S)})}audioVideoDidStart(){var f;((f=this.mediaStreamBroker.mediaStream)===null||f===void 0?void 0:f.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(f){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidStop).map(l=>l.call(S))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((f,S,l,y)=>{const T=new o.default(f).hasModality(o.default.MODALITY_CONTENT),O=new o.default(f).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!T||!O||!S||this.contentShareTile)return;const R=this.mediaStreamBroker.mediaStream;if(R!=null&&R.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const F=R.getVideoTracks()[0];let U,_;if(F.getSettings){const P=F.getSettings();U=P.width,_=P.height}else{const P=F.getCapabilities();U=P.width,_=P.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,R,U,_,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(F=>{e.Maybe.of(F.contentShareDidStart).map(U=>U.call(F))})})}constructor(f,S,l){this.mediaStreamBroker=f,this.contentAudioVideo=S,this.attendeeAudioVideo=l,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");d.default=r},"0OOd":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.isVideoTransformDevice=void 0;function g(p){return!!p&&typeof p=="object"&&"transformStream"in p&&"stop"in p&&"intrinsicDevice"in p}a(g,"isVideoTransformDevice"),d.isVideoTransformDevice=g},"0YRd":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.SDPCandidateType=void 0;var g;(function(p){p.Host="host",p.ServerReflexive="srflx",p.PeerReflexive="prflx",p.Relay="relay"})(g=d.SDPCandidateType||(d.SDPCandidateType={})),d.default=g},"0jNb":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(e,t,n,r){function c(f){return f instanceof n?f:new n(function(S){S(f)})}return a(c,"adopt"),new(n||(n=Promise))(function(f,S){function l(O){try{T(r.next(O))}catch(R){S(R)}}a(l,"fulfilled");function y(O){try{T(r.throw(O))}catch(R){S(R)}}a(y,"rejected");function T(O){O.done?f(O.value):c(O.value).then(l,y)}a(T,"step"),T((r=r.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("CtrA")),m=p(h("hEYi")),s=h("f2XL"),o=p(h("aVV0"));let i=a(class jl extends o.default{run(){return g(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===m.default.ReceivedSignalFrame&&t.message.type===s.SdkSignalFrame.Type.DATA_MESSAGE)for(const n of t.message.dataMessage.messages){const r=new u.default(n.ingestTimeNs/1e6,n.topic,n.data,n.senderAttendeeId,n.senderExternalUserId,n.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(r)}}validateDataMessage(t,n,r){if(!jl.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(n.length>jl.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(r&&r<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(n,r,c)=>{if(this.context.signalingClient.ready()){let f;r instanceof Uint8Array?f=r:typeof r=="string"?f=new TextEncoder().encode(r):f=new TextEncoder().encode(JSON.stringify(r)),this.validateDataMessage(n,f,c);const S=s.SdkDataMessagePayload.create();S.topic=n,S.lifetimeMs=c,S.data=f;const l=s.SdkDataMessageFrame.create();l.messages=[S],this.context.signalingClient.sendDataMessage(l)}else this.context.logger.error("Signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");d.default=i,i.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),i.DATA_SIZE=2048},"1+fu":function(W,d,h){"use strict";var g=h("uRGJ"),p=h("LV2V"),u=h("FLqD"),m=h("IzLi");function s(n,r,c,f,S,l){return Object(m.a)(n)&&Object(m.a)(r)&&(l.set(r,n),Object(u.a)(n,r,void 0,s,l),l.delete(r)),n}a(s,"customDefaultsMerge");var o=s,i=h("dhcM"),e=Object(p.a)(function(n){return n.push(void 0,o),Object(g.a)(i.a,void 0,n)}),t=d.a=e},"10yS":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.VideoLogEvent=void 0;var g;(function(p){p[p.InputAttached=0]="InputAttached",p[p.SendingFailed=1]="SendingFailed",p[p.SendingSuccess=2]="SendingSuccess"})(g=d.VideoLogEvent||(d.VideoLogEvent={})),d.default=g},"18tZ":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g;(function(p){p.Connect="connect"})(g||(g={})),d.default=g},"1AO7":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(m,s,o,i){function e(t){return t instanceof o?t:new o(function(n){n(t)})}return a(e,"adopt"),new(o||(o=Promise))(function(t,n){function r(S){try{f(i.next(S))}catch(l){n(l)}}a(r,"fulfilled");function c(S){try{f(i.throw(S))}catch(l){n(l)}}a(c,"rejected");function f(S){S.done?t(S.value):e(S.value).then(r,c)}a(f,"step"),f((i=i.apply(m,s||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.VideoFxCanvasOpsManager=void 0;const p=h("Lxy7");let u=a(class{getInferenceInputData(s){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(s,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(s){return g(this,void 0,void 0,function*(){if(this.streamParameters=s,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const o=document.createElement("canvas");o.width=this.streamParameters.width,o.height=this.streamParameters.height,o.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=o}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(s){return g(this,void 0,void 0,function*(){const o=s.backgroundReplacement.backgroundImageURL,i=s.backgroundReplacement.defaultColor;if(o)try{const e=yield this.loadImage(o);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(i)})}resizeAndSetReplacementImage(s){const o=document.createElement("canvas"),i=o.getContext("2d");o.width=this.streamParameters.width,o.height=this.streamParameters.height,i.drawImage(s,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=o}resizeAndSetReplacementColor(s){const o=document.createElement("canvas"),i=o.getContext("2d");o.width=this.streamParameters.width,o.height=this.streamParameters.height,i.fillStyle=s,i.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=o}loadImage(s){return g(this,void 0,void 0,function*(){const i=yield(yield fetch(s).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(i),new Promise((t,n)=>{e.onload=()=>{t(e)},e.onerror=r=>{n(r)}})})}constructor(s,o){this.streamParameters=s,this.outputCanvas=o,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");d.VideoFxCanvasOpsManager=u},"1Cbm":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("8wPz"));let m=a(class{needUpdate(o){return this.activeSpeakers?this.speakerScores[o]===0&&this.activeSpeakers.includes(o)||this.speakerScores[o]>0&&!this.activeSpeakers.includes(o):!0}updateActiveSpeakers(o,i,e){if(!this.needUpdate(e))return;const t=[],n=Object.keys(this.speakerScores);for(let l=0;l<n.length;l++){const y=n[l];t.push({attendeeId:y,activeScore:this.speakerScores[y]})}const r=t.sort((l,y)=>y.activeScore-l.activeScore).filter(function(l){return l.activeScore>0}).map(function(l){return l.attendeeId});this.activeSpeakers=r,i(r);const f=r.length>0&&r[0]===this.selfAttendeeId&&o.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==f&&(this.hasBandwidthPriority=f,this.hasBandwidthPriorityCallback(f))}updateScore(o,i,e,t,n){const r=o.calculateScore(e,t,n);this.speakerScores[e]!==r&&(this.speakerScores[e]=r,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(o,i,e))}subscribe(o,i,e,t){const n=a((c,f)=>{if(!f){this.speakerScores[c]=0,this.mostRecentUpdateTimestamp[c]=Date.now(),this.updateActiveSpeakers(o,i,c);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(c,(S,l,y,T)=>{this.mostRecentUpdateTimestamp[S]=Date.now(),y!==null&&(this.speakerMuteState[S]=y),this.updateScore(o,i,S,l,y)})},"handler");this.detectorCallbackToHandler.set(i,n);const r=new u.default(this.updateIntervalMs);if(r.start(()=>{for(const c in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[c]>this.waitIntervalMs&&this.updateScore(o,i,c,0,this.speakerMuteState[c])}),this.detectorCallbackToActivityTimer.set(i,r),e&&t){const c=new u.default(t);c.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(i,c)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(n)}unsubscribe(o){const i=this.detectorCallbackToHandler.get(o);this.detectorCallbackToHandler.delete(o),i&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i);const e=this.detectorCallbackToActivityTimer.get(o);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(o));const t=this.detectorCallbackToScoresTimer.get(o);t&&(t.stop(),this.detectorCallbackToHandler.delete(o))}destroy(){return g(this,void 0,void 0,function*(){for(const o of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(o);for(const o of this.detectorCallbackToActivityTimer.values())o.stop();for(const o of this.detectorCallbackToScoresTimer.values())o.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(o,i,e,t=1e3,n=200){this.realtimeController=o,this.selfAttendeeId=i,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=n,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");d.default=m},"1GR6":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("oHvd"));let u=a(class extends p.default{isSendingAudioUnhealthy(){const s=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),o=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return s&&o}health(){if(this.isSendingAudioUnhealthy()){const s=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!s?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(s,o,i){super(o,i,"Sending Audio Health"),this.logger=s,this.sendingAudioFailureSamplesToConsider=o.sendingAudioFailureSamplesToConsider>0?o.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=o.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=o.maximumTimesToWarn,this.coolDownTimeMs=o.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");d.default=u},"1J7j":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(r,c,f,S){function l(y){return y instanceof f?y:new f(function(T){T(y)})}return a(l,"adopt"),new(f||(f=Promise))(function(y,T){function O(U){try{F(S.next(U))}catch(_){T(_)}}a(O,"fulfilled");function R(U){try{F(S.throw(U))}catch(_){T(_)}}a(R,"rejected");function F(U){U.done?y(U.value):l(U.value).then(O,R)}a(F,"step"),F((S=S.apply(r,c||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("v8aG")),m=p(h("bTau")),s=p(h("CLOt")),o=p(h("hEYi")),i=h("f2XL"),e=h("KyYT"),t=p(h("aVV0"));let n=a(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return g(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(c){if(c.type!==o.default.ReceivedSignalFrame||c.message.type!==i.SdkSignalFrame.Type.INDEX)return;const f=c.message.index;this.context.logger.info(`received new index ${JSON.stringify(f)}`),this.handleIndexFrame(f)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(c){if(!c)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=c;return}else this.pendingIndex=null;const f=this.context.audioVideoController.configuration.credentials.attendeeId;c.sources=c.sources.filter(R=>{const F=new m.default(R.attendeeId);return!(F.base()===f&&F.hasModality(m.default.MODALITY_CONTENT))});const{videoStreamIndex:S,videoDownlinkBandwidthPolicy:l,videoUplinkBandwidthPolicy:y}=this.context,T=S.allVideoSendingSourcesExcludingSelf(f);S.integrateIndexFrame(c),l.updateIndex(S),y.updateIndex(S),this.resubscribe(l,y),this.updateVideoAvailability(c),this.handleIndexVideosPausedAtSource(),c.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(c);const O=S.allVideoSendingSourcesExcludingSelf(f);this.areVideoSourcesEqual(T,O)||this.context.audioVideoController.forEachObserver(R=>{e.Maybe.of(R.remoteVideoSourcesDidChange).map(F=>F.bind(R)(O))})}areVideoSourcesEqual(c,f){if(c.length!==f.length)return!1;const S=a((T,O)=>T.attendee.attendeeId.localeCompare(O.attendee.attendeeId),"compare"),l=[...c].sort(S),y=[...f].sort(S);for(let T=0;T<l.length;T++)if(l[T].attendee.attendeeId!==y[T].attendee.attendeeId)return!1;return!0}resubscribe(c,f){const S=c.wantsResubscribe(),l=(this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX)&&f.wantsResubscribe(),y=S||l;if(this.logger.info(`should resubscribe: ${y} (downlink: ${S} uplink: ${l})`),!y)return;const T=c.chooseSubscriptions();this.context.videosToReceive=T.truncate(this.context.videoSubscriptionLimit),T.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=f.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${l} down=${S}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(c){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const f=new u.default;f.remoteVideoAvailable=!this.context.videosToReceive.empty(),f.canStartLocalVideo=!c.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(f))&&(this.context.lastKnownVideoAvailability=f.clone(),this.context.audioVideoController.forEachObserver(S=>{e.Maybe.of(S.videoAvailabilityDidChange).map(l=>l.bind(S)(f.clone()))}))}handleSupportedVideoReceiveCodecIntersection(c){if(this.context.videoSendCodecPreferences===void 0)return;const f=[];let S=!1;for(const l of this.context.videoSendCodecPreferences)for(const y of c.supportedReceiveCodecIntersection)if(l.equals(s.default.fromSignaled(y))){f.push(l);break}if(f.length>0){const l=f.find(y=>this.context.prioritizedSendVideoCodecCapabilities.some(T=>y.equals(T)));this.context.currentVideoSendCodec!==void 0&&(l===void 0||!this.context.currentVideoSendCodec.equals(l))&&(S=!0),this.context.meetingSupportedVideoSendCodecPreferences=f}else this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0;this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),S&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const c=this.context.videoStreamIndex.streamsPausedAtSource();for(const f of this.context.videoTileController.getAllVideoTiles()){const S=f.state();c.contain(S.streamId)?f.markPoorConnection()&&this.logger.info(`marks the tile ${S.tileId} as having a poor connection`):f.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${S.tileId} as having a poor connection`)}}constructor(c){super(c.logger),this.context=c,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");d.default=n},"1ZHK":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{addObserver(u){this.observers.add(u)}removeObserver(u){this.observers.delete(u)}onFallback(u,m){var s;for(const o of this.observers)(s=o.voiceFocusFellBackToInnerStream)===null||s===void 0||s.call(o,u,m)}onCPUWarning(){var u;for(const m of this.observers)(u=m.voiceFocusInsufficientResources)===null||u===void 0||u.call(m)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");d.default=g},"1i73":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("MpTp"));let u=a(class{reset(){}updateIndex(s){}updateMetrics(s){}wantsResubscribe(){return!1}chooseSubscriptions(){return new p.default}},"NoVideoDownlinkBandwidthPolicy");d.default=u},"1uai":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,d.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let g=a(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=d.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=d.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.prioritizedSendVideoCodecCapabilities=[],this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null}},"AudioVideoControllerState");d.default=g},"25+x":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("Sa54"));let m=a(class Du{getInnerDevice(){return this.device}mute(i){return g(this,void 0,void 0,function*(){this.node&&(i?yield this.node.disable():yield this.node.enable())})}stop(){return g(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(i){return g(this,void 0,void 0,function*(){return this.device===i&&!s(i)?this:new Du(i,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return g(this,void 0,void 0,function*(){if(this.failed)return this.device;const i=this.nodeOptions.es,e={echoCancellation:!i,googEchoCancellation:!i,googEchoCancellation2:!i,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(i){var e,t;return g(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===i)return{start:this.node,end:this.node};const r=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(i,r),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(i,{channelCount:1,channelCountMode:"explicit"});for(const S of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(S);this.createMixSourceNode()}const c=this.node,f=this.node;return{start:c,end:f}}catch(c){throw this.failed=!0,this.delegate.onFallback(this,c),c}})}observeMeetingAudio(i){return g(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.addAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(i){return g(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.removeAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}addFarEndStream(i){return g(this,void 0,void 0,function*(){!this.nodeOptions.es||!i||this.farEndStreamToAudioSourceNode.has(i)||(this.node?this.assignFarEndStreamToAudioSourceNode(i):this.farEndStreamToAudioSourceNode.set(i,null))})}removeFarendStream(i){var e;return g(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(i))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(i)})}meetingAudioStreamBecameActive(i){return g(this,void 0,void 0,function*(){this.addFarEndStream(i)})}meetingAudioStreamBecameInactive(i){return g(this,void 0,void 0,function*(){this.removeFarendStream(i)})}assignFarEndStreamToAudioSourceNode(i){const e=this.node.context.createMediaStreamSource(i);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(i,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(i,e,t,n,r=!1,c=void 0,f=new u.default,S=new Map,l=void 0,y=void 0){this.device=i,this.voiceFocus=e,this.delegate=t,this.nodeOptions=n,this.failed=r,this.node=c,this.browserBehavior=f,this.farEndStreamToAudioSourceNode=S,this.mixDestNode=l,this.mixSourceNode=y}},"VoiceFocusTransformDevice");function s(o){return o==="default"?!0:!o||typeof o!="object"?!1:"deviceId"in o&&o.deviceId==="default"||"id"in o&&o.id==="default"}a(s,"isDefaultDevice"),d.default=m},"2Bsk":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckContentShareConnectivityFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.Failed=1]="Failed",p[p.PermissionDenied=2]="PermissionDenied",p[p.TimedOut=3]="TimedOut",p[p.ConnectionFailed=4]="ConnectionFailed"})(g=d.CheckContentShareConnectivityFeedback||(d.CheckContentShareConnectivityFeedback={})),d.default=g},"2IS5":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d,"__esModule",{value:!0}),d.TranscriptEventConverter=void 0;const p=h("XCDq"),u=g(h("VPK4")),m=g(h("PbSJ")),s=g(h("HrOX")),o=g(h("QPT4")),i={[p.SdkTranscriptionStatus.Type.STARTED]:s.default.STARTED,[p.SdkTranscriptionStatus.Type.INTERRUPTED]:s.default.INTERRUPTED,[p.SdkTranscriptionStatus.Type.RESUMED]:s.default.RESUMED,[p.SdkTranscriptionStatus.Type.STOPPED]:s.default.STOPPED,[p.SdkTranscriptionStatus.Type.FAILED]:s.default.FAILED};let e=a(class{static from(n){let r;try{r=p.SdkTranscriptFrame.decode(n.data)}catch(f){throw new Error("Cannot decode transcript data message: "+f)}const c=[];for(const f of r.events)if(f.status){const S=i[f.status.type];if(!S)continue;const l=new m.default;l.type=S,l.eventTimeMs=f.status.eventTime,l.transcriptionRegion=f.status.transcriptionRegion,l.transcriptionConfiguration=f.status.transcriptionConfiguration,f.status.message&&(l.message=f.status.message),c.push(l)}else if(f.transcript){const S=new u.default;S.results=[];for(const l of f.transcript.results){const y={channelId:l.channelId,isPartial:l.isPartial,resultId:l.resultId,startTimeMs:l.startTime,endTimeMs:l.endTime,alternatives:[]};if(l.languageCode&&(y.languageCode=l.languageCode),l.languageIdentification&&l.languageIdentification.length>0){y.languageIdentification=[];for(const T of l.languageIdentification){const O={languageCode:T.languageCode,score:T.score};y.languageIdentification.push(O)}}for(const T of l.alternatives){const O={items:[],transcript:T.transcript};for(const R of T.items){const F={content:R.content,attendee:{attendeeId:R.speakerAttendeeId,externalUserId:R.speakerExternalUserId},startTimeMs:R.startTime,endTimeMs:R.endTime,type:null};switch(R.vocabularyFilterMatch&&(F.vocabularyFilterMatch=R.vocabularyFilterMatch),R.hasOwnProperty("stable")&&(F.stable=R.stable),R.hasOwnProperty("confidence")&&(F.confidence=R.confidence),R.type){case p.SdkTranscriptItem.Type.PRONUNCIATION:F.type=o.default.PRONUNCIATION;break;case p.SdkTranscriptItem.Type.PUNCTUATION:F.type=o.default.PUNCTUATION;break}O.items.push(F)}for(const R of T.entities){O.entities||(O.entities=[]);const F={category:R.category,confidence:R.confidence,content:R.content,startTimeMs:R.startTime,endTimeMs:R.endTime};R.type&&(F.type=R.type),O.entities.push(F)}y.alternatives.push(O)}S.results.push(y)}c.push(S)}return c}},"TranscriptEventConverter");d.TranscriptEventConverter=e},"2M37":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("my46"));let u=a(class _u{clone(){return new _u(this.videoMaxResolution,this.contentMaxResolution)}constructor(s=p.default.VideoResolutionHD,o=p.default.VideoResolutionFHD){this.videoMaxResolution=s,this.contentMaxResolution=o}},"MeetingFeatures");d.default=u},"2ZyS":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.RawSha256=void 0;var g=h("V7js"),p=function(){function u(){this.state=Int32Array.from(g.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return a(u,"RawSha2561"),u.prototype.update=function(m){if(this.finished)throw new Error("Attempted to update an already finished hash.");var s=0,o=m.byteLength;if(this.bytesHashed+=o,this.bytesHashed*8>g.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=m[s++],o--,this.bufferLength===g.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},u.prototype.digest=function(){if(!this.finished){var m=this.bytesHashed*8,s=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(s.setUint8(this.bufferLength++,128),o%g.BLOCK_SIZE>=g.BLOCK_SIZE-8){for(var i=this.bufferLength;i<g.BLOCK_SIZE;i++)s.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<g.BLOCK_SIZE-8;i++)s.setUint8(i,0);s.setUint32(g.BLOCK_SIZE-8,Math.floor(m/4294967296),!0),s.setUint32(g.BLOCK_SIZE-4,m),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(g.DIGEST_LENGTH),i=0;i<8;i++)e[i*4]=this.state[i]>>>24&255,e[i*4+1]=this.state[i]>>>16&255,e[i*4+2]=this.state[i]>>>8&255,e[i*4+3]=this.state[i]>>>0&255;return e},u.prototype.hashBuffer=function(){for(var m=this,s=m.buffer,o=m.state,i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],c=o[5],f=o[6],S=o[7],l=0;l<g.BLOCK_SIZE;l++){if(l<16)this.temp[l]=(s[l*4]&255)<<24|(s[l*4+1]&255)<<16|(s[l*4+2]&255)<<8|s[l*4+3]&255;else{var y=this.temp[l-2],T=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10;y=this.temp[l-15];var O=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;this.temp[l]=(T+this.temp[l-7]|0)+(O+this.temp[l-16]|0)}var R=(((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(r&c^~r&f)|0)+(S+(g.KEY[l]+this.temp[l]|0)|0)|0,F=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&e^i&t^e&t)|0;S=f,f=c,c=r,r=n+R|0,n=t,t=e,e=i,i=R+F|0}o[0]+=i,o[1]+=e,o[2]+=t,o[3]+=n,o[4]+=r,o[5]+=c,o[6]+=f,o[7]+=S},u}();d.RawSha256=p},"2ede":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.DeferredPromise=void 0;let g=a(class{getPromise(){return this.promise}resolvePromise(u){this.resolve(u)}resolveAndReplacePromise(u){this.resolve(u),this.promise=new Promise((m,s)=>{this.resolve=m,this.reject=s})}rejectPromise(u){this.reject(u)}rejectAndReplacePromise(u){this.reject(u),this.promise=new Promise((m,s)=>{this.resolve=m,this.reject=s})}constructor(){this.promise=new Promise((u,m)=>{this.resolve=u,this.reject=m})}},"DeferredPromise");d.DeferredPromise=g},"2nae":function(W,d,h){"use strict";var g=this&&this.__createBinding||(Object.create?function(bt,ee,ae,fe){fe===void 0&&(fe=ae),Object.defineProperty(bt,fe,{enumerable:!0,get:function(){return ee[ae]}})}:function(bt,ee,ae,fe){fe===void 0&&(fe=ae),bt[fe]=ee[ae]}),p=this&&this.__setModuleDefault||(Object.create?function(bt,ee){Object.defineProperty(bt,"default",{enumerable:!0,value:ee})}:function(bt,ee){bt.default=ee}),u=this&&this.__importStar||function(bt){if(bt&&bt.__esModule)return bt;var ee={};if(bt!=null)for(var ae in bt)ae!=="default"&&Object.prototype.hasOwnProperty.call(bt,ae)&&g(ee,bt,ae);return p(ee,bt),ee},m=this&&this.__awaiter||function(bt,ee,ae,fe){function Ue(we){return we instanceof ae?we:new ae(function(Ce){Ce(we)})}return a(Ue,"adopt"),new(ae||(ae=Promise))(function(we,Ce){function De(ct){try{gt(fe.next(ct))}catch(_t){Ce(_t)}}a(De,"fulfilled");function pt(ct){try{gt(fe.throw(ct))}catch(_t){Ce(_t)}}a(pt,"rejected");function gt(ct){ct.done?we(ct.value):Ue(ct.value).then(De,pt)}a(gt,"step"),gt((fe=fe.apply(bt,ee||[])).next())})},s=this&&this.__importDefault||function(bt){return bt&&bt.__esModule?bt:{default:bt}};Object.defineProperty(d,"__esModule",{value:!0});const o=s(h("1Cbm")),i=s(h("WHnE")),e=s(h("SO8M")),t=s(h("Sa54")),n=s(h("RfPO")),r=s(h("8dVZ")),c=s(h("dWQL")),f=s(h("6Bxv")),S=s(h("lUhs")),l=s(h("v8aG")),y=s(h("bTau")),T=s(h("ML5K")),O=s(h("gTDO")),R=s(h("6/h7")),F=s(h("9ETa")),U=s(h("JHsX")),_=s(h("I0Bj")),P=s(h("87Nr")),L=s(h("jP1N")),A=u(h("DUgj")),M=s(h("hEYi")),k=s(h("/sFY")),G=h("f2XL"),K=s(h("R9j3")),H=s(h("5ViG")),X=s(h("yMiq")),oe=s(h("teem")),le=s(h("Fyq9")),re=s(h("7W6Z")),he=s(h("N9oo")),Pe=s(h("xJ9D")),pe=s(h("FCN7")),Me=s(h("curu")),We=s(h("3Ft5")),Ae=s(h("mjQB")),lt=s(h("mv1L")),Ne=s(h("LNXf")),Xe=s(h("LhvI")),je=s(h("WRer")),Te=s(h("5z6C")),At=s(h("1J7j")),sn=s(h("0jNb")),Dt=s(h("8tla")),tn=s(h("ohOv")),Yt=s(h("CRwe")),Tn=s(h("ZPwG")),Xt=s(h("L+i+")),Cn=s(h("yqyw")),Dn=s(h("IBi3")),cn=s(h("riOr")),Mn=s(h("OND3")),_n=s(h("NUAg")),nt=h("KyYT"),$t=s(h("XJrD")),It=s(h("nYR4")),Fe=s(h("5mR7")),Rt=h("P7D+"),Qe=s(h("Zkgh")),Qt=s(h("ldli")),Nn=s(h("nq15")),Zt=s(h("+D+n")),mn=s(h("rcF0")),ni=s(h("LUct")),fi=s(h("hhlX")),di=s(h("P3Bx")),Wn=s(h("rEUf"));let Rn=a(class Xd{destroy(){return m(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new o.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(ee){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(ee):null}setAudioProfile(ee){this._audioProfile=ee}addObserver(ee){this.logger.info("adding meeting observer"),this.observerQueue.add(ee)}removeObserver(ee){this.logger.info("removing meeting observer"),this.observerQueue.delete(ee)}forEachObserver(ee){for(const ae of this.observerQueue)R.default.nextTick(()=>{this.observerQueue.has(ae)&&ee(ae)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new Wn.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new L.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const ee=a(()=>m(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(ae){ae.type===M.default.WebSocketClosed&&ee()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(ee=>{this.logger.error(`Signaling task pre-start failed: ${ee}`),this.signalingTask=void 0})}start(ee){this.startReturningPromise(ee).then(()=>{this.logger.info("start completed")}).catch(ae=>{this.logger.error(`start failed: ${ae}`)})}startReturningPromise(ee){return(ee==null?void 0:ee.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((ae,fe)=>{this.sessionStateController.perform(U.default.Connect,()=>{this.actionConnect(!1).then(ae).catch(fe)})}))}connectWithPromises(ee){const ae=this.meetingSessionContext,fe=a((li,Gn)=>new Xt.default(this.logger,Gn,li),"timeout");this.monitorTask=new We.default(ae,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const Ue=this.monitorTask.once(),we=new Xe.default(ae).once();this.receiveIndexTask=new At.default(ae),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const Ce=new Dt.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new Me.default(ae),new sn.default(ae),new Pe.default(ae),this.receiveIndexTask]).once(),De=new le.default(ae).once(Ce),pt=new H.default(ae).once(De,we),gt=new re.default(ae).once(pt),ct=new tn.default(ae).once(gt),_t=new he.default(ae).once(ct),zn=new Tn.default(ae).once(_t),vn=new je.default(ae).once(zn);return new Dt.default(this.logger,this.wrapTaskName("AudioVideoStart"),[Ue,fe(this.configuration.connectionTimeoutMs,new Dt.default(this.logger,"Peer",[zn,vn,ee?new Xt.default(this.logger,new lt.default(this.logger,"FinalizeConnection",[new Cn.default(ae),new Yt.default(ae)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new Yt.default(ae)]))])}actionConnect(ee){var ae;return m(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const fe=!!this.configuration.urls.audioHostURL;if(fe?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new cn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new Mn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new Dn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new _n.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new di.default(this.logger,this._realtimeController,Xd.MIN_VOLUME_DECIBELS,Xd.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let Ce=this.meetingSessionContext.videoUplinkBandwidthPolicy;Ce||(Ce=new ni.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=Ce),Ce.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Fe.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new Nn.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new Qt.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new fi.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new It.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)){const Ce=this.configuration.meetingFeatures.contentMaxResolution===c.default.VideoResolutionUHD;Ce&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Ce)}else{const Ce=this.configuration.meetingFeatures.videoMaxResolution===c.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Ce)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new l.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new $t.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new Qe.default,this.meetingSessionContext.videosPaused=new Qe.default,this.meetingSessionContext.statsCollector=new K.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new r.default(this,this._realtimeController,this.connectionHealthData,new T.default(this.meetingSessionContext.signalingClient,Xd.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},ee||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(Ce=>{nt.Maybe.of(Ce.audioVideoDidStartConnecting).map(De=>De.bind(Ce)(!1))}),(ae=this.eventController)===null||ae===void 0||ae.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const Ue=fe&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+Ue);const we=this.connectWithPromises(Ue);try{yield we.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(U.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(Ce){this.signalingTask=void 0;const De=new f.default(this.getMeetingStatusCode(Ce)||S.default.TaskFailed);if(this.logger.info(`Start failed: ${De} due to error ${Ce}.`),this.sessionStateController.state()===_.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(U.default.Fail,()=>m(this,void 0,void 0,function*(){yield this.actionDisconnect(De,!0,Ce),this.handleMeetingSessionStatus(De,Ce)||this.notifyStop(De,Ce)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new Xt.default(this.logger,new Ae.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=G.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.forEachObserver(ee=>{nt.Maybe.of(ee.audioVideoDidStart).map(ae=>ae.bind(ee)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var ee;return this.sessionStateController.state()===_.default.NotConnected?((ee=this.meetingSessionContext.signalingClient)===null||ee===void 0||ee.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((ae,fe)=>{this.sessionStateController.perform(U.default.Disconnect,()=>{this._reconnectController.disableReconnect(),this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new f.default(S.default.Left),!1,null).then(ae).catch(fe)})})}stop(){this.stopReturningPromise()}actionDisconnect(ee,ae,fe){return m(this,void 0,void 0,function*(){try{yield new Dt.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new Xt.default(this.logger,new pe.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const Ue=[new Xt.default(this.logger,new oe.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new Dt.default(this.logger,this.wrapTaskName("AudioVideoClean"),Ue).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(U.default.FinishDisconnecting,()=>{ae||this.notifyStop(ee,fe)})})}update(){let ae=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(ae||(ae=this.meetingSessionContext.peer===void 0),ae||(ae=!this.updateRemoteVideosFromPolicy()),ae||(ae=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!ae)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const fe=this.sessionStateController.perform(U.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return fe===P.default.Transitioned||fe===P.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!A.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===A.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const ee=this.detectChangesInVideosToReceive();if(ee===void 0)return!1;const ae=ee.added,fe=ee.simulcastStreamUpdates,Ue=ee.removed,we=this.meetingSessionContext,Ce=[];for(const[De,pt]of fe.entries()){const gt=new k.default;if(gt.streamId=pt,gt.attendeeId=we.videoStreamIndex.attendeeIdForStreamId(pt),gt.mid=we.transceiverController.getMidForStreamId(De),gt.mid===void 0)return this.logger.info(`No MID found for stream ID ${De}, cannot update stream without renegotiation`),!1;if(Ce.push(gt),we.transceiverController.setStreamIdForMid(gt.mid,pt),we.videoStreamIndex.overrideStreamIdMappings(De,pt),we.videoTileController.haveVideoTileForAttendeeId(gt.attendeeId)){const ct=we.videoTileController.getVideoTileForAttendeeId(gt.attendeeId);if(!ct.setStreamId)return!1;ct.setStreamId(pt)}}return Ce.length!==0&&we.signalingClient.remoteVideoUpdate(Ce,[]),ae.length!==0||Ue.length!==0?!1:(we.videoStreamIndex.subscribeFrameSent(),!0)}detectChangesInVideosToReceive(){const ee=this.meetingSessionContext;if(ee.videosToReceive===null||!ee.transceiverController||!ee.transceiverController.getMidForStreamId||!ee.transceiverController.setStreamIdForMid||!ee.videosToReceive.forEach||!ee.signalingClient.remoteVideoUpdate||!ee.videoStreamIndex.overrideStreamIdMappings)return;let ae=[];const fe=new Map;let Ue=[];if(ee.lastVideosToReceive===null)ae=ee.videosToReceive.array();else{const we=ee.videoStreamIndex;ee.videosToReceive.forEach(Ce=>{if(ee.lastVideosToReceive.contain(Ce))return;let De=!1;ee.lastVideosToReceive.forEach(pt=>{De||we.StreamIdsInSameGroup(pt,Ce)&&(fe.set(pt,Ce),De=!0)}),De||ae.push(Ce)}),Ue=ee.lastVideosToReceive.array().filter(Ce=>{const De=ee.videosToReceive.contain(Ce),pt=fe.has(Ce);return!De&&!pt})}return this.logger.info(`Request to update remote videos with added: ${ae}, updated: ${[...fe.entries()]}, removed: ${Ue}`),{added:ae,removed:Ue,simulcastStreamUpdates:fe}}isNotAddingOrRemovingStreams(){const ee=this.detectChangesInVideosToReceive();if(ee===void 0)return!1;const ae=ee.added,fe=ee.removed;return!(ae.length!==0||fe.length!==0)}sendRemoteVideoUpdate(){const ee=this.meetingSessionContext;if(ee.videosToReceive===null)return!1;const ae=ee.videosToReceive.array().map(De=>ee.videoStreamIndex.groupIdForStreamId(De)),fe=Rt.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(ee,ae,ee.videoDownlinkBandwidthPolicy.getVideoPreferences()),Ue=new Map,we=[];for(const De of fe){let pt=!1;if(!ee.lastVideoSubscriptionConfiguration.has(De.groupId))pt=!0;else{const gt=ee.lastVideoSubscriptionConfiguration.get(De.groupId);De.equals(gt)||(this.logger.debug(`${JSON.stringify(De)} does not equal ${JSON.stringify(gt)}, sending update`),pt=!0)}Ue.set(De.groupId,De),pt&&we.push(De)}ee.lastVideoSubscriptionConfiguration=Ue;const Ce=[];if(ee.lastVideosToReceive!==null){const De=new Set(ae);for(const pt of ee.lastVideosToReceive.array()){const gt=ee.videoStreamIndex.groupIdForStreamId(pt);if(!De.has(gt)){const ct=ee.transceiverController.getMidForGroupId(gt);if(ct===void 0){ee.logger.warn(`Could not find MID for group ID to remove: ${gt}`);continue}Ce.push(ct)}}}return(we.length!==0||Ce.length!==0)&&ee.signalingClient.remoteVideoUpdate(we,Ce),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const ee=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(ee)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const ee=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!ee||!ee.headerExtensions?!1:ee.headerExtensions.some(ae=>ae.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(ee){const ae=a(()=>m(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),ee()}),"restartVideo"),fe=this.sessionStateController.perform(U.default.Update,()=>{ae()});return fe===P.default.Transitioned||fe===P.default.DeferredTransition}replaceLocalVideo(ee){return m(this,void 0,void 0,function*(){if(!ee||ee.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const ae=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(ae){const fe=ae.state(),Ue=ee.getVideoTracks()[0].getSettings();ae.bindVideoStream(fe.boundAttendeeId,!0,ee,Ue.width,Ue.height,fe.streamId,fe.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(ee.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=ee,this.logger.info("Local video input is updated")})}replaceLocalAudio(ee){return m(this,void 0,void 0,function*(){if(!ee||ee.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(ee.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=ee,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(ee){return m(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new Dt.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new Te.default(this.meetingSessionContext),new Xt.default(this.logger,new Dt.default(this.logger,"UpdateSession",[new H.default(this.meetingSessionContext),new re.default(this.meetingSessionContext),new tn.default(this.meetingSessionContext),new he.default(this.meetingSessionContext),new Tn.default(this.meetingSessionContext),new Yt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),ee&&this.sessionStateController.perform(U.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(ae){this.sessionStateController.perform(U.default.FinishUpdating,()=>{const fe=new f.default(this.getMeetingStatusCode(ae)||S.default.TaskFailed);fe.statusCode()!==S.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(fe,ae)})}})}notifyStop(ee,ae){var fe;if(this.forEachObserver(Ue=>{nt.Maybe.of(Ue.audioVideoDidStop).map(we=>we.bind(Ue)(ee))}),this.promotedToPrimaryMeeting&&ae&&this.forEachObserver(Ue=>{this.promotedToPrimaryMeeting=!1,nt.Maybe.of(Ue.audioVideoWasDemotedFromPrimaryMeeting).map(we=>we.bind(Ue)(new f.default(S.default.SignalingInternalServerError)))}),this.eventController){const{signalingOpenDurationMs:Ue,poorConnectionCount:we,startTimeMs:Ce,iceGatheringDurationMs:De,attendeePresenceDurationMs:pt,meetingStartDurationMs:gt}=this.meetingSessionContext,ct={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Ce===null?0:Math.round(Date.now()-Ce),meetingStatus:S.default[ee.statusCode()],signalingOpenDurationMs:Ue,iceGatheringDurationMs:De,attendeePresenceDurationMs:pt,poorConnectionCount:we,meetingStartDurationMs:gt,retryCount:this.totalRetryCount},_t=ae&&ae.message||((fe=ee.toString)===null||fe===void 0?void 0:fe.call(ee))||"";ct.meetingDurationMs===0?(ct.meetingErrorMessage=_t,delete ct.meetingDurationMs,delete ct.attendeePresenceDurationMs,delete ct.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",ct)):ee.isFailure()||ee.isAudioConnectionFailure()?(ct.meetingErrorMessage=_t,this.eventController.publishEvent("meetingFailed",ct)):this.eventController.publishEvent("meetingEnded",ct)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const ee=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(ee)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(ee,ae){const fe=this._reconnectController.retryWithBackoff(()=>m(this,void 0,void 0,function*(){this.sessionStateController.state()===_.default.NotConnected?this.sessionStateController.perform(U.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(U.default.Reconnect,()=>{this.actionReconnect(ee)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return fe||this.sessionStateController.perform(U.default.Fail,()=>{this.actionDisconnect(ee,!1,ae)}),fe}actionReconnect(ee){return m(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(ae=>{nt.Maybe.of(ae.audioVideoDidStartConnecting).map(fe=>fe.bind(ae)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset();try{yield new Dt.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new Xt.default(this.logger,new Dt.default(this.logger,"Media",[new X.default(this.meetingSessionContext),new Dt.default(this.logger,"Signaling",[new Ae.default(this.meetingSessionContext),new Pe.default(this.meetingSessionContext)]),new le.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new Te.default(this.meetingSessionContext),new Xt.default(this.logger,new Dt.default(this.logger,"UpdateSession",[new H.default(this.meetingSessionContext),new re.default(this.meetingSessionContext),new tn.default(this.meetingSessionContext),new he.default(this.meetingSessionContext),new Tn.default(this.meetingSessionContext),new Yt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(U.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:ae,poorConnectionCount:fe,startTimeMs:Ue,iceGatheringDurationMs:we,attendeePresenceDurationMs:Ce,meetingStartDurationMs:De}=this.meetingSessionContext,pt={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-Ue),meetingStatus:S.default[ee.statusCode()],signalingOpenDurationMs:ae,iceGatheringDurationMs:we,attendeePresenceDurationMs:Ce,poorConnectionCount:fe,meetingStartDurationMs:De,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",pt)}this.actionFinishConnecting()})}catch(ae){this.sessionStateController.perform(U.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const fe=new f.default(this.getMeetingStatusCode(ae)||S.default.TaskFailed);this.handleMeetingSessionStatus(fe,ae)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(ee){return`${ee}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(ee){const ae=/the meeting status code: (\d+)/.exec(ee&&ee.message);return ae&&ae.length>1?Number.parseInt(ae[1],10):null}enforceBandwidthLimitationForSender(ee){return m(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(ee)})}handleMeetingSessionStatus(ee,ae){if(this.logger.info(`handling status: ${S.default[ee.statusCode()]}`),ee.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(ee),ee.statusCode()===S.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(ee.statusCode()===S.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(fe=>{nt.Maybe.of(fe.videoSendDidBecomeUnavailable).map(Ue=>Ue.bind(fe)())}),!1;if(ee.statusCode()===S.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(fe=>{nt.Maybe.of(fe.audioVideoWasDemotedFromPrimaryMeeting).map(Ue=>Ue.bind(fe)(ee))}),!1;if(ee.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(ee.isFailure()||ee.isTerminal())&&this.meetingSessionContext.reconnectController){const fe=this.reconnect(ee,ae);return fe?this.logger.warn(`will retry due to status code ${S.default[ee.statusCode()]}${ae?` and error: ${ae.message}`:""}`):this.logger.error(`failed with status code ${S.default[ee.statusCode()]}${ae?` and error: ${ae.message}`:""}`),fe}return!1}setVideoMaxBandwidthKbps(ee){if(ee<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${ee} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(ee)),this.maxUplinkBandwidthKbps=ee}handleHasBandwidthPriority(ee){return m(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(ee),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const ae=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(ee);const fe=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();ae!==fe&&(this.logger.info(`video send bandwidth priority ${ee} max has changed from ${ae} kbps to ${fe} kbps`),yield this.enforceBandwidthLimitationForSender(fe))}})}pauseReceivingStream(ee){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([ee])}resumeReceivingStream(ee){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([ee])}setVideoCodecSendPreferences(ee){this.videoSendCodecPreferences=ee,this.meetingSessionContext.videoSendCodecPreferences=ee,this.sessionStateController.state()!==_.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:ee}=this.meetingSessionContext;if(!ee)return this.logger.info("meeting has not started"),[];const ae=this.configuration.credentials.attendeeId;return ee.allVideoSendingSourcesExcludingSelf(ae)}encodingSimulcastLayersDidChange(ee){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(ae=>{nt.Maybe.of(ae.encodingSimulcastLayersDidChange).map(fe=>fe.bind(ae)(ee))})}promoteToPrimaryMeeting(ee){return this.actionPromoteToPrimaryMeeting(ee)}actionPromoteToPrimaryMeeting(ee){return m(this,void 0,void 0,function*(){let ae=new f.default(S.default.SignalingRequestFailed);return yield new Dt.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new Xt.default(this.logger,new Ne.default(this.meetingSessionContext,ee,fe=>{ae=fe}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=ae.statusCode()===S.default.OK,ae})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(ee=>{nt.Maybe.of(ee.audioVideoWasDemotedFromPrimaryMeeting).map(ae=>ae.bind(ee)(new f.default(S.default.OK)))})}videoInputDidChange(ee){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(ee?yield this.replaceLocalVideo(ee):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(ee){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!ee)try{ee=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(ee)})}constructor(ee,ae,fe,Ue,we,Ce){this._audioProfile=new e.default,this.connectionHealthData=new n.default,this.observerQueue=new Set,this.meetingSessionContext=new Wn.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.destroyed=!1,this._logger=ae,this.sessionStateController=new F.default(this._logger),this._configuration=ee,this._webSocketAdapter=fe,this._realtimeController=new O.default(Ue),this._realtimeController.realtimeSetLocalAttendeeId(ee.credentials.attendeeId,ee.credentials.externalUserId),this._mediaStreamBroker=Ue,this._reconnectController=we,this._videoTileController=new Zt.default(new mn.default,this,this._logger),this._audioMixController=new i.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=Ce}},"DefaultAudioVideoController");d.default=Rn,Rn.MIN_VOLUME_DECIBELS=-42,Rn.MAX_VOLUME_DECIBELS=-14,Rn.PING_PONG_INTERVAL_MS=1e4},"2oFa":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");d.default=g},"2q7c":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("aVV0"));let u=a(class extends p.default{run(){return this.fn().then(()=>{})}constructor(s,o,i="RunnableTask"){super(s),this.fn=o,this.taskName=i}},"RunnableTask");d.default=u},"2vi8":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("HbHZ")),m=h("XCDq"),s=p(h("j+uH"));let o=a(class extends s.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return g(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let n=a(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(f){if(f.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}f.type===u.default.ReceivedSignalFrame&&f.message.type===m.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(f,S){this.signalingClient=f,this.logger=S}},"Interceptor");const r=new n(this.context.signalingClient,this.context.logger);this.taskCanceler=r,this.context.signalingClient.registerObserver(r)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");d.default=o},"2wCG":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"SDPMediaSection");d.default=g},"2xSc":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"TranscriptEntity");d.default=g},"2y31":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("uctb"));let u=a(class{info(s){}warn(s){}error(s){}debug(s){p.default.DEBUG<this.level||typeof s!="string"&&s()}setLogLevel(s){this.level=s}getLogLevel(){return this.level}constructor(s=p.default.OFF){this.level=s}},"NoOpLogger");d.default=u},"34ho":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g;(function(p){p.Modality="#content"})(g||(g={})),d.default=g},"3E7f":function(W,d,h){"use strict";W.exports={}},"3EKQ":function(W,d,h){"use strict";(function(g){var p=this&&this.__awaiter||function(n,r,c,f){function S(l){return l instanceof c?l:new c(function(y){y(l)})}return a(S,"adopt"),new(c||(c=Promise))(function(l,y){function T(F){try{R(f.next(F))}catch(U){y(U)}}a(T,"fulfilled");function O(F){try{R(f.throw(F))}catch(U){y(U)}}a(O,"rejected");function R(F){F.done?l(F.value):S(F.value).then(T,O)}a(R,"step"),R((f=f.apply(n,r||[])).next())})},u=this&&this.__rest||function(n,r){var c={};for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&r.indexOf(f)<0&&(c[f]=n[f]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,f=Object.getOwnPropertySymbols(n);S<f.length;S++)r.indexOf(f[S])<0&&Object.prototype.propertyIsEnumerable.call(n,f[S])&&(c[f[S]]=n[f[S]]);return c},m=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(d,"__esModule",{value:!0});const s=m(h("Np2I")),o=m(h("8wPz")),i=m(h("X3Fi")),e=h("R4Nl");let t=a(class Qo{addEventListeners(){!this.beaconEventListener||!("window"in g)||!window.addEventListener||!("document"in g)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(r){(r.type==="visibilitychange"&&document.visibilityState==="hidden"||r.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in g)||!window.removeEventListener||!("document"in g)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var r;this.removeEventListeners(),this.addEventListeners(),(r=this.intervalScheduler)===null||r===void 0||r.stop(),this.intervalScheduler=new o.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var r;(r=this.intervalScheduler)===null||r===void 0||r.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(r){return p(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(r)}`);const{name:c,ts:f,attributes:S}=r,l=S&&this.filterAttributes(S,this.attributesToFilter),y=Object.assign({name:c,ts:f},l);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(y)}`);const T=this.getSize(y);if(T>Qo.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${T} bytes. Item cannot exceed max item size allowed of ${Qo.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(c)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(y)}`),this.sendEventImmediately({name:c,ts:f,attributes:l});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(y),this.ingestionEventSize+=T,this.bufferItemThresholdReached(T)){const O=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(O),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(r,c){const f=new Set(c);return Object.keys(r).filter(l=>f.has(l)).forEach(l=>delete r[l]),r}initializeAndGetCurrentIngestionEvent(){const r={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(r),r}bufferItemThresholdReached(r){return r+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===Qo.MAX_PAYLOAD_ITEMS}getSize(r){let c=0;if(typeof r=="object")for(const[f,S]of Object.entries(r))c+=this.getPrimitiveSize(f),c+=this.getSize(S);else c+=this.getPrimitiveSize(r);return c}getPrimitiveSize(r){let c=0;return typeof r=="string"?c+=r.length*2:typeof r=="number"&&(c+=8),c}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(r){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(r=Math.min(this.buffer.length,r+1),this.buffer.splice(c,r))}makeBeaconRequestBody(r){const c={metadata:this.metadata,events:r,authorization:this.authenticationToken};return JSON.stringify(c)}makeRequestBody(r){const c={metadata:this.metadata,events:r};return JSON.stringify(c)}sendEventImmediately(r){return p(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(r)}`);const{name:c,ts:f,attributes:S}=r,l={type:this.type,v:this.v,payloads:[Object.assign({name:c,ts:f},S)]};let y=!1,T=null;const O=this.makeRequestBody([l]);try{if(T=yield this.send(O),T.ok){try{const R=yield T.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${O}, message: ${JSON.stringify(R)}`)}catch(R){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${R} for event ${O}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${O} with response status ${T.status}`),y=!0}catch(R){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${O} to the ingestion endpoint ${R}.`),y=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const F=this.makeBeaconRequestBody([l]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${F}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,F)?y=!1:y=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${O}`),y=!0}}y&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${O}`),this.failedIngestionEvents.push(l))})}send(r){return p(this,void 0,void 0,function*(){const c=new s.default(Qo.RETRY_FIXED_BACKOFF_WAIT_MS,Qo.RETRY_SHORT_BACKOFF_MS,Qo.RETRY_LONG_BACKOFF_MS);try{let f=0;for(;f<this.retryCountLimit;){const S=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:r});if(S.ok||!Qo.SENDING_FAILURE_CODES.has(S.status))return S;if(this.logger.warn(`Will retry sending failure for ${r} due to status code ${S.status}.`),f++,f<this.retryCountLimit){const l=c.nextBackoffAmountMs();yield e.wait(l)}}if(f===this.retryCountLimit)throw new Error(`Retry count limit reached for ${r}`)}catch(f){throw f}})}sendBeacon(){return p(this,void 0,void 0,function*(){const r=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(r)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const f=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);r.push(f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(f)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const f=this.failedIngestionEvents.map(S=>this.deepCopyCurrentIngestionEvent(S));r.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(f)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(f=>{r.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(f)}`)}),this.cancellableEvents.clear()),r.length===0)return;const c=this.makeBeaconRequestBody(r);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${c}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,c)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${c}`)}catch(f){this.logger.warn(`Event Reporting - Sending beacon data ${c} failed with error ${f}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return p(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(r,c,f,S,l){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=G=>({type:G.type,v:G.v,payloads:[...G.payloads]}),this.sendEvents=()=>p(this,void 0,void 0,function*(){if(this.lock)return;const G=this.getItems(this.flushSize);if(G.length===0)return;this.lock=!0;const K=this.makeRequestBody(G);let H=!1;const X=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(X,G);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${K}`);const oe=yield this.send(K);if(this.cancellableEvents.delete(X),!oe.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${K} with response status ${oe.status}`),H=!0;else try{const le=yield oe.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${K} message: ${JSON.stringify(le)}`)}catch(le){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${le} for events ${K}`)}}catch(oe){H=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${K} to the ingestion endpoint ${oe}`)}finally{this.lock=!1}H&&(this.cancellableEvents.delete(X),this.failedIngestionEvents.push(...G))});const y=new i.default(l).getParserResult(),{browserMajorVersion:T}=y,O=u(y,["browserMajorVersion"]),R=c.toJSON(),{type:F,v:U}=R,_=u(R,["type","v"]);this.authenticationToken=c.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},O),_),Object.keys(this.metadata).forEach(G=>this.attributesToFilter.push(G)),this.type=F,this.v=U,this.ingestionURL=f,this.logger=l,this.importantEvents=new Set(S);const{maxBufferCapacityKb:P,totalBufferItems:L,flushSize:A,flushIntervalMs:M,retryCountLimit:k}=r;this.maxBufferCapacityBytes=P*1024,this.totalBufferItems=L,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/L),this.flushIntervalMs=M,this.flushSize=A,this.retryCountLimit=k,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=G=>this.beaconEventHandler(G),this.addEventListeners()}},"InMemoryJSONEventBuffer");d.default=t,t.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),t.RETRY_FIXED_BACKOFF_WAIT_MS=0,t.RETRY_SHORT_BACKOFF_MS=1e3,t.RETRY_LONG_BACKOFF_MS=15e3,t.MAX_PAYLOAD_ITEMS=2,t.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3}).call(this,h("yLpj"))},"3Ft5":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(y,T,O,R){function F(U){return U instanceof O?U:new O(function(_){_(U)})}return a(F,"adopt"),new(O||(O=Promise))(function(U,_){function P(M){try{A(R.next(M))}catch(k){_(k)}}a(P,"fulfilled");function L(M){try{A(R.throw(M))}catch(k){_(k)}}a(L,"rejected");function A(M){M.done?U(M.value):F(M.value).then(P,L)}a(A,"step"),A((R=R.apply(y,T||[])).next())})},p=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("LmyK")),m=p(h("mpmV")),s=p(h("kItj")),o=p(h("LuEC")),i=p(h("pCf5")),e=p(h("6Bxv")),t=p(h("lUhs")),n=p(h("hEYi")),r=h("f2XL"),c=p(h("J+fJ")),f=h("KyYT"),S=p(h("aVV0"));let l=a(class extends S.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return g(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(T){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(T){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=T;return}else this.pendingMetricsReport=void 0;const O=T.getObservableMetrics(),R=O.availableOutgoingBitrate,F=O.nackCountReceivedPerSecond;let U=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(T);const _=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(U=U||_,_){const P=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=P.truncate(this.context.videoSubscriptionLimit),P.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${_}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:R/1e3,nackCountPerSecond:F});const P=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();U=U||P,P&&(this.logger.info(`trigger resubscribe for up=${P}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters(),this.context.videoUplinkBandwidthPolicy.chooseMediaTrackConstraints())}return U}metricsDidReceive(T){if(this.checkResubscribe(T)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const O=T.streamMetricReports,R=new Map;for(const F in O)O[F].mediaType===m.default.VIDEO&&O[F].direction===u.default.DOWNSTREAM&&R.set(O[F].streamId,O[F])}connectionHealthDidChange(T){T.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,T,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new e.default(t.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,T,()=>{var O;this.context.poorConnectionCount+=1;const R=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(O=this.context.eventController)===null||O===void 0||O.publishEvent("receivingAudioDropped",R),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(F=>{f.Maybe.of(F.connectionDidSuggestStopVideo).map(U=>U.bind(F)())}):this.context.audioVideoController.forEachObserver(F=>{f.Maybe.of(F.connectionDidBecomePoor).map(U=>U.bind(F)())})},()=>{this.context.audioVideoController.forEachObserver(O=>{f.Maybe.of(O.connectionDidBecomeGood).map(R=>R.bind(O)())})}),this.isMeetingConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,T,()=>{var O;const R=this.generateBaseAudioVideoEventAttributes();(O=this.context.eventController)===null||O===void 0||O.publishEvent("sendingAudioFailed",R)},()=>{var O;const R=this.generateBaseAudioVideoEventAttributes();(O=this.context.eventController)===null||O===void 0||O.publishEvent("sendingAudioRecovered",R)})}audioVideoDidStart(){this.isMeetingConnected=!0}audioVideoDidStartConnecting(T){this.isMeetingConnected=!1}audioVideoDidStop(T){this.isMeetingConnected=!1}applyHealthPolicy(T,O,R,F){T.update(O);const U=T.healthIfChanged();U!==null&&(this.logger.info(`${T.name} value is now ${U}`),U<=T.minimumHealth()?f.Maybe.of(R).map(_=>_.bind(this)()):f.Maybe.of(F).map(_=>_.bind(this)()))}handleBitrateFrame(T){this.currentAvailableStreamAvgBitrates=T,T.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${T.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",T.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(T){var O;if(T.type===n.default.WebSocketClosed&&(T.closeCode===4410||T.closeCode>=4500&&T.closeCode<4600)||T.type===n.default.WebSocketError||T.type===n.default.WebSocketFailed){if(!this.hasSignalingError){const R=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(O=this.context.eventController)===null||O===void 0||O.publishEvent("signalingDropped",R),this.hasSignalingError=!0}}else T.type===n.default.WebSocketOpen&&(this.hasSignalingError=!1);if(T.type===n.default.ReceivedSignalFrame){if(T.message.type===r.SdkSignalFrame.Type.NOTIFICATION){switch(T.message.notification.level){case r.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${T.message.notification.message}`);break;case r.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${T.message.notification.message}`);break;case r.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${T.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${T.message.notification.level}: ${T.message.notification.message}`);break}return}if(T.message.bitrates){const F=T.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(F),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(T.message.bitrates)}const R=e.default.fromSignalFrame(T.message);T.message.type!==r.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&R.statusCode()!==t.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(R,null)}}constructor(T,O,R){super(T.logger),this.context=T,this.initialConnectionHealthData=R,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.isMeetingConnected=!1,this.checkAndSendWeakSignalEvent=F=>{const U=F<1,_=this.prevSignalStrength<1,P=U?_?null:c.default.RedmicStartLoss:_?c.default.RedmicEndLoss:null;P&&this.context.statsCollector.logAudioEvent(P),this.prevSignalStrength=F},this.realtimeFatalErrorCallback=F=>{this.logger.error(`realtime error: ${F}: ${F.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new e.default(t.default.RealtimeApiFailed),F)},this.realtimeAttendeeIdPresenceHandler=(F,U)=>{var _;const P=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${P}`),P===F&&U&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(_=this.context.eventController)===null||_===void 0||_.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:F,startTimeMs:U,iceGatheringDurationMs:_,attendeePresenceDurationMs:P,meetingStartDurationMs:L}=this.context;return{meetingDurationMs:U===null?0:Math.round(Date.now()-U),signalingOpenDurationMs:F,iceGatheringDurationMs:_,attendeePresenceDurationMs:P,meetingStartDurationMs:L}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const F=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},F),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new s.default(T.logger,Object.assign({},O),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new i.default(Object.assign({},O),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new o.default(T.logger,Object.assign({},O),this.initialConnectionHealthData.clone())}},"MonitorTask");d.default=l},"3ZJV":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("Czkq"));let u=a(class extends p.default{},"BackgroundReplacementVideoFrameProcessorDelegate");d.default=u},"3i7i":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(u,m,s,o,i,e){this.timestampMs=u,this.topic=m,this.data=s,this.senderAttendeeId=o,this.senderExternalUserId=i,this.throttled=!!e}},"DataMessage");d.default=g},"3jln":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("ac3q")),u=g(h("z8+u"));let m=a(class{create(o,i,e){this.connection=new WebSocket(e?o:p.default.urlWithVersion(o),i),this.connection.binaryType="arraybuffer"}send(o){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return o instanceof Uint8Array?this.connection.send(o.buffer):this.connection.send(o),!0}catch(i){return this.logger.debug(()=>`send error: ${i.message}, websocket state=${u.default[this.readyState()]}`),!1}}close(o,i){var e;(e=this.connection)===null||e===void 0||e.close(o,i)}destroy(){this.connection=void 0}addEventListener(o,i){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(o,i)}removeEventListener(o,i){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(o,i)}readyState(){if(!this.connection)return u.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return u.default.Connecting;case WebSocket.OPEN:return u.default.Open;case WebSocket.CLOSING:return u.default.Closing;case WebSocket.CLOSED:return u.default.Closed}}constructor(o){this.logger=o}},"DefaultWebSocketAdapter");d.default=m},"3niY":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(u){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(u){}removeMediaStreamBrokerObserver(u){}},"NoOpMediaStreamBroker");d.default=g},"3sEM":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class nr{static initializeWorker(){nr.log("Initializing RedundantAudioEncoder");const u=new nr;self.RTCRtpScriptTransformer&&(self.onrtctransform=m=>{m.transformer.options.type==="SenderTransform"?u.setupSenderTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="ReceiverTransform"?u.setupReceiverTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="PassthroughTransform"&&u.setupPassthroughTransform(m.transformer.readable,m.transformer.writable)}),self.onmessage=m=>{m.data.msgType==="StartRedWorker"?(u.setupSenderTransform(m.data.send.readable,m.data.send.writable),u.setupReceiverTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="PassthroughTransform"?(u.setupPassthroughTransform(m.data.send.readable,m.data.send.writable),u.setupPassthroughTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="RedPayloadType"?u.setRedPayloadType(m.data.payloadType):m.data.msgType==="OpusPayloadType"?u.setOpusPayloadType(m.data.payloadType):m.data.msgType==="UpdateNumRedundantEncodings"?u.setNumRedundantEncodings(m.data.numRedundantEncodings):m.data.msgType==="Enable"?u.setRedundancyEnabled(!0):m.data.msgType==="Disable"&&u.setRedundancyEnabled(!1)}}static log(u){nr.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${u}`})}static getNumRedundantEncodingsForPacketLoss(u){let m=0,s=!1;return u<=8?m=0:u<=18?m=1:u<=75?m=2:(m=0,s=!0),[m,s]}setupPassthroughTransform(u,m){nr.log("Setting up passthrough transform"),u.pipeTo(m)}setupSenderTransform(u,m){nr.log("Setting up sender RED transform");const s=new TransformStream({transform:this.senderTransform.bind(this)});u.pipeThrough(s).pipeTo(m)}setupReceiverTransform(u,m){nr.log("Setting up receiver RED transform");const s=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});u.pipeThrough(s).pipeTo(m)}setRedPayloadType(u){this.redPayloadType=u,nr.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(u){this.opusPayloadType=u,nr.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(u){this.numRedundantEncodings=u,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),nr.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(u){this.redundancyEnabled=u,nr.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(u,m){u.data.byteLength>this.maxAudioPayloadSizeBytes||m.enqueue(u)}senderTransform(u,m){if(u.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}const o=this.getPrimaryPayload(u.timestamp,u.data);if(!o){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}const i=this.encode(u.timestamp,o);if(!i){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}u.data=i,this.enqueueAudioFrameIfPayloadSizeIsValid(u,m)}getPrimaryPayload(u,m){const s=this.splitEncodings(u,m);return!s||s.length<1?null:s[s.length-1].payload}splitEncodings(u,m){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const i=new DataView(m);let e=i.byteLength,t=0,n=0,r=0,c=0,f=!1;const S=new Array,l=new Array,y=new Array;for(;e>0;)if(f=(i.getUint8(c)&128)===0,f){if((i.getUint8(c)&127)!==this.opusPayloadType||(t+=this.redLastHeaderSizeBytes,n+=this.redLastHeaderSizeBytes,t>=i.byteLength))return null;r=i.byteLength-t;break}else{if(e<this.redHeaderSizeBytes)return null;const _=((i.getUint8(c+2)&3)<<8)+i.getUint8(c+3);l.push(_);const P=i.getUint16(c+1)>>2,L=u-P;y.push(L),t+=_+this.redHeaderSizeBytes,n+=this.redHeaderSizeBytes,c+=this.redHeaderSizeBytes,e-=this.redHeaderSizeBytes}if(!f)return null;let T=n;for(let _=0;_<y.length;_++){const P=new ArrayBuffer(l[_]);new Uint8Array(P).set(new Uint8Array(i.buffer,T,l[_]),0);const A={timestamp:y[_],payload:P,isRedundant:!0};s&&(A.hasFec=this.opusPacketHasFec(new DataView(P),P.byteLength)),S.push(A),T+=l[_]}const O=i.byteLength-r,R=new ArrayBuffer(r);new Uint8Array(R).set(new Uint8Array(i.buffer,O,r),0);const U={timestamp:u,payload:R,isRedundant:!1,seq:o};return s&&(U.hasFec=this.opusPacketHasFec(new DataView(R),R.byteLength)),S.push(U),S}encode(u,m){const s=m.byteLength;if(s===0||s>=this.maxRedPacketSizeBytes||s>=this.maxAudioPayloadSizeBytes)return null;const o=this.numRedundantEncodings;let i=this.redLastHeaderSizeBytes,e=s,t=this.maxAudioPayloadSizeBytes-s-i;const n=new Array,r=new Array;if(this.redundancyEnabled){let y=this.uint32WrapAround(u-this.redPacketizationTime*this.redPacketDistance);for(let T=0;T<o&&!(this.uint32WrapAround(u-y)>=this.maxRedTimestampOffset);T++){let O=y,R=this.encodingHistory.find(F=>F.timestamp===O);if(R||(O=this.uint32WrapAround(y-this.redPacketizationTime),R=this.encodingHistory.find(F=>F.timestamp===O)),R){const F=R.payload.byteLength;if(t<this.redHeaderSizeBytes+F)break;t-=this.redHeaderSizeBytes+F,i+=this.redHeaderSizeBytes,e+=F,n.unshift(R.timestamp),r.unshift(R.payload)}y-=this.redPacketizationTime*this.redPacketDistance,y=this.uint32WrapAround(y)}}const c=new ArrayBuffer(i+e),f=new DataView(c);let S=0;for(let y=0;y<n.length;y++){const T=u-n[y];f.setUint8(S,this.opusPayloadType|128),f.setUint16(S+1,T<<2|r[y].byteLength>>8),f.setUint8(S+3,r[y].byteLength&255),S+=this.redHeaderSizeBytes}f.setUint8(S,this.opusPayloadType),S+=this.redLastHeaderSizeBytes;const l=new Uint8Array(c);for(let y=0;y<r.length;y++)l.set(new Uint8Array(r[y]),S),S+=r[y].byteLength;return l.set(new Uint8Array(m),S),S+=m.byteLength,S!==i+e?null:(this.updateEncodingHistory(u,m),c)}updateEncodingHistory(u,m){for(const o of this.encodingHistory){const i=this.redPacketizationTime*this.redMaxRecoveryDistance;if(u-o.timestamp>=i)this.encodingHistory.shift();else break}const s=new DataView(m);(this.opusPacketIsCeltOnly(s)||this.opusPacketHasVoiceActivity(s,s.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:u,payload:m}))}initializePacketLogs(){const u=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(u),index:0,windowSize:u},this.redRecoveryLog={window:new Array(u),index:0,windowSize:u},this.fecRecoveryLog={window:new Array(u),index:0,windowSize:u},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(u,m){const s=u.getMetadata();if(s.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}const o=this.splitEncodings(u.timestamp,u.data,!0,s.sequenceNumber);if(!o){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}for(let i=o.length-1;i>=0;i--)this.updateLossStats(o[i])&&(this.updateRedStats(o[i]),this.updateFecStats(o[i]));this.maybeReportLossStats(o[o.length-1].timestamp,s.synchronizationSource),this.enqueueAudioFrameIfPayloadSizeIsValid(u,m)}updateLossStats(u){if(u.isRedundant)return!0;const m=u.timestamp,s=u.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=s,this.addTimestamp(this.primaryPacketLog,m),!0;const o=this.int16(s-this.newestSequenceNumber);return o<-this.maxOutOfOrderPacketDistance?!1:(o<0?this.hasTimestamp(this.primaryPacketLog,m)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,m),this.removeFromRecoveryWindows(m)):o>1&&(this.totalAudioPacketsLost+=o-1),o>0&&(this.totalAudioPacketsExpected+=o,this.newestSequenceNumber=u.seq,this.addTimestamp(this.primaryPacketLog,m)),!0)}updateRedStats(u){if(!u.isRedundant||this.totalAudioPacketsLost===0)return;const m=u.timestamp;this.hasTimestamp(this.primaryPacketLog,m)||(this.hasTimestamp(this.redRecoveryLog,m)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,m)),this.removeTimestamp(this.fecRecoveryLog,m)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(u){if(!u.hasFec||this.totalAudioPacketsLost===0)return;const m=u.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,m)||this.hasTimestamp(this.redRecoveryLog,m)||this.hasTimestamp(this.fecRecoveryLog,m)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,m))}maybeReportLossStats(u,m){u-this.lastLossReportTimestamp<this.lossReportInterval||(nr.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:m,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=u)}addTimestamp(u,m){u.window[u.index]=m,u.index=(u.index+1)%u.windowSize}hasTimestamp(u,m){return!!u.window.find(o=>o===m)}removeTimestamp(u,m){const s=u.window.indexOf(m);return s>=0?(u.window[s]=void 0,!0):!1}removeFromRecoveryWindows(u){let m=this.removeTimestamp(this.redRecoveryLog,u);m&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,m=this.removeTimestamp(this.fecRecoveryLog,u),m&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(u){let s=u;return u>=4294967296?s=u-4294967296:u<0&&(s=4294967296+u),s}int16(u){return u<<16>>16}opusPacketIsCeltOnly(u){return!!(u.getUint8(0)&128)}opusPacketGetSamplesPerFrame(u,m){m=Math.round(m),m=Math.min(Math.max(m,-Math.pow(2,32)),Math.pow(2,32)-1);let s,o;return this.opusPacketIsCeltOnly(u)?(o=u.getUint8(0)>>3&3,s=(m<<o)/400):(u.getUint8(0)&96)===96?s=u.getUint8(0)&8?m/50:m/100:(o=u.getUint8(0)>>3&3,o===3?s=m*60/1e3:s=(m<<o)/100),s}opusNumSilkFrames(u){let m=this.opusPacketGetSamplesPerFrame(u,48e3)/48;switch(m<10&&(m=10),m){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(u){return u.getUint8(0)&4?2:1}opusParseSize(u,m,s,o){return s<1?(o[0]=-1,-1):u.getUint8(m)<252?(o[0]=u.getUint8(m),1):s<2?(o[0]=-1,-1):(o[0]=4*u.getUint8(m+1)+u.getUint8(m),2)}opusPacketParseImpl(u,m,s,o,i,e,t,n){if(!e||m<0)return this.OPUS_BAD_ARG;if(m===0)return this.OPUS_INVALID_PACKET;let r,c,f=0,S=!1;const l=u.getUint8(0);o&&(o[0]=l);let y=m-1,T=1,O=y;switch(l&3){case 0:r=1;break;case 1:if(r=2,S=!0,!s){if(y&1)return this.OPUS_INVALID_PACKET;O=y/2,e[0][0]=O}break;case 2:if(r=2,c=this.opusParseSize(u,T,y,e[0]),y-=c,e[0][0]<0||e[0][0]>y)return this.OPUS_INVALID_PACKET;T+=c,O=y-e[0][0];break;default:if(y<1)return this.OPUS_INVALID_PACKET;const R=u.getUint8(T++);if(--y,r=R&63,r<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(u,48e3)*r>5760)return this.OPUS_INVALID_PACKET;if(R&64){let U,_;do{if(y<=0)return this.OPUS_INVALID_PACKET;U=u.getUint8(T++),--y,_=U===255?254:U,y-=_,f+=_}while(U===255)}if(y<0)return this.OPUS_INVALID_PACKET;if(S=!(R&128),S){if(!s){if(O=Math.trunc(y/r),O*r!==y)return this.OPUS_INVALID_PACKET;for(let U=0;U<r-1;++U)e[U][0]=O}}else{O=y;for(let U=0;U<r-1;++U){if(c=this.opusParseSize(u,T,y,e[U]),y-=c,e[U][0]<0||e[U][0]>y)return this.OPUS_INVALID_PACKET;T+=c,O-=c+e[U][0]}if(O<0)return this.OPUS_INVALID_PACKET}}if(s){if(c=this.opusParseSize(u,T,y,e[r-1]),y-=c,e[r-1][0]<0||e[r-1][0]>y)return this.OPUS_INVALID_PACKET;if(T+=c,S){if(e[r-1][0]*r>y)return this.OPUS_INVALID_PACKET;for(let R=0;R<r-1;++R)e[R][0]=e[r-1][0]}else if(!(c+e[r-1][0]<=O))return this.OPUS_INVALID_PACKET}else{if(O>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;e[r-1][0]=O}t&&(t[0]=T);for(let R=0;R<r;++R)i&&(i[R][0]=T),T+=e[R][0];return n&&(n[0]=T+f),r}opusPacketParse(u,m,s,o,i,e){return this.opusPacketParseImpl(u,m,!1,s,o,i,e,null)}opusPacketHasVoiceActivity(u,m){if(!u||m<=0)return 0;if(this.opusPacketIsCeltOnly(u))return-1;const s=this.opusNumSilkFrames(u);if(s===0)return-1;const o=new Array(this.OPUS_MAX_OPUS_FRAMES),i=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)o[t]=[void 0],i[t]=[void 0];const e=this.opusPacketParse(u,m,null,o,i,null);if(e<0)return-1;for(let t=0;t<e;++t){if(i[t][0]<1)continue;if(u.getUint8(o[t][0])>>8-s||this.opusPacketGetNumChannels(u)===2&&u.getUint8(o[t][0])<<s+1>>8-s)return 1}return 0}opusPacketHasFec(u,m){if(!u||m<=0||this.opusPacketIsCeltOnly(u))return!1;const s=new Array(this.OPUS_MAX_OPUS_FRAMES),o=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let n=0;n<this.OPUS_MAX_OPUS_FRAMES;++n)s[n]=[void 0],o[n]=[void 0];if(this.opusPacketParse(u,m,null,s,o,null)<0||o[0][0]<=1)return!1;const e=this.opusNumSilkFrames(u);if(e===0)return!1;const t=this.opusPacketGetNumChannels(u);if(t!==1&&t!==2)return!1;for(let n=0;n<t;n++)if(u.getUint8(s[0][0])&128>>(n+1)*(e+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");d.default=g,g.shouldLog=!1,g.shouldReportStats=!1},"3taG":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("HbHZ")),m=h("XCDq"),s=p(h("j+uH"));let o=a(class extends s.default{run(){return g(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===u.default.ReceivedSignalFrame){if(e.message.type===m.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===m.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");d.default=o},"3wzr":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g=h("+br/");g.__exportStar(h("irli"),d)},"3zlU":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("KsuK")),m=p(h("EkGV")),s=15;let o=a(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?s:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return g(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return g(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const n=new u.default(this.canvasInput);this.sourceBuffers.push(n),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,n=new m.default){this.logger=e,this.stages=t,this.fr=s,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=r=>g(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const c=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let f=[];f.push(this.sourceBuffers[0]);try{for(const F of this.processors)f=yield F.process(f)}catch{this.forEachObserver(U=>{U.processingDidFailToStart&&U.processingDidFailToStart()});return}this.destBuffers=f;let S;try{S=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(U=>{U.processingDidFailToStart&&U.processingDidFailToStart()}));return}const l=S.width,y=S.height;l!==0&&y!==0&&(this.canvasOutput.width!==l&&this.canvasOutput.height!==y&&(this.canvasOutput.width=l,this.canvasOutput.height=y),this.outputCtx.drawImage(S,0,0,l,y,0,0,l,y),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(F=>{F.processingDidStart&&F.processingDidStart()})));const T=performance.now()-c,O=1e3*2/this.framerate-T,R=Math.max(0,1e3/this.framerate-T);O<=0&&this.forEachObserver(F=>{F.processingLatencyTooHigh&&F.processingLatencyTooHigh(T)}),yield this.timer.start(R,this.process.bind(this))}),this.timer=n}},"DefaultVideoFrameProcessorPipeline");d.default=o},"42jQ":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");d.default=g},"4EN+":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.WebSocketReadyState=void 0;var g;(function(p){p[p.None=0]="None",p[p.Connecting=1]="Connecting",p[p.Open=2]="Open",p[p.Closing=3]="Closing",p[p.Closed=4]="Closed"})(g=d.WebSocketReadyState||(d.WebSocketReadyState={})),d.default=g},"4k7n":function(W,d,h){"use strict";var g=h("Yvae"),p=h("uT1x"),u=h("jLvU");function m(s,o,i){var e=s.length;if(e<2)return e?Object(u.a)(s[0]):[];for(var t=-1,n=Array(e);++t<e;)for(var r=s[t],c=-1;++c<e;)c!=t&&(n[t]=Object(g.a)(n[t]||r,s[c],o,i));return Object(u.a)(Object(p.a)(n,1),o,i)}a(m,"baseXor"),d.a=m},"4vb1":function(W,d,h){"use strict";h.r(d),h.d(d,"__extends",function(){return p}),h.d(d,"__assign",function(){return u}),h.d(d,"__rest",function(){return m}),h.d(d,"__decorate",function(){return s}),h.d(d,"__param",function(){return o}),h.d(d,"__metadata",function(){return i}),h.d(d,"__awaiter",function(){return e}),h.d(d,"__generator",function(){return t}),h.d(d,"__createBinding",function(){return n}),h.d(d,"__exportStar",function(){return r}),h.d(d,"__values",function(){return c}),h.d(d,"__read",function(){return f}),h.d(d,"__spread",function(){return S}),h.d(d,"__spreadArrays",function(){return l}),h.d(d,"__await",function(){return y}),h.d(d,"__asyncGenerator",function(){return T}),h.d(d,"__asyncDelegator",function(){return O}),h.d(d,"__asyncValues",function(){return R}),h.d(d,"__makeTemplateObject",function(){return F}),h.d(d,"__importStar",function(){return U}),h.d(d,"__importDefault",function(){return _}),h.d(d,"__classPrivateFieldGet",function(){return P}),h.d(d,"__classPrivateFieldSet",function(){return L});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var g=a(function(A,M){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,G){k.__proto__=G}||function(k,G){for(var K in G)G.hasOwnProperty(K)&&(k[K]=G[K])},g(A,M)},"extendStatics");function p(A,M){g(A,M);function k(){this.constructor=A}a(k,"__"),A.prototype=M===null?Object.create(M):(k.prototype=M.prototype,new k)}a(p,"__extends");var u=a(function(){return u=Object.assign||a(function(M){for(var k,G=1,K=arguments.length;G<K;G++){k=arguments[G];for(var H in k)Object.prototype.hasOwnProperty.call(k,H)&&(M[H]=k[H])}return M},"__assign"),u.apply(this,arguments)},"__assign");function m(A,M){var k={};for(var G in A)Object.prototype.hasOwnProperty.call(A,G)&&M.indexOf(G)<0&&(k[G]=A[G]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,G=Object.getOwnPropertySymbols(A);K<G.length;K++)M.indexOf(G[K])<0&&Object.prototype.propertyIsEnumerable.call(A,G[K])&&(k[G[K]]=A[G[K]]);return k}a(m,"__rest");function s(A,M,k,G){var K=arguments.length,H=K<3?M:G===null?G=Object.getOwnPropertyDescriptor(M,k):G,X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(A,M,k,G);else for(var oe=A.length-1;oe>=0;oe--)(X=A[oe])&&(H=(K<3?X(H):K>3?X(M,k,H):X(M,k))||H);return K>3&&H&&Object.defineProperty(M,k,H),H}a(s,"__decorate");function o(A,M){return function(k,G){M(k,G,A)}}a(o,"__param");function i(A,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(A,M)}a(i,"__metadata");function e(A,M,k,G){function K(H){return H instanceof k?H:new k(function(X){X(H)})}return a(K,"adopt"),new(k||(k=Promise))(function(H,X){function oe(he){try{re(G.next(he))}catch(Pe){X(Pe)}}a(oe,"fulfilled");function le(he){try{re(G.throw(he))}catch(Pe){X(Pe)}}a(le,"rejected");function re(he){he.done?H(he.value):K(he.value).then(oe,le)}a(re,"step"),re((G=G.apply(A,M||[])).next())})}a(e,"__awaiter");function t(A,M){var k={label:0,sent:function(){if(H[0]&1)throw H[1];return H[1]},trys:[],ops:[]},G,K,H,X;return X={next:oe(0),throw:oe(1),return:oe(2)},typeof Symbol=="function"&&(X[Symbol.iterator]=function(){return this}),X;function oe(re){return function(he){return le([re,he])}}function le(re){if(G)throw new TypeError("Generator is already executing.");for(;k;)try{if(G=1,K&&(H=re[0]&2?K.return:re[0]?K.throw||((H=K.return)&&H.call(K),0):K.next)&&!(H=H.call(K,re[1])).done)return H;switch(K=0,H&&(re=[re[0]&2,H.value]),re[0]){case 0:case 1:H=re;break;case 4:return k.label++,{value:re[1],done:!1};case 5:k.label++,K=re[1],re=[0];continue;case 7:re=k.ops.pop(),k.trys.pop();continue;default:if(H=k.trys,!(H=H.length>0&&H[H.length-1])&&(re[0]===6||re[0]===2)){k=0;continue}if(re[0]===3&&(!H||re[1]>H[0]&&re[1]<H[3])){k.label=re[1];break}if(re[0]===6&&k.label<H[1]){k.label=H[1],H=re;break}if(H&&k.label<H[2]){k.label=H[2],k.ops.push(re);break}H[2]&&k.ops.pop(),k.trys.pop();continue}re=M.call(A,k)}catch(he){re=[6,he],K=0}finally{G=H=0}if(re[0]&5)throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}}a(t,"__generator");function n(A,M,k,G){G===void 0&&(G=k),A[G]=M[k]}a(n,"__createBinding");function r(A,M){for(var k in A)k!=="default"&&!M.hasOwnProperty(k)&&(M[k]=A[k])}a(r,"__exportStar");function c(A){var M=typeof Symbol=="function"&&Symbol.iterator,k=M&&A[M],G=0;if(k)return k.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&G>=A.length&&(A=void 0),{value:A&&A[G++],done:!A}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}a(c,"__values");function f(A,M){var k=typeof Symbol=="function"&&A[Symbol.iterator];if(!k)return A;var G=k.call(A),K,H=[],X;try{for(;(M===void 0||M-- >0)&&!(K=G.next()).done;)H.push(K.value)}catch(oe){X={error:oe}}finally{try{K&&!K.done&&(k=G.return)&&k.call(G)}finally{if(X)throw X.error}}return H}a(f,"__read");function S(){for(var A=[],M=0;M<arguments.length;M++)A=A.concat(f(arguments[M]));return A}a(S,"__spread");function l(){for(var A=0,M=0,k=arguments.length;M<k;M++)A+=arguments[M].length;for(var G=Array(A),K=0,M=0;M<k;M++)for(var H=arguments[M],X=0,oe=H.length;X<oe;X++,K++)G[K]=H[X];return G}a(l,"__spreadArrays");function y(A){return this instanceof y?(this.v=A,this):new y(A)}a(y,"__await");function T(A,M,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=k.apply(A,M||[]),K,H=[];return K={},X("next"),X("throw"),X("return"),K[Symbol.asyncIterator]=function(){return this},K;function X(pe){G[pe]&&(K[pe]=function(Me){return new Promise(function(We,Ae){H.push([pe,Me,We,Ae])>1||oe(pe,Me)})})}function oe(pe,Me){try{le(G[pe](Me))}catch(We){Pe(H[0][3],We)}}function le(pe){pe.value instanceof y?Promise.resolve(pe.value.v).then(re,he):Pe(H[0][2],pe)}function re(pe){oe("next",pe)}function he(pe){oe("throw",pe)}function Pe(pe,Me){pe(Me),H.shift(),H.length&&oe(H[0][0],H[0][1])}}a(T,"__asyncGenerator");function O(A){var M,k;return M={},G("next"),G("throw",function(K){throw K}),G("return"),M[Symbol.iterator]=function(){return this},M;function G(K,H){M[K]=A[K]?function(X){return(k=!k)?{value:y(A[K](X)),done:K==="return"}:H?H(X):X}:H}}a(O,"__asyncDelegator");function R(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=A[Symbol.asyncIterator],k;return M?M.call(A):(A=typeof c=="function"?c(A):A[Symbol.iterator](),k={},G("next"),G("throw"),G("return"),k[Symbol.asyncIterator]=function(){return this},k);function G(H){k[H]=A[H]&&function(X){return new Promise(function(oe,le){X=A[H](X),K(oe,le,X.done,X.value)})}}function K(H,X,oe,le){Promise.resolve(le).then(function(re){H({value:re,done:oe})},X)}}a(R,"__asyncValues");function F(A,M){return Object.defineProperty?Object.defineProperty(A,"raw",{value:M}):A.raw=M,A}a(F,"__makeTemplateObject");function U(A){if(A&&A.__esModule)return A;var M={};if(A!=null)for(var k in A)Object.hasOwnProperty.call(A,k)&&(M[k]=A[k]);return M.default=A,M}a(U,"__importStar");function _(A){return A&&A.__esModule?A:{default:A}}a(_,"__importDefault");function P(A,M){if(!M.has(A))throw new TypeError("attempted to get private field on non-instance");return M.get(A)}a(P,"__classPrivateFieldGet");function L(A,M,k){if(!M.has(A))throw new TypeError("attempted to set private field on non-instance");return M.set(A,k),k}a(L,"__classPrivateFieldSet")},"4w5z":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("cKqT")),u=g(h("KEX5")),m=g(h("ZHiL")),s=g(h("3niY")),o=g(h("94P3")),i=g(h("/N6y")),e=g(h("aZba")),t=g(h("papz")),n=g(h("GZjp")),r=g(h("l7oq")),c=g(h("3jln")),f=g(h("a6MJ"));let S=a(class extends f.default{setAudioProfile(y){}start(){}stop(){}promoteToPrimaryMeeting(y){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(y){const T=new o.default;T.meetingId="",T.externalMeetingId="",T.credentials=new i.default,T.credentials.attendeeId="",T.credentials.joinToken="",T.urls=new n.default,T.urls.turnControlURL="",T.urls.audioHostURL="",T.urls.signalingURL="wss://localhost/";const O=new m.default;super(y||T,O,new c.default(new m.default),new s.default,new r.default(0,new p.default(0,0,0)),new u.default(y||T,O))}},"NoOpAudioVideoController");d.default=S},"5/Tg":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("Np2I"));let u=a(class extends p.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(s,o,i,e){super(s,o,i),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");d.default=u},"5/lR":function(W,d,h){"use strict";var g=this&&this.__createBinding||(Object.create?function(U,_,P,L){L===void 0&&(L=P),Object.defineProperty(U,L,{enumerable:!0,get:function(){return _[P]}})}:function(U,_,P,L){L===void 0&&(L=P),U[L]=_[P]}),p=this&&this.__setModuleDefault||(Object.create?function(U,_){Object.defineProperty(U,"default",{enumerable:!0,value:_})}:function(U,_){U.default=_}),u=this&&this.__importStar||function(U){if(U&&U.__esModule)return U;var _={};if(U!=null)for(var P in U)P!=="default"&&Object.prototype.hasOwnProperty.call(U,P)&&g(_,U,P);return p(_,U),_},m=this&&this.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(d,"__esModule",{value:!0});const s=m(h("beBF")),o=m(h("bjg3")),i=m(h("x8On")),e=m(h("r3TB")),t=h("mlaT"),n=u(h("/AJg")),r=m(h("7p5e")),c=m(h("MpTp")),f=m(h("uTAD")),S=m(h("w1x/")),l=m(h("h96U")),y=h("T44/"),T=m(h("BY2i")),O=m(h("aCJD"));let R=a(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),F=a(class ei{reset(){this.allHighestPolicy=new f.default(""),this.optimalReceiveSet=new c.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new c.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new c.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=ei.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=ei.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new R,this.prevDownlinkStats=new R,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(_){this.tileController=_,this.logger.info("tileController bound")}setWantsResubscribeObserver(_){this.wantsResubscribeObserver=_}chooseRemoteVideoSources(_){var P;if(!(!((P=this.videoPreferences)===null||P===void 0)&&P.equals(_))){if(this.videoPreferences=_==null?void 0:_.clone(),!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const L=new Array;for(const A of this.videoPreferences){const M=new r.default;M.attendee=new s.default,M.attendee.attendeeId=A.attendeeId,L.push(M)}this.allHighestPolicy.chooseRemoteVideoSources(L);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(_)}`)}}updateIndex(_){this.videoIndex=_,this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(_),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const _=new Set;for(const M of this.videoIndex.remoteStreamDescriptions())_.add(M.attendeeId);const P=y.VideoPreferences.prepare(),L=_.size;let A=S.default.Maximum;L>8?A=S.default.Low:L>4&&(A=S.default.Medium);for(const M of _)P.add(new l.default(M,1,A));this.defaultVideoPreferences=P.build()}updateMetrics(_){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new R;const P=_.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=P.availableIncomingBitrate/1e3;for(const L in _.streamMetricReports){const A=Number.parseInt(L,10),M=_.streamMetricReports[A];M.direction===o.default.DOWNSTREAM&&M.mediaType===i.default.VIDEO&&(M.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=_.countPerSecond("nackCount",A)),M.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=_.countPerSecond("packetsLost",A)),M.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=_.bitsPerSecond("bytesReceived",A)/1e3))}}wantsResubscribe(){let _=!1;return!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(_||(_=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)?_||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),_||(_=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),_)}chooseSubscriptions(){return!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(_){this.observerQueue.add(_)}removeObserver(_){this.observerQueue.delete(_)}forEachObserver(_){for(const P of this.observerQueue)_(P)}setVideoPriorityBasedPolicyConfigs(_){this.videoPriorityBasedPolicyConfig=_}calculateOptimalReceiveStreams(){var _;const P=[],L=this.videoIndex.remoteStreamDescriptions();if(L.length===0||!((_=this.videoPreferences)===null||_===void 0)&&_.isEmpty()){this.optimalReceiveStreams=[];return}const A=this.rateProbeState;this.cleanBwPausedTiles(L),this.handleAppPausedStreams(P,L);const M=new Map;for(const Ae of this.getCurrentVideoPreferences())M.set(Ae.attendeeId,Ae);const k=L.filter(Ae=>M.has(Ae.attendeeId)),G=!this.streamsWithPreferenceDidChange(k),K=!this.startupPeriod&&G;if(K&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;k.sort((Ae,lt)=>Ae.maxBitrateKbps===lt.maxBitrateKbps?Ae.streamId-lt.streamId:Ae.maxBitrateKbps-lt.maxBitrateKbps);for(const Ae of k)(Ae.avgBitrateKbps===0||Ae.avgBitrateKbps>Ae.maxBitrateKbps)&&(Ae.attendeeId.endsWith(e.default.Modality)&&Ae.maxBitrateKbps<100?Ae.maxBitrateKbps=Ae.avgBitrateKbps:Ae.avgBitrateKbps=Ae.maxBitrateKbps);const H=new Set;for(const Ae of this.getCurrentVideoPreferences()){const lt=k.filter(Te=>Te.attendeeId===Ae.attendeeId);if(lt.length<3)continue;let Ne=15,Xe=320*480;lt.forEach(Te=>{Ne=Math.max(Ne,Te.maxFrameRate),Xe=Math.max(Xe,Te.totalPixels())}),lt.sort((Te,At)=>{if(Ae.degradationPreference===O.default.MaintainResolution)return Math.abs(Te.maxFrameRate-At.maxFrameRate)<2?Te.totalPixels()-At.totalPixels():Te.maxFrameRate-At.maxFrameRate;if(Ae.degradationPreference===O.default.MaintainFramerate)return Te.totalPixels()===At.totalPixels()?Te.maxFrameRate-At.maxFrameRate:Te.totalPixels()-At.totalPixels();{const tn=a(Yt=>Yt.avgBitrateKbps*Math.pow(2,5*Yt.maxFrameRate/Ne*Math.pow(4,Yt.totalPixels()/Xe)),"weighByFramerate");return tn(Te)-tn(At)}});let je;for(const Te of lt){if(je!==void 0&&(Te.maxFrameRate<je.maxFrameRate&&Math.abs(je.maxFrameRate-Te.maxFrameRate)>2||Te.totalPixels()<je.totalPixels())){H.add(Te.streamId);continue}je=Te}}const X=k.filter(Ae=>!H.has(Ae.streamId));this.logger.info(`Filtered to ${JSON.stringify(X)}`);const oe={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};oe.targetDownlinkBitrate=this.determineTargetRate();const le=this.subscribedReceiveSet.size(),re=this.downlinkStats.bandwidthEstimateKbps,he=!this.videoPriorityBasedPolicyConfig.allowSubscribe(le,re);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=ei.MIN_TIME_BETWEEN_SUBSCRIBE_MS,K&&he))return;const Pe=this.priorityPolicy(oe,X,P),pe=!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let Me=0;if(!pe&&!this.startupPeriod&&G?this.rateProbeState==="Probing"?Me=this.handleProbe(P,oe.targetDownlinkBitrate):oe.deltaToNextUpgrade!==0&&(Me=this.maybeOverrideOrProbe(P,oe,Pe)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=k,this.videoPreferencesUpdated=!1,Me===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=oe.targetDownlinkBitrate;return}if(Me===2){const Ae=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(k,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+Ae);return}this.optimalNonPausedReceiveStreams=P.slice();const We=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(k,P),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==A||this.optimalReceiveStreams.length!==P.length||We!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(L,oe.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=oe.targetDownlinkBitrate,this.optimalReceiveStreams=P.slice()}calculateOptimalReceiveSet(){const _=new c.default;this.calculateOptimalReceiveStreams();for(const P of this.optimalReceiveStreams)_.add(P.streamId);if(!this.optimalReceiveSet.equal(_)){const P=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(_)} subscribedRate:${P}`)}this.optimalReceiveSet=_}determineTargetRate(){let _=0;const P=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=P),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>ei.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||P-this.firstEstimateTimestamp>ei.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?_=ei.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<ei.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),_=this.downlinkStats.usedBandwidthKbps+ei.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):_=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?_=ei.DEFAULT_BANDWIDTH_KBPS:_=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-ei.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*ei.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,_=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,_>15e3&&this.logger.warn("bwe: "+_+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(_,15e3)}setProbeState(_){if(this.rateProbeState===_)return!1;const P=Date.now();switch(_){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||P-this.lastProbeTimestamp>ei.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=P;else return!1;break;case"Probing":if(P-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=P,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,ei.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+_+" from "+this.rateProbeState),this.rateProbeState=_,!0}upgradeToStream(_,P){for(let L=0;L<_.length;L++)if(_[L].groupId===P.groupId){const A=P.avgBitrateKbps-_[L].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(_[L])+" to "+P),this.lastUpgradeRateKbps=A,_[L]=P,A}return _.push(P),this.lastUpgradeRateKbps=P.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(_,P){if(Date.now()-this.lastProbeTimestamp>ei.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>ei.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max(ei.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const L=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(_)||P>L?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=ei.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(_,P,L){const A=this.chosenStreamsSameAsLast(_);let M=0;const k=P.targetDownlinkBitrate>ei.LOW_BITRATE_THRESHOLD_KBPS?ei.TARGET_RATE_CHANGE_TRIGGER_PERCENT:ei.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,G=P.targetDownlinkBitrate*k/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!A&&Math.abs(P.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<G?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),M=1):this.targetRateBaselineForDeltaCheckKbps=P.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,M;if(A||M===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(_,L),M=0);break}else this.setProbeState("Not Probing");return M}calculateSubscribeRate(_){let P=0;for(const L of _)!this.pausedStreamIds.contain(L.streamId)&&!this.pausedBwAttendeeIds.has(L.attendeeId)&&(P+=L.maxBitrateKbps);return P}handleAppPausedStreams(_,P){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new c.default;const L=this.tileController.getAllRemoteVideoTiles();for(const A of L){const M=A.state();if(M.paused&&!this.pausedBwAttendeeIds.has(M.boundAttendeeId)){let k=P.length;for(;k--;)P[k].attendeeId===M.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+M.boundAttendeeId+" streamId: "+P[k].streamId),this.pausedStreamIds.add(P[k].streamId),this.subscribedReceiveSet.contain(P[k].streamId)&&_.push(P[k]),P.splice(k,1))}}}processBwPausedStreams(_,P){if(!this.tileController){this.logger.warn("tileController not found!");return}const L=this.getCurrentVideoPreferences();if(L&&this.shouldPauseTiles){const A=this.tileController.getAllVideoTiles();for(const M of L){const k=this.getVideoTileForAttendeeId(M.attendeeId,A),G=(k==null?void 0:k.state().paused)||!1;if(P.some(K=>K.attendeeId===M.attendeeId))G&&this.pausedBwAttendeeIds.has(M.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${M.attendeeId} due to bandwidth`),this.forEachObserver(K=>{K.tileWillBeUnpausedByDownlinkPolicy(k.id())}),this.tileController.unpauseVideoTile(k.id()),this.pausedBwAttendeeIds.delete(M.attendeeId));else{const K=_.some(H=>H.attendeeId===M.attendeeId);if(k&&K){const H=this.optimalReceiveStreams.find(X=>X.attendeeId===M.attendeeId);H!==void 0&&(G||(this.logger.info(`bwe: pausing streamId ${H.streamId} attendee ${M.attendeeId} due to bandwidth`),this.forEachObserver(X=>{X.tileWillBePausedByDownlinkPolicy(k.id())}),this.tileController.pauseVideoTile(k.id())),P.push(H)),this.pausedBwAttendeeIds.add(M.attendeeId)}else if(K){const H=this.tileController.addVideoTile();H.bindVideoStream(M.attendeeId,!1,null,0,0,0,null),this.forEachObserver(X=>{X.tileWillBePausedByDownlinkPolicy(H.id())}),H.pause(),this.logger.info(`bwe: Created video tile ${H.id()} for bw paused attendee ${M.attendeeId}`),this.pausedBwAttendeeIds.add(M.attendeeId)}}}}}cleanBwPausedTiles(_){if(!this.tileController){this.logger.warn("tileController not found!");return}const P=this.tileController.getAllRemoteVideoTiles(),L=this.getCurrentVideoPreferences();for(const A of P){const M=A.state();M.boundVideoStream||(_.some(k=>k.attendeeId===M.boundAttendeeId)?L!==void 0&&!L.some(k=>k.attendeeId===M.boundAttendeeId)&&this.tileController.removeVideoTile(M.tileId):(this.tileController.removeVideoTile(M.tileId),this.logger.info(`bwe: Removed video tile ${M.tileId} for bw paused attendee ${M.boundAttendeeId}`)))}}priorityPolicy(_,P,L){let A;const M=this.getCurrentVideoPreferences(),k=M.highestPriority();let G,K=k;for(;K!==-1;){G=-1;for(const H of M)if(H.priority===K)for(const X of P)X.attendeeId===H.attendeeId&&(L.some(oe=>oe.groupId===X.groupId)||(_.chosenTotalBitrate+X.avgBitrateKbps<=_.targetDownlinkBitrate?(L.push(X),_.chosenTotalBitrate+=X.avgBitrateKbps):_.deltaToNextUpgrade===0&&(_.deltaToNextUpgrade=X.avgBitrateKbps,A=X)));else if(H.priority>K){G=H.priority;break}for(const H of M)if(H.priority===K){for(const X of P)if(X.attendeeId===H.attendeeId){const oe=L.findIndex(le=>le.groupId===X.groupId&&le.maxBitrateKbps<=X.maxBitrateKbps&&le.avgBitrateKbps<X.avgBitrateKbps);if(oe!==-1){const le=X.avgBitrateKbps-L[oe].avgBitrateKbps;this.hasSimulcastStreams(P,X.attendeeId,X.groupId)&&this.canUpgrade(X.avgBitrateKbps,H.targetSize,H.targetSizeToBitrateKbps(H.targetSize),X.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${X.attendeeId} group: ${X.groupId} has simulcast and can upgrade avgBitrate: ${X.avgBitrateKbps} target: ${H.targetSizeToBitrateKbps(H.targetSize)} targetTotalBitrate: ${_.targetDownlinkBitrate}`),_.chosenTotalBitrate+le<=_.targetDownlinkBitrate?(_.chosenTotalBitrate+=le,L[oe]=X):_.deltaToNextUpgrade===0&&(_.deltaToNextUpgrade=le,A=X)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(H.priority>K)break;if(K===k&&_.deltaToNextUpgrade!==0)break;K=G}return A}getVideoTileForAttendeeId(_,P){for(const L of P)if(L.state().boundAttendeeId===_)return L;return null}canUpgrade(_,P,L,A){let M=!1;return(P===S.default.High||!A&&_<=L||A&&P===S.default.Medium&&_<=L)&&(M=!0),M?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${_} targetBitrateKbps: ${L}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${_} targetBitrateKbps: ${L}`),!1)}hasSimulcastStreams(_,P,L){let A=0;for(const M of _)M.attendeeId===P&&M.groupId===L&&A++;return this.logger.info(`bwe: attendeeId: ${P} groupId: ${L} hasSimulcastStreams: streamCount: ${A}`),A>1}streamsWithPreferenceDidChange(_){if(this.previousStreamsWithPreference===void 0||_.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const P of _)if(this.previousStreamsWithPreference.find(A=>A.groupId===P.groupId&&A.streamId===P.streamId&&A.maxBitrateKbps===P.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(_){if(this.optimalNonPausedReceiveStreams.length!==_.length)return!1;for(const P of this.optimalNonPausedReceiveStreams)if(!_.some(L=>L.streamId===P.streamId))return!1;return!0}policyStateLogStr(_,P){const L=this.calculateSubscribeRate(this.optimalReceiveStreams),A={targetBitrate:P,subscribedRate:L,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let M="remoteInfos: [";for(const G of _)M+=`{grpId:${G.groupId} strId:${G.streamId} maxBr:${G.maxBitrateKbps} avgBr:${G.avgBitrateKbps}}, `;M+="]";let k=`bwe: optimalReceiveSet ${JSON.stringify(A)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${M}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(k+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?k+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:k+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,k}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(_){this.serverSideNetworkAdaption=_,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[n.default.None,n.default.BandwidthProbing,n.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let _=this.getCurrentVideoPreferences();return _||(_=y.VideoPreferences.prepare().build()),_}wantsAllTemporalLayersInIndex(){return!0}constructor(_,P=T.default.Default){this.logger=_,this.videoPriorityBasedPolicyConfig=P,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.reset()}},"VideoPriorityBasedPolicy");d.default=F,F.DEFAULT_BANDWIDTH_KBPS=2800,F.STARTUP_PERIOD_MS=6e3,F.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,F.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,F.LOW_BITRATE_THRESHOLD_KBPS=300,F.MIN_TIME_BETWEEN_PROBE_MS=5e3,F.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,F.MAX_HOLD_BEFORE_PROBE_MS=3e4,F.MAX_ALLOWED_PROBE_TIME_MS=6e4,F.SPURIOUS_PACKET_LOST_THRESHOLD=2,F.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},"59sL":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("Sa54")),u=g(h("AM8c"));let m=a(class Dd{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return u.default.semverString}static get sdkVersionSemVer(){var o,i,e,t;const n=u.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(o=n==null?void 0:n.groups)===null||o===void 0?void 0:o.major,minor:(i=n==null?void 0:n.groups)===null||i===void 0?void 0:i.minor,patch:(e=n==null?void 0:n.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=n==null?void 0:n.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return u.default.hash.substr(1)}static get sdkUserAgentLowResolution(){const o=new p.default;return`${o.name()}-${o.majorVersion()}`}static urlWithVersion(o){const i=new URL(o);return i.searchParams.append(Dd.X_AMZN_VERSION,Dd.sdkVersion),i.searchParams.append(Dd.X_AMZN_USER_AGENT,Dd.sdkUserAgentLowResolution),i.toString()}},"Versioning");d.default=m,m.X_AMZN_VERSION="X-Amzn-Version",m.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},"5Qq4":function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={FeatureNotEnabled:"feature_not_enabled",OperationNotAllowed:"operation_not_allowed"},t=Object(s.a)("externalWorkspaces.invites.listSent generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"externalWorkspaces.invites.listSent",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to externalWorkspaces.invites.listSent
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesListSentFetcher",description:"externalWorkspaces.invites.listSent generated fetcher"}},"5ViG":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("DG83")),m=p(h("aVV0"));let s=a(class extends m.default{run(){return g(this,void 0,void 0,function*(){const i=this.context.transceiverController;i.setPeer(this.context.peer),i.setupLocalTransceivers();const e=this.context.activeAudioInput;if(e){const n=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield i.setAudioInput(n.length?n[0]:null)}else yield i.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const n=t.getVideoTracks(),r=n.length?n[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield i.setVideoInput(r),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const c=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();i.setEncodingParameters(c)}r&&this.context.statsCollector.logVideoEvent(u.default.InputAttached,this.context.videoDeviceInformation)}else yield i.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=i.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive)})}setAudioCodecPreferences(){const i=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!i){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:n}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(n,null,4)}`);const r=n.findIndex(c=>c.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(r>=0){const c=n[r];n.splice(r,1),e?(n.unshift(c),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(n);return}this.context.logger.info("audio/red codec not supported")}constructor(i){super(i.logger),this.context=i,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");d.default=s},"5Y0c":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("HbHZ")),m=h("XCDq"),s=p(h("j+uH"));let o=a(class extends s.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return g(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(e){if(e.type!==u.default.ReceivedSignalFrame||e.message.type!==m.SdkSignalFrame.Type.PAUSE&&e.message.type!==m.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,n=e.message.type;if(this.context.logger.info(`received new ${n===m.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const r=t.groupIds.map(c=>{const f=this.context.videoStreamIndex.attendeeIdForGroupId(c);return this.context.videoTileController.getVideoTileForAttendeeId(f)});for(const c of r)c!==void 0&&(n===m.SdkSignalFrame.Type.PAUSE?c.state().paused||(this.serverPausedVideoTileIds.add(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(f=>{f.tileWillBePausedByDownlinkPolicy(c.id())}),c.pause()):c.state().paused&&this.serverPausedVideoTileIds.has(c.id())&&(this.serverPausedVideoTileIds.delete(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(f=>{f.tileWillBeUnpausedByDownlinkPolicy(c.id())}),c.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");d.default=o},"5mR7":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("34ho")),u=g(h("uaNU")),m=h("P7D+"),s=g(h("knPd"));let o=a(class extends s.default{reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(e){super.updateIndex(e);const t=m.VideoPreferences.prepare();let n=!1;const r=e.remoteStreamDescriptions();for(const c of r)t.some(f=>f.attendeeId===c.attendeeId)||(c.attendeeId.endsWith(p.default.Modality)?(t.add(new u.default(c.attendeeId,1)),n=!0):t.add(new u.default(c.attendeeId,2)));n?(this.videoPreferences=t.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(e){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(e){super(e),this.logger=e,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");d.default=o},"5mqp":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class Lu{clone(){const u=new Lu;return u.tileId=this.tileId,u.localTile=this.localTile,u.isContent=this.isContent,u.active=this.active,u.paused=this.paused,u.poorConnection=this.poorConnection,u.boundAttendeeId=this.boundAttendeeId,u.boundExternalUserId=this.boundExternalUserId,u.boundVideoStream=this.boundVideoStream,u.boundVideoElement=this.boundVideoElement,u.nameplate=this.nameplate,u.videoStreamContentWidth=this.videoStreamContentWidth,u.videoStreamContentHeight=this.videoStreamContentHeight,u.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,u.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,u.devicePixelRatio=this.devicePixelRatio,u.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,u.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,u.streamId=this.streamId,u}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null}},"VideoTileState");d.default=g},"5rM1":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(u,m){this.signalingURL=u,this.joinToken=m}},"SignalingClientConnectionRequest");d.default=g},"5rZr":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"TranscriptResult");d.default=g},"5xrR":function(W,d,h){"use strict";W.exports=u;var g=h("s0Ci");(u.prototype=Object.create(g.prototype)).constructor=u;var p=h("kU+7");function u(m){g.call(this,m)}a(u,"BufferReader"),u._configure=function(){p.Buffer&&(u.prototype._slice=p.Buffer.prototype.slice)},u.prototype.string=a(function(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))},"read_string_buffer"),u._configure()},"5z6C":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("bTau")),m=h("f2XL"),s=p(h("aVV0"));let o=a(class extends s.default{checkAndApplyVideoConstraint(e,t,n,r,c){return g(this,void 0,void 0,function*(){const f=t.getSettings();let S;if(e?S=this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:S=this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution,n>S.videoWidth||r>S.videoHeight||c>S.videoFrameRate){const l={width:{ideal:S.videoWidth},height:{ideal:S.videoHeight},frameRate:{ideal:S.videoFrameRate}};this.context.logger.warn(`Video track (content = ${e}) will be constrained to: ${JSON.stringify(l)} to remain below configured video quality settings, trackSettings: ${JSON.stringify(f)}`);try{yield t.applyConstraints(l)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}}})}run(){return g(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===m.SdkStreamServiceType.RX||this.context.videoDuplexMode===m.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?m.SdkStreamServiceType.DUPLEX:m.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?m.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let n;try{n=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const r=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(r.values()))}if(this.context.activeVideoInput=n,n){const r=n.getVideoTracks();if(!r||r.length===0)return;const c=this.context.meetingSessionConfiguration.credentials.attendeeId,f=new u.default(c).hasModality(u.default.MODALITY_CONTENT),S=r[0].getSettings();if(this.context.enableSimulcast){const y=this.context.videoUplinkBandwidthPolicy.chooseMediaTrackConstraints();this.context.logger.info(`simulcast: choose constraint ${JSON.stringify(y)}`);try{yield r[0].applyConstraints(y)}catch{this.context.logger.info("simulcast: pass video without more constraint")}}else this.checkAndApplyVideoConstraint(f,r[0],S.width,S.height,S.frameRate);const l=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(c,!0,n,S.width,S.height,null,l);for(let y=0;y<r.length;y++){const T=r[y];this.logger.info(`using video device label=${T.label} id=${T.id}`),this.context.videoDeviceInformation.current_camera_name=T.label,this.context.videoDeviceInformation.current_camera_id=T.id}}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");d.default=o},"6/h7":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("yQ3g"));let u=a(class extends p.default{static nextTick(s){setTimeout(s,0)}constructor(){super(0)}},"AsyncScheduler");d.default=u},"6Bxv":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=h("f2XL"),u=g(h("lUhs"));let m=a(class Un{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case u.default.AudioAuthenticationRejected:case u.default.AudioCallAtCapacity:case u.default.AudioInternalServerError:case u.default.AudioServiceUnavailable:case u.default.AudioDisconnected:case u.default.VideoCallAtSourceCapacity:case u.default.SignalingBadRequest:case u.default.SignalingInternalServerError:case u.default.SignalingRequestFailed:case u.default.ICEGatheringTimeoutWorkaround:case u.default.ConnectionHealthReconnect:case u.default.RealtimeApiFailed:case u.default.TaskFailed:case u.default.NoAttendeePresent:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case u.default.Left:case u.default.AudioJoinedFromAnotherDevice:case u.default.AudioAuthenticationRejected:case u.default.AudioCallAtCapacity:case u.default.MeetingEnded:case u.default.AudioDisconnected:case u.default.TURNCredentialsForbidden:case u.default.SignalingBadRequest:case u.default.SignalingRequestFailed:case u.default.VideoCallAtSourceCapacity:case u.default.RealtimeApiFailed:case u.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case u.default.AudioAuthenticationRejected:case u.default.AudioInternalServerError:case u.default.AudioServiceUnavailable:case u.default.ICEGatheringTimeoutWorkaround:case u.default.SignalingBadRequest:case u.default.SignalingInternalServerError:case u.default.SignalingRequestFailed:case u.default.RealtimeApiFailed:case u.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case u.default.OK:return"Everything is OK so far.";case u.default.Left:return"The attendee left the meeting.";case u.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case u.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case u.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case u.default.MeetingEnded:return"The meeting ended.";case u.default.AudioInternalServerError:case u.default.AudioServiceUnavailable:case u.default.AudioDisconnected:return"The audio connection failed.";case u.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case u.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case u.default.SignalingBadRequest:case u.default.SignalingInternalServerError:case u.default.SignalingRequestFailed:return"The signaling connection failed.";case u.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case u.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case u.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case u.default.TaskFailed:return"The connection failed. See the error message for more details.";case u.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case u.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case u.default.NoAttendeePresent:return"The attendee was not present.";case u.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case u.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case u.default.AudioDisconnectAudio:return"The audio connection failed.";default:{const o=this._statusCode;throw new Error(`Unhandled case: ${o}`)}}}static fromSignalFrame(o){return o.error&&o.error.status?this.fromSignalingStatus(o.error.status):o.type===p.SdkSignalFrame.Type.AUDIO_STATUS?o.audioStatus?this.fromAudioStatus(o.audioStatus.audioStatus):new Un(u.default.SignalingRequestFailed):o.type===p.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new Un(u.default.AudioVideoWasRemovedFromPrimaryMeeting):new Un(u.default.OK)}static fromAudioStatus(o){switch(o){case 200:return new Un(u.default.OK);case 301:return new Un(u.default.AudioJoinedFromAnotherDevice);case 302:return new Un(u.default.AudioDisconnectAudio);case 403:return new Un(u.default.AudioAuthenticationRejected);case 409:return new Un(u.default.AudioCallAtCapacity);case 410:return new Un(u.default.MeetingEnded);case 411:return new Un(u.default.AudioAttendeeRemoved);case 500:return new Un(u.default.AudioInternalServerError);case 503:return new Un(u.default.AudioServiceUnavailable);default:switch(Math.floor(o/100)){case 2:return new Un(u.default.OK);default:return new Un(u.default.AudioDisconnected)}}}static fromSignalingStatus(o){switch(o){case 206:return new Un(u.default.VideoCallSwitchToViewOnly);case 509:return new Un(u.default.VideoCallAtSourceCapacity);case 403:return new Un(u.default.AudioAuthenticationRejected);case 409:return new Un(u.default.AudioCallAtCapacity);default:switch(Math.floor(o/100)){case 2:return new Un(u.default.OK);case 4:return new Un(u.default.SignalingBadRequest);case 5:return new Un(u.default.SignalingInternalServerError);default:return new Un(u.default.SignalingRequestFailed)}}}constructor(o){this._statusCode=o}},"MeetingSessionStatus");d.default=m},"6DYs":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{matchesConstraints(u){return JSON.stringify(this.constraints)===JSON.stringify(u)}constructor(){this.groupId=""}},"DeviceSelection");d.default=g},"6JeQ":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(n,r,c,f){function S(l){return l instanceof c?l:new c(function(y){y(l)})}return a(S,"adopt"),new(c||(c=Promise))(function(l,y){function T(F){try{R(f.next(F))}catch(U){y(U)}}a(T,"fulfilled");function O(F){try{R(f.throw(F))}catch(U){y(U)}}a(O,"rejected");function R(F){F.done?l(F.value):S(F.value).then(T,O)}a(R,"step"),R((f=f.apply(n,r||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(d,"__esModule",{value:!0}),d.VoiceFocusDeviceTransformer=void 0;const u=h("o4xN"),m=h("R4Nl"),s=p(h("59sL")),o=p(h("X9Jc")),i=p(h("25+x")),e=p(h("8Bz5"));let t=a(class To{static isSupported(r,c){var f,S;const l=To.defaultFetchBehavior(),y=c!=null&&c.logger?new o.default(c.logger):void 0,T={fetchBehavior:l,logger:y};if(m.isIFramed()){if((c==null?void 0:c.allowIFrame)===!1)return(f=c==null?void 0:c.logger)===null||f===void 0||f.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(S=c==null?void 0:c.logger)===null||S===void 0||S.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return u.VoiceFocus.isSupported(To.augmentSpec(r),T)}static create(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;var y,T,O;return g(this,void 0,void 0,function*(){S&&S.Meeting.Meeting&&(S=S.Meeting);const R=((O=(T=(y=S==null?void 0:S.Meeting)===null||y===void 0?void 0:y.MeetingFeatures)===null||T===void 0?void 0:T.Audio)===null||O===void 0?void 0:O.EchoReduction)==="AVAILABLE",F=f&&f.supported===!0&&f.model.name==="ns_es"&&!R,U=r.name==="ns_es"&&!R;if(F||U)throw new Error("Echo Reduction requested but not enabled.");const _=new To(r,c,f);return yield _.init(),_})}static configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return g(this,void 0,void 0,function*(){return new To(r,c,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(r,c){return g(this,void 0,void 0,function*(){if(this.supported)try{const[S,l]=yield this.allocateVoiceFocus(!0),y=Object.assign(Object.assign({},c),{es:this.spec.name==="ns_es"});return new i.default(r,S,l,y)}catch{return}})}static destroyVoiceFocus(r){var c;return g(this,void 0,void 0,function*(){(c=r==null?void 0:r.vf)===null||c===void 0||c.destroy()})}static augmentSpec(r){return!r||!r.assetGroup&&!r.revisionID?Object.assign(Object.assign({},r),{assetGroup:To.currentSDKAssetGroup()}):r}configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return g(this,void 0,void 0,function*(){const c={fetchBehavior:this.fetchBehavior,preResolve:r,logger:this.vfLogger};return u.VoiceFocus.configure(this.spec,c)})}init(){var r;return g(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const c=yield this.configuration;if(!c.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(c,this.preload);try{yield this.pendingVoiceFocus}catch(f){(r=this.logger)===null||r===void 0||r.error(`Unable to initialize Amazon Voice Focus: ${f}`),this.supported=!1}})}createVoiceFocus(r,c){return g(this,void 0,void 0,function*(){const f=new e.default;return this.vf=yield u.VoiceFocus.init(r,{delegate:f,preload:c,logger:this.vfLogger}),[this.vf,f]})}allocateVoiceFocus(r){return g(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const c=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,c}return this.createVoiceFocus(yield this.configuration,r)})}static majorVersion(){return s.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return s.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const r=this.majorVersion();return r?`sdk-${r}`:"stable-v1"}static defaultFetchBehavior(){const r=To.majorMinorVersion()||"unknown",c=s.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(r)}&ua=${encodeURIComponent(c)}`}}constructor(r,{preload:c=!0,logger:f,fetchBehavior:S=To.defaultFetchBehavior()},l){this.spec=r,this.supported=!0,this.logger=f,this.vfLogger=f?new o.default(f):void 0,this.preload=c,this.fetchBehavior=S,this.spec=To.augmentSpec(this.spec),l&&(this.configuration=Promise.resolve(l))}},"VoiceFocusDeviceTransformer");d.VoiceFocusDeviceTransformer=t,d.default=t},"6SO8":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const p=h("XCDq"),u=g(h("bjg3")),m=g(h("x8On")),s=g(h("U3GI"));let o=a(class Nu{getMetricMap(e,t){switch(e){case m.default.AUDIO:switch(t){case u.default.UPSTREAM:return this.audioUpstreamMetricMap;case u.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case m.default.VIDEO:switch(t){case u.default.UPSTREAM:return this.videoUpstreamMetricMap;case u.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],r=this.getMetricMap(t.media,t.dir)[t.source],{transform:c,source:f}=r;if(t.hasOwnProperty("media"))for(const S in this.streamMetricReports){const l=this.streamMetricReports[S];if(l.direction===t.dir&&l.mediaType===t.media)return c(f||t.source,Number(S))}else return c(f||t.source);return 0}getObservableVideoMetricValue(e,t){const n=this.observableVideoMetricSpec[e],c=this.getMetricMap(n.media,n.dir)[n.source],{transform:f,source:S}=c;return f(S||n.source,t)}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===m.default.VIDEO){const n={};for(const S in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[S].dir===this.streamMetricReports[t].direction){const l=this.getObservableVideoMetricValue(S,Number(t));isNaN(l)||(n[S]=l)}const r=this.streamMetricReports[t].groupId,c=this.streamMetricReports[t].streamId;let f="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?f=r?this.videoStreamIndex.attendeeIdForGroupId(r):this.selfAttendeeId:f=c?this.videoStreamIndex.attendeeIdForStreamId(c):this.selfAttendeeId,e[f]=e[f]?e[f]:{},e[f][t]=n}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new Nu(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,n){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=n,this.globalMetricReport=new s.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(r,c)=>{const f=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(f.currentMetrics[r])},this.decoderLossPercent=(r,c)=>{const f=this.streamMetricReports[c],S=f.currentMetrics.concealedSamples-(f.previousMetrics.concealedSamples||0),l=f.currentMetrics.totalSamplesReceived-(f.previousMetrics.totalSamplesReceived||0);return l<=0||l-S<=0?0:S/l*100},this.packetLossPercent=(r,c)=>{const f=this.streamMetricReports[c],S=f.currentMetrics[r]-(f.previousMetrics[r]||0),l=f.currentMetrics.packetsLost-(f.previousMetrics.packetsLost||0),y=S+l;return y<=0||l<=0?0:l*100/y},this.jitterBufferMs=(r,c)=>{const f=this.streamMetricReports[c],S=f.currentMetrics.jitterBufferDelay-(f.previousMetrics.jitterBufferDelay||0),l=f.currentMetrics.jitterBufferEmittedCount-(f.previousMetrics.jitterBufferEmittedCount||0);return S<=0||l<=0?0:S/l*1e3},this.countPerSecond=(r,c)=>{const f=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const l=f.currentMetrics[r]-(f.previousMetrics[r]||0);return l<=0?0:Math.trunc(l/S)},this.bitsPerSecond=(r,c)=>{const f=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const l=(f.currentMetrics[r]-(f.previousMetrics[r]||0))*8;return l<=0?0:Math.trunc(l/S)},this.secondsToMilliseconds=(r,c)=>{const f=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(f.currentMetrics[r]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(r,c)=>{const f=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const l=f.currentMetrics[r]-(f.previousMetrics[r]||0);return l<=0?0:l*1e3/S},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(r,c)=>{const f=this.streamMetricReports[c];let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);let l=0,y=0;for(const[O,R]of Object.entries(f.previousObjectMetrics[r]))O==="cpu"&&(l=R);for(const[O,R]of Object.entries(f.currentObjectMetrics[r]))O==="cpu"&&(y=R);const T=y-l;return T<=0?0:T*1e3/S},this.isHardwareImplementation=(r,c)=>{const f=this.streamMetricReports[c],S=String(f.currentStringMetrics[r]),l=S.includes("ExternalDecoder")||S.includes("ExternalEncoder")||S.includes("EncodeAccelerator")||S.includes("DecodeAccelerator"),y=S.includes("fallback from");return l&&!y?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:p.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:p.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:p.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:p.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:p.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:p.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:p.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:p.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_DROPPED_FPS}},this.streamDimensionMap={encoderImplementation:p.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:p.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:m.default.VIDEO,dir:u.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:m.default.AUDIO,dir:u.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:m.default.AUDIO,dir:u.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.AUDIO,dir:u.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:u.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:m.default.VIDEO,dir:u.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");d.default=o},"6k+I":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.isAudioTransformDevice=void 0;function g(p){return!!p&&typeof p=="object"&&"mute"in p&&"stop"in p&&"intrinsicDevice"in p}a(g,"isAudioTransformDevice"),d.isAudioTransformDevice=g},"6k9T":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckVideoInputFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.Failed=1]="Failed",p[p.PermissionDenied=2]="PermissionDenied"})(g=d.CheckVideoInputFeedback||(d.CheckVideoInputFeedback={})),d.default=g},"6qF3":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.FXLIB_PATH=d.WORKER_PATH=d.CDN_BASE_PATH=d.RESOURCE_CONSTRAINTS=d.SEGMENTATION_MODEL=d.DEFAULT_STREAM_PARAMETERS=d.WORKER_MSG=void 0,d.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},d.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},d.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},d.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},d.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const g="/ml_media_fx/otherassets";d.WORKER_PATH=`${g}/worker.js`,d.FXLIB_PATH=`${g}/fxlib.js`},"725M":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});function g(u){return u.map(m=>typeof m=="object"?JSON.stringify(m):`${m}`).join(" ")}a(g,"stringify");let p=a(class{debug(){for(var m=arguments.length,s=new Array(m),o=0;o<m;o++)s[o]=arguments[o];this.base.debug(g(s))}info(){for(var m=arguments.length,s=new Array(m),o=0;o<m;o++)s[o]=arguments[o];this.base.info(g(s))}warn(){for(var m=arguments.length,s=new Array(m),o=0;o<m;o++)s[o]=arguments[o];this.base.warn(g(s))}error(){for(var m=arguments.length,s=new Array(m),o=0;o<m;o++)s[o]=arguments[o];this.base.error(g(s))}constructor(m){this.base=m}},"LoggerAdapter");d.default=p},"7Dzo":function(W,d,h){"use strict";h.d(d,"a",function(){return g});const g={NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",OrgsSevered:"orgs_severed",OrgNotVerified:"org_not_verified",UserIsRestricted:"user_is_restricted",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match",Generic:"generic"}},"7EAL":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("j+uH"));let m=a(class extends u.default{run(){return g(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(o){super(o.logger),this.context=o,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");d.default=m},"7H4U":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=a(p=>{const u={};for(const[m,s]of Object.entries(p))if(!(s==null||s===""))if(typeof s=="number"||typeof s=="string")u[m]=s;else throw new TypeError("Unhandled type received while flattening attributes.");return u},"flattenEventAttributes");d.default=g},"7JaV":function(W,d,h){"use strict";h.r(d),h.d(d,"__extends",function(){return p}),h.d(d,"__assign",function(){return u}),h.d(d,"__rest",function(){return m}),h.d(d,"__decorate",function(){return s}),h.d(d,"__param",function(){return o}),h.d(d,"__metadata",function(){return i}),h.d(d,"__awaiter",function(){return e}),h.d(d,"__generator",function(){return t}),h.d(d,"__createBinding",function(){return n}),h.d(d,"__exportStar",function(){return r}),h.d(d,"__values",function(){return c}),h.d(d,"__read",function(){return f}),h.d(d,"__spread",function(){return S}),h.d(d,"__spreadArrays",function(){return l}),h.d(d,"__await",function(){return y}),h.d(d,"__asyncGenerator",function(){return T}),h.d(d,"__asyncDelegator",function(){return O}),h.d(d,"__asyncValues",function(){return R}),h.d(d,"__makeTemplateObject",function(){return F}),h.d(d,"__importStar",function(){return U}),h.d(d,"__importDefault",function(){return _}),h.d(d,"__classPrivateFieldGet",function(){return P}),h.d(d,"__classPrivateFieldSet",function(){return L});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var g=a(function(A,M){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,G){k.__proto__=G}||function(k,G){for(var K in G)G.hasOwnProperty(K)&&(k[K]=G[K])},g(A,M)},"extendStatics");function p(A,M){g(A,M);function k(){this.constructor=A}a(k,"__"),A.prototype=M===null?Object.create(M):(k.prototype=M.prototype,new k)}a(p,"__extends");var u=a(function(){return u=Object.assign||a(function(M){for(var k,G=1,K=arguments.length;G<K;G++){k=arguments[G];for(var H in k)Object.prototype.hasOwnProperty.call(k,H)&&(M[H]=k[H])}return M},"__assign"),u.apply(this,arguments)},"__assign");function m(A,M){var k={};for(var G in A)Object.prototype.hasOwnProperty.call(A,G)&&M.indexOf(G)<0&&(k[G]=A[G]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,G=Object.getOwnPropertySymbols(A);K<G.length;K++)M.indexOf(G[K])<0&&Object.prototype.propertyIsEnumerable.call(A,G[K])&&(k[G[K]]=A[G[K]]);return k}a(m,"__rest");function s(A,M,k,G){var K=arguments.length,H=K<3?M:G===null?G=Object.getOwnPropertyDescriptor(M,k):G,X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(A,M,k,G);else for(var oe=A.length-1;oe>=0;oe--)(X=A[oe])&&(H=(K<3?X(H):K>3?X(M,k,H):X(M,k))||H);return K>3&&H&&Object.defineProperty(M,k,H),H}a(s,"__decorate");function o(A,M){return function(k,G){M(k,G,A)}}a(o,"__param");function i(A,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(A,M)}a(i,"__metadata");function e(A,M,k,G){function K(H){return H instanceof k?H:new k(function(X){X(H)})}return a(K,"adopt"),new(k||(k=Promise))(function(H,X){function oe(he){try{re(G.next(he))}catch(Pe){X(Pe)}}a(oe,"fulfilled");function le(he){try{re(G.throw(he))}catch(Pe){X(Pe)}}a(le,"rejected");function re(he){he.done?H(he.value):K(he.value).then(oe,le)}a(re,"step"),re((G=G.apply(A,M||[])).next())})}a(e,"__awaiter");function t(A,M){var k={label:0,sent:function(){if(H[0]&1)throw H[1];return H[1]},trys:[],ops:[]},G,K,H,X;return X={next:oe(0),throw:oe(1),return:oe(2)},typeof Symbol=="function"&&(X[Symbol.iterator]=function(){return this}),X;function oe(re){return function(he){return le([re,he])}}function le(re){if(G)throw new TypeError("Generator is already executing.");for(;k;)try{if(G=1,K&&(H=re[0]&2?K.return:re[0]?K.throw||((H=K.return)&&H.call(K),0):K.next)&&!(H=H.call(K,re[1])).done)return H;switch(K=0,H&&(re=[re[0]&2,H.value]),re[0]){case 0:case 1:H=re;break;case 4:return k.label++,{value:re[1],done:!1};case 5:k.label++,K=re[1],re=[0];continue;case 7:re=k.ops.pop(),k.trys.pop();continue;default:if(H=k.trys,!(H=H.length>0&&H[H.length-1])&&(re[0]===6||re[0]===2)){k=0;continue}if(re[0]===3&&(!H||re[1]>H[0]&&re[1]<H[3])){k.label=re[1];break}if(re[0]===6&&k.label<H[1]){k.label=H[1],H=re;break}if(H&&k.label<H[2]){k.label=H[2],k.ops.push(re);break}H[2]&&k.ops.pop(),k.trys.pop();continue}re=M.call(A,k)}catch(he){re=[6,he],K=0}finally{G=H=0}if(re[0]&5)throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}}a(t,"__generator");function n(A,M,k,G){G===void 0&&(G=k),A[G]=M[k]}a(n,"__createBinding");function r(A,M){for(var k in A)k!=="default"&&!M.hasOwnProperty(k)&&(M[k]=A[k])}a(r,"__exportStar");function c(A){var M=typeof Symbol=="function"&&Symbol.iterator,k=M&&A[M],G=0;if(k)return k.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&G>=A.length&&(A=void 0),{value:A&&A[G++],done:!A}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}a(c,"__values");function f(A,M){var k=typeof Symbol=="function"&&A[Symbol.iterator];if(!k)return A;var G=k.call(A),K,H=[],X;try{for(;(M===void 0||M-- >0)&&!(K=G.next()).done;)H.push(K.value)}catch(oe){X={error:oe}}finally{try{K&&!K.done&&(k=G.return)&&k.call(G)}finally{if(X)throw X.error}}return H}a(f,"__read");function S(){for(var A=[],M=0;M<arguments.length;M++)A=A.concat(f(arguments[M]));return A}a(S,"__spread");function l(){for(var A=0,M=0,k=arguments.length;M<k;M++)A+=arguments[M].length;for(var G=Array(A),K=0,M=0;M<k;M++)for(var H=arguments[M],X=0,oe=H.length;X<oe;X++,K++)G[K]=H[X];return G}a(l,"__spreadArrays");function y(A){return this instanceof y?(this.v=A,this):new y(A)}a(y,"__await");function T(A,M,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=k.apply(A,M||[]),K,H=[];return K={},X("next"),X("throw"),X("return"),K[Symbol.asyncIterator]=function(){return this},K;function X(pe){G[pe]&&(K[pe]=function(Me){return new Promise(function(We,Ae){H.push([pe,Me,We,Ae])>1||oe(pe,Me)})})}function oe(pe,Me){try{le(G[pe](Me))}catch(We){Pe(H[0][3],We)}}function le(pe){pe.value instanceof y?Promise.resolve(pe.value.v).then(re,he):Pe(H[0][2],pe)}function re(pe){oe("next",pe)}function he(pe){oe("throw",pe)}function Pe(pe,Me){pe(Me),H.shift(),H.length&&oe(H[0][0],H[0][1])}}a(T,"__asyncGenerator");function O(A){var M,k;return M={},G("next"),G("throw",function(K){throw K}),G("return"),M[Symbol.iterator]=function(){return this},M;function G(K,H){M[K]=A[K]?function(X){return(k=!k)?{value:y(A[K](X)),done:K==="return"}:H?H(X):X}:H}}a(O,"__asyncDelegator");function R(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=A[Symbol.asyncIterator],k;return M?M.call(A):(A=typeof c=="function"?c(A):A[Symbol.iterator](),k={},G("next"),G("throw"),G("return"),k[Symbol.asyncIterator]=function(){return this},k);function G(H){k[H]=A[H]&&function(X){return new Promise(function(oe,le){X=A[H](X),K(oe,le,X.done,X.value)})}}function K(H,X,oe,le){Promise.resolve(le).then(function(re){H({value:re,done:oe})},X)}}a(R,"__asyncValues");function F(A,M){return Object.defineProperty?Object.defineProperty(A,"raw",{value:M}):A.raw=M,A}a(F,"__makeTemplateObject");function U(A){if(A&&A.__esModule)return A;var M={};if(A!=null)for(var k in A)Object.hasOwnProperty.call(A,k)&&(M[k]=A[k]);return M.default=A,M}a(U,"__importStar");function _(A){return A&&A.__esModule?A:{default:A}}a(_,"__importDefault");function P(A,M){if(!M.has(A))throw new TypeError("attempted to get private field on non-instance");return M.get(A)}a(P,"__classPrivateFieldGet");function L(A,M,k){if(!M.has(A))throw new TypeError("attempted to set private field on non-instance");return M.set(A,k),k}a(L,"__classPrivateFieldSet")},"7JpI":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"ClientVideoStreamReceivingReport");d.default=g},"7TH8":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("U9CR")),m=p(h("eFki"));let s=a(class Bu{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(i){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(i)}chooseNewInnerDevice(i){const e=new Bu(this.logger,i,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return g(this,void 0,void 0,function*(){return this.device})}transformStream(i){return g(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(i),this.inputMediaStream=i,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const i=this.device&&this.device.id;if(this.pipe.stop(),!i&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return g(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const i of this.inputMediaStream.getVideoTracks())i.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(i){this.observers.add(i)}removeObserver(i){this.observers.delete(i)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(i=>{i.processingDidStart&&i.processingDidStart()})}processingLatencyTooHigh(i){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(i)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(i=>{i.processingDidFailToStart&&i.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(i=>{i.processingDidStop&&i.processingDidStop()})}forEachObserver(i){for(const e of this.observers)setTimeout(()=>{i(e)},0)}constructor(i,e,t,n=new u.default){this.logger=i,this.device=e,this.processors=t,this.browserBehavior=n,this.observers=new Set,this.pipe=new m.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");d.default=s},"7UVU":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("j+uH"));let m=a(class extends u.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const o in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[o]()}addPeerConnectionEventLogger(){const o=this.context.peer;o.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${o.connectionState}`)}),o.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),o.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${o.iceGatheringState}`)}),o.addEventListener("icecandidate",i=>{this.context.logger.info(`peer connection ice candidate: ${i.candidate?i.candidate.candidate:"(null)"}`)}),o.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${o.iceConnectionState}`)})}run(){return g(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const i=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};i.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),i.sdpSemantics="unified-plan",i.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(i),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(o){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(o)):!1}addRemoteVideoTrack(o,i){var e;const t=i.id,n=this.context.videoStreamIndex.attendeeIdForTrack(t);let r,c;if(this.context.videoTileController.getVideoTileForAttendeeId?(c=this.context.videoTileController.getVideoTileForAttendeeId(n),r=!!(!((e=c==null?void 0:c.state())===null||e===void 0)&&e.boundVideoStream)):r=this.context.videoTileController.haveVideoTileForAttendeeId(n),r){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${n}`);return}c||(c=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${c.id()}`));let f=this.context.videoStreamIndex.streamIdForTrack(t);typeof f>"u"&&(this.logger.warn(`stream not found for tile=${c.id()} track=${t}`),f=null);for(let F=0;F<this.trackEvents.length;F++){const U=this.trackEvents[F],_=i.getVideoTracks();if(_&&_.length){const P=_[0],L=a(()=>{this.context.logger.info(`received the ${U} event for tile=${c.id()} id=${o.id} streamId=${f}`),U==="ended"&&this.removeRemoteVideoTrack(o,c.state())},"callback");P.addEventListener(U,L),this.removeVideoTrackEventListeners[o.id]||(this.removeVideoTrackEventListeners[o.id]=[]),this.removeVideoTrackEventListeners[o.id].push(()=>{P.removeEventListener(U,L)})}}let S,l;if(o.getSettings){const F=o.getSettings();S=F.width,l=F.height}else{const F=o.getCapabilities();S=F.width,l=F.height}const y=this.context.videoStreamIndex.externalUserIdForTrack(t);c.bindVideoStream(n,!1,i,S,l,f,y),this.logger.info(`video track added, use tile=${c.id()} track=${t} streamId=${f}`);const T="removetrack",O=i,R=a(()=>this.removeRemoteVideoTrack(o,c.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[o.id]=()=>{O.removeEventListener(T,R),delete this.removeTrackRemovedEventListeners[o.id]},O.addEventListener(T,R)}removeRemoteVideoTrack(o,i){if(this.removeTrackRemovedEventListeners.hasOwnProperty(o.id)){this.removeTrackRemovedEventListeners[o.id]();for(const e of this.removeVideoTrackEventListeners[o.id])e();delete this.removeVideoTrackEventListeners[o.id]}this.logger.info(`video track ended, removing tile=${i.tileId} id=${o.id} stream=${i.streamId}`),i.streamId?this.context.videosPaused.remove(i.streamId):this.logger.warn(`no stream found for tile=${i.tileId}`),this.context.videoTileController.removeVideoTile(i.tileId)}constructor(o){super(o.logger),this.context=o,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=i=>{const e=i.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),i.transceiver&&i.transceiver.currentDirection==="inactive")return;if(i.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=i.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");d.default=m,m.REMOVE_HANDLER_INTERVAL_MS=1e4},"7W6Z":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("lUhs")),m=p(h("AUdx")),s=p(h("aVV0"));let o=a(class extends s.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const n=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),r=t||n;return this.context.logger.info(`uses video: ${r} (enabled: ${!0}, sending: ${t}, receiving: ${n})`),r}run(){return g(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,n)=>g(this,void 0,void 0,function*(){this.cancelPromise=r=>{n(r)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new m.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const r=new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,n(r);return}t()}catch(r){n(r)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");d.default=o},"7nob":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"Transcript");d.default=g},"7p5e":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"VideoSource");d.default=g},"83pg":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("Mr6q"));let u=a(class extends p.default{},"BackgroundReplacementVideoFrameProcessorDelegate");d.default=u},"87Nr":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.SessionStateControllerTransitionResult=void 0;var g;(function(p){p[p.Transitioned=0]="Transitioned",p[p.NoTransitionAvailable=1]="NoTransitionAvailable",p[p.DeferredTransition=2]="DeferredTransition",p[p.TransitionFailed=3]="TransitionFailed"})(g=d.SessionStateControllerTransitionResult||(d.SessionStateControllerTransitionResult={})),d.default=g},"8Bz5":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{addObserver(u){this.observers.add(u)}removeObserver(u){this.observers.delete(u)}onFallback(u,m){var s;for(const o of this.observers)(s=o.voiceFocusFellBackToInnerStream)===null||s===void 0||s.call(o,u,m)}onCPUWarning(){var u;for(const m of this.observers)(u=m.voiceFocusInsufficientResources)===null||u===void 0||u.call(m)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");d.default=g},"8FET":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(u=5e3,m=2,s=64,o=100,i=15){this.flushIntervalMs=u,this.flushSize=m,this.maxBufferCapacityKb=s,this.totalBufferItems=o,this.retryCountLimit=i}},"EventBufferConfiguration");d.default=g},"8V8Y":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=.8;let p=a(class{reportEvent(m){const s=m-this.lastReportedEventTimestamp;if(s>=this.reportingPeriodMillis){const o=this.filterCount,i=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=m,this.framerate===0||o===0)return;const e=Math.round(i/o),t=Math.round(this.framerate*(s/1e3))-o,n=Math.round(100*i/s);e>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:t,avgFilterDurationMillis:e,framerate:this.framerate,periodMillis:s}),n>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:n,filterMillis:i,periodMillis:s})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*g)}frameReceived(m){m!==this.framerate&&(this.framerate=m,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const s=Date.now();this.reportEvent(s)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(m,s,o,i){this.delegate=m,this.reportingPeriodMillis=s,this.filterCPUUtilization=o,this.logger=i,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");d.default=p},"8dVZ":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=h("KyYT");let p=a(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(m){m===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):m<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(m,s,o){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",s),this.statsCollector.logLatency("ping_pong_clock_skew",o),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(m){let s=0,o=0;const i=m.getObservableMetrics(),e=i.audioPacketsReceived,t=i.audioPacketsReceivedFractionLoss,n=i.audioSpeakerDelayMs;typeof n=="number"&&!isNaN(n)&&this.connectionHealthData.setAudioSpeakerDelayMs(n);const r=m.getRTCStatsReport();let c=0;r.forEach(S=>{S.type==="candidate-pair"&&S.packetsReceived&&(c+=S.packetsReceived)});const f=c-this.lastTotalPacketsReceived;if(this.lastTotalPacketsReceived=c,typeof e=="number"&&typeof t=="number"){if(s=e,o=t,s<0||o<0||f<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,s),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,o),f>0?(this.hasSeenValidPacketMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidPacketMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(s===0||o>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof i.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(i.audioPacketsSent),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(m){m>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}addToMinuteWindow(m,s){m.unshift(s),m.length>60&&m.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(m=>{g.Maybe.of(m.connectionHealthDidChange).map(s=>s.bind(m)(this.connectionHealthData.clone()))})}constructor(m,s,o,i,e){this.audioVideoController=m,this.realtimeController=s,this.connectionHealthData=o,this.pingPong=i,this.statsCollector=e,this.isActive=!1,this.hasSeenValidPacketMetricsBefore=!1,this.lastTotalPacketsReceived=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");d.default=p},"8pZh":function(W,d,h){"use strict";var g=h("MkRQ"),p=h("LV2V"),u=h("4k7n"),m=h("AQwl"),s=h("qAkX"),o=Object(p.a)(function(i){var e=Object(s.a)(i);return e=typeof e=="function"?e:void 0,Object(u.a)(Object(g.a)(i,m.a),void 0,e)});d.a=o},"8tla":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("aVV0")),m=p(h("Sl5A"));let s=a(class extends u.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return g(this,void 0,void 0,function*(){for(const i of this.tasksToRunSerially){this.getStatus()===m.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${i.name()}`),this.currentTask=i,yield i.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${i.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const n of t)n.setParent(this)}},"SerialGroupTask");d.default=s},"8wPz":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{start(u){this.stop(),this.timer=setInterval(u,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(u){this.intervalMs=u}},"IntervalScheduler");d.default=g},"91j7":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(u,m,s,o){this.sequenceNumber=u,this.message=m,this.timestampMs=s,this.logLevel=o}},"Log");d.default=g},"92Bn":function(W,d,h){"use strict";W.exports=u;var g=h("hl97");(u.prototype=Object.create(g.prototype)).constructor=u;var p=h("kU+7");function u(){g.call(this)}a(u,"BufferWriter"),u._configure=function(){u.alloc=p._Buffer_allocUnsafe,u.writeBytesBuffer=p.Buffer&&p.Buffer.prototype instanceof Uint8Array&&p.Buffer.prototype.set.name==="set"?a(function(o,i,e){i.set(o,e)},"writeBytesBuffer_set"):a(function(o,i,e){if(o.copy)o.copy(i,e,0,o.length);else for(var t=0;t<o.length;)i[e++]=o[t++]},"writeBytesBuffer_copy")},u.prototype.bytes=a(function(o){p.isString(o)&&(o=p._Buffer_from(o,"base64"));var i=o.length>>>0;return this.uint32(i),i&&this._push(u.writeBytesBuffer,i,o),this},"write_bytes_buffer");function m(s,o,i){s.length<40?p.utf8.write(s,o,i):o.utf8Write?o.utf8Write(s,i):o.write(s,i)}a(m,"writeStringBuffer"),u.prototype.string=a(function(o){var i=p.Buffer.byteLength(o);return this.uint32(i),i&&this._push(m,i,o),this},"write_string_buffer"),u._configure()},"94P3":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("U++r")),u=g(h("my46")),m=h("VCUZ"),s=g(h("2M37")),o=g(h("/N6y")),i=g(h("GZjp"));let e=a(class{constructor(n,r){var c,f;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new p.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new s.default,n){n=m.toLowerCasePropertyNames(n),n.meeting&&(n=n.meeting),this.meetingId=n.meetingid,this.externalMeetingId=n.externalmeetingid,this.urls=new i.default,this.urls.audioHostURL=n.mediaplacement.audiohosturl,this.urls.signalingURL=n.mediaplacement.signalingurl,this.urls.turnControlURL=n.mediaplacement.turncontrolurl,n.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=n.mediaplacement.eventingestionurl);const S=a((l,y)=>{switch(l){case"None":return u.default.VideoDisabled;case"HD":return u.default.VideoResolutionHD;case"FHD":return u.default.VideoResolutionFHD;case"UHD":return u.default.VideoResolutionUHD;default:return y}},"parseVideoResolution");if(((c=n.meetingfeatures)===null||c===void 0?void 0:c.video)!==void 0||((f=n.meetingfeatures)===null||f===void 0?void 0:f.content)!==void 0){const l=n.meetingfeatures.video===void 0?"HD":n.meetingfeatures.video.maxresolution,y=n.meetingfeatures.content===void 0?"FHD":n.meetingfeatures.content.maxresolution;this.meetingFeatures=new s.default(S(l,u.default.VideoResolutionHD),S(y,u.default.VideoResolutionFHD))}}r&&(r=m.toLowerCasePropertyNames(r),r.attendee&&(r=r.attendee),this.credentials=new o.default,this.credentials.attendeeId=r.attendeeid,this.credentials.externalUserId=r.externaluserid,this.credentials.joinToken=r.jointoken)}},"MeetingSessionConfiguration");d.default=e},"9AGb":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});const p=h("KvYa"),u=h("nJ1/");let m=a(class extends u.VoiceFocusAudioWorkletNode{enable(){return g(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return g(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return g(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(o){var i;const e=o.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(o){var i;const e=o.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(o,i){super(o,i.processor,i),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:n,fetchBehavior:r,delegate:c}=i;this.delegate=c,this.worker=n,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:f,agc:S,supportFarendStream:l}=i.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:o.sampleRate===16e3?160:480,enabled:f,agc:S,fetchBehavior:r,model:e,supportFarendStream:l});const y=p.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:y,key:"buffer",fetchBehavior:r,path:t})}},"VoiceFocusWorkerPostMessageNode");d.default=m},"9BEE":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class xu{static create(u,m){const s=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!u||u.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!s.test(u))throw new Error(`appName must satisfy ${s} regular expression`);const o=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!m||m.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!o.test(m))throw new Error("appVersion must satisfy Semantic Versioning format");return new xu(u,m)}constructor(u,m){this.appName=u,this.appVersion=m}},"ApplicationMetadata");d.default=g},"9Bli":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");d.default=g},"9ETa":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=h("JHsX"),p=h("hWev"),u=h("I0Bj"),m=h("87Nr");let s=a(class{perform(i,e){const t=this.currentState;if(t===u.SessionStateControllerState.NotConnected&&i===g.SessionStateControllerAction.Connect)this.transition(u.SessionStateControllerState.Connecting,i);else if(t===u.SessionStateControllerState.Connecting&&i===g.SessionStateControllerAction.Fail)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Connecting&&i===g.SessionStateControllerAction.FinishConnecting)this.transition(u.SessionStateControllerState.Connected,i);else if(t===u.SessionStateControllerState.Connected&&i===g.SessionStateControllerAction.Disconnect)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Connected&&i===g.SessionStateControllerAction.Reconnect)this.transition(u.SessionStateControllerState.Connecting,i);else if(t===u.SessionStateControllerState.Connected&&i===g.SessionStateControllerAction.Fail)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Connected&&i===g.SessionStateControllerAction.Update)this.transition(u.SessionStateControllerState.Updating,i);else if(t===u.SessionStateControllerState.Updating&&i===g.SessionStateControllerAction.Fail)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Updating&&i===g.SessionStateControllerAction.FinishUpdating)this.transition(u.SessionStateControllerState.Connected,i);else if(t===u.SessionStateControllerState.Disconnecting&&i===g.SessionStateControllerAction.FinishDisconnecting)this.transition(u.SessionStateControllerState.NotConnected,i);else return this.canDefer(i)?(this.logger.info(`deferring transition from ${u.SessionStateControllerState[this.currentState]} with ${g.SessionStateControllerAction[i]}`),this.deferAction(i,e),m.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${u.SessionStateControllerState[this.currentState]} with ${g.SessionStateControllerAction[i]}`),m.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(n){return this.logger.error(`error during state ${u.SessionStateControllerState[this.currentState]} with action ${g.SessionStateControllerAction[i]}: ${n}`),this.logger.info(`rolling back transition to ${u.SessionStateControllerState[t]}`),this.currentState=t,m.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),m.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(i,e){this.logger.info(`transitioning from ${u.SessionStateControllerState[this.currentState]} to ${u.SessionStateControllerState[i]} with ${g.SessionStateControllerAction[e]}`),this.currentState=i}deferPriority(i){switch(i){case g.SessionStateControllerAction.Disconnect:return p.SessionStateControllerDeferPriority.VeryHigh;case g.SessionStateControllerAction.Fail:return p.SessionStateControllerDeferPriority.High;case g.SessionStateControllerAction.Reconnect:return p.SessionStateControllerDeferPriority.Medium;case g.SessionStateControllerAction.Update:return p.SessionStateControllerDeferPriority.Low;default:return p.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(i,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(i)||(this.deferredAction=i,this.deferredWork=e)}canDefer(i){return this.deferPriority(i)!==p.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===u.SessionStateControllerState.Connecting||this.currentState===u.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const i=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${g.SessionStateControllerAction[i]}`),this.perform(i,e)!==m.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${g.SessionStateControllerAction[i]} in state ${u.SessionStateControllerState[this.currentState]}`)}constructor(i){this.logger=i,this.currentState=u.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");d.default=s},"9IN5":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.MAX_HASHABLE_LENGTH=d.INIT=d.KEY=d.DIGEST_LENGTH=d.BLOCK_SIZE=void 0,d.BLOCK_SIZE=64,d.DIGEST_LENGTH=32,d.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),d.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],d.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},"9bRS":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{create(){const u={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{u.paused=!0},play:()=>(u.paused=!1,Promise.resolve())};return u}},"NoOpVideoElementFactory");d.default=g},"9mJw":function(W,d,h){"use strict";var g=h("wpDl"),p=Object(g.a)("round");d.a=p},"9oOt":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0}),d.NoOpDeviceControllerWithEventController=void 0;const u=p(h("3niY")),m=p(h("my46"));let s=a(class extends u.default{destroy(){return g(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,n){}getVideoInputQualitySettings(){return m.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");d.default=s;let o=a(class extends s{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");d.NoOpDeviceControllerWithEventController=o},A4hc:function(W,d,h){"use strict";W.exports=h("PhnE")},AI3F:function(W,d,h){"use strict";(function(g){Object.defineProperty(d,"__esModule",{value:!0}),d.convertToBuffer=void 0;var p=h("f/KM"),u=typeof g<"u"&&g.from?function(s){return g.from(s,"utf8")}:p.fromUtf8;function m(s){return s instanceof Uint8Array?s:typeof s=="string"?u(s):ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(s)}a(m,"convertToBuffer"),d.convertToBuffer=m}).call(this,h("HDXh").Buffer)},AM8c:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.default={hash:"d477baf",raw:"v3.20.0",semverString:"3.20.0"}},AUdx:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("0YRd")),u=g(h("Iwfh")),m=g(h("CLOt"));let s=a(class qe{clone(){return new qe(this.sdp)}static isRTPCandidate(i){const e=/candidate[:](\S+) (\d+)/g.exec(i);return!(e===null||e[2]!=="1")}static linesToSDP(i){return new qe(i.join(qe.CRLF))}static candidateTypeFromString(i){switch(i){case p.default.Host:return p.default.Host;case p.default.ServerReflexive:return p.default.ServerReflexive;case p.default.PeerReflexive:return p.default.PeerReflexive;case p.default.Relay:return p.default.Relay}return null}static candidateType(i){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(i);return e===null?null:qe.candidateTypeFromString(e[1])}static mediaType(i){const e=/m=(audio|video)/g.exec(i);if(e!==null)return e[1]}static mid(i){if(i.includes("a=mid:"))return i.replace(/^(a=mid:)/,"")}static direction(i){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(i);if(e!==null)return e[1]}static splitLines(i){return i.trim().split(`
`).map(e=>e.trim())}static splitSections(i){return i.split(`
m=`).map((t,n)=>(n>0?"m="+t:t).trim()+qe.CRLF)}static findActiveCameraSection(i){let e=0,t=!1;for(const n of i){if(/^m=video/.test(n)&&(n.indexOf("sendrecv")>-1||n.indexOf("sendonly")===-1&&n.indexOf("recvonly")===-1&&n.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(i){return/^a=ssrc-group:FID\s(.+)/.exec(i)[1]}static matchPrefix(i,e){return qe.splitLines(i).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(qe.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(i){return qe.linesToSDP(this.lines().filter(e=>qe.candidateType(e)!==i))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(p.default.ServerReflexive)}withAudioMaxAverageBitrate(i){if(!i)return this.clone();i=Math.trunc(Math.min(Math.max(i,qe.rfc7587LowestBitrate),qe.rfc7587HighestBitrate));const e=this.lines(),t=qe.findOpusFmtpAttributes(e),n=qe.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${i}`]);return qe.linesToSDP(n)}withStereoAudio(){const i=this.lines(),e=qe.findOpusFmtpAttributes(i),t=qe.updateOpusFmtpAttributes(i,e,["stereo=1","sprop-stereo=1"]);return qe.linesToSDP(t)}static findOpusFmtpAttributes(i){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const n=[];for(const r of i)if(r.startsWith("m=audio")&&(n.push(null),t=!0),r.startsWith("m=video")&&(t=!1),t){const c=e.exec(r);c!==null&&(n[n.length-1]=`a=fmtp:${c[1]} `)}return n}static updateOpusFmtpAttributes(i,e,t){const n=[];let r=0,c=null;for(const f of i)if(f.startsWith("m=audio")&&(c=e[r],r++),f.startsWith("m=video")&&(c=null),c&&f.startsWith(c)){const S=f.slice(c.length).split(";"),l=[];for(const y of S)t.findIndex(O=>O.startsWith(y.split("=")[0]))<0&&l.push(y);for(const y of t)l.push(y);n.push(c+l.join(";"))}else n.push(f);return n}withUnifiedPlanFormat(){let i=this.sdp;return i.includes("mozilla")?this.clone():(i=i.replace("o=-","o=mozilla-chrome"),new qe(i))}getUniqueRtpHeaderExtensionId(i){const e=[];for(const n of i)if(/^a=extmap:/.test(n.trim())){const c=+n.split("a=extmap:")[1].split(" ")[0];e.includes(c)||e.push(c)}e.sort((n,r)=>n-r);let t=0;for(const n of e){if(n-t>1)return t+1;t=n}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,qe.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,qe.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const i=qe.splitLines(this.sdp).filter(e=>!e.includes(qe.dependencyDescriptorRtpHeaderExtensionUrl));return new qe(i.join(qe.CRLF)+qe.CRLF)}withRtpHeaderExtension(i,e){const t=i?i.getRtpHeaderExtensionId(e):-1,n=t===-1?this.getUniqueRtpHeaderExtensionId(qe.splitLines(this.sdp)):t,r=qe.splitSections(this.sdp),c=[];for(let S of r){if(/^m=video/.test(S)&&qe.getRtpHeaderExtensionIdInSection(S,e)===-1){const l=qe.splitLines(S),y=[];if(n===-1||this.hasRtpHeaderExtensionId(n)){c.push(S);continue}for(const T of l)if(y.push(T),/^a=sendrecv/.test(T.trim())){const O="a=extmap:"+n+" "+e;y.push(O)}S=y.join(qe.CRLF)+qe.CRLF}else if(t!==-1&&/^m=video/.test(S)&&qe.getRtpHeaderExtensionIdInSection(S,e)!==t){const l=qe.splitLines(S),y=[];for(const T of l){if(/^a=extmap:/.test(T.trim())&&T.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const R="a=extmap:"+t+" "+e;y.push(R)}continue}y.push(T)}S=y.join(qe.CRLF)+qe.CRLF}c.push(S)}const f=c.join("");return new qe(f)}ssrcForVideoSendingSection(){const i=this.sdp,e=qe.splitSections(i);if(e.length<2)return"";const t=qe.findActiveCameraSection(e);if(t===-1)return"";const n=qe.matchPrefix(e[t],"a=ssrc-group:FID ");if(n.length<1)return"";const r=qe.extractSSRCsFromFIDGroupLine(n[0]),[c]=r.split(" ").map(f=>parseInt(f,10));return c.toString()}videoSendSectionHasDifferentSSRC(i){const e=this.ssrcForVideoSendingSection(),t=i.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const n=parseInt(e,10),r=parseInt(t,10);return n!==r}removeH264SupportFromSendSection(){const i=this.sdp,e=qe.splitSections(i),t=qe.findActiveCameraSection(e);if(t===-1)return new qe(this.sdp);const n=e[t],r=qe.splitLines(n),c=[],f=new Map;r.forEach(T=>{if(/^a=rtpmap:/.test(T)){const O=/^a=rtpmap:([0-9]+)\s/.exec(T);O&&T.toLowerCase().includes("h264")&&c.push(parseInt(O[1],10))}if(/^a=fmtp:/.test(T)){const O=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(T);if(O&&O.length===3){const R=parseInt(O[1],10),F=parseInt(O[2],10);f.has(F)?f.get(F).push(R):f.set(F,[R])}}});const S=new Set;for(const T of c){S.add(T);const O=f.get(T);if(O)for(const R of O)S.add(R)}if(c.length>0){const T=r[0].split(" ");r[0]=T.filter(O=>!S.has(parseInt(O))).join(" ")}const l=r.filter(T=>{if(!T.includes("rtpmap")&&!T.includes("rtcp-fb")&&!T.includes("fmtp"))return!0;for(const O of S)if(T.includes(O.toString()))return!1;return!0});e[t]=l.join(qe.CRLF)+qe.CRLF;const y=e.join("");return new qe(y)}mediaSections(){const i=qe.splitSections(this.sdp);if(i.length<2)return[];const e=[];for(let t=1;t<i.length;t++){const n=new u.default,r=qe.splitLines(i[t]);for(const c of r){const f=qe.mediaType(c);if(f!==void 0){n.mediaType=f;continue}const S=qe.direction(c);if(S!==void 0){n.direction=S;continue}const l=qe.mid(c);if(l!==void 0){n.mid=l;continue}}e.push(n)}return e}static getRtpHeaderExtensionIdInSection(i,e){const t=qe.splitLines(i);for(const n of t)if(/^a=extmap:/.test(n.trim())){const r=n.split("a=extmap:")[1].split(" "),c=+r[0];if(r[1]===e)return c}return-1}getRtpHeaderExtensionId(i){const e=qe.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const n=qe.getRtpHeaderExtensionIdInSection(t,i);if(n!==-1)return n}return-1}hasRtpHeaderExtensionId(i){const e=qe.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===i)return!0;return!1}withVideoSendCodecPreferences(i){const e=this.sdp,t=qe.splitSections(e),n=qe.findActiveCameraSection(t);if(n===-1)return new qe(this.sdp);t[n]=this.sectionWithCodecPreferences(t[n],i);const r=t.join("");return new qe(r)}sectionWithCodecPreferences(i,e){const t=new Map,n=qe.splitLines(i);n.forEach(S=>{if(!S.startsWith("a=rtpmap:"))return;const l=/^a=rtpmap:(\d+)\s/.exec(S);if(!l)return;const y=l[1];for(const T of e){if(!S.includes(`${T.codecName}/${T.codecCapability.clockRate}`))continue;let O=!1;if(T.codecCapability.sdpFmtpLine!==void 0){let R=!1;for(const F of n){if(T.fmtpLineMatches(F,parseInt(y))){O=!0;break}R||(R=F.startsWith(`a=fmtp:${y} profile-id=`))}T.equals(m.default.vp9Profile0())&&!R&&(O=!0)}else O=!0;if(O){t.set(y,T);break}}});const r=new Set(t.keys()),c=n[0].split(" ").filter(S=>!r.has(S)),f=Array.from(t.entries()).sort((S,l)=>{let[y,T]=S,[O,R]=l;const F=e.indexOf(T),U=e.indexOf(R);return F-U}).map(S=>{let[l,y]=S;return l});return c.splice(3,0,...f),n[0]=c.join(" "),n.join(qe.CRLF)+qe.CRLF}highestPriorityVideoSendCodec(){const i=this.prioritizedSendVideoCodecCapabilities();return i.length>0?i[0]:void 0}prioritizedSendVideoCodecCapabilities(){const i=this.sdp,e=qe.splitSections(i),t=qe.findActiveCameraSection(e);if(t===-1)return[];const n=qe.splitLines(e[t]),r=n[0].split(" ");return r.length<4?[]:r.slice(3).map(S=>this.videoCodecCapabilityForPayloadType(n,S)).filter(S=>S!==void 0&&["VP8","H264","VP9","AV1"].includes(S.codecName))}videoCodecCapabilityForPayloadType(i,e){let t,n,r;for(const c of i){const f=/^a=rtpmap:([0-9]+)\s/.exec(c);if(f&&f[1]===e){const l=c.split(" ")[1].split("/");l.length>=2&&(t=l[0],n=l[1])}c.startsWith(`a=fmtp:${e} `)&&(r=c.split(" ")[1])}if(t!==void 0)return new m.default(t,{clockRate:parseInt(n),mimeType:`video/${t}`,sdpFmtpLine:r})}getAudioPayloadTypes(){const i=new Map,e=this.sdp,t=qe.splitSections(e);return i.set("opus",qe.findAudioPayloadType("opus",t)),i.set("red",qe.findAudioPayloadType("red",t)),i}static findAudioPayloadType(i,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${i}\\/48000`,n=new RegExp(t);for(const r of e)if(/^m=audio/.test(r)){const c=n.exec(r);if(c!==null)return Number(c[1])}return 0}withStartingVideoSendBitrate(i){const e=qe.splitSections(this.sdp),t=qe.findActiveCameraSection(e);if(t===-1)return this;const n=qe.splitLines(e[t]),r=[];for(const f of n)if(/^a=fmtp:\d*/.test(f)){const S=f+`;x-google-start-bitrate=${i*1e3}`;r.push(S)}else r.push(f);e[t]=r.join(qe.CRLF)+qe.CRLF;const c=e.join("");return new qe(c)}constructor(i){this.sdp=i}},"SDP");d.default=s,s.CRLF=`\r
`,s.rfc7587LowestBitrate=6e3,s.rfc7587HighestBitrate=51e4,s.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",s.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},AXyi:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.SessionStateControllerState=void 0;var g;(function(p){p[p.NotConnected=0]="NotConnected",p[p.Connecting=1]="Connecting",p[p.Connected=2]="Connected",p[p.Updating=3]="Updating",p[p.Disconnecting=4]="Disconnecting"})(g=d.SessionStateControllerState||(d.SessionStateControllerState={})),d.default=g},AaDX:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={InvalidCampaign:"invalid_campaign"},t=Object(s.a)("promo.campaigns.eligibilityInfo generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l),T=yield r(Object(m.apiCall)({method:"promo.campaigns.eligibilityInfo",args:y,reason:f.reason}));return Object(i.a)(T)}catch(S){throw Object(o.a)({getState:c}).error(`API call to promo.campaigns.eligibilityInfo
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherpromoCampaignsEligibilityInfoFetcher",description:"promo.campaigns.eligibilityInfo generated fetcher"}},"Agw+":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(n,r,c,f){function S(l){return l instanceof c?l:new c(function(y){y(l)})}return a(S,"adopt"),new(c||(c=Promise))(function(l,y){function T(F){try{R(f.next(F))}catch(U){y(U)}}a(T,"fulfilled");function O(F){try{R(f.throw(F))}catch(U){y(U)}}a(O,"rejected");function R(F){F.done?l(F.value):S(F.value).then(T,O)}a(R,"step"),R((f=f.apply(n,r||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("ywpn")),m=p(h("e/ca")),s=p(h("uctb")),o=p(h("Wjms")),i=p(h("raQ4"));let e=a(class extends o.default{loadAssets(){return g(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return g(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=a(class Fu extends u.default{static create(r,c){return g(this,void 0,void 0,function*(){r=this.resolveSpec(r),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const{logger:f}=c;if(!(yield Fu.isSupported(r,c)))return f.warn("Using no-op processor because background replacement is not supported"),new e;f.info("Using background replacement filter");const l=new i.default(r,c);return yield l.loadAssets(),l})}static resolveOptions(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const c=Object.assign({},r);return c.logger||(c.logger=new m.default("BackgroundReplacementProcessor",s.default.INFO)),super.resolveOptions(c)}static resolveOptionsAsync(r){return g(this,void 0,void 0,function*(){if(!r.imageBlob){const c=document.createElement("canvas");c.width=100,c.height=100;const f=c.getContext("2d");f.fillStyle="blue",f.fillRect(0,0,100,100);const S=yield new Promise(l=>{c.toBlob(l)});r.imageBlob=S}})}static isSupported(r,c){const f=Object.create(null,{isSupported:{get:()=>super.isSupported}});return g(this,void 0,void 0,function*(){r=this.resolveSpec(r),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const S=c.imageBlob,l=URL.createObjectURL(S);try{yield i.default.loadImage(l)}catch(y){return c.logger.info(`Failed to fetch load replacement image ${y.message}`),!1}finally{URL.revokeObjectURL(l)}return f.isSupported.call(this,r,c)})}},"BackgroundReplacementVideoFrameProcessor");d.default=t},Aplu:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.None=d.Some=d.Maybe=void 0;let g=a(class{static of(s){return s==null?u.of():p.of(s)}},"Maybe");d.Maybe=g;let p=a(class Uu{map(s){return g.of(s(this.value))}flatMap(s){return s(this.value)}get(){return this.value}getOrElse(s){return this.value}defaulting(s){return g.of(this.getOrElse(s))}static of(s){if(s==null)throw new Error("value is ${value}");return new Uu(s)}constructor(s){this.value=s,this.isSome=!0,this.isNone=!1}},"Some");d.Some=p;let u=a(class Qd{get(){throw new Error("value is null")}getOrElse(s){return s}map(s){return new Qd}flatMap(s){return new Qd}defaulting(s){return g.of(this.getOrElse(s))}static of(){return new Qd}constructor(){this.isSome=!1,this.isNone=!0}},"None");d.None=u},AqXs:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={ListNotFound:"list_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found",InvalidCursor:"invalid_cursor"},t=Object(s.a)("lists.records.list generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"lists.records.list",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to lists.records.list
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherlistsRecordsListFetcher",description:"lists.records.list generated fetcher"}},AtlK:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(y,T,O,R){function F(U){return U instanceof O?U:new O(function(_){_(U)})}return a(F,"adopt"),new(O||(O=Promise))(function(U,_){function P(M){try{A(R.next(M))}catch(k){_(k)}}a(P,"fulfilled");function L(M){try{A(R.throw(M))}catch(k){_(k)}}a(L,"rejected");function A(M){M.done?U(M.value):F(M.value).then(P,L)}a(A,"step"),A((R=R.apply(y,T||[])).next())})},p=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(d,"__esModule",{value:!0});const u=h("o3U+"),m=h("EkyC"),s=h("KvYa"),o=p(h("U9CR")),i=p(h("aZJ3")),e=h("VCUZ"),t=p(h("ac3q")),n=p(h("Xv43")),r=h("O9RP"),c=h("1AO7"),f=h("Lxy7"),S=h("C5KY");let l=a(class fa{process(T){return g(this,void 0,void 0,function*(){return T})}fxProcess(T){return g(this,void 0,void 0,function*(){const O=T[0].asCanvasElement();this.didStreamParametersChange(O)&&(yield this.adjustProcessorForNewStreamParameters(O));try{yield this.manageSegmentationMask(O)}catch(R){throw this.logger.error(R),new Error("Video stream could not be processed")}return yield this.renderer.render(O,this.segmentationMask),T[0]=this.canvasVideoFrameBuffer,T})}noOpProcess(T){return g(this,void 0,void 0,function*(){return T})}didStreamParametersChange(T){return T.width!==this.streamParameters.width||T.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(T){return g(this,void 0,void 0,function*(){this.streamParameters.width=T.width,this.streamParameters.height=T.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return g(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new r.DeferredPromise,this.engineWorker.postMessage({msg:f.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:f.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(T){return g(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const O=this.canvasOpsManager.getInferenceInputData(T);this.segmentationMask=yield this.generateSegmentationMask(O),this.segmentationRateManager.completeSegmentation()}}catch(O){throw this.logger.error(O.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(T){return g(this,void 0,void 0,function*(){fa.isSharedArrayBufferSupported?(this.sharedImageData.set(T.data),this.engineWorker.postMessage({msg:f.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:f.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:T},[T.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(O){throw this.logger.error(O.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(T){return{backgroundBlur:{isEnabled:T.backgroundBlur.isEnabled,strength:T.backgroundBlur.strength},backgroundReplacement:{isEnabled:T.backgroundReplacement.isEnabled,backgroundImageURL:T.backgroundReplacement.backgroundImageURL,defaultColor:T.backgroundReplacement.defaultColor}}}setEffectConfig(T){return g(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(T,this.effectConfig))return;const O=this.cloneConfigFrom(T);try{yield this.validateEffectConfig(O)}catch(R){throw this.logger.error(R.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}O.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(O),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,O),this.effectConfig=O,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(T){return g(this,void 0,void 0,function*(){if(T.backgroundBlur.isEnabled&&T.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");T.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(T))})}validateReplacementConfig(T){return g(this,void 0,void 0,function*(){if(T.backgroundReplacement.backgroundImageURL&&T.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!T.backgroundReplacement.backgroundImageURL&&!T.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{T.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(T.backgroundReplacement.backgroundImageURL))}catch(R){throw this.logger.error(R.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const O=T.backgroundReplacement.defaultColor;if(O&&O!=="black"&&O!=="#000000"&&O!=="#000"){if(O.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(O))throw new Error(`Invalid hexadecimal color code for default replacement background: ${O}`);const F=document.createElement("canvas").getContext("2d"),U=F.fillStyle;if(F.fillStyle=O,F.fillStyle===U)throw new Error(`Invalid color for default replacement background: ${O}`)}})}validateProcessingBudgetPerFrame(T){if(T<f.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||T>f.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${f.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${f.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return g(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const T=this.getVideoFxAssetParams();yield this.loadEngineWorker(T),yield this.buildEngine(T),yield this.loadFxLib(T),this.renderer=constructRenderer(f.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,f.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(T){throw this.logger.error(T.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const T=e.getDefaultAssetSpec();return{assetGroup:T.assetGroup,revisionID:T.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(T,O){const R=new URL(T);for(const[F,U]of Object.entries(O))if(U!==void 0){const _=encodeURIComponent(F),P=encodeURIComponent(U);R.searchParams.set(_,P)}return R.toString()}loadEngineWorker(T){return g(this,void 0,void 0,function*(){try{const O=this.getPathFromVideoFxAssetParams(f.CDN_BASE_PATH+f.WORKER_PATH,T);this.engineWorker=yield m.loadWorker(O,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",R=>this.engineWorkerReceiver(R))}catch(O){throw this.logger.error(O.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(T){return g(this,void 0,void 0,function*(){this.buildEnginePromise=new r.DeferredPromise,this.engineWorker.postMessage({msg:f.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:f.CDN_BASE_PATH,sdkVersioningParams:T}});try{yield this.buildEnginePromise.getPromise()}catch(O){throw this.logger.error(O.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(T){return g(this,void 0,void 0,function*(){const O=this.getPathFromVideoFxAssetParams(f.CDN_BASE_PATH+f.FXLIB_PATH,T),R={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const F=yield u.fetchWithBehavior(O,R,{});if(!F.ok)throw new Error("Fetch failed.");const U=window.URL.createObjectURL(yield F.blob());yield new Promise((_,P)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",U),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",_),this.fxLibScript.addEventListener("error",P),document.body.appendChild(this.fxLibScript)})}catch(F){throw this.logger.error(F.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(T){const O=T.data;switch(O.msg){case f.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(O.payload);break;case f.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(O.payload.output);break;case f.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case f.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(O)}`);break}}settleEngineBuildPromise(T){T!==f.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(T){T?this.segmentationRequestPromise.resolveAndReplacePromise(T):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const T=new ImageData(new Uint8ClampedArray(this.sharedImageData),f.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,f.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(T)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new i.default,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return g(this,void 0,void 0,function*(){let R=!0;const F=a((P,L)=>{P&&(T.info(L),R=!1)},"checkEnv");F(typeof globalThis>"u","Browser does not have globalThis."),F(!s.supportsWorker(globalThis,T),"Browser does not support web workers."),F(!s.supportsWASM(globalThis,T),"Browser does not support wasm."),F(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const U=new o.default;F(!U.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const _=a(()=>g(this,void 0,void 0,function*(){if(O)try{const P=new fa(T);yield P.loadAssets(),yield P.destroy()}catch{return T.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(R?yield _():!1)})}static create(T,O){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME;return g(this,void 0,void 0,function*(){const F=new fa(T,R);try{return yield F.loadAssets(),yield F.setEffectConfig(O),F}catch(U){throw T.error(U.toString()),F.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(T){this.eventController?this.eventController=T:(this.eventController=T,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const T={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",T)}sameVideoFxConfig(T,O){return T.backgroundBlur.isEnabled===O.backgroundBlur.isEnabled&&T.backgroundBlur.strength===O.backgroundBlur.strength&&T.backgroundReplacement.backgroundImageURL===O.backgroundReplacement.backgroundImageURL&&T.backgroundReplacement.defaultColor===O.backgroundReplacement.defaultColor&&T.backgroundReplacement.isEnabled===O.backgroundReplacement.isEnabled}constructor(T,O=f.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,R){this.logger=T,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new n.default(this.outputCanvas);try{this.validateProcessingBudgetPerFrame(O)}catch(F){throw this.logger.error(F),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${O}`)}R&&(this.eventController=R),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new r.DeferredPromise,this.segmentationRateManager=new S.VideoFxSegmentationRateManager(this.logger,O),this.streamParameters={framerate:f.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:f.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:f.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:f.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},fa.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(f.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*f.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${fa.isSharedArrayBufferSupported}`),this.canvasOpsManager=new c.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${O}`)}},"VideoFxProcessor");d.default=l,l.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},B7cK:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("xzjI"));let u=a(class extends p.default{constructor(s){super(s),this.name="NotFoundError"}},"NotFoundError");d.default=u},BEtg:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=h("K4CH"),u=g(h("ac3q"));let m=a(class Ps{getParserResult(){var o,i;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((o=this.parserResult)===null||o===void 0?void 0:o.os.name)||Ps.UNAVAILABLE,osVersion:((i=this.parserResult)===null||i===void 0?void 0:i.os.version)||Ps.UNAVAILABLE,sdkVersion:u.default.sdkVersion,sdkName:u.default.sdkName}}constructor(o){var i,e,t,n,r,c,f;try{this.parserResult=navigator&&navigator.userAgent?new p.UAParser(navigator.userAgent).getResult():void 0}catch(S){o.error(S.message)}this.browserMajorVersion=((t=(e=(i=this.parserResult)===null||i===void 0?void 0:i.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||Ps.UNAVAILABLE,this.browserName=((n=this.parserResult)===null||n===void 0?void 0:n.browser.name)||Ps.UNAVAILABLE,this.browserVersion=((r=this.parserResult)===null||r===void 0?void 0:r.browser.version)||Ps.UNAVAILABLE,this.deviceName=[((c=this.parserResult)===null||c===void 0?void 0:c.device.vendor)||"",((f=this.parserResult)===null||f===void 0?void 0:f.device.model)||""].join(" ").trim()||Ps.UNAVAILABLE}},"DefaultUserAgentParser");d.default=m,m.UNAVAILABLE="Unavailable"},BGMr:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("ezoW")),u=g(h("VYs+")),m=h("Aplu"),s=g(h("Biyp")),o=g(h("p5Ac"));let i=a(class Vn{updateConnectionMetric(t){let{uplinkKbps:n=0}=t;if(isNaN(n))return;this.startTimeMs===0&&(this.startTimeMs=Date.now()),Date.now()-this.startTimeMs<Vn.startupDurationMs?this.lastUplinkBandwidthKbps=Vn.defaultUplinkBandwidthKbps:this.lastUplinkBandwidthKbps=n,this.logger.debug(()=>`simulcast: uplink policy update metrics ${this.lastUplinkBandwidthKbps}`);let r=Vn.holdDownDurationMs;this.currentActiveStreams===3?r=Vn.holdDownDurationMs*2:(this.currentActiveStreams===2&&n<=this.midDisabledRate||this.currentActiveStreams===1&&n<=this.hiDisabledRate)&&(r=Vn.holdDownDurationMs/2),!(Date.now()<this.lastUpdatedMs+r)&&(this.newQualityMap=this.calculateEncodingParameters(!1))}calculateEncodingParameters(t){const n=[new o.default,new o.default,new o.default];let r=0,c=0;if(this.currentActiveStreams===0?(r=this.lastUplinkBandwidthKbps+1,c=0):this.currentActiveStreams===1?(r=this.enableFhdVideo?4e3:2400,c=this.hiDisabledRate):this.currentActiveStreams===2?(r=this.enableFhdVideo?1600:1e3,c=this.midDisabledRate):(r=this.enableFhdVideo?500:300,c=0),t||this.lastUplinkBandwidthKbps>=r||this.lastUplinkBandwidthKbps<=c){this.shouldDisableSimulcast?(this.newActiveStreams=0,n[0].maxBitrateKbps=0,n[1].maxBitrateKbps=this.hiTargetBitrateKbps,n[2].maxBitrateKbps=0):this.numSenders<=4&&this.lastUplinkBandwidthKbps>=this.hiDisabledRate?(this.newActiveStreams=1,n[0].maxBitrateKbps=this.lowTargetBitrateKbps,n[1].maxBitrateKbps=0,n[2].maxBitrateKbps=this.hiTargetBitrateKbps):this.lastUplinkBandwidthKbps>=this.midDisabledRate?(this.newActiveStreams=2,n[0].maxBitrateKbps=this.lastUplinkBandwidthKbps>=this.midTargetBitrateKbps*.7?this.lowTargetBitrateKbps*2/3:this.lowTargetBitrateKbps/2,n[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,n[2].maxBitrateKbps=0):(this.newActiveStreams=3,n[0].maxBitrateKbps=this.lowTargetBitrateKbps,n[1].maxBitrateKbps=0,n[2].maxBitrateKbps=0);const f=n.map((S,l,y)=>S.maxBitrateKbps);this.newQualityMap=this.fillEncodingParamWithBitrates(f),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters bw:${this.lastUplinkBandwidthKbps} numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`)}return this.newQualityMap}chooseMediaTrackConstraints(){return{width:{ideal:this.enableFhdVideo?1920:1280},height:{ideal:this.enableFhdVideo?1080:768},frameRate:{ideal:15}}}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.currentActiveStreams=this.newActiveStreams,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const n=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,r=n!==this.numSenders,c=t.numberOfParticipants(),f=c>=0&&c<=2,S=this.shouldDisableSimulcast!==f;this.numSenders=n,this.shouldDisableSimulcast=f,this.optimalParameters=new s.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,this.newQualityMap=this.calculateEncodingParameters(r||S)}wantsResubscribe(){let t=!this.encodingParametersEqual();this.nextLocalDescriptions=this.videoIndex.localStreamDescriptions();for(let n=0;n<this.nextLocalDescriptions.length;n++){const r=this.nextLocalDescriptions[n].streamId;if(r!==0&&r){const c=this.currLocalDescriptions.findIndex(f=>f.streamId===r);c!==-1&&this.nextLocalDescriptions[n].disabledByWebRTC!==this.currLocalDescriptions[c].disabledByWebRTC&&(t=!0)}}return t&&(this.lastUpdatedMs=Date.now()),this.currLocalDescriptions=this.nextLocalDescriptions,t}compareEncodingParameter(t,n){return JSON.stringify(t)===JSON.stringify(n)}encodingParametersEqual(){let t=!1;for(const n of u.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(n),this.currentQualityMap.get(n)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiDisabledRate=t?Vn.kHiDisabledRateFhd:Vn.kHiDisabledRateHd,this.midDisabledRate=t?Vn.kMidDisabledRateFhd:Vn.kMidDisabledRateHd,this.hiTargetBitrateKbps=t?Vn.kHiTargetBitrateKbpsFhd:Vn.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?Vn.kMidTargetBitrateKbpsFhd:Vn.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?Vn.kLowTargetBitrateKbpsFhd:Vn.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const n=new Map,r=1e3,c=u.default.NAME_ARR_ASCENDING,f=t;let S=this.shouldDisableSimulcast?1:4;for(let l=0;l<c.length;l++){const y=c[l];n.set(y,{rid:y,active:f[l]>0,scaleResolutionDownBy:Math.max(S,1),maxBitrate:f[l]*r}),S=S/2}return n}getQualityMapString(t){let n="";const r=this.videoIndex.localStreamDescriptions();return r.length===3&&t.forEach(c=>{let f=!1;c.rid==="low"?f=r[0].disabledByWebRTC:c.rid==="mid"?f=r[1].disabledByWebRTC:f=r[2].disabledByWebRTC,n+=`{ rid: ${c.rid} active:${c.active} disabledByWebRTC: ${f} maxBitrate:${c.maxBitrate}}`}),n}getEncodingSimulcastLayer(t){switch(t){case 0:return p.default.High;case 1:return p.default.LowAndHigh;case 2:return p.default.LowAndMedium;case 3:return p.default.Low}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(n=>{m.Maybe.of(n.encodingSimulcastLayersDidChange).map(r=>r.bind(n)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const n of this.observerQueue)t(n)}constructor(t,n){this.selfAttendeeId=t,this.logger=n,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.currentActiveStreams=1,this.lastUplinkBandwidthKbps=Vn.defaultUplinkBandwidthKbps,this.startTimeMs=0,this.lastUpdatedMs=Date.now(),this.videoIndex=null,this.currLocalDescriptions=[],this.nextLocalDescriptions=[],this.observerQueue=new Set,this.hiDisabledRate=Vn.kHiDisabledRateHd,this.midDisabledRate=Vn.kMidDisabledRateHd,this.hiTargetBitrateKbps=Vn.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=Vn.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=Vn.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new s.default(0,0,0,0,!0),this.parametersInEffect=new s.default(0,0,0,0,!0),this.lastUplinkBandwidthKbps=Vn.defaultUplinkBandwidthKbps,this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");d.default=i,i.defaultUplinkBandwidthKbps=1200,i.startupDurationMs=6e3,i.holdDownDurationMs=4e3,i.defaultMaxFrameRate=15,i.kHiDisabledRateHd=700,i.kMidDisabledRateHd=240,i.kHiDisabledRateFhd=1200,i.kMidDisabledRateFhd=400,i.kHiTargetBitrateKbpsHd=1200,i.kMidTargetBitrateKbpsHd=600,i.kLowTargetBitrateKbpsHd=300,i.kHiTargetBitrateKbpsFhd=2e3,i.kMidTargetBitrateKbpsFhd=1e3,i.kLowTargetBitrateKbpsFhd=500},BQaj:function(W,d,h){"use strict";h.r(d),h.d(d,"fromHex",function(){return u}),h.d(d,"toHex",function(){return m});const g={},p={};for(let s=0;s<256;s++){let o=s.toString(16).toLowerCase();o.length===1&&(o=`0${o}`),g[s]=o,p[o]=s}function u(s){if(s.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const o=new Uint8Array(s.length/2);for(let i=0;i<s.length;i+=2){const e=s.slice(i,i+2).toLowerCase();if(e in p)o[i/2]=p[e];else throw new Error(`Cannot decode unrecognized sequence ${e} as hexadecimal`)}return o}a(u,"fromHex");function m(s){let o="";for(let i=0;i<s.byteLength;i++)o+=g[s[i]];return o}a(m,"toHex")},BY2i:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("/AJg"));let u=a(class _d{allowSubscribe(s,o){let i=0;const e=this.currentNetworkEvent;if(o>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=o,!0;if(o<this.referenceBitrate){if(this.currentNetworkEvent=1,i=this.getSubscribeDelay(this.currentNetworkEvent,s),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>i)return this.referenceBitrate=o,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(s,o){let i=_d.MINIMUM_DELAY_MS;const e=_d.MAXIMUM_DELAY_MS-_d.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(s){case 1:i+=e*t*(1+o/10),i=Math.min(_d.MAXIMUM_DELAY_MS,i);break}return i}constructor(s=0,o=0){this.networkIssueResponseDelayFactor=s,this.networkIssueRecoveryDelayFactor=o,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=p.default.Default,s<0?s=0:s>1&&(s=1),this.networkIssueResponseDelayFactor=s,o<0?o=0:o>1&&(o=1),this.networkIssueRecoveryDelayFactor=o}},"VideoPriorityBasedPolicyConfig");d.default=u,u.MINIMUM_DELAY_MS=2e3,u.MAXIMUM_DELAY_MS=8e3,u.Default=new u(0,0),u.UnstableNetworkPreset=new u(0,1),u.StableNetworkPreset=new u(1,0)},Biyp:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class Vu{equal(u){let m=u.captureWidth()===this.cameraWidth&&u.captureHeight()===this.cameraHeight&&u.captureFrameRate()===this.cameraFrameRate&&u.encodeBitrates().length===this.encodeBitrates().length&&u.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&u.encodeWidths().length===this.encodeWidths().length&&u.encodeHeights().length===this.encodeHeights().length&&u.isSVCEncoding()===this.isSVC;if(m){for(let s=0;s<u.encodeWidths().length;s++)if(u.encodeWidths()[s]!==this.encodeWidths()[s]||u.encodeHeights()[s]!==this.encodeHeights()[s]||u.encodeBitrates()[s]!==this.encodeBitrates()[s]||u.encodeScaleResolutionDownBy()[s]!==this.encodeScaleResolutionDownBy()[s])return m=!1,m}return m}clone(){return new Vu(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(u,m,s,o,i,e=1,t=!1){this.cameraWidth=u,this.cameraHeight=m,this.cameraFrameRate=s,this.maxEncodeBitrateKbps=o,this.isSimulcast=i,this.scaleResolutionDownBy=e,this.isSVC=t}},"DefaultVideoCaptureAndEncodeParameter");d.default=g},BkFD:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{start(u){this.stop(),this.timer=setInterval(u,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(u){this.intervalMs=u}},"IntervalScheduler");d.default=g},Bkbp:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.Sha256=void 0;var g=h("dJwD"),p=h("V7js"),u=h("2ZyS"),m=h("MdQ0"),s=function(){function i(e){if(this.hash=new u.RawSha256,e){this.outer=new u.RawSha256;var t=o(e),n=new Uint8Array(p.BLOCK_SIZE);n.set(t);for(var r=0;r<p.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;this.hash.update(t),this.outer.update(n);for(var r=0;r<t.byteLength;r++)t[r]=0}}return a(i,"Sha2561"),i.prototype.update=function(e){if(!((0,m.isEmptyData)(e)||this.error))try{this.hash.update((0,m.convertToBuffer)(e))}catch(t){this.error=t}},i.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},i.prototype.digest=function(){return g.__awaiter(this,void 0,void 0,function(){return g.__generator(this,function(e){return[2,this.digestSync()]})})},i}();d.Sha256=s;function o(i){var e=(0,m.convertToBuffer)(i);if(e.byteLength>p.BLOCK_SIZE){var t=new u.RawSha256;t.update(e),e=t.digest()}var n=new Uint8Array(p.BLOCK_SIZE);return n.set(e),n}a(o,"bufferFromSecret")},BvK0:function(W,d,h){"use strict";var g=h("YBmv"),p=h("fywt"),u=h("eP7z");function m(s,o){return s&&s.length?Object(g.a)(s,Object(p.a)(o,2),u.a):void 0}a(m,"minBy"),d.a=m},C5KY:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.VideoFxSegmentationRateManager=void 0;const g=h("Lxy7");let p=a(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=g.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(m){m>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&m<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(m,s){this.logger=m,this.targetSegmentationCyclePercentage=s/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=g.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");d.VideoFxSegmentationRateManager=p},C5aR:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.isEmptyData=void 0;function g(p){return typeof p=="string"?p.length===0:p.byteLength===0}a(g,"isEmptyData"),d.isEmptyData=g},CAce:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=h("XCDq");let p=a(class si{equals(m){return m!==void 0&&this.codecName===m.codecName&&this.codecCapability.mimeType===m.codecCapability.mimeType&&this.codecCapability.clockRate===m.codecCapability.clockRate&&this.codecCapability.sdpFmtpLine===m.codecCapability.sdpFmtpLine}fmtpLineMatches(m,s){const o=this.codecCapability.sdpFmtpLine;if(!o)return!1;if(this.codecName==="H264"){const i=/profile-level-id=([0-9a-f]{4})[0-9a-f]{2}/i,e=o.replace(i,"profile-level-id=$1");return m.replace(i,"profile-level-id=$1").startsWith(`a=fmtp:${s} ${e}`)}return m.startsWith(`a=fmtp:${s} ${o}`)}static vp8(){return new si("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264BaselineProfile(){return new si("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"})}static h264ConstrainedBaselineProfile(){return new si("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264MainProfile(){return new si("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d001f"})}static h264HighProfile(){return new si("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=64001f"})}static h264ConstrainedHighProfile(){return new si("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640c1f"})}static h264(){return si.h264ConstrainedBaselineProfile()}static vp9Profile0(){return new si("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static vp9(){return si.vp9Profile0()}static av1Main(){return new si("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static av1(){return si.av1Main()}static fromSignaled(m){switch(m){case g.SdkVideoCodecCapability.VP8:return si.vp8();case g.SdkVideoCodecCapability.H264_BASELINE_PROFILE:return si.h264BaselineProfile();case g.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return si.h264ConstrainedBaselineProfile();case g.SdkVideoCodecCapability.H264_MAIN_PROFILE:return si.h264MainProfile();case g.SdkVideoCodecCapability.H264_HIGH_PROFILE:return si.h264HighProfile();case g.SdkVideoCodecCapability.H264_CONSTRAINED_HIGH_PROFILE:return si.h264ConstrainedHighProfile();case g.SdkVideoCodecCapability.VP9_PROFILE_0:return si.vp9Profile0();case g.SdkVideoCodecCapability.AV1_MAIN_PROFILE:return si.av1Main();default:return}}constructor(m,s){this.codecName=m,this.codecCapability=s}},"VideoCodecCapability");d.default=p},CLOt:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=h("f2XL");let p=a(class ai{equals(m){return m!==void 0&&this.codecName===m.codecName&&this.codecCapability.mimeType===m.codecCapability.mimeType&&this.codecCapability.clockRate===m.codecCapability.clockRate&&this.codecCapability.sdpFmtpLine===m.codecCapability.sdpFmtpLine}fmtpLineMatches(m,s){const o=this.codecCapability.sdpFmtpLine;if(!o)return!1;if(this.codecName==="H264"){const i=/profile-level-id=([0-9a-f]{4})[0-9a-f]{2}/i,e=o.replace(i,"profile-level-id=$1");return m.replace(i,"profile-level-id=$1").startsWith(`a=fmtp:${s} ${e}`)}return m.startsWith(`a=fmtp:${s} ${o}`)}static vp8(){return new ai("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264BaselineProfile(){return new ai("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"})}static h264ConstrainedBaselineProfile(){return new ai("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264MainProfile(){return new ai("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d001f"})}static h264HighProfile(){return new ai("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=64001f"})}static h264ConstrainedHighProfile(){return new ai("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640c1f"})}static h264(){return ai.h264ConstrainedBaselineProfile()}static vp9Profile0(){return new ai("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static vp9(){return ai.vp9Profile0()}static av1Main(){return new ai("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static av1(){return ai.av1Main()}static fromSignaled(m){switch(m){case g.SdkVideoCodecCapability.VP8:return ai.vp8();case g.SdkVideoCodecCapability.H264_BASELINE_PROFILE:return ai.h264BaselineProfile();case g.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return ai.h264ConstrainedBaselineProfile();case g.SdkVideoCodecCapability.H264_MAIN_PROFILE:return ai.h264MainProfile();case g.SdkVideoCodecCapability.H264_HIGH_PROFILE:return ai.h264HighProfile();case g.SdkVideoCodecCapability.H264_CONSTRAINED_HIGH_PROFILE:return ai.h264ConstrainedHighProfile();case g.SdkVideoCodecCapability.VP9_PROFILE_0:return ai.vp9Profile0();case g.SdkVideoCodecCapability.AV1_MAIN_PROFILE:return ai.av1Main();default:return}}constructor(m,s){this.codecName=m,this.codecCapability=s}},"VideoCodecCapability");d.default=p},COTZ:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("DUgj"));let u=a(class{constructor(s){this.applicationMetadata=s,this.serverSideNetworkAdaption=p.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");d.default=u},CPHI:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckCameraResolutionFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.Failed=1]="Failed",p[p.ResolutionNotSupported=2]="ResolutionNotSupported",p[p.PermissionDenied=3]="PermissionDenied"})(g=d.CheckCameraResolutionFeedback||(d.CheckCameraResolutionFeedback={})),d.default=g},CRwe:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(e,t,n,r){function c(f){return f instanceof n?f:new n(function(S){S(f)})}return a(c,"adopt"),new(n||(n=Promise))(function(f,S){function l(O){try{T(r.next(O))}catch(R){S(R)}}a(l,"fulfilled");function y(O){try{T(r.throw(O))}catch(R){S(R)}}a(y,"rejected");function T(O){O.done?f(O.value):c(O.value).then(l,y)}a(T,"step"),T((r=r.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("bTau")),m=p(h("AUdx")),s=p(h("CLOt")),o=p(h("aVV0"));let i=a(class extends o.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return g(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let r=this.context.sdpAnswer;r=new m.default(r).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(r=new m.default(r).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(r=new m.default(r).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(r=new m.default(r).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.prioritizedSendVideoCodecCapabilities=new m.default(r).prioritizedSendVideoCodecCapabilities(),this.context.currentVideoSendCodec=this.context.prioritizedSendVideoCodecCapabilities.length>0?this.context.prioritizedSendVideoCodecCapabilities[0]:void 0;const c=this.context.activeVideoInput;if(c!==void 0){const S=this.context.audioVideoController.configuration.credentials.attendeeId,l=new u.default(S).hasModality(u.default.MODALITY_CONTENT),y=c.getVideoTracks()[0];l&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===s.default.av1Main().codecName?(y.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${S}`)):this.context.audioVideoController.configuration.enableSVC&&(y.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${S}`)))}this.logger.info(`processed remote description is >>>${r}<<<`);const f={type:"answer",sdp:r,toJSON:null};try{yield this.createICEConnectionCompletedPromise(f)}catch(S){throw S}})}createICEConnectionCompletedPromise(t){return new Promise((n,r)=>g(this,void 0,void 0,function*(){const c=a(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",c),n())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",c),r(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",c);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),c()}catch(f){r(f)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");d.default=i},CWxj:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(l,y,T,O){function R(F){return F instanceof T?F:new T(function(U){U(F)})}return a(R,"adopt"),new(T||(T=Promise))(function(F,U){function _(A){try{L(O.next(A))}catch(M){U(M)}}a(_,"fulfilled");function P(A){try{L(O.throw(A))}catch(M){U(M)}}a(P,"rejected");function L(A){A.done?F(A.value):R(A.value).then(_,P)}a(L,"step"),L((O=O.apply(l,y||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("a6MJ")),m=p(h("Fm4y")),s=p(h("cKqT")),o=p(h("U9CR")),i=p(h("InPl")),e=p(h("egzF")),t=p(h("p7bP")),n=h("crgu"),r=p(h("KEX5")),c=p(h("l7oq")),f=p(h("3jln"));let S=a(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return g(this,void 0,void 0,function*(){n.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),n.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),n.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const y=new o.default,T=`${y.name()} ${y.majorVersion()} (${y.version()})`;if(this.logger.info(`browser is ${T}`),y.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${y.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!y.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(y.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${y.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!y.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(y){return!!(y&&y.addObserver)}constructor(y,T,O,R){this._eventController=R,this._configuration=y,this._logger=T,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new r.default(y,T)),O.eventController||(O.eventController=this.eventController),this.audioVideoController=new u.default(this._configuration,this._logger,new f.default(this._logger),O,new c.default(this._configuration.reconnectTimeoutMs,new s.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=O,this.logger.info(`MeetingFeatures: ${JSON.stringify(y.meetingFeatures)}`);const F=new i.default(this._logger);this.contentShareController=new e.default(F,new u.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new f.default(this._logger),F,new c.default(this._configuration.reconnectTimeoutMs,new s.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new m.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");d.default=S},CmE0:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(t,n,r,c){function f(S){return S instanceof r?S:new r(function(l){l(S)})}return a(f,"adopt"),new(r||(r=Promise))(function(S,l){function y(R){try{O(c.next(R))}catch(F){l(F)}}a(y,"fulfilled");function T(R){try{O(c.throw(R))}catch(F){l(F)}}a(T,"rejected");function O(R){R.done?S(R.value):f(R.value).then(y,T)}a(O,"step"),O((c=c.apply(t,n||[])).next())})},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d,"__esModule",{value:!0}),d.BackgroundFilterMonitor=void 0;const u=h("GEtQ"),m=p(h("KsuK")),s=p(h("8V8Y"));let o=a(class{whenNext(){return this.promise||(this.promise=new Promise(n=>this.resolve=n)),this.promise}next(n){this.value=n,this.resolve(n),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),i=a(class Wl{static createWorkerPromise(){const n={resolve:null,reject:null,promise:null};return n.promise=new Promise((r,c)=>{n.resolve=r,n.reject=c}),n}validateSpec(n){if(!n)throw new Error("processor has null spec");if(!n.model)throw new Error("processor spec has null model");if(!n.paths)throw new Error("processor spec has null paths")}validateOptions(n){if(!n)throw new Error("processor has null options");if(!n.logger)throw new Error("processor has null options - logger");if(!n.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!n.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(n){this.videoFramesPerFilterUpdate=1,this.frameCounter=new s.default(this.delegate,n.reportingPeriodMillis,n.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(n){return JSON.stringify(n,null,2)}handleInitialize(n){if(this.logger.info(`received initialize message: ${this.stringify(n)}`),!n.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const r=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:r.path,inputHeight:r.input.height,inputWidth:r.input.width,inputChannels:4,modelRangeMin:r.input.range[0],modelRangeMax:r.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(n){if(this.logger.info(`received load model message: ${this.stringify(n)}`),n.payload!==2){this.logger.error("failed to load model! status: "+n.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+n.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(n){this.mask$.next(n.payload.output)}handleWorkerEvent(n){const r=n.data;switch(r.msg){case"initialize":this.handleInitialize(r);break;case"loadModel":this.handleLoadModel(r);break;case"predict":this.handlePredict(r);break;default:this.logger.info(`unexpected event msg: ${this.stringify(r)}`);break}}loadAssets(){return g(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield u.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",n=>this.handleWorkerEvent(n)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(n){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${n.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(n){return g(this,void 0,void 0,function*(){if(this.destroyed)return n;this.frameCounter.frameReceived(n[0].framerate),this.cpuMonitor.frameReceived();const r=n[0].asCanvasElement();if(!r)return n;if(!this.modelInitialized)return n[0]=this.canvasVideoFrameBuffer,n;const c=r.width,f=r.height;if(c===0||f===0)return n;this.sourceWidth===0&&(this.sourceWidth=c,this.sourceHeight=f,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==c||this.sourceHeight!==f)&&(this.sourceWidth=c,this.sourceHeight=f,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let S=this.mask$.value;const l=this.spec.model.input.width/r.width,y=this.spec.model.input.height/r.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const T=this.scaledCanvas.getContext("2d");T.save(),T.scale(l,y),T.drawImage(r,0,0),T.restore();const O=T.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const R=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:O},[O.data.buffer]),S=yield R}this.destroyed||this.drawImageWithMask(r,S)}catch(S){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${S}`),n}finally{this.frameCounter.filterComplete(),this.frameNumber++}return n[0]=this.canvasVideoFrameBuffer,n})}updateVideoFramesPerFilterUpdate(n){n!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=n,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var n,r,c,f;return g(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(n=this.worker)===null||n===void 0||n.postMessage({msg:"destroy"}),(r=this.worker)===null||r===void 0||r.postMessage({msg:"stop"}),(c=this.targetCanvas)===null||c===void 0||c.remove(),this.targetCanvas=void 0,(f=this.scaledCanvas)===null||f===void 0||f.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(n,r,c,f,S){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new m.default(this.targetCanvas),this.mask$=new o,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=Wl.createWorkerPromise(),this.loadModelPromise=Wl.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=n,this.validateSpec(r),this.validateOptions(c),this.spec=r,this.logger=c.logger,this.delegate=f,this.initCPUMonitor(c),this.eventController=S}},"BackgroundFilterProcessor");d.default=i;let e=a(class{filterCPUUtilizationHigh(){const n=Date.now();n-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=n,this.observer.reduceCPUUtilization())}frameReceived(){const n=Date.now();n-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=n,this.observer.increaseCPUUtilization())}constructor(n,r){this.monitoringPeriodMillis=n,this.observer=r,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");d.BackgroundFilterMonitor=e},CtrA:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(u,m,s,o,i,e){this.timestampMs=u,this.topic=m,this.data=s,this.senderAttendeeId=o,this.senderExternalUserId=i,this.throttled=!!e}},"DataMessage");d.default=g},CxCb:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{calculateScore(u,m,s){(s||m===null)&&(m=0),this.volumes.hasOwnProperty(u)||(this.volumes[u]=0),m>this.silenceThreshold?m=1:m=0;const o=this.volumes[u]*this.speakerWeight+m*(1-this.speakerWeight);this.volumes[u]=o;for(const i in this.volumes)i!==u&&(this.volumes[i]=Math.max(this.volumes[i]-this.takeoverRate*m,0));return o<this.cutoffThreshold?0:o}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(u=.9,m=.01,s=.2,o=.2){this.speakerWeight=u,this.cutoffThreshold=m,this.silenceThreshold=s,this.takeoverRate=o,this.volumes={}}},"DefaultActiveSpeakerPolicy");d.default=g},CxxK:function(W,d,h){"use strict";h.d(d,"b",function(){return g}),h.d(d,"a",function(){return p});const g={Incoming:"incoming",Outgoing:"outgoing"},p={Incoming:"incoming",Outgoing:"outgoing"}},Czkq:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{addObserver(u){this.observers.add(u)}removeObserver(u){this.observers.delete(u)}filterFrameDurationHigh(u){var m;for(const s of this.observers)(m=s.filterFrameDurationHigh)===null||m===void 0||m.call(s,u)}filterCPUUtilizationHigh(u){var m;for(const s of this.observers)(m=s.filterCPUUtilizationHigh)===null||m===void 0||m.call(s,u)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");d.default=g},D3pN:function(W,d,h){"use strict";h.r(d),h.d(d,"__extends",function(){return p}),h.d(d,"__assign",function(){return u}),h.d(d,"__rest",function(){return m}),h.d(d,"__decorate",function(){return s}),h.d(d,"__param",function(){return o}),h.d(d,"__metadata",function(){return i}),h.d(d,"__awaiter",function(){return e}),h.d(d,"__generator",function(){return t}),h.d(d,"__createBinding",function(){return n}),h.d(d,"__exportStar",function(){return r}),h.d(d,"__values",function(){return c}),h.d(d,"__read",function(){return f}),h.d(d,"__spread",function(){return S}),h.d(d,"__spreadArrays",function(){return l}),h.d(d,"__await",function(){return y}),h.d(d,"__asyncGenerator",function(){return T}),h.d(d,"__asyncDelegator",function(){return O}),h.d(d,"__asyncValues",function(){return R}),h.d(d,"__makeTemplateObject",function(){return F}),h.d(d,"__importStar",function(){return U}),h.d(d,"__importDefault",function(){return _}),h.d(d,"__classPrivateFieldGet",function(){return P}),h.d(d,"__classPrivateFieldSet",function(){return L});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var g=a(function(A,M){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,G){k.__proto__=G}||function(k,G){for(var K in G)G.hasOwnProperty(K)&&(k[K]=G[K])},g(A,M)},"extendStatics");function p(A,M){g(A,M);function k(){this.constructor=A}a(k,"__"),A.prototype=M===null?Object.create(M):(k.prototype=M.prototype,new k)}a(p,"__extends");var u=a(function(){return u=Object.assign||a(function(M){for(var k,G=1,K=arguments.length;G<K;G++){k=arguments[G];for(var H in k)Object.prototype.hasOwnProperty.call(k,H)&&(M[H]=k[H])}return M},"__assign"),u.apply(this,arguments)},"__assign");function m(A,M){var k={};for(var G in A)Object.prototype.hasOwnProperty.call(A,G)&&M.indexOf(G)<0&&(k[G]=A[G]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,G=Object.getOwnPropertySymbols(A);K<G.length;K++)M.indexOf(G[K])<0&&Object.prototype.propertyIsEnumerable.call(A,G[K])&&(k[G[K]]=A[G[K]]);return k}a(m,"__rest");function s(A,M,k,G){var K=arguments.length,H=K<3?M:G===null?G=Object.getOwnPropertyDescriptor(M,k):G,X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(A,M,k,G);else for(var oe=A.length-1;oe>=0;oe--)(X=A[oe])&&(H=(K<3?X(H):K>3?X(M,k,H):X(M,k))||H);return K>3&&H&&Object.defineProperty(M,k,H),H}a(s,"__decorate");function o(A,M){return function(k,G){M(k,G,A)}}a(o,"__param");function i(A,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(A,M)}a(i,"__metadata");function e(A,M,k,G){function K(H){return H instanceof k?H:new k(function(X){X(H)})}return a(K,"adopt"),new(k||(k=Promise))(function(H,X){function oe(he){try{re(G.next(he))}catch(Pe){X(Pe)}}a(oe,"fulfilled");function le(he){try{re(G.throw(he))}catch(Pe){X(Pe)}}a(le,"rejected");function re(he){he.done?H(he.value):K(he.value).then(oe,le)}a(re,"step"),re((G=G.apply(A,M||[])).next())})}a(e,"__awaiter");function t(A,M){var k={label:0,sent:function(){if(H[0]&1)throw H[1];return H[1]},trys:[],ops:[]},G,K,H,X;return X={next:oe(0),throw:oe(1),return:oe(2)},typeof Symbol=="function"&&(X[Symbol.iterator]=function(){return this}),X;function oe(re){return function(he){return le([re,he])}}function le(re){if(G)throw new TypeError("Generator is already executing.");for(;k;)try{if(G=1,K&&(H=re[0]&2?K.return:re[0]?K.throw||((H=K.return)&&H.call(K),0):K.next)&&!(H=H.call(K,re[1])).done)return H;switch(K=0,H&&(re=[re[0]&2,H.value]),re[0]){case 0:case 1:H=re;break;case 4:return k.label++,{value:re[1],done:!1};case 5:k.label++,K=re[1],re=[0];continue;case 7:re=k.ops.pop(),k.trys.pop();continue;default:if(H=k.trys,!(H=H.length>0&&H[H.length-1])&&(re[0]===6||re[0]===2)){k=0;continue}if(re[0]===3&&(!H||re[1]>H[0]&&re[1]<H[3])){k.label=re[1];break}if(re[0]===6&&k.label<H[1]){k.label=H[1],H=re;break}if(H&&k.label<H[2]){k.label=H[2],k.ops.push(re);break}H[2]&&k.ops.pop(),k.trys.pop();continue}re=M.call(A,k)}catch(he){re=[6,he],K=0}finally{G=H=0}if(re[0]&5)throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}}a(t,"__generator");function n(A,M,k,G){G===void 0&&(G=k),A[G]=M[k]}a(n,"__createBinding");function r(A,M){for(var k in A)k!=="default"&&!M.hasOwnProperty(k)&&(M[k]=A[k])}a(r,"__exportStar");function c(A){var M=typeof Symbol=="function"&&Symbol.iterator,k=M&&A[M],G=0;if(k)return k.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&G>=A.length&&(A=void 0),{value:A&&A[G++],done:!A}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}a(c,"__values");function f(A,M){var k=typeof Symbol=="function"&&A[Symbol.iterator];if(!k)return A;var G=k.call(A),K,H=[],X;try{for(;(M===void 0||M-- >0)&&!(K=G.next()).done;)H.push(K.value)}catch(oe){X={error:oe}}finally{try{K&&!K.done&&(k=G.return)&&k.call(G)}finally{if(X)throw X.error}}return H}a(f,"__read");function S(){for(var A=[],M=0;M<arguments.length;M++)A=A.concat(f(arguments[M]));return A}a(S,"__spread");function l(){for(var A=0,M=0,k=arguments.length;M<k;M++)A+=arguments[M].length;for(var G=Array(A),K=0,M=0;M<k;M++)for(var H=arguments[M],X=0,oe=H.length;X<oe;X++,K++)G[K]=H[X];return G}a(l,"__spreadArrays");function y(A){return this instanceof y?(this.v=A,this):new y(A)}a(y,"__await");function T(A,M,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=k.apply(A,M||[]),K,H=[];return K={},X("next"),X("throw"),X("return"),K[Symbol.asyncIterator]=function(){return this},K;function X(pe){G[pe]&&(K[pe]=function(Me){return new Promise(function(We,Ae){H.push([pe,Me,We,Ae])>1||oe(pe,Me)})})}function oe(pe,Me){try{le(G[pe](Me))}catch(We){Pe(H[0][3],We)}}function le(pe){pe.value instanceof y?Promise.resolve(pe.value.v).then(re,he):Pe(H[0][2],pe)}function re(pe){oe("next",pe)}function he(pe){oe("throw",pe)}function Pe(pe,Me){pe(Me),H.shift(),H.length&&oe(H[0][0],H[0][1])}}a(T,"__asyncGenerator");function O(A){var M,k;return M={},G("next"),G("throw",function(K){throw K}),G("return"),M[Symbol.iterator]=function(){return this},M;function G(K,H){M[K]=A[K]?function(X){return(k=!k)?{value:y(A[K](X)),done:K==="return"}:H?H(X):X}:H}}a(O,"__asyncDelegator");function R(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=A[Symbol.asyncIterator],k;return M?M.call(A):(A=typeof c=="function"?c(A):A[Symbol.iterator](),k={},G("next"),G("throw"),G("return"),k[Symbol.asyncIterator]=function(){return this},k);function G(H){k[H]=A[H]&&function(X){return new Promise(function(oe,le){X=A[H](X),K(oe,le,X.done,X.value)})}}function K(H,X,oe,le){Promise.resolve(le).then(function(re){H({value:re,done:oe})},X)}}a(R,"__asyncValues");function F(A,M){return Object.defineProperty?Object.defineProperty(A,"raw",{value:M}):A.raw=M,A}a(F,"__makeTemplateObject");function U(A){if(A&&A.__esModule)return A;var M={};if(A!=null)for(var k in A)Object.hasOwnProperty.call(A,k)&&(M[k]=A[k]);return M.default=A,M}a(U,"__importStar");function _(A){return A&&A.__esModule?A:{default:A}}a(_,"__importDefault");function P(A,M){if(!M.has(A))throw new TypeError("attempted to get private field on non-instance");return M.get(A)}a(P,"__classPrivateFieldGet");function L(A,M,k){if(!M.has(A))throw new TypeError("attempted to set private field on non-instance");return M.set(A,k),k}a(L,"__classPrivateFieldSet")},D7wJ:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(e,t,n,r){function c(f){return f instanceof n?f:new n(function(S){S(f)})}return a(c,"adopt"),new(n||(n=Promise))(function(f,S){function l(O){try{T(r.next(O))}catch(R){S(R)}}a(l,"fulfilled");function y(O){try{T(r.throw(O))}catch(R){S(R)}}a(y,"rejected");function T(O){O.done?f(O.value):c(O.value).then(l,y)}a(T,"step"),T((r=r.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("3i7i")),m=p(h("HbHZ")),s=h("XCDq"),o=p(h("j+uH"));let i=a(class zl extends o.default{run(){return g(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===m.default.ReceivedSignalFrame&&t.message.type===s.SdkSignalFrame.Type.DATA_MESSAGE)for(const n of t.message.dataMessage.messages){const r=new u.default(n.ingestTimeNs/1e6,n.topic,n.data,n.senderAttendeeId,n.senderExternalUserId,n.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(r)}}validateDataMessage(t,n,r){if(!zl.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(n.length>zl.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(r&&r<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(n,r,c)=>{if(this.context.signalingClient.ready()){let f;r instanceof Uint8Array?f=r:typeof r=="string"?f=new TextEncoder().encode(r):f=new TextEncoder().encode(JSON.stringify(r)),this.validateDataMessage(n,f,c);const S=s.SdkDataMessagePayload.create();S.topic=n,S.lifetimeMs=c,S.data=f;const l=s.SdkDataMessageFrame.create();l.messages=[S],this.context.signalingClient.sendDataMessage(l)}else this.context.logger.error("Signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");d.default=i,i.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),i.DATA_SIZE=2048},DE61:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class Hu{static builder(){return new Hu}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const u={height:144,width:256,range:[0,1],channels:3},m={height:144,width:256,range:[0,1],channels:1},s="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=s,this.input=u,this.output=m,this}withPath(u){return this.path=u,this}withInput(u){return this.input=u,this}withOutput(u){return this.output=u,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");d.default=g},DG83:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.VideoLogEvent=void 0;var g;(function(p){p[p.InputAttached=0]="InputAttached",p[p.SendingFailed=1]="SendingFailed",p[p.SendingSuccess=2]="SendingSuccess"})(g=d.VideoLogEvent||(d.VideoLogEvent={})),d.default=g},DJNY:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.default={hash:"d477baf",raw:"v3.20.0",semverString:"3.20.0"}},DJgg:function(W,d,h){"use strict";W.exports=p;var g=h("kU+7");(p.prototype=Object.create(g.EventEmitter.prototype)).constructor=p;function p(u,m,s){if(typeof u!="function")throw TypeError("rpcImpl must be a function");g.EventEmitter.call(this),this.rpcImpl=u,this.requestDelimited=Boolean(m),this.responseDelimited=Boolean(s)}a(p,"Service"),p.prototype.rpcCall=a(function u(m,s,o,i,e){if(!i)throw TypeError("request must be specified");var t=this;if(!e)return g.asPromise(u,t,m,s,o,i);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(m,s[t.requestDelimited?"encodeDelimited":"encode"](i).finish(),a(function(r,c){if(r)return t.emit("error",r,m),e(r);if(c===null){t.end(!0);return}if(!(c instanceof o))try{c=o[t.responseDelimited?"decodeDelimited":"decode"](c)}catch(f){return t.emit("error",f,m),e(f)}return t.emit("data",c,m),e(null,c)},"rpcCallback"))}catch(n){t.emit("error",n,m),setTimeout(function(){e(n)},0);return}},"rpcCall"),p.prototype.end=a(function(m){return this.rpcImpl&&(m||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},DUgj:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.convertServerSideNetworkAdaptionEnumToSignaled=d.convertServerSideNetworkAdaptionEnumFromSignaled=d.serverSideNetworkAdaptionIsNoneOrDefault=d.ServerSideNetworkAdaption=void 0;const g=h("f2XL");var p;(function(o){o[o.Default=0]="Default",o[o.None=1]="None",o[o.BandwidthProbing=2]="BandwidthProbing",o[o.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(p=d.ServerSideNetworkAdaption||(d.ServerSideNetworkAdaption={})),d.default=p;function u(o){return o===p.None||o===p.Default}a(u,"serverSideNetworkAdaptionIsNoneOrDefault"),d.serverSideNetworkAdaptionIsNoneOrDefault=u;function m(o){switch(o){case g.SdkServerSideNetworkAdaption.DEFAULT:return p.Default;case g.SdkServerSideNetworkAdaption.NONE:return p.None;case g.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return p.BandwidthProbing;case g.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return p.BandwidthProbingAndRemoteVideoQualityAdaption}}a(m,"convertServerSideNetworkAdaptionEnumFromSignaled"),d.convertServerSideNetworkAdaptionEnumFromSignaled=m;function s(o){switch(o){case p.Default:return g.SdkServerSideNetworkAdaption.DEFAULT;case p.None:return g.SdkServerSideNetworkAdaption.NONE;case p.BandwidthProbing:return g.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case p.BandwidthProbingAndRemoteVideoQualityAdaption:return g.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}a(s,"convertServerSideNetworkAdaptionEnumToSignaled"),d.convertServerSideNetworkAdaptionEnumToSignaled=s},DbLV:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{matchesConstraints(u){return JSON.stringify(this.constraints)===JSON.stringify(u)}constructor(){this.groupId=""}},"DeviceSelection");d.default=g},DcUe:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("XJrD"));let u=a(class{updateConnectionMetric(s){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(s){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new p.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(s){}setHasBandwidthPriority(s){}setHighResolutionFeatureEnabled(s){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");d.default=u},DmQM:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class ju{static create(u,m){const s=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!u||u.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!s.test(u))throw new Error(`appName must satisfy ${s} regular expression`);const o=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!m||m.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!o.test(m))throw new Error("appVersion must satisfy Semantic Versioning format");return new ju(u,m)}constructor(u,m){this.appName=u,this.appVersion=m}},"ApplicationMetadata");d.default=g},E6e8:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g=h("dJwD");g.__exportStar(h("Bkbp"),d)},"EX/T":function(W,d,h){"use strict";h.r(d),h.d(d,"fromHex",function(){return u}),h.d(d,"toHex",function(){return m});const g={},p={};for(let s=0;s<256;s++){let o=s.toString(16).toLowerCase();o.length===1&&(o=`0${o}`),g[s]=o,p[o]=s}function u(s){if(s.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const o=new Uint8Array(s.length/2);for(let i=0;i<s.length;i+=2){const e=s.slice(i,i+2).toLowerCase();if(e in p)o[i/2]=p[e];else throw new Error(`Cannot decode unrecognized sequence ${e} as hexadecimal`)}return o}a(u,"fromHex");function m(s){let o="";for(let i=0;i<s.byteLength;i++)o+=g[s[i]];return o}a(m,"toHex")},EjQB:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.VideoFxSegmentationRateManager=void 0;const g=h("6qF3");let p=a(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=g.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(m){m>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&m<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(m,s){this.logger=m,this.targetSegmentationCyclePercentage=s/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=g.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");d.VideoFxSegmentationRateManager=p},EkGV:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(u,m,s,o){function i(e){return e instanceof s?e:new s(function(t){t(e)})}return a(i,"adopt"),new(s||(s=Promise))(function(e,t){function n(f){try{c(o.next(f))}catch(S){t(S)}}a(n,"fulfilled");function r(f){try{c(o.throw(f))}catch(S){t(S)}}a(r,"rejected");function c(f){f.done?e(f.value):i(f.value).then(n,r)}a(c,"step"),c((o=o.apply(u,m||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});let p=a(class{createWorkerTimer(){try{const m=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(m))}catch{}}start(m,s){return g(this,void 0,void 0,function*(){this.callback=s,this.workerTimer?(this.workerTimer.onmessage=o=>{this.lastTimeout=o.data,this.callback()},this.workerTimer.postMessage(m)):this.lastTimeout=setTimeout(()=>{this.callback()},m)})}destroy(){return g(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");d.default=p},EkyC:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.loadWorker=void 0;const g=h("o3U+"),p={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},u=a((m,s,o,i)=>{i==null||i.debug(`Loading ${s} worker from ${m}.`);let e=!1;try{e=self.origin===new URL(m).origin}catch(t){i==null||i.error("Could not compare origins.",t)}if(e){const t=g.withQueryString(m,o);return Promise.resolve(new Worker(t,{name:s}))}return g.fetchWithBehavior(m,p,o).then(t=>{if(t.ok)return t.blob().then(n=>new Worker(window.URL.createObjectURL(n)));throw new Error("Fetch failed.")})},"loadWorker");d.loadWorker=u},F7zz:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("zcg+"));let u=a(class extends p.default{static nextTick(s){setTimeout(s,0)}constructor(){super(0)}},"AsyncScheduler");d.default=u},FCN7:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("hEYi")),m=h("f2XL"),s=p(h("aVV0"));let o=a(class extends s.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return g(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let n=a(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(f){if(f.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}f.type===u.default.ReceivedSignalFrame&&f.message.type===m.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(f,S){this.signalingClient=f,this.logger=S}},"Interceptor");const r=new n(this.context.signalingClient,this.context.logger);this.taskCanceler=r,this.context.signalingClient.registerObserver(r)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");d.default=o},FKpq:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("Mr6q"));let u=a(class extends p.default{},"BackgroundBlurVideoFrameProcessorDelegate");d.default=u},FMuk:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{add(u){return new Promise((m,s)=>{this.queue=this.queue.then(u).then(m).catch(s)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");d.default=g},Fm4y:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(m,s,o,i){function e(t){return t instanceof o?t:new o(function(n){n(t)})}return a(e,"adopt"),new(o||(o=Promise))(function(t,n){function r(S){try{f(i.next(S))}catch(l){n(l)}}a(r,"fulfilled");function c(S){try{f(i.throw(S))}catch(l){n(l)}}a(c,"rejected");function f(S){S.done?t(S.value):e(S.value).then(r,c)}a(f,"step"),f((i=i.apply(m,s||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});const p=h("0OOd");let u=a(class{addObserver(s){this.audioVideoController.addObserver(s),this.trace("addObserver")}removeObserver(s){this.audioVideoController.removeObserver(s),this.trace("removeObserver")}setAudioProfile(s){this.trace("setAudioProfile",s),this.audioVideoController.setAudioProfile(s)}start(s){this.audioVideoController.start(s),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(s){return this.trace("getRTCPeerConnectionStats",s?s.id:null),this.audioVideoController.getRTCPeerConnectionStats(s)}bindAudioElement(s){const o=this.audioMixController.bindAudioElement(s);return this.trace("bindAudioElement",s.id,o),o}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(s){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(s)}removeAudioMixObserver(s){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(s)}bindVideoElement(s,o){this.videoTileController.bindVideoElement(s,o),this.trace("bindVideoElement",{tileId:s,videoElementId:o.id})}unbindVideoElement(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(s,o),this.trace("unbindVideoElement",{tileId:s,cleanUpVideoElement:o})}startLocalVideoTile(){const s=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,s),s}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const s=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,s),s}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const s=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),s}pauseVideoTile(s){this.videoTileController.pauseVideoTile(s),this.trace("pauseVideoTile",s)}unpauseVideoTile(s){this.videoTileController.unpauseVideoTile(s),this.trace("unpauseVideoTile",s)}getVideoTile(s){const o=this.videoTileController.getVideoTile(s);return this.trace("getVideoTile",s),o}getAllRemoteVideoTiles(){const s=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),s}getAllVideoTiles(){const s=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),s}addVideoTile(){const s=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,s.state()),s}removeVideoTile(s){this.videoTileController.removeVideoTile(s),this.trace("removeVideoTile",s)}removeVideoTilesByAttendeeId(s){const o=this.videoTileController.removeVideoTilesByAttendeeId(s);return this.trace("removeVideoTilesByAttendeeId",s,o),o}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(s){const o=this.videoTileController.captureVideoTile(s);return this.trace("captureVideoTile",s),o}realtimeSubscribeToAttendeeIdPresence(s){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(s),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(s){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(s),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(s){this.realtimeController.realtimeSetCanUnmuteLocalAudio(s),this.trace("realtimeSetCanUnmuteLocalAudio",s)}realtimeSubscribeToSetCanUnmuteLocalAudio(s){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(s),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(s){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(s),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const s=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,s),s}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const s=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),s}realtimeSubscribeToMuteAndUnmuteLocalAudio(s){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(s),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(s){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(s),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const s=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),s}realtimeSubscribeToVolumeIndicator(s,o){this.realtimeController.realtimeSubscribeToVolumeIndicator(s,o),this.trace("realtimeSubscribeToVolumeIndicator",s)}realtimeUnsubscribeFromVolumeIndicator(s,o){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(s,o),this.trace("realtimeUnsubscribeFromVolumeIndicator",s,o)}realtimeSubscribeToLocalSignalStrengthChange(s){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(s),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(s){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(s),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(s,o,i){this.realtimeController.realtimeSendDataMessage(s,o,i),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(s,o){this.realtimeController.realtimeSubscribeToReceiveDataMessage(s,o),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(s){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(s),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(s){this.realtimeController.realtimeSubscribeToFatalError(s),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(s){this.realtimeController.realtimeUnsubscribeToFatalError(s),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(s,o,i,e){this.audioVideoController.activeSpeakerDetector.subscribe(s,o,i,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(s){this.audioVideoController.activeSpeakerDetector.unsubscribe(s),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return g(this,void 0,void 0,function*(){const o=yield this.deviceController.listAudioInputDevices(s);return this.trace("listAudioInputDevices",s,o),o})}listVideoInputDevices(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return g(this,void 0,void 0,function*(){const o=yield this.deviceController.listVideoInputDevices(s);return this.trace("listVideoInputDevices",s,o),o})}listAudioOutputDevices(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return g(this,void 0,void 0,function*(){const o=yield this.deviceController.listAudioOutputDevices(s);return this.trace("listAudioOutputDevices",s,o),o})}startAudioInput(s){return g(this,void 0,void 0,function*(){return this.trace("startAudioInput",s),this.deviceController.startAudioInput(s)})}stopAudioInput(){return g(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(s){return g(this,void 0,void 0,function*(){return p.isVideoTransformDevice(s)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",s),this.deviceController.startVideoInput(s)})}stopVideoInput(){return g(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(s){const o=this.deviceController.chooseAudioOutput(s);return this.trace("chooseAudioOutput",s),o}addDeviceChangeObserver(s){this.deviceController.addDeviceChangeObserver(s),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(s){this.deviceController.removeDeviceChangeObserver(s),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const s=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),s}startVideoPreviewForVideoInput(s){this.deviceController.startVideoPreviewForVideoInput(s),this.trace("startVideoPreviewForVideoInput",s.id)}stopVideoPreviewForVideoInput(s){this.deviceController.stopVideoPreviewForVideoInput(s),this.trace("stopVideoPreviewForVideoInput",s.id)}setDeviceLabelTrigger(s){this.deviceController.setDeviceLabelTrigger(s),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(s){const o=this.deviceController.mixIntoAudioInput(s);return this.trace("mixIntoAudioInput",s.id),o}chooseVideoInputQuality(s,o,i){this.deviceController.chooseVideoInputQuality(s,o,i),this.trace("chooseVideoInputQuality",{width:s,height:o,frameRate:i})}setVideoMaxBandwidthKbps(s){this.audioVideoController.setVideoMaxBandwidthKbps(s),this.trace("setVideoMaxBandwidthKbps",s)}setVideoCodecSendPreferences(s){this.audioVideoController.setVideoCodecSendPreferences(s),this.trace("setVideoCodecSendPreferences",s)}getVideoInputQualitySettings(){const s=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),s}setContentAudioProfile(s){this.trace("setContentAudioProfile",s),this.contentShareController.setContentAudioProfile(s)}enableSimulcastForContentShare(s,o){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(s,o)}enableSVCForContentShare(s){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(s)}startContentShare(s){const o=this.contentShareController.startContentShare(s);return this.trace("startContentShare"),o}startContentShareFromScreenCapture(s,o){const i=this.contentShareController.startContentShareFromScreenCapture(s,o);return this.trace("startContentShareFromScreenCapture"),i}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(s){this.contentShareController.addContentShareObserver(s),this.trace("addContentShareObserver")}removeContentShareObserver(s){this.contentShareController.removeContentShareObserver(s),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(s){this.contentShareController.setContentShareVideoCodecPreferences(s),this.trace("setContentShareVideoCodecPreferences")}trace(s,o,i){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let n=`API/DefaultAudioVideoFacade/${e}/${t}/${s}`;typeof o<"u"&&(n+=` ${JSON.stringify(o)}`),typeof i<"u"&&(n+=` -> ${JSON.stringify(i)}`),this.audioVideoController.logger.info(n)}getRemoteVideoSources(){const s=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,s),s}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(s){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const o=this.audioVideoController.promoteToPrimaryMeeting(s);return this.trace("promoteToPrimaryMeeting",null,o),o}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(s){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(s,o,i,e,t,n){this.audioVideoController=s,this.videoTileController=o,this.realtimeController=i,this.audioMixController=e,this.deviceController=t,this.contentShareController=n}},"DefaultAudioVideoFacade");d.default=u},FxSh:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("Sa54")),m=p(h("3zlU"));let s=a(class Wu{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(i){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(i)}chooseNewInnerDevice(i){const e=new Wu(this.logger,i,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return g(this,void 0,void 0,function*(){return this.device})}transformStream(i){return g(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(i),this.inputMediaStream=i,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const i=this.device&&this.device.id;if(this.pipe.stop(),!i&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return g(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const i of this.inputMediaStream.getVideoTracks())i.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(i){this.observers.add(i)}removeObserver(i){this.observers.delete(i)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(i=>{i.processingDidStart&&i.processingDidStart()})}processingLatencyTooHigh(i){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(i)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(i=>{i.processingDidFailToStart&&i.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(i=>{i.processingDidStop&&i.processingDidStop()})}forEachObserver(i){for(const e of this.observers)setTimeout(()=>{i(e)},0)}constructor(i,e,t,n=new u.default){this.logger=i,this.device=e,this.processors=t,this.browserBehavior=n,this.observers=new Set,this.pipe=new m.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");d.default=s},Fyq9:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("aVV0"));let m=a(class extends u.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const o in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[o]()}addPeerConnectionEventLogger(){const o=this.context.peer;o.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${o.connectionState}`)}),o.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),o.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${o.iceGatheringState}`)}),o.addEventListener("icecandidate",i=>{this.context.logger.info(`peer connection ice candidate: ${i.candidate?i.candidate.candidate:"(null)"}`)}),o.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${o.iceConnectionState}`)})}run(){return g(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const i=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};i.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),i.sdpSemantics="unified-plan",i.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(i),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(o){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(o)):!1}addRemoteVideoTrack(o,i){var e;const t=i.id,n=this.context.videoStreamIndex.attendeeIdForTrack(t);let r,c;if(this.context.videoTileController.getVideoTileForAttendeeId?(c=this.context.videoTileController.getVideoTileForAttendeeId(n),r=!!(!((e=c==null?void 0:c.state())===null||e===void 0)&&e.boundVideoStream)):r=this.context.videoTileController.haveVideoTileForAttendeeId(n),r){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${n}`);return}c||(c=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${c.id()}`));let f=this.context.videoStreamIndex.streamIdForTrack(t);typeof f>"u"&&(this.logger.warn(`stream not found for tile=${c.id()} track=${t}`),f=null);for(let F=0;F<this.trackEvents.length;F++){const U=this.trackEvents[F],_=i.getVideoTracks();if(_&&_.length){const P=_[0],L=a(()=>{this.context.logger.info(`received the ${U} event for tile=${c.id()} id=${o.id} streamId=${f}`),U==="ended"&&this.removeRemoteVideoTrack(o,c.state())},"callback");P.addEventListener(U,L),this.removeVideoTrackEventListeners[o.id]||(this.removeVideoTrackEventListeners[o.id]=[]),this.removeVideoTrackEventListeners[o.id].push(()=>{P.removeEventListener(U,L)})}}let S,l;if(o.getSettings){const F=o.getSettings();S=F.width,l=F.height}else{const F=o.getCapabilities();S=F.width,l=F.height}const y=this.context.videoStreamIndex.externalUserIdForTrack(t);c.bindVideoStream(n,!1,i,S,l,f,y),this.logger.info(`video track added, use tile=${c.id()} track=${t} streamId=${f}`);const T="removetrack",O=i,R=a(()=>this.removeRemoteVideoTrack(o,c.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[o.id]=()=>{O.removeEventListener(T,R),delete this.removeTrackRemovedEventListeners[o.id]},O.addEventListener(T,R)}removeRemoteVideoTrack(o,i){if(this.removeTrackRemovedEventListeners.hasOwnProperty(o.id)){this.removeTrackRemovedEventListeners[o.id]();for(const e of this.removeVideoTrackEventListeners[o.id])e();delete this.removeVideoTrackEventListeners[o.id]}this.logger.info(`video track ended, removing tile=${i.tileId} id=${o.id} stream=${i.streamId}`),i.streamId?this.context.videosPaused.remove(i.streamId):this.logger.warn(`no stream found for tile=${i.tileId}`),this.context.videoTileController.removeVideoTile(i.tileId)}constructor(o){super(o.logger),this.context=o,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=i=>{const e=i.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),i.transceiver&&i.transceiver.currentDirection==="inactive")return;if(i.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=i.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");d.default=m,m.REMOVE_HANDLER_INTERVAL_MS=1e4},GAXn:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={UnknownMethod:"unknown_method",UnknownWorkflowId:"unknown_workflow_id",AccessDenied:"access_denied"},t=Object(s.a)("workflows.get generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"workflows.get",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to workflows.get
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherworkflowsGetFetcher",description:"workflows.get generated fetcher"}},GEtQ:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.loadWorker=void 0;const g=h("XEV2"),p={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},u=a((m,s,o,i)=>{i==null||i.debug(`Loading ${s} worker from ${m}.`);let e=!1;try{e=self.origin===new URL(m).origin}catch(t){i==null||i.error("Could not compare origins.",t)}if(e){const t=g.withQueryString(m,o);return Promise.resolve(new Worker(t,{name:s}))}return g.fetchWithBehavior(m,p,o).then(t=>{if(t.ok)return t.blob().then(n=>new Worker(window.URL.createObjectURL(n)));throw new Error("Fetch failed.")})},"loadWorker");d.loadWorker=u},GVX8:function(W,d,h){"use strict";h.d(d,"a",function(){return p});function g(m){return a(({dispatch:o,getState:i})=>e=>t=>typeof t=="function"?t(o,i,m):e(t),"middleware")}a(g,"createThunkMiddleware");var p=g(),u=g},GW5S:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(u,m,s,o){function i(e){return e instanceof s?e:new s(function(t){t(e)})}return a(i,"adopt"),new(s||(s=Promise))(function(e,t){function n(f){try{c(o.next(f))}catch(S){t(S)}}a(n,"fulfilled");function r(f){try{c(o.throw(f))}catch(S){t(S)}}a(r,"rejected");function c(f){f.done?e(f.value):i(f.value).then(n,r)}a(c,"step"),c((o=o.apply(u,m||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});let p=a(class{mute(m){return g(this,void 0,void 0,function*(){})}stop(){var m;return g(this,void 0,void 0,function*(){(m=this.node)===null||m===void 0||m.disconnect()})}intrinsicDevice(){return g(this,void 0,void 0,function*(){return this.inner})}createAudioNode(m){var s;return g(this,void 0,void 0,function*(){return(s=this.node)===null||s===void 0||s.disconnect(),this.node=yield this.createSingleAudioNode(m),{start:this.node,end:this.node}})}constructor(m){this.inner=m}},"SingleNodeAudioTransformDevice");d.default=p},GZjp:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(u){this._audioHostURL=u}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(u){this._signalingURL=u}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(u){this._turnControlURL=u}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(u){this._eventIngestionURL=u}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=u=>u}},"MeetingSessionURLs");d.default=g},Gn1W:function(W,d,h){"use strict";var g=h("c3gm"),p=h("XFRR");function u(m,s){this.__wrapped__=m,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=void 0}a(u,"LodashWrapper"),u.prototype=Object(g.a)(p.a.prototype),u.prototype.constructor=u,d.a=u},"Gs2/":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("zH6K"));let u=a(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new p.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");d.default=u},GtHv:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("CmE0")),m=h("vjEy"),s=p(h("l8QA"));let o=a(class extends u.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:r,targetCanvas:c}=this,{width:f,height:S}=c;r.save(),r.clearRect(0,0,f,S),r.drawImage(this.scaledCanvas,0,0,f,S),r.globalCompositeOperation="source-in",r.drawImage(e,0,0,f,S),r.globalCompositeOperation="destination-over",r.filter=`blur(${this.blurAmount}px)`,r.drawImage(e,0,0,c.width,c.height),r.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return g(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new s.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: ${this.stringify(t)}`)}},"BackgroundBlurProcessorProvided");d.default=o},GxrV:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"BitrateParameters");d.default=g},GzZI:function(W,d,h){"use strict";var g=h("u37q"),p=h("ZnfP"),u=h("fshX"),m=9007199254740991,s=4294967295,o=Math.min;function i(e,t){if(e=Object(u.a)(e),e<1||e>m)return[];var n=s,r=o(e,s);t=Object(p.a)(t),e-=s;for(var c=Object(g.a)(r,t);++n<e;)t(n);return c}a(i,"times"),d.a=i},H7ma:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.SimulcastLayers=void 0;var g;(function(p){p[p.Low=0]="Low",p[p.LowAndMedium=1]="LowAndMedium",p[p.LowAndHigh=2]="LowAndHigh",p[p.Medium=3]="Medium",p[p.MediumAndHigh=4]="MediumAndHigh",p[p.High=5]="High"})(g=d.SimulcastLayers||(d.SimulcastLayers={})),d.default=g},HAqy:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("BkFD"));let m=a(class{needUpdate(o){return this.activeSpeakers?this.speakerScores[o]===0&&this.activeSpeakers.includes(o)||this.speakerScores[o]>0&&!this.activeSpeakers.includes(o):!0}updateActiveSpeakers(o,i,e){if(!this.needUpdate(e))return;const t=[],n=Object.keys(this.speakerScores);for(let l=0;l<n.length;l++){const y=n[l];t.push({attendeeId:y,activeScore:this.speakerScores[y]})}const r=t.sort((l,y)=>y.activeScore-l.activeScore).filter(function(l){return l.activeScore>0}).map(function(l){return l.attendeeId});this.activeSpeakers=r,i(r);const f=r.length>0&&r[0]===this.selfAttendeeId&&o.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==f&&(this.hasBandwidthPriority=f,this.hasBandwidthPriorityCallback(f))}updateScore(o,i,e,t,n){const r=o.calculateScore(e,t,n);this.speakerScores[e]!==r&&(this.speakerScores[e]=r,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(o,i,e))}subscribe(o,i,e,t){const n=a((c,f)=>{if(!f){this.speakerScores[c]=0,this.mostRecentUpdateTimestamp[c]=Date.now(),this.updateActiveSpeakers(o,i,c);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(c,(S,l,y,T)=>{this.mostRecentUpdateTimestamp[S]=Date.now(),y!==null&&(this.speakerMuteState[S]=y),this.updateScore(o,i,S,l,y)})},"handler");this.detectorCallbackToHandler.set(i,n);const r=new u.default(this.updateIntervalMs);if(r.start(()=>{for(const c in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[c]>this.waitIntervalMs&&this.updateScore(o,i,c,0,this.speakerMuteState[c])}),this.detectorCallbackToActivityTimer.set(i,r),e&&t){const c=new u.default(t);c.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(i,c)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(n)}unsubscribe(o){const i=this.detectorCallbackToHandler.get(o);this.detectorCallbackToHandler.delete(o),i&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i);const e=this.detectorCallbackToActivityTimer.get(o);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(o));const t=this.detectorCallbackToScoresTimer.get(o);t&&(t.stop(),this.detectorCallbackToHandler.delete(o))}destroy(){return g(this,void 0,void 0,function*(){for(const o of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(o);for(const o of this.detectorCallbackToActivityTimer.values())o.stop();for(const o of this.detectorCallbackToScoresTimer.values())o.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(o,i,e,t=1e3,n=200){this.realtimeController=o,this.selfAttendeeId=i,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=n,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");d.default=m},HCbE:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("cKqT"));let u=a(class extends p.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(s,o,i,e){super(s,o,i),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");d.default=u},HG8V:function(W,d,h){"use strict";(function(g){var p=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("U9CR")),m=p(h("zcg+")),s=h("XCDq"),o=h("VCUZ"),i=p(h("ac3q")),e=p(h("aCJD")),t=p(h("z8+u")),n=h("/AJg"),r=p(h("0JTw")),c=p(h("HbHZ"));let f=a(class Ld{registerObserver(l){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(l)}removeObserver(l){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(l)}openConnection(l){this.logger.info("adding connection request to queue: "+l.url()),this.connectionRequestQueue.push(l),this.closeConnection()}pingPong(l){this.logger.debug(()=>"sending ping");const y=s.SdkSignalFrame.create();return y.type=s.SdkSignalFrame.Type.PING_PONG,y.pingPong=l,this.sendMessage(y),y.timestampMs}join(l){this.logger.info("sending join");const y=s.SdkJoinFrame.create();y.protocolVersion=2,y.flags=s.SdkJoinFlags.HAS_STREAM_UPDATE;const T=new u.default,O={platformName:T.name(),platformVersion:T.version(),clientSource:i.default.sdkName,chimeSdkVersion:i.default.sdkVersion,clientUtcOffset:o.getFormattedOffset(new Date().getTimezoneOffset())};if(l.applicationMetadata){const{appName:F,appVersion:U}=l.applicationMetadata;O.appName=F,O.appVersion=U}y.clientDetails=s.SdkClientDetails.create(O),y.audioSessionId=this.audioSessionId,y.wantsCompressedSdp=Ld.CLIENT_SUPPORTS_COMPRESSION,y.disablePeriodicKeyframeRequestOnContentSender=l.disablePeriodicKeyframeRequestOnContentSender,y.serverSideNetworkAdaption=n.convertServerSideNetworkAdaptionEnumToSignaled(l.serverSideNetworkAdaption),y.supportedServerSideNetworkAdaptions=l.supportedServerSideNetworkAdaptions.map(n.convertServerSideNetworkAdaptionEnumToSignaled),y.wantsAllTemporalLayersInIndex=l.wantsAllTemporalLayersInIndex;const R=s.SdkSignalFrame.create();R.type=s.SdkSignalFrame.Type.JOIN,R.join=y,this.sendMessage(R)}subscribe(l){const y=s.SdkSubscribeFrame.create();if(y.sendStreams=[],y.sdpOffer=l.sdpOffer,l.connectionTypeHasVideo&&(y.receiveStreamIds=l.receiveStreamIds),l.audioHost&&(y.audioCheckin=l.audioCheckin,y.audioHost=l.audioHost,y.audioMuted=l.audioMuted,!l.audioCheckin)){const O=s.SdkStreamDescriptor.create();O.mediaType=s.SdkStreamMediaType.AUDIO,O.trackLabel="AmazonChimeExpressAudio",O.attendeeId=l.attendeeId,O.streamId=1,O.groupId=1,O.framerate=15,O.maxBitrateKbps=600,O.avgBitrateBps=4e5,y.sendStreams.push(O)}if(y.compressedSdpOffer=l.compressedSdpOffer,y.duplex=s.SdkStreamServiceType.RX,l.localVideoEnabled){y.duplex=s.SdkStreamServiceType.DUPLEX;for(let O=0;O<l.videoStreamDescriptions.length;O++){const R=l.videoStreamDescriptions[O].clone();R.attendeeId=l.attendeeId,y.sendStreams.push(R.toStreamDescriptor())}}l.videoSubscriptionConfiguration.length>0&&(y.videoSubscriptionConfiguration=l.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const T=s.SdkSignalFrame.create();T.type=s.SdkSignalFrame.Type.SUBSCRIBE,T.sub=y,this.sendMessage(T)}remoteVideoUpdate(l,y){const T=s.SdkRemoteVideoUpdateFrame.create();T.addedOrUpdatedVideoSubscriptions=l.map(this.convertSignalingClientVideoSubscriptionConfiguration),T.removedVideoSubscriptionMids=y;const O=s.SdkSignalFrame.create();O.type=s.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,O.remoteVideoUpdate=T,this.sendMessage(O)}convertSignalingClientVideoSubscriptionConfiguration(l){const y=new s.SdkVideoSubscriptionConfiguration;switch(y.mid=l.mid,y.attendeeId=l.attendeeId,y.streamId=l.streamId,y.groupId=l.groupId,y.priority=l.priority,y.targetBitrateKbps=l.targetBitrateKbps,l.qualityAdaptationPreference){case e.default.Balanced:y.qualityAdaptationPreference=s.SdkVideoQualityAdaptationPreference.BALANCED;break;case e.default.MaintainFramerate:y.qualityAdaptationPreference=s.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case e.default.MaintainResolution:y.qualityAdaptationPreference=s.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:y.qualityAdaptationPreference=s.SdkVideoQualityAdaptationPreference.BALANCED}return y}leave(){const l=s.SdkSignalFrame.create();l.type=s.SdkSignalFrame.Type.LEAVE,l.leave=s.SdkLeaveFrame.create(),this.sendMessage(l),this.logger.debug(()=>"sent leave")}sendClientMetrics(l){const y=s.SdkSignalFrame.create();y.type=s.SdkSignalFrame.Type.CLIENT_METRIC,y.clientMetric=l,this.sendMessage(y)}sendDataMessage(l){const y=s.SdkSignalFrame.create();y.type=s.SdkSignalFrame.Type.DATA_MESSAGE,y.dataMessage=l,this.sendMessage(y)}closeConnection(){var l,y;if(this.webSocket.readyState()!==t.default.None&&this.webSocket.readyState()!==t.default.Closed){this.isClosing=!0,this.sendEvent(new r.default(this,c.default.WebSocketClosing,null));const T=new m.default(Ld.CLOSE_EVENT_TIMEOUT_MS),O=a(R=>{var F,U;(U=(F=this.webSocket).removeEventListener)===null||U===void 0||U.call(F,"close",O),T.stop(),this.closeEventHandler(R)},"handler");(y=(l=this.webSocket).removeEventListener)===null||y===void 0||y.call(l,"close",this.closeEventHandler),this.webSocket.addEventListener("close",O),T.start(()=>{O(new CloseEvent("close",{wasClean:!1,code:1006,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===t.default.Open&&!this.isClosing&&this.wasOpened}mute(l){const y=s.SdkSignalFrame.create();y.type=s.SdkSignalFrame.Type.AUDIO_CONTROL;const T=s.SdkAudioControlFrame.create();T.muted=l,y.audioControl=T,this.sendMessage(y)}pause(l){const y=s.SdkSignalFrame.create();y.type=s.SdkSignalFrame.Type.PAUSE,y.pause=s.SdkPauseResumeFrame.create(),y.pause.streamIds=l,this.sendMessage(y)}resume(l){const y=s.SdkSignalFrame.create();y.type=s.SdkSignalFrame.Type.RESUME,y.pause=s.SdkPauseResumeFrame.create(),y.pause.streamIds=l,this.sendMessage(y)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(l){l.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(l)}`);const y=this.prependWithFrameTypeRTC(s.SdkSignalFrame.encode(l).finish());if(this.ready()){if(!this.webSocket.send(y)){this.sendEvent(new r.default(this,c.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new r.default(this,c.default.WebSocketSentMessage,null))}else this.sendEvent(new r.default(this,c.default.WebSocketSkippedMessage,null))}receiveMessage(l){let y;try{y=s.SdkSignalFrame.decode(l)}catch{this.logger.info(`failed to decode: ${l}`),this.sendEvent(new r.default(this,c.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(y)}`),this.webSocket.readyState()===t.default.Open?this.sendEvent(new r.default(this,c.default.ReceivedSignalFrame,y)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(y)}`)}stripFrameTypeRTC(l){const y=l[0];return y!==Ld.FRAME_TYPE_RTC&&y!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${y}`),l.slice(1)}prependWithFrameTypeRTC(l){const y=new Uint8Array(l.length+1);return y[0]=Ld.FRAME_TYPE_RTC,y.set(l,1),y}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const l=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${l.url()}`),this.isClosing=!1,this.webSocket.create(l.url(),l.protocols()),this.setUpEventListeners(),this.sendEvent(new r.default(this,c.default.WebSocketConnecting,null))}sendEvent(l){switch(l.type){case c.default.WebSocketMessage:case c.default.ReceivedSignalFrame:case c.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${c.default[l.type]}`);break;case c.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${c.default[l.type]}, websocket state=${t.default[this.webSocket.readyState()]}`);break;default:this.logger.info(`notifying event: ${c.default[l.type]}`);break}for(const y of this.observerQueue)y.handleSignalingClientEvent(l)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new r.default(this,c.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",l=>{this.sendEvent(new r.default(this,c.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(l.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("ignoring error closing signaling while connecting");return}this.wasOpened?(this.logger.error("received error while connected"),this.sendEvent(new r.default(this,c.default.WebSocketError,null))):(this.logger.error("failed to connect"),this.sendEvent(new r.default(this,c.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const l=g;l.window&&l.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const l=g;l.window&&l.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const l=new Uint32Array(1);return o.getRandomValues(l),l[0]}promoteToPrimaryMeeting(l){const y=s.SdkMeetingSessionCredentials.create();y.attendeeId=l.attendeeId,y.externalUserId=l.externalUserId,y.joinToken=l.joinToken;const T=s.SdkPrimaryMeetingJoinFrame.create();T.credentials=y;const O=s.SdkSignalFrame.create();O.type=s.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,O.primaryMeetingJoin=T,this.sendMessage(O)}demoteFromPrimaryMeeting(){const l=s.SdkPrimaryMeetingLeaveFrame.create(),y=s.SdkSignalFrame.create();y.type=s.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,y.primaryMeetingLeave=l,this.sendMessage(y)}constructor(l,y){this.webSocket=l,this.logger=y,this.unloadHandler=null,this.closeEventHandler=T=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new r.default(this,c.default.WebSocketClosed,null,T.code,T.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");d.default=f,f.FRAME_TYPE_RTC=5,f.CLOSE_EVENT_TIMEOUT_MS=2e3,f.CLIENT_SUPPORTS_COMPRESSION=!0}).call(this,h("yLpj"))},HK1f:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("IKDz"));let u=a(class{constructor(s,o,i=new p.default){this.eventsClientConfiguration=s,this.ingestionURL=o,this.eventBufferConfiguration=i}},"EventIngestionConfiguration");d.default=u},HLgz:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(m,s,o,i){function e(t){return t instanceof o?t:new o(function(n){n(t)})}return a(e,"adopt"),new(o||(o=Promise))(function(t,n){function r(S){try{f(i.next(S))}catch(l){n(l)}}a(r,"fulfilled");function c(S){try{f(i.throw(S))}catch(l){n(l)}}a(c,"rejected");function f(S){S.done?t(S.value):e(S.value).then(r,c)}a(f,"step"),f((i=i.apply(m,s||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});const p=h("dWP+");let u=a(class{addObserver(s){this.audioVideoController.addObserver(s),this.trace("addObserver")}removeObserver(s){this.audioVideoController.removeObserver(s),this.trace("removeObserver")}setAudioProfile(s){this.trace("setAudioProfile",s),this.audioVideoController.setAudioProfile(s)}start(s){this.audioVideoController.start(s),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(s){return this.trace("getRTCPeerConnectionStats",s?s.id:null),this.audioVideoController.getRTCPeerConnectionStats(s)}bindAudioElement(s){const o=this.audioMixController.bindAudioElement(s);return this.trace("bindAudioElement",s.id,o),o}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(s){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(s)}removeAudioMixObserver(s){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(s)}bindVideoElement(s,o){this.videoTileController.bindVideoElement(s,o),this.trace("bindVideoElement",{tileId:s,videoElementId:o.id})}unbindVideoElement(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(s,o),this.trace("unbindVideoElement",{tileId:s,cleanUpVideoElement:o})}startLocalVideoTile(){const s=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,s),s}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const s=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,s),s}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const s=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),s}pauseVideoTile(s){this.videoTileController.pauseVideoTile(s),this.trace("pauseVideoTile",s)}unpauseVideoTile(s){this.videoTileController.unpauseVideoTile(s),this.trace("unpauseVideoTile",s)}getVideoTile(s){const o=this.videoTileController.getVideoTile(s);return this.trace("getVideoTile",s),o}getAllRemoteVideoTiles(){const s=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),s}getAllVideoTiles(){const s=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),s}addVideoTile(){const s=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,s.state()),s}removeVideoTile(s){this.videoTileController.removeVideoTile(s),this.trace("removeVideoTile",s)}removeVideoTilesByAttendeeId(s){const o=this.videoTileController.removeVideoTilesByAttendeeId(s);return this.trace("removeVideoTilesByAttendeeId",s,o),o}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(s){const o=this.videoTileController.captureVideoTile(s);return this.trace("captureVideoTile",s),o}realtimeSubscribeToAttendeeIdPresence(s){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(s),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(s){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(s),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(s){this.realtimeController.realtimeSetCanUnmuteLocalAudio(s),this.trace("realtimeSetCanUnmuteLocalAudio",s)}realtimeSubscribeToSetCanUnmuteLocalAudio(s){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(s),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(s){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(s),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const s=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,s),s}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const s=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),s}realtimeSubscribeToMuteAndUnmuteLocalAudio(s){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(s),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(s){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(s),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const s=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),s}realtimeSubscribeToVolumeIndicator(s,o){this.realtimeController.realtimeSubscribeToVolumeIndicator(s,o),this.trace("realtimeSubscribeToVolumeIndicator",s)}realtimeUnsubscribeFromVolumeIndicator(s,o){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(s,o),this.trace("realtimeUnsubscribeFromVolumeIndicator",s,o)}realtimeSubscribeToLocalSignalStrengthChange(s){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(s),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(s){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(s),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(s,o,i){this.realtimeController.realtimeSendDataMessage(s,o,i),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(s,o){this.realtimeController.realtimeSubscribeToReceiveDataMessage(s,o),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(s){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(s),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(s){this.realtimeController.realtimeSubscribeToFatalError(s),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(s){this.realtimeController.realtimeUnsubscribeToFatalError(s),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(s,o,i,e){this.audioVideoController.activeSpeakerDetector.subscribe(s,o,i,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(s){this.audioVideoController.activeSpeakerDetector.unsubscribe(s),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return g(this,void 0,void 0,function*(){const o=yield this.deviceController.listAudioInputDevices(s);return this.trace("listAudioInputDevices",s,o),o})}listVideoInputDevices(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return g(this,void 0,void 0,function*(){const o=yield this.deviceController.listVideoInputDevices(s);return this.trace("listVideoInputDevices",s,o),o})}listAudioOutputDevices(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return g(this,void 0,void 0,function*(){const o=yield this.deviceController.listAudioOutputDevices(s);return this.trace("listAudioOutputDevices",s,o),o})}startAudioInput(s){return g(this,void 0,void 0,function*(){return this.trace("startAudioInput",s),this.deviceController.startAudioInput(s)})}stopAudioInput(){return g(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(s){return g(this,void 0,void 0,function*(){return p.isVideoTransformDevice(s)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",s),this.deviceController.startVideoInput(s)})}stopVideoInput(){return g(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(s){const o=this.deviceController.chooseAudioOutput(s);return this.trace("chooseAudioOutput",s),o}addDeviceChangeObserver(s){this.deviceController.addDeviceChangeObserver(s),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(s){this.deviceController.removeDeviceChangeObserver(s),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const s=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),s}startVideoPreviewForVideoInput(s){this.deviceController.startVideoPreviewForVideoInput(s),this.trace("startVideoPreviewForVideoInput",s.id)}stopVideoPreviewForVideoInput(s){this.deviceController.stopVideoPreviewForVideoInput(s),this.trace("stopVideoPreviewForVideoInput",s.id)}setDeviceLabelTrigger(s){this.deviceController.setDeviceLabelTrigger(s),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(s){const o=this.deviceController.mixIntoAudioInput(s);return this.trace("mixIntoAudioInput",s.id),o}chooseVideoInputQuality(s,o,i){this.deviceController.chooseVideoInputQuality(s,o,i),this.trace("chooseVideoInputQuality",{width:s,height:o,frameRate:i})}setVideoMaxBandwidthKbps(s){this.audioVideoController.setVideoMaxBandwidthKbps(s),this.trace("setVideoMaxBandwidthKbps",s)}setVideoCodecSendPreferences(s){this.audioVideoController.setVideoCodecSendPreferences(s),this.trace("setVideoCodecSendPreferences",s)}getVideoInputQualitySettings(){const s=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),s}setContentAudioProfile(s){this.trace("setContentAudioProfile",s),this.contentShareController.setContentAudioProfile(s)}enableSimulcastForContentShare(s,o){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(s,o)}enableSVCForContentShare(s){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(s)}startContentShare(s){const o=this.contentShareController.startContentShare(s);return this.trace("startContentShare"),o}startContentShareFromScreenCapture(s,o){const i=this.contentShareController.startContentShareFromScreenCapture(s,o);return this.trace("startContentShareFromScreenCapture"),i}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(s){this.contentShareController.addContentShareObserver(s),this.trace("addContentShareObserver")}removeContentShareObserver(s){this.contentShareController.removeContentShareObserver(s),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(s){this.contentShareController.setContentShareVideoCodecPreferences(s),this.trace("setContentShareVideoCodecPreferences")}trace(s,o,i){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let n=`API/DefaultAudioVideoFacade/${e}/${t}/${s}`;typeof o<"u"&&(n+=` ${JSON.stringify(o)}`),typeof i<"u"&&(n+=` -> ${JSON.stringify(i)}`),this.audioVideoController.logger.info(n)}getRemoteVideoSources(){const s=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,s),s}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(s){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const o=this.audioVideoController.promoteToPrimaryMeeting(s);return this.trace("promoteToPrimaryMeeting",null,o),o}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(s){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(s,o,i,e,t,n){this.audioVideoController=s,this.videoTileController=o,this.realtimeController=i,this.audioMixController=e,this.deviceController=t,this.contentShareController=n}},"DefaultAudioVideoFacade");d.default=u},HXIC:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(u,m,s){this.type=u,this.headers=m,this.payload=s}},"Message");d.default=g},HbHZ:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.SignalingClientEventType=void 0;var g;(function(p){p[p.WebSocketConnecting=0]="WebSocketConnecting",p[p.WebSocketOpen=1]="WebSocketOpen",p[p.WebSocketError=2]="WebSocketError",p[p.WebSocketClosing=3]="WebSocketClosing",p[p.WebSocketClosed=4]="WebSocketClosed",p[p.WebSocketFailed=5]="WebSocketFailed",p[p.WebSocketMessage=6]="WebSocketMessage",p[p.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",p[p.WebSocketSentMessage=8]="WebSocketSentMessage",p[p.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",p[p.ReceivedSignalFrame=10]="ReceivedSignalFrame",p[p.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(g=d.SignalingClientEventType||(d.SignalingClientEventType={})),d.default=g},Hi4k:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(y,T,O,R){function F(U){return U instanceof O?U:new O(function(_){_(U)})}return a(F,"adopt"),new(O||(O=Promise))(function(U,_){function P(M){try{A(R.next(M))}catch(k){_(k)}}a(P,"fulfilled");function L(M){try{A(R.throw(M))}catch(k){_(k)}}a(L,"rejected");function A(M){M.done?U(M.value):F(M.value).then(P,L)}a(A,"step"),A((R=R.apply(y,T||[])).next())})},p=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("bjg3")),m=p(h("x8On")),s=p(h("Zful")),o=p(h("1GR6")),i=p(h("I/xa")),e=p(h("aZba")),t=p(h("papz")),n=p(h("HbHZ")),r=h("XCDq"),c=p(h("PPZC")),f=h("Aplu"),S=p(h("j+uH"));let l=a(class extends S.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return g(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(T){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(T){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=T;return}else this.pendingMetricsReport=void 0;const O=T.getObservableMetrics(),R=O.availableOutgoingBitrate,F=O.nackCountReceivedPerSecond;let U=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(T);const _=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(U=U||_,_){const P=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=P.truncate(this.context.videoSubscriptionLimit),P.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${_}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:R/1e3,nackCountPerSecond:F});const P=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();U=U||P,P&&(this.logger.info(`trigger resubscribe for up=${P}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters(),this.context.videoUplinkBandwidthPolicy.chooseMediaTrackConstraints())}return U}metricsDidReceive(T){if(this.checkResubscribe(T)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const O=T.streamMetricReports,R=new Map;for(const F in O)O[F].mediaType===m.default.VIDEO&&O[F].direction===u.default.DOWNSTREAM&&R.set(O[F].streamId,O[F])}connectionHealthDidChange(T){T.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,T,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new e.default(t.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,T,()=>{var O;this.context.poorConnectionCount+=1;const R=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(O=this.context.eventController)===null||O===void 0||O.publishEvent("receivingAudioDropped",R),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(F=>{f.Maybe.of(F.connectionDidSuggestStopVideo).map(U=>U.bind(F)())}):this.context.audioVideoController.forEachObserver(F=>{f.Maybe.of(F.connectionDidBecomePoor).map(U=>U.bind(F)())})},()=>{this.context.audioVideoController.forEachObserver(O=>{f.Maybe.of(O.connectionDidBecomeGood).map(R=>R.bind(O)())})}),this.isMeetingConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,T,()=>{var O;const R=this.generateBaseAudioVideoEventAttributes();(O=this.context.eventController)===null||O===void 0||O.publishEvent("sendingAudioFailed",R)},()=>{var O;const R=this.generateBaseAudioVideoEventAttributes();(O=this.context.eventController)===null||O===void 0||O.publishEvent("sendingAudioRecovered",R)})}audioVideoDidStart(){this.isMeetingConnected=!0}audioVideoDidStartConnecting(T){this.isMeetingConnected=!1}audioVideoDidStop(T){this.isMeetingConnected=!1}applyHealthPolicy(T,O,R,F){T.update(O);const U=T.healthIfChanged();U!==null&&(this.logger.info(`${T.name} value is now ${U}`),U<=T.minimumHealth()?f.Maybe.of(R).map(_=>_.bind(this)()):f.Maybe.of(F).map(_=>_.bind(this)()))}handleBitrateFrame(T){this.currentAvailableStreamAvgBitrates=T,T.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${T.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",T.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(T){var O;if(T.type===n.default.WebSocketClosed&&(T.closeCode===4410||T.closeCode>=4500&&T.closeCode<4600)||T.type===n.default.WebSocketError||T.type===n.default.WebSocketFailed){if(!this.hasSignalingError){const R=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(O=this.context.eventController)===null||O===void 0||O.publishEvent("signalingDropped",R),this.hasSignalingError=!0}}else T.type===n.default.WebSocketOpen&&(this.hasSignalingError=!1);if(T.type===n.default.ReceivedSignalFrame){if(T.message.type===r.SdkSignalFrame.Type.NOTIFICATION){switch(T.message.notification.level){case r.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${T.message.notification.message}`);break;case r.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${T.message.notification.message}`);break;case r.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${T.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${T.message.notification.level}: ${T.message.notification.message}`);break}return}if(T.message.bitrates){const F=T.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(F),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(T.message.bitrates)}const R=e.default.fromSignalFrame(T.message);T.message.type!==r.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&R.statusCode()!==t.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(R,null)}}constructor(T,O,R){super(T.logger),this.context=T,this.initialConnectionHealthData=R,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.isMeetingConnected=!1,this.checkAndSendWeakSignalEvent=F=>{const U=F<1,_=this.prevSignalStrength<1,P=U?_?null:c.default.RedmicStartLoss:_?c.default.RedmicEndLoss:null;P&&this.context.statsCollector.logAudioEvent(P),this.prevSignalStrength=F},this.realtimeFatalErrorCallback=F=>{this.logger.error(`realtime error: ${F}: ${F.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new e.default(t.default.RealtimeApiFailed),F)},this.realtimeAttendeeIdPresenceHandler=(F,U)=>{var _;const P=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${P}`),P===F&&U&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(_=this.context.eventController)===null||_===void 0||_.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:F,startTimeMs:U,iceGatheringDurationMs:_,attendeePresenceDurationMs:P,meetingStartDurationMs:L}=this.context;return{meetingDurationMs:U===null?0:Math.round(Date.now()-U),signalingOpenDurationMs:F,iceGatheringDurationMs:_,attendeePresenceDurationMs:P,meetingStartDurationMs:L}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const F=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},F),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new s.default(T.logger,Object.assign({},O),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new i.default(Object.assign({},O),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new o.default(T.logger,Object.assign({},O),this.initialConnectionHealthData.clone())}},"MonitorTask");d.default=l},HlBM:function(W,d,h){"use strict";h.d(d,"a",function(){return i});var g=h("VDtp"),p=h.n(g);const u=g.Reader,m=g.Writer,s=g.util,o=g.roots.default||(g.roots.default={}),i=o.PeerMessage=(()=>{function e(t){if(t)for(let n=Object.keys(t),r=0;r<n.length;++r)t[n[r]]!=null&&(this[n[r]]=t[n[r]])}return a(e,"PeerMessage1"),e.prototype.reacji=null,e.prototype.draw=null,e.prototype.fromPeerId=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.fromPeerIdString="",e.prototype.capabilities=null,e.prototype.background=null,e.prototype.muteRequest=null,e.prototype.awarenessBroadcast=null,e.prototype.awarenessQuery=null,e.prototype.awarenessClose=null,e.prototype.jukeboxRequest=null,e.prototype.contentShareDetails=null,e.create=a(function(n){return new e(n)},"create"),e.encode=a(function(n,r){return r||(r=m.create()),n.reacji!=null&&Object.hasOwnProperty.call(n,"reacji")&&o.PeerMessage.Reacji.encode(n.reacji,r.uint32(10).fork()).ldelim(),n.draw!=null&&Object.hasOwnProperty.call(n,"draw")&&o.PeerMessage.Draw.encode(n.draw,r.uint32(18).fork()).ldelim(),n.fromPeerId!=null&&Object.hasOwnProperty.call(n,"fromPeerId")&&r.uint32(24).uint64(n.fromPeerId),n.fromPeerIdString!=null&&Object.hasOwnProperty.call(n,"fromPeerIdString")&&r.uint32(34).string(n.fromPeerIdString),n.capabilities!=null&&Object.hasOwnProperty.call(n,"capabilities")&&o.PeerMessage.Capabilities.encode(n.capabilities,r.uint32(42).fork()).ldelim(),n.background!=null&&Object.hasOwnProperty.call(n,"background")&&o.PeerMessage.Background.encode(n.background,r.uint32(50).fork()).ldelim(),n.muteRequest!=null&&Object.hasOwnProperty.call(n,"muteRequest")&&o.PeerMessage.MuteRequest.encode(n.muteRequest,r.uint32(82).fork()).ldelim(),n.awarenessBroadcast!=null&&Object.hasOwnProperty.call(n,"awarenessBroadcast")&&o.PeerMessage.AwarenessBroadcast.encode(n.awarenessBroadcast,r.uint32(90).fork()).ldelim(),n.awarenessQuery!=null&&Object.hasOwnProperty.call(n,"awarenessQuery")&&o.PeerMessage.AwarenessQuery.encode(n.awarenessQuery,r.uint32(98).fork()).ldelim(),n.awarenessClose!=null&&Object.hasOwnProperty.call(n,"awarenessClose")&&o.PeerMessage.AwarenessClose.encode(n.awarenessClose,r.uint32(106).fork()).ldelim(),n.jukeboxRequest!=null&&Object.hasOwnProperty.call(n,"jukeboxRequest")&&o.PeerMessage.JukeboxRequest.encode(n.jukeboxRequest,r.uint32(114).fork()).ldelim(),n.contentShareDetails!=null&&Object.hasOwnProperty.call(n,"contentShareDetails")&&o.PeerMessage.ContentShareDetails.encode(n.contentShareDetails,r.uint32(122).fork()).ldelim(),r},"encode"),e.encodeDelimited=a(function(n,r){return this.encode(n,r).ldelim()},"encodeDelimited"),e.decode=a(function(n,r){n instanceof u||(n=u.create(n));let c=r===void 0?n.len:n.pos+r,f=new o.PeerMessage;for(;n.pos<c;){let S=n.uint32();switch(S>>>3){case 1:{f.reacji=o.PeerMessage.Reacji.decode(n,n.uint32());break}case 2:{f.draw=o.PeerMessage.Draw.decode(n,n.uint32());break}case 3:{f.fromPeerId=n.uint64();break}case 4:{f.fromPeerIdString=n.string();break}case 5:{f.capabilities=o.PeerMessage.Capabilities.decode(n,n.uint32());break}case 6:{f.background=o.PeerMessage.Background.decode(n,n.uint32());break}case 10:{f.muteRequest=o.PeerMessage.MuteRequest.decode(n,n.uint32());break}case 11:{f.awarenessBroadcast=o.PeerMessage.AwarenessBroadcast.decode(n,n.uint32());break}case 12:{f.awarenessQuery=o.PeerMessage.AwarenessQuery.decode(n,n.uint32());break}case 13:{f.awarenessClose=o.PeerMessage.AwarenessClose.decode(n,n.uint32());break}case 14:{f.jukeboxRequest=o.PeerMessage.JukeboxRequest.decode(n,n.uint32());break}case 15:{f.contentShareDetails=o.PeerMessage.ContentShareDetails.decode(n,n.uint32());break}default:n.skipType(S&7);break}}return f},"decode"),e.decodeDelimited=a(function(n){return n instanceof u||(n=new u(n)),this.decode(n,n.uint32())},"decodeDelimited"),e.verify=a(function(n){if(typeof n!="object"||n===null)return"object expected";if(n.reacji!=null&&n.hasOwnProperty("reacji")){let r=o.PeerMessage.Reacji.verify(n.reacji);if(r)return"reacji."+r}if(n.draw!=null&&n.hasOwnProperty("draw")){let r=o.PeerMessage.Draw.verify(n.draw);if(r)return"draw."+r}if(n.fromPeerId!=null&&n.hasOwnProperty("fromPeerId")&&!s.isInteger(n.fromPeerId)&&!(n.fromPeerId&&s.isInteger(n.fromPeerId.low)&&s.isInteger(n.fromPeerId.high)))return"fromPeerId: integer|Long expected";if(n.fromPeerIdString!=null&&n.hasOwnProperty("fromPeerIdString")&&!s.isString(n.fromPeerIdString))return"fromPeerIdString: string expected";if(n.capabilities!=null&&n.hasOwnProperty("capabilities")){let r=o.PeerMessage.Capabilities.verify(n.capabilities);if(r)return"capabilities."+r}if(n.background!=null&&n.hasOwnProperty("background")){let r=o.PeerMessage.Background.verify(n.background);if(r)return"background."+r}if(n.muteRequest!=null&&n.hasOwnProperty("muteRequest")){let r=o.PeerMessage.MuteRequest.verify(n.muteRequest);if(r)return"muteRequest."+r}if(n.awarenessBroadcast!=null&&n.hasOwnProperty("awarenessBroadcast")){let r=o.PeerMessage.AwarenessBroadcast.verify(n.awarenessBroadcast);if(r)return"awarenessBroadcast."+r}if(n.awarenessQuery!=null&&n.hasOwnProperty("awarenessQuery")){let r=o.PeerMessage.AwarenessQuery.verify(n.awarenessQuery);if(r)return"awarenessQuery."+r}if(n.awarenessClose!=null&&n.hasOwnProperty("awarenessClose")){let r=o.PeerMessage.AwarenessClose.verify(n.awarenessClose);if(r)return"awarenessClose."+r}if(n.jukeboxRequest!=null&&n.hasOwnProperty("jukeboxRequest")){let r=o.PeerMessage.JukeboxRequest.verify(n.jukeboxRequest);if(r)return"jukeboxRequest."+r}if(n.contentShareDetails!=null&&n.hasOwnProperty("contentShareDetails")){let r=o.PeerMessage.ContentShareDetails.verify(n.contentShareDetails);if(r)return"contentShareDetails."+r}return null},"verify"),e.fromObject=a(function(n){if(n instanceof o.PeerMessage)return n;let r=new o.PeerMessage;if(n.reacji!=null){if(typeof n.reacji!="object")throw TypeError(".PeerMessage.reacji: object expected");r.reacji=o.PeerMessage.Reacji.fromObject(n.reacji)}if(n.draw!=null){if(typeof n.draw!="object")throw TypeError(".PeerMessage.draw: object expected");r.draw=o.PeerMessage.Draw.fromObject(n.draw)}if(n.fromPeerId!=null&&(s.Long?(r.fromPeerId=s.Long.fromValue(n.fromPeerId)).unsigned=!0:typeof n.fromPeerId=="string"?r.fromPeerId=parseInt(n.fromPeerId,10):typeof n.fromPeerId=="number"?r.fromPeerId=n.fromPeerId:typeof n.fromPeerId=="object"&&(r.fromPeerId=new s.LongBits(n.fromPeerId.low>>>0,n.fromPeerId.high>>>0).toNumber(!0))),n.fromPeerIdString!=null&&(r.fromPeerIdString=String(n.fromPeerIdString)),n.capabilities!=null){if(typeof n.capabilities!="object")throw TypeError(".PeerMessage.capabilities: object expected");r.capabilities=o.PeerMessage.Capabilities.fromObject(n.capabilities)}if(n.background!=null){if(typeof n.background!="object")throw TypeError(".PeerMessage.background: object expected");r.background=o.PeerMessage.Background.fromObject(n.background)}if(n.muteRequest!=null){if(typeof n.muteRequest!="object")throw TypeError(".PeerMessage.muteRequest: object expected");r.muteRequest=o.PeerMessage.MuteRequest.fromObject(n.muteRequest)}if(n.awarenessBroadcast!=null){if(typeof n.awarenessBroadcast!="object")throw TypeError(".PeerMessage.awarenessBroadcast: object expected");r.awarenessBroadcast=o.PeerMessage.AwarenessBroadcast.fromObject(n.awarenessBroadcast)}if(n.awarenessQuery!=null){if(typeof n.awarenessQuery!="object")throw TypeError(".PeerMessage.awarenessQuery: object expected");r.awarenessQuery=o.PeerMessage.AwarenessQuery.fromObject(n.awarenessQuery)}if(n.awarenessClose!=null){if(typeof n.awarenessClose!="object")throw TypeError(".PeerMessage.awarenessClose: object expected");r.awarenessClose=o.PeerMessage.AwarenessClose.fromObject(n.awarenessClose)}if(n.jukeboxRequest!=null){if(typeof n.jukeboxRequest!="object")throw TypeError(".PeerMessage.jukeboxRequest: object expected");r.jukeboxRequest=o.PeerMessage.JukeboxRequest.fromObject(n.jukeboxRequest)}if(n.contentShareDetails!=null){if(typeof n.contentShareDetails!="object")throw TypeError(".PeerMessage.contentShareDetails: object expected");r.contentShareDetails=o.PeerMessage.ContentShareDetails.fromObject(n.contentShareDetails)}return r},"fromObject"),e.toObject=a(function(n,r){r||(r={});let c={};if(r.defaults){if(c.reacji=null,c.draw=null,s.Long){let f=new s.Long(0,0,!0);c.fromPeerId=r.longs===String?f.toString():r.longs===Number?f.toNumber():f}else c.fromPeerId=r.longs===String?"0":0;c.fromPeerIdString="",c.capabilities=null,c.background=null,c.muteRequest=null,c.awarenessBroadcast=null,c.awarenessQuery=null,c.awarenessClose=null,c.jukeboxRequest=null,c.contentShareDetails=null}return n.reacji!=null&&n.hasOwnProperty("reacji")&&(c.reacji=o.PeerMessage.Reacji.toObject(n.reacji,r)),n.draw!=null&&n.hasOwnProperty("draw")&&(c.draw=o.PeerMessage.Draw.toObject(n.draw,r)),n.fromPeerId!=null&&n.hasOwnProperty("fromPeerId")&&(typeof n.fromPeerId=="number"?c.fromPeerId=r.longs===String?String(n.fromPeerId):n.fromPeerId:c.fromPeerId=r.longs===String?s.Long.prototype.toString.call(n.fromPeerId):r.longs===Number?new s.LongBits(n.fromPeerId.low>>>0,n.fromPeerId.high>>>0).toNumber(!0):n.fromPeerId),n.fromPeerIdString!=null&&n.hasOwnProperty("fromPeerIdString")&&(c.fromPeerIdString=n.fromPeerIdString),n.capabilities!=null&&n.hasOwnProperty("capabilities")&&(c.capabilities=o.PeerMessage.Capabilities.toObject(n.capabilities,r)),n.background!=null&&n.hasOwnProperty("background")&&(c.background=o.PeerMessage.Background.toObject(n.background,r)),n.muteRequest!=null&&n.hasOwnProperty("muteRequest")&&(c.muteRequest=o.PeerMessage.MuteRequest.toObject(n.muteRequest,r)),n.awarenessBroadcast!=null&&n.hasOwnProperty("awarenessBroadcast")&&(c.awarenessBroadcast=o.PeerMessage.AwarenessBroadcast.toObject(n.awarenessBroadcast,r)),n.awarenessQuery!=null&&n.hasOwnProperty("awarenessQuery")&&(c.awarenessQuery=o.PeerMessage.AwarenessQuery.toObject(n.awarenessQuery,r)),n.awarenessClose!=null&&n.hasOwnProperty("awarenessClose")&&(c.awarenessClose=o.PeerMessage.AwarenessClose.toObject(n.awarenessClose,r)),n.jukeboxRequest!=null&&n.hasOwnProperty("jukeboxRequest")&&(c.jukeboxRequest=o.PeerMessage.JukeboxRequest.toObject(n.jukeboxRequest,r)),n.contentShareDetails!=null&&n.hasOwnProperty("contentShareDetails")&&(c.contentShareDetails=o.PeerMessage.ContentShareDetails.toObject(n.contentShareDetails,r)),c},"toObject"),e.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),e.getTypeUrl=a(function(n){return n===void 0&&(n="type.googleapis.com"),n+"/PeerMessage"},"getTypeUrl"),e.Reacji=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return a(t,"Reacji"),t.prototype.emoji="",t.prototype.type=0,t.create=a(function(r){return new t(r)},"create"),t.encode=a(function(r,c){return c||(c=m.create()),r.emoji!=null&&Object.hasOwnProperty.call(r,"emoji")&&c.uint32(10).string(r.emoji),r.type!=null&&Object.hasOwnProperty.call(r,"type")&&c.uint32(16).int32(r.type),c},"encode"),t.encodeDelimited=a(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=a(function(r,c){r instanceof u||(r=u.create(r));let f=c===void 0?r.len:r.pos+c,S=new o.PeerMessage.Reacji;for(;r.pos<f;){let l=r.uint32();switch(l>>>3){case 1:{S.emoji=r.string();break}case 2:{S.type=r.int32();break}default:r.skipType(l&7);break}}return S},"decode"),t.decodeDelimited=a(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=a(function(r){if(typeof r!="object"||r===null)return"object expected";if(r.emoji!=null&&r.hasOwnProperty("emoji")&&!s.isString(r.emoji))return"emoji: string expected";if(r.type!=null&&r.hasOwnProperty("type"))switch(r.type){default:return"type: enum value expected";case 0:case 1:case 2:break}return null},"verify"),t.fromObject=a(function(r){if(r instanceof o.PeerMessage.Reacji)return r;let c=new o.PeerMessage.Reacji;switch(r.emoji!=null&&(c.emoji=String(r.emoji)),r.type){default:if(typeof r.type=="number"){c.type=r.type;break}break;case"Unknown_reaction_type":case 0:c.type=0;break;case"Effect":case 1:c.type=1;break;case"Standard":case 2:c.type=2;break}return c},"fromObject"),t.toObject=a(function(r,c){c||(c={});let f={};return c.defaults&&(f.emoji="",f.type=c.enums===String?"Unknown_reaction_type":0),r.emoji!=null&&r.hasOwnProperty("emoji")&&(f.emoji=r.emoji),r.type!=null&&r.hasOwnProperty("type")&&(f.type=c.enums===String?o.PeerMessage.Reacji.Type[r.type]===void 0?r.type:o.PeerMessage.Reacji.Type[r.type]:r.type),f},"toObject"),t.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),t.getTypeUrl=a(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.Reacji"},"getTypeUrl"),t.Type=function(){const n={},r=Object.create(n);return r[n[0]="Unknown_reaction_type"]=0,r[n[1]="Effect"]=1,r[n[2]="Standard"]=2,r}(),t}(),e.Point=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return a(t,"Point"),t.prototype.x=0,t.prototype.y=0,t.create=a(function(r){return new t(r)},"create"),t.encode=a(function(r,c){return c||(c=m.create()),r.x!=null&&Object.hasOwnProperty.call(r,"x")&&c.uint32(9).double(r.x),r.y!=null&&Object.hasOwnProperty.call(r,"y")&&c.uint32(17).double(r.y),c},"encode"),t.encodeDelimited=a(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=a(function(r,c){r instanceof u||(r=u.create(r));let f=c===void 0?r.len:r.pos+c,S=new o.PeerMessage.Point;for(;r.pos<f;){let l=r.uint32();switch(l>>>3){case 1:{S.x=r.double();break}case 2:{S.y=r.double();break}default:r.skipType(l&7);break}}return S},"decode"),t.decodeDelimited=a(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=a(function(r){return typeof r!="object"||r===null?"object expected":r.x!=null&&r.hasOwnProperty("x")&&typeof r.x!="number"?"x: number expected":r.y!=null&&r.hasOwnProperty("y")&&typeof r.y!="number"?"y: number expected":null},"verify"),t.fromObject=a(function(r){if(r instanceof o.PeerMessage.Point)return r;let c=new o.PeerMessage.Point;return r.x!=null&&(c.x=Number(r.x)),r.y!=null&&(c.y=Number(r.y)),c},"fromObject"),t.toObject=a(function(r,c){c||(c={});let f={};return c.defaults&&(f.x=0,f.y=0),r.x!=null&&r.hasOwnProperty("x")&&(f.x=c.json&&!isFinite(r.x)?String(r.x):r.x),r.y!=null&&r.hasOwnProperty("y")&&(f.y=c.json&&!isFinite(r.y)?String(r.y):r.y),f},"toObject"),t.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),t.getTypeUrl=a(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.Point"},"getTypeUrl"),t}(),e.Segment=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return a(t,"Segment"),t.prototype.a=null,t.prototype.b=null,t.prototype.c=null,t.prototype.d=null,t.create=a(function(r){return new t(r)},"create"),t.encode=a(function(r,c){return c||(c=m.create()),r.a!=null&&Object.hasOwnProperty.call(r,"a")&&o.PeerMessage.Point.encode(r.a,c.uint32(10).fork()).ldelim(),r.b!=null&&Object.hasOwnProperty.call(r,"b")&&o.PeerMessage.Point.encode(r.b,c.uint32(18).fork()).ldelim(),r.c!=null&&Object.hasOwnProperty.call(r,"c")&&o.PeerMessage.Point.encode(r.c,c.uint32(26).fork()).ldelim(),r.d!=null&&Object.hasOwnProperty.call(r,"d")&&o.PeerMessage.Point.encode(r.d,c.uint32(34).fork()).ldelim(),c},"encode"),t.encodeDelimited=a(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=a(function(r,c){r instanceof u||(r=u.create(r));let f=c===void 0?r.len:r.pos+c,S=new o.PeerMessage.Segment;for(;r.pos<f;){let l=r.uint32();switch(l>>>3){case 1:{S.a=o.PeerMessage.Point.decode(r,r.uint32());break}case 2:{S.b=o.PeerMessage.Point.decode(r,r.uint32());break}case 3:{S.c=o.PeerMessage.Point.decode(r,r.uint32());break}case 4:{S.d=o.PeerMessage.Point.decode(r,r.uint32());break}default:r.skipType(l&7);break}}return S},"decode"),t.decodeDelimited=a(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=a(function(r){if(typeof r!="object"||r===null)return"object expected";if(r.a!=null&&r.hasOwnProperty("a")){let c=o.PeerMessage.Point.verify(r.a);if(c)return"a."+c}if(r.b!=null&&r.hasOwnProperty("b")){let c=o.PeerMessage.Point.verify(r.b);if(c)return"b."+c}if(r.c!=null&&r.hasOwnProperty("c")){let c=o.PeerMessage.Point.verify(r.c);if(c)return"c."+c}if(r.d!=null&&r.hasOwnProperty("d")){let c=o.PeerMessage.Point.verify(r.d);if(c)return"d."+c}return null},"verify"),t.fromObject=a(function(r){if(r instanceof o.PeerMessage.Segment)return r;let c=new o.PeerMessage.Segment;if(r.a!=null){if(typeof r.a!="object")throw TypeError(".PeerMessage.Segment.a: object expected");c.a=o.PeerMessage.Point.fromObject(r.a)}if(r.b!=null){if(typeof r.b!="object")throw TypeError(".PeerMessage.Segment.b: object expected");c.b=o.PeerMessage.Point.fromObject(r.b)}if(r.c!=null){if(typeof r.c!="object")throw TypeError(".PeerMessage.Segment.c: object expected");c.c=o.PeerMessage.Point.fromObject(r.c)}if(r.d!=null){if(typeof r.d!="object")throw TypeError(".PeerMessage.Segment.d: object expected");c.d=o.PeerMessage.Point.fromObject(r.d)}return c},"fromObject"),t.toObject=a(function(r,c){c||(c={});let f={};return c.defaults&&(f.a=null,f.b=null,f.c=null,f.d=null),r.a!=null&&r.hasOwnProperty("a")&&(f.a=o.PeerMessage.Point.toObject(r.a,c)),r.b!=null&&r.hasOwnProperty("b")&&(f.b=o.PeerMessage.Point.toObject(r.b,c)),r.c!=null&&r.hasOwnProperty("c")&&(f.c=o.PeerMessage.Point.toObject(r.c,c)),r.d!=null&&r.hasOwnProperty("d")&&(f.d=o.PeerMessage.Point.toObject(r.d,c)),f},"toObject"),t.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),t.getTypeUrl=a(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.Segment"},"getTypeUrl"),t}(),e.Draw=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return a(t,"Draw"),t.prototype.type=0,t.prototype.segment=null,t.prototype.hue=0,t.prototype.itemId="",t.prototype.x=0,t.prototype.y=0,t.create=a(function(r){return new t(r)},"create"),t.encode=a(function(r,c){return c||(c=m.create()),r.type!=null&&Object.hasOwnProperty.call(r,"type")&&c.uint32(8).int32(r.type),r.segment!=null&&Object.hasOwnProperty.call(r,"segment")&&o.PeerMessage.Segment.encode(r.segment,c.uint32(18).fork()).ldelim(),r.hue!=null&&Object.hasOwnProperty.call(r,"hue")&&c.uint32(24).int32(r.hue),r.itemId!=null&&Object.hasOwnProperty.call(r,"itemId")&&c.uint32(34).string(r.itemId),r.x!=null&&Object.hasOwnProperty.call(r,"x")&&c.uint32(41).double(r.x),r.y!=null&&Object.hasOwnProperty.call(r,"y")&&c.uint32(49).double(r.y),c},"encode"),t.encodeDelimited=a(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=a(function(r,c){r instanceof u||(r=u.create(r));let f=c===void 0?r.len:r.pos+c,S=new o.PeerMessage.Draw;for(;r.pos<f;){let l=r.uint32();switch(l>>>3){case 1:{S.type=r.int32();break}case 2:{S.segment=o.PeerMessage.Segment.decode(r,r.uint32());break}case 3:{S.hue=r.int32();break}case 4:{S.itemId=r.string();break}case 5:{S.x=r.double();break}case 6:{S.y=r.double();break}default:r.skipType(l&7);break}}return S},"decode"),t.decodeDelimited=a(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=a(function(r){if(typeof r!="object"||r===null)return"object expected";if(r.type!=null&&r.hasOwnProperty("type"))switch(r.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:break}if(r.segment!=null&&r.hasOwnProperty("segment")){let c=o.PeerMessage.Segment.verify(r.segment);if(c)return"segment."+c}return r.hue!=null&&r.hasOwnProperty("hue")&&!s.isInteger(r.hue)?"hue: integer expected":r.itemId!=null&&r.hasOwnProperty("itemId")&&!s.isString(r.itemId)?"itemId: string expected":r.x!=null&&r.hasOwnProperty("x")&&typeof r.x!="number"?"x: number expected":r.y!=null&&r.hasOwnProperty("y")&&typeof r.y!="number"?"y: number expected":null},"verify"),t.fromObject=a(function(r){if(r instanceof o.PeerMessage.Draw)return r;let c=new o.PeerMessage.Draw;switch(r.type){default:if(typeof r.type=="number"){c.type=r.type;break}break;case"UNKNOWN_DRAW_TYPE":case 0:c.type=0;break;case"NEW":case 1:c.type=1;break;case"EDIT":case 2:c.type=2;break;case"END":case 3:c.type=3;break;case"CHANGE_HUE":case 4:c.type=4;break;case"POSITION":case 5:c.type=5;break}if(r.segment!=null){if(typeof r.segment!="object")throw TypeError(".PeerMessage.Draw.segment: object expected");c.segment=o.PeerMessage.Segment.fromObject(r.segment)}return r.hue!=null&&(c.hue=r.hue|0),r.itemId!=null&&(c.itemId=String(r.itemId)),r.x!=null&&(c.x=Number(r.x)),r.y!=null&&(c.y=Number(r.y)),c},"fromObject"),t.toObject=a(function(r,c){c||(c={});let f={};return c.defaults&&(f.type=c.enums===String?"UNKNOWN_DRAW_TYPE":0,f.segment=null,f.hue=0,f.itemId="",f.x=0,f.y=0),r.type!=null&&r.hasOwnProperty("type")&&(f.type=c.enums===String?o.PeerMessage.Draw.Type[r.type]===void 0?r.type:o.PeerMessage.Draw.Type[r.type]:r.type),r.segment!=null&&r.hasOwnProperty("segment")&&(f.segment=o.PeerMessage.Segment.toObject(r.segment,c)),r.hue!=null&&r.hasOwnProperty("hue")&&(f.hue=r.hue),r.itemId!=null&&r.hasOwnProperty("itemId")&&(f.itemId=r.itemId),r.x!=null&&r.hasOwnProperty("x")&&(f.x=c.json&&!isFinite(r.x)?String(r.x):r.x),r.y!=null&&r.hasOwnProperty("y")&&(f.y=c.json&&!isFinite(r.y)?String(r.y):r.y),f},"toObject"),t.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),t.getTypeUrl=a(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.Draw"},"getTypeUrl"),t.Type=function(){const n={},r=Object.create(n);return r[n[0]="UNKNOWN_DRAW_TYPE"]=0,r[n[1]="NEW"]=1,r[n[2]="EDIT"]=2,r[n[3]="END"]=3,r[n[4]="CHANGE_HUE"]=4,r[n[5]="POSITION"]=5,r}(),t}(),e.Capabilities=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return a(t,"Capabilities"),t.prototype.isDrawEnabled=!1,t.create=a(function(r){return new t(r)},"create"),t.encode=a(function(r,c){return c||(c=m.create()),r.isDrawEnabled!=null&&Object.hasOwnProperty.call(r,"isDrawEnabled")&&c.uint32(8).bool(r.isDrawEnabled),c},"encode"),t.encodeDelimited=a(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=a(function(r,c){r instanceof u||(r=u.create(r));let f=c===void 0?r.len:r.pos+c,S=new o.PeerMessage.Capabilities;for(;r.pos<f;){let l=r.uint32();switch(l>>>3){case 1:{S.isDrawEnabled=r.bool();break}default:r.skipType(l&7);break}}return S},"decode"),t.decodeDelimited=a(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=a(function(r){return typeof r!="object"||r===null?"object expected":r.isDrawEnabled!=null&&r.hasOwnProperty("isDrawEnabled")&&typeof r.isDrawEnabled!="boolean"?"isDrawEnabled: boolean expected":null},"verify"),t.fromObject=a(function(r){if(r instanceof o.PeerMessage.Capabilities)return r;let c=new o.PeerMessage.Capabilities;return r.isDrawEnabled!=null&&(c.isDrawEnabled=Boolean(r.isDrawEnabled)),c},"fromObject"),t.toObject=a(function(r,c){c||(c={});let f={};return c.defaults&&(f.isDrawEnabled=!1),r.isDrawEnabled!=null&&r.hasOwnProperty("isDrawEnabled")&&(f.isDrawEnabled=r.isDrawEnabled),f},"toObject"),t.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),t.getTypeUrl=a(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.Capabilities"},"getTypeUrl"),t}(),e.ContentShareDetails=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return a(t,"ContentShareDetails"),t.prototype.sourceType="",t.prototype.itemId="",t.create=a(function(r){return new t(r)},"create"),t.encode=a(function(r,c){return c||(c=m.create()),r.sourceType!=null&&Object.hasOwnProperty.call(r,"sourceType")&&c.uint32(10).string(r.sourceType),r.itemId!=null&&Object.hasOwnProperty.call(r,"itemId")&&c.uint32(18).string(r.itemId),c},"encode"),t.encodeDelimited=a(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=a(function(r,c){r instanceof u||(r=u.create(r));let f=c===void 0?r.len:r.pos+c,S=new o.PeerMessage.ContentShareDetails;for(;r.pos<f;){let l=r.uint32();switch(l>>>3){case 1:{S.sourceType=r.string();break}case 2:{S.itemId=r.string();break}default:r.skipType(l&7);break}}return S},"decode"),t.decodeDelimited=a(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=a(function(r){return typeof r!="object"||r===null?"object expected":r.sourceType!=null&&r.hasOwnProperty("sourceType")&&!s.isString(r.sourceType)?"sourceType: string expected":r.itemId!=null&&r.hasOwnProperty("itemId")&&!s.isString(r.itemId)?"itemId: string expected":null},"verify"),t.fromObject=a(function(r){if(r instanceof o.PeerMessage.ContentShareDetails)return r;let c=new o.PeerMessage.ContentShareDetails;return r.sourceType!=null&&(c.sourceType=String(r.sourceType)),r.itemId!=null&&(c.itemId=String(r.itemId)),c},"fromObject"),t.toObject=a(function(r,c){c||(c={});let f={};return c.defaults&&(f.sourceType="",f.itemId=""),r.sourceType!=null&&r.hasOwnProperty("sourceType")&&(f.sourceType=r.sourceType),r.itemId!=null&&r.hasOwnProperty("itemId")&&(f.itemId=r.itemId),f},"toObject"),t.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),t.getTypeUrl=a(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.ContentShareDetails"},"getTypeUrl"),t}(),e.Background=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return a(t,"Background"),t.prototype.url="",t.create=a(function(r){return new t(r)},"create"),t.encode=a(function(r,c){return c||(c=m.create()),r.url!=null&&Object.hasOwnProperty.call(r,"url")&&c.uint32(10).string(r.url),c},"encode"),t.encodeDelimited=a(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=a(function(r,c){r instanceof u||(r=u.create(r));let f=c===void 0?r.len:r.pos+c,S=new o.PeerMessage.Background;for(;r.pos<f;){let l=r.uint32();switch(l>>>3){case 1:{S.url=r.string();break}default:r.skipType(l&7);break}}return S},"decode"),t.decodeDelimited=a(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=a(function(r){return typeof r!="object"||r===null?"object expected":r.url!=null&&r.hasOwnProperty("url")&&!s.isString(r.url)?"url: string expected":null},"verify"),t.fromObject=a(function(r){if(r instanceof o.PeerMessage.Background)return r;let c=new o.PeerMessage.Background;return r.url!=null&&(c.url=String(r.url)),c},"fromObject"),t.toObject=a(function(r,c){c||(c={});let f={};return c.defaults&&(f.url=""),r.url!=null&&r.hasOwnProperty("url")&&(f.url=r.url),f},"toObject"),t.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),t.getTypeUrl=a(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.Background"},"getTypeUrl"),t}(),e.MuteRequest=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return a(t,"MuteRequest"),t.prototype.peerId="",t.create=a(function(r){return new t(r)},"create"),t.encode=a(function(r,c){return c||(c=m.create()),r.peerId!=null&&Object.hasOwnProperty.call(r,"peerId")&&c.uint32(10).string(r.peerId),c},"encode"),t.encodeDelimited=a(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=a(function(r,c){r instanceof u||(r=u.create(r));let f=c===void 0?r.len:r.pos+c,S=new o.PeerMessage.MuteRequest;for(;r.pos<f;){let l=r.uint32();switch(l>>>3){case 1:{S.peerId=r.string();break}default:r.skipType(l&7);break}}return S},"decode"),t.decodeDelimited=a(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=a(function(r){return typeof r!="object"||r===null?"object expected":r.peerId!=null&&r.hasOwnProperty("peerId")&&!s.isString(r.peerId)?"peerId: string expected":null},"verify"),t.fromObject=a(function(r){if(r instanceof o.PeerMessage.MuteRequest)return r;let c=new o.PeerMessage.MuteRequest;return r.peerId!=null&&(c.peerId=String(r.peerId)),c},"fromObject"),t.toObject=a(function(r,c){c||(c={});let f={};return c.defaults&&(f.peerId=""),r.peerId!=null&&r.hasOwnProperty("peerId")&&(f.peerId=r.peerId),f},"toObject"),t.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),t.getTypeUrl=a(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.MuteRequest"},"getTypeUrl"),t}(),e.JukeboxRequest=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return a(t,"JukeboxRequest"),t.prototype.songKey="",t.prototype.stop=!1,t.create=a(function(r){return new t(r)},"create"),t.encode=a(function(r,c){return c||(c=m.create()),r.songKey!=null&&Object.hasOwnProperty.call(r,"songKey")&&c.uint32(10).string(r.songKey),r.stop!=null&&Object.hasOwnProperty.call(r,"stop")&&c.uint32(16).bool(r.stop),c},"encode"),t.encodeDelimited=a(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=a(function(r,c){r instanceof u||(r=u.create(r));let f=c===void 0?r.len:r.pos+c,S=new o.PeerMessage.JukeboxRequest;for(;r.pos<f;){let l=r.uint32();switch(l>>>3){case 1:{S.songKey=r.string();break}case 2:{S.stop=r.bool();break}default:r.skipType(l&7);break}}return S},"decode"),t.decodeDelimited=a(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=a(function(r){return typeof r!="object"||r===null?"object expected":r.songKey!=null&&r.hasOwnProperty("songKey")&&!s.isString(r.songKey)?"songKey: string expected":r.stop!=null&&r.hasOwnProperty("stop")&&typeof r.stop!="boolean"?"stop: boolean expected":null},"verify"),t.fromObject=a(function(r){if(r instanceof o.PeerMessage.JukeboxRequest)return r;let c=new o.PeerMessage.JukeboxRequest;return r.songKey!=null&&(c.songKey=String(r.songKey)),r.stop!=null&&(c.stop=Boolean(r.stop)),c},"fromObject"),t.toObject=a(function(r,c){c||(c={});let f={};return c.defaults&&(f.songKey="",f.stop=!1),r.songKey!=null&&r.hasOwnProperty("songKey")&&(f.songKey=r.songKey),r.stop!=null&&r.hasOwnProperty("stop")&&(f.stop=r.stop),f},"toObject"),t.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),t.getTypeUrl=a(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.JukeboxRequest"},"getTypeUrl"),t}(),e.AwarenessPayload=function(){function t(r){if(r)for(let c=Object.keys(r),f=0;f<c.length;++f)r[c[f]]!=null&&(this[c[f]]=r[c[f]])}a(t,"AwarenessPayload"),t.prototype.fieldName="",t.prototype.fieldValue="",t.prototype.fieldTimestampMs=null;let n;return Object.defineProperty(t.prototype,"_fieldTimestampMs",{get:s.oneOfGetter(n=["fieldTimestampMs"]),set:s.oneOfSetter(n)}),t.create=a(function(c){return new t(c)},"create"),t.encode=a(function(c,f){return f||(f=m.create()),c.fieldName!=null&&Object.hasOwnProperty.call(c,"fieldName")&&f.uint32(10).string(c.fieldName),c.fieldValue!=null&&Object.hasOwnProperty.call(c,"fieldValue")&&f.uint32(18).string(c.fieldValue),c.fieldTimestampMs!=null&&Object.hasOwnProperty.call(c,"fieldTimestampMs")&&f.uint32(24).int64(c.fieldTimestampMs),f},"encode"),t.encodeDelimited=a(function(c,f){return this.encode(c,f).ldelim()},"encodeDelimited"),t.decode=a(function(c,f){c instanceof u||(c=u.create(c));let S=f===void 0?c.len:c.pos+f,l=new o.PeerMessage.AwarenessPayload;for(;c.pos<S;){let y=c.uint32();switch(y>>>3){case 1:{l.fieldName=c.string();break}case 2:{l.fieldValue=c.string();break}case 3:{l.fieldTimestampMs=c.int64();break}default:c.skipType(y&7);break}}return l},"decode"),t.decodeDelimited=a(function(c){return c instanceof u||(c=new u(c)),this.decode(c,c.uint32())},"decodeDelimited"),t.verify=a(function(c){if(typeof c!="object"||c===null)return"object expected";let f={};return c.fieldName!=null&&c.hasOwnProperty("fieldName")&&!s.isString(c.fieldName)?"fieldName: string expected":c.fieldValue!=null&&c.hasOwnProperty("fieldValue")&&!s.isString(c.fieldValue)?"fieldValue: string expected":c.fieldTimestampMs!=null&&c.hasOwnProperty("fieldTimestampMs")&&(f._fieldTimestampMs=1,!s.isInteger(c.fieldTimestampMs)&&!(c.fieldTimestampMs&&s.isInteger(c.fieldTimestampMs.low)&&s.isInteger(c.fieldTimestampMs.high)))?"fieldTimestampMs: integer|Long expected":null},"verify"),t.fromObject=a(function(c){if(c instanceof o.PeerMessage.AwarenessPayload)return c;let f=new o.PeerMessage.AwarenessPayload;return c.fieldName!=null&&(f.fieldName=String(c.fieldName)),c.fieldValue!=null&&(f.fieldValue=String(c.fieldValue)),c.fieldTimestampMs!=null&&(s.Long?(f.fieldTimestampMs=s.Long.fromValue(c.fieldTimestampMs)).unsigned=!1:typeof c.fieldTimestampMs=="string"?f.fieldTimestampMs=parseInt(c.fieldTimestampMs,10):typeof c.fieldTimestampMs=="number"?f.fieldTimestampMs=c.fieldTimestampMs:typeof c.fieldTimestampMs=="object"&&(f.fieldTimestampMs=new s.LongBits(c.fieldTimestampMs.low>>>0,c.fieldTimestampMs.high>>>0).toNumber())),f},"fromObject"),t.toObject=a(function(c,f){f||(f={});let S={};return f.defaults&&(S.fieldName="",S.fieldValue=""),c.fieldName!=null&&c.hasOwnProperty("fieldName")&&(S.fieldName=c.fieldName),c.fieldValue!=null&&c.hasOwnProperty("fieldValue")&&(S.fieldValue=c.fieldValue),c.fieldTimestampMs!=null&&c.hasOwnProperty("fieldTimestampMs")&&(typeof c.fieldTimestampMs=="number"?S.fieldTimestampMs=f.longs===String?String(c.fieldTimestampMs):c.fieldTimestampMs:S.fieldTimestampMs=f.longs===String?s.Long.prototype.toString.call(c.fieldTimestampMs):f.longs===Number?new s.LongBits(c.fieldTimestampMs.low>>>0,c.fieldTimestampMs.high>>>0).toNumber():c.fieldTimestampMs,f.oneofs&&(S._fieldTimestampMs="fieldTimestampMs")),S},"toObject"),t.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),t.getTypeUrl=a(function(c){return c===void 0&&(c="type.googleapis.com"),c+"/PeerMessage.AwarenessPayload"},"getTypeUrl"),t}(),e.AwarenessBroadcast=function(){function t(n){if(this.awarenessState=[],n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return a(t,"AwarenessBroadcast"),t.prototype.channel="",t.prototype.user="",t.prototype.awarenessState=s.emptyArray,t.create=a(function(r){return new t(r)},"create"),t.encode=a(function(r,c){if(c||(c=m.create()),r.channel!=null&&Object.hasOwnProperty.call(r,"channel")&&c.uint32(10).string(r.channel),r.user!=null&&Object.hasOwnProperty.call(r,"user")&&c.uint32(18).string(r.user),r.awarenessState!=null&&r.awarenessState.length)for(let f=0;f<r.awarenessState.length;++f)o.PeerMessage.AwarenessPayload.encode(r.awarenessState[f],c.uint32(26).fork()).ldelim();return c},"encode"),t.encodeDelimited=a(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=a(function(r,c){r instanceof u||(r=u.create(r));let f=c===void 0?r.len:r.pos+c,S=new o.PeerMessage.AwarenessBroadcast;for(;r.pos<f;){let l=r.uint32();switch(l>>>3){case 1:{S.channel=r.string();break}case 2:{S.user=r.string();break}case 3:{S.awarenessState&&S.awarenessState.length||(S.awarenessState=[]),S.awarenessState.push(o.PeerMessage.AwarenessPayload.decode(r,r.uint32()));break}default:r.skipType(l&7);break}}return S},"decode"),t.decodeDelimited=a(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=a(function(r){if(typeof r!="object"||r===null)return"object expected";if(r.channel!=null&&r.hasOwnProperty("channel")&&!s.isString(r.channel))return"channel: string expected";if(r.user!=null&&r.hasOwnProperty("user")&&!s.isString(r.user))return"user: string expected";if(r.awarenessState!=null&&r.hasOwnProperty("awarenessState")){if(!Array.isArray(r.awarenessState))return"awarenessState: array expected";for(let c=0;c<r.awarenessState.length;++c){let f=o.PeerMessage.AwarenessPayload.verify(r.awarenessState[c]);if(f)return"awarenessState."+f}}return null},"verify"),t.fromObject=a(function(r){if(r instanceof o.PeerMessage.AwarenessBroadcast)return r;let c=new o.PeerMessage.AwarenessBroadcast;if(r.channel!=null&&(c.channel=String(r.channel)),r.user!=null&&(c.user=String(r.user)),r.awarenessState){if(!Array.isArray(r.awarenessState))throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: array expected");c.awarenessState=[];for(let f=0;f<r.awarenessState.length;++f){if(typeof r.awarenessState[f]!="object")throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: object expected");c.awarenessState[f]=o.PeerMessage.AwarenessPayload.fromObject(r.awarenessState[f])}}return c},"fromObject"),t.toObject=a(function(r,c){c||(c={});let f={};if((c.arrays||c.defaults)&&(f.awarenessState=[]),c.defaults&&(f.channel="",f.user=""),r.channel!=null&&r.hasOwnProperty("channel")&&(f.channel=r.channel),r.user!=null&&r.hasOwnProperty("user")&&(f.user=r.user),r.awarenessState&&r.awarenessState.length){f.awarenessState=[];for(let S=0;S<r.awarenessState.length;++S)f.awarenessState[S]=o.PeerMessage.AwarenessPayload.toObject(r.awarenessState[S],c)}return f},"toObject"),t.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),t.getTypeUrl=a(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.AwarenessBroadcast"},"getTypeUrl"),t}(),e.AwarenessQuery=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return a(t,"AwarenessQuery"),t.prototype.channel="",t.prototype.user="",t.create=a(function(r){return new t(r)},"create"),t.encode=a(function(r,c){return c||(c=m.create()),r.channel!=null&&Object.hasOwnProperty.call(r,"channel")&&c.uint32(10).string(r.channel),r.user!=null&&Object.hasOwnProperty.call(r,"user")&&c.uint32(18).string(r.user),c},"encode"),t.encodeDelimited=a(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=a(function(r,c){r instanceof u||(r=u.create(r));let f=c===void 0?r.len:r.pos+c,S=new o.PeerMessage.AwarenessQuery;for(;r.pos<f;){let l=r.uint32();switch(l>>>3){case 1:{S.channel=r.string();break}case 2:{S.user=r.string();break}default:r.skipType(l&7);break}}return S},"decode"),t.decodeDelimited=a(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=a(function(r){return typeof r!="object"||r===null?"object expected":r.channel!=null&&r.hasOwnProperty("channel")&&!s.isString(r.channel)?"channel: string expected":r.user!=null&&r.hasOwnProperty("user")&&!s.isString(r.user)?"user: string expected":null},"verify"),t.fromObject=a(function(r){if(r instanceof o.PeerMessage.AwarenessQuery)return r;let c=new o.PeerMessage.AwarenessQuery;return r.channel!=null&&(c.channel=String(r.channel)),r.user!=null&&(c.user=String(r.user)),c},"fromObject"),t.toObject=a(function(r,c){c||(c={});let f={};return c.defaults&&(f.channel="",f.user=""),r.channel!=null&&r.hasOwnProperty("channel")&&(f.channel=r.channel),r.user!=null&&r.hasOwnProperty("user")&&(f.user=r.user),f},"toObject"),t.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),t.getTypeUrl=a(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.AwarenessQuery"},"getTypeUrl"),t}(),e.AwarenessClose=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return a(t,"AwarenessClose"),t.prototype.channel="",t.prototype.user="",t.create=a(function(r){return new t(r)},"create"),t.encode=a(function(r,c){return c||(c=m.create()),r.channel!=null&&Object.hasOwnProperty.call(r,"channel")&&c.uint32(10).string(r.channel),r.user!=null&&Object.hasOwnProperty.call(r,"user")&&c.uint32(18).string(r.user),c},"encode"),t.encodeDelimited=a(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=a(function(r,c){r instanceof u||(r=u.create(r));let f=c===void 0?r.len:r.pos+c,S=new o.PeerMessage.AwarenessClose;for(;r.pos<f;){let l=r.uint32();switch(l>>>3){case 1:{S.channel=r.string();break}case 2:{S.user=r.string();break}default:r.skipType(l&7);break}}return S},"decode"),t.decodeDelimited=a(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=a(function(r){return typeof r!="object"||r===null?"object expected":r.channel!=null&&r.hasOwnProperty("channel")&&!s.isString(r.channel)?"channel: string expected":r.user!=null&&r.hasOwnProperty("user")&&!s.isString(r.user)?"user: string expected":null},"verify"),t.fromObject=a(function(r){if(r instanceof o.PeerMessage.AwarenessClose)return r;let c=new o.PeerMessage.AwarenessClose;return r.channel!=null&&(c.channel=String(r.channel)),r.user!=null&&(c.user=String(r.user)),c},"fromObject"),t.toObject=a(function(r,c){c||(c={});let f={};return c.defaults&&(f.channel="",f.user=""),r.channel!=null&&r.hasOwnProperty("channel")&&(f.channel=r.channel),r.user!=null&&r.hasOwnProperty("user")&&(f.user=r.user),f},"toObject"),t.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),t.getTypeUrl=a(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.AwarenessClose"},"getTypeUrl"),t}(),e})()},HpkP:function(W,d,h){"use strict";h.d(d,"a",function(){return e}),h.d(d,"b",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={NoAliasSelected:"no_alias_selected",RateLimited:"rate_limited",NoImageUploaded:"no_image_uploaded",InvalidMode:"invalid_mode",ErrorBadNameI18N:"error_bad_name_i18n",ErrorNameTaken:"error_name_taken",ErrorNameTakenI18N:"error_name_taken_i18n",ErrorInvalidAlias:"error_invalid_alias",ErrorBadUpload:"error_bad_upload",ErrorTooBig:"error_too_big",ErrorBadWide:"error_bad_wide",ErrorMissingName:"error_missing_name",ErrorNoImage:"error_no_image",ErrorBadFormat:"error_bad_format",ResizedButStillTooLarge:"resized_but_still_too_large",UnableToEnqueue:"unable_to_enqueue",TooManyFrames:"too_many_frames",UnknownMethod:"unknown_method",NoPermission:"no_permission",UnableToFetchEmoji:"unable_to_fetch_emoji",EmojiLimitReached:"emoji_limit_reached",NoUrlProvided:"no_url_provided",NoUrlImage:"no_url_image"},t=Object(s.a)("emoji.add generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"emoji.add",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to emoji.add
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcheremojiAddFetcher",description:"emoji.add generated fetcher"}},HrOX:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g;(function(p){p.STARTED="started",p.INTERRUPTED="interrupted",p.RESUMED="resumed",p.STOPPED="stopped",p.FAILED="failed"})(g||(g={})),d.default=g},"I/xa":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("oHvd"));let u=a(class extends p.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const s=this.pastSamplesToConsider,o=s*this.packetsExpected;let i=0;for(let e=0;e<s;e++)i+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-i/o,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(s,o){super(s,o,"Unusable Audio Warning"),this.coolDownTimeMs=s.cooldownTimeMs,this.pastSamplesToConsider=s.pastSamplesToConsider,this.fractionalLoss=s.fractionalLoss,this.packetsExpected=s.packetsExpected,this.maximumTimesToWarn=s.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");d.default=u},I0Bj:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.SessionStateControllerState=void 0;var g;(function(p){p[p.NotConnected=0]="NotConnected",p[p.Connecting=1]="Connecting",p[p.Connected=2]="Connected",p[p.Updating=3]="Updating",p[p.Disconnecting=4]="Disconnecting"})(g=d.SessionStateControllerState||(d.SessionStateControllerState={})),d.default=g},IBi3:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(t,n,r,c){function f(S){return S instanceof r?S:new r(function(l){l(S)})}return a(f,"adopt"),new(r||(r=Promise))(function(S,l){function y(R){try{O(c.next(R))}catch(F){l(F)}}a(y,"fulfilled");function T(R){try{O(c.throw(R))}catch(F){l(F)}}a(T,"rejected");function O(R){R.done?S(R.value):f(R.value).then(y,T)}a(O,"step"),O((c=c.apply(t,n||[])).next())})},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("SO8M")),m=p(h("Xf/8")),s=p(h("aNtF")),o=p(h("i2nt")),i=p(h("6/h7"));let e=a(class{setEncodingParameters(n){return g(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const r=this._localCameraTransceiver.sender;if(!n||n.size===0)return;const c=Array.from(n.values()),f=r.getParameters();if(!f.encodings||f.encodings.length===0)f.encodings=c;else for(const S of f.encodings)for(const l of c){if((S.rid||l.rid)&&S.rid!==l.rid)continue;let y;for(y in l)y==="rid"||y==="codecPayloadType"||l.hasOwnProperty(y)&&(S[y]=l[y])}yield r.setParameters(f)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(n){return g(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const r=this._localCameraTransceiver.sender;if(!r||n<=0)return;const c=r.getParameters();c.encodings||(c.encodings=[{}]);for(const f of c.encodings)f.maxBitrate=n*1e3;yield r.setParameters(c)})}setPeer(n){this.peer=n}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(n){return this._localCameraTransceiver?n===this._localCameraTransceiver.sender.track||n===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var n,r;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((r=(n=this.meetingSessionContext)===null||n===void 0?void 0:n.audioProfile)===null||r===void 0)&&r.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(n){return g(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(n),!0)})}setAudioInput(n){return g(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,n)})}setVideoInput(n){return g(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,n)})}updateVideoTransceivers(n,r){if(!this.useTransceivers())return r.array();const c=this.peer.getTransceivers();return this.videoSubscriptions=[0],r=r.clone(),this.updateTransceivers(c,n,r),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(n,r,c){const f=c.array();n.length!==0&&!n[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(n,r,f)):n.length!==0&&this.updateTransceiverWithStop(n,r,f);for(const S of f){const l=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(S,l),this.groupIdToTransceiver.set(r.groupIdForStreamId(S),l),this.videoSubscriptions.push(S),this.logger.info(`adding transceiver mid: ${l.mid} subscription: ${S} direction: recvonly`)}}updateTransceiverWithStop(n,r,c){let f=1;this.videoSubscriptions=[0];for(const S of n){if(S===this._localCameraTransceiver||!this.transceiverIsVideo(S)||!S.mid)continue;let l=!1;const y=r.streamIdForTrack("v_"+S.mid);if(S.direction!=="inactive"&&y!==void 0){for(const[T,O]of c.entries())if(r.StreamIdsInSameGroup(y,O)){S.direction="recvonly",this.videoSubscriptions[f]=O,l=!0,this.streamIdToTransceiver.delete(y),this.streamIdToTransceiver.set(O,S),c.splice(T,1);break}}if(!l){this.videoSubscriptions[f]=0,this.logger.info(`Stopping MID: ${S.mid}, direction: ${S.direction}, current direction: ${S.currentDirection}`),S.stop();for(const[T,O]of this.streamIdToTransceiver.entries())S.mid===O.mid&&(this.streamIdToTransceiver.delete(T),this.groupIdToTransceiver.delete(r.groupIdForStreamId(T)))}f+=1}}updateTransceiverWithoutStop(n,r,c){let f=1;for(const S of n)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(this.videoSubscriptions[f]=0,S.direction!=="inactive"){const l=r.streamIdForTrack("v_"+S.mid);if(l!==void 0){for(const[y,T]of c.entries())if(r.StreamIdsInSameGroup(l,T)){S.direction="recvonly",this.videoSubscriptions[f]=T,this.streamIdToTransceiver.delete(l),this.streamIdToTransceiver.set(T,S),c.splice(y,1);break}}}f+=1}f=1;for(const S of n)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(S.direction==="inactive"&&c.length>0){S.direction="recvonly";const l=c.shift();this.videoSubscriptions[f]=l,this.streamIdToTransceiver.set(l,S),this.groupIdToTransceiver.set(r.groupIdForStreamId(l),S)}else if(this.videoSubscriptions[f]===0){S.direction="inactive";for(const[l,y]of this.streamIdToTransceiver.entries())S===y&&(this.streamIdToTransceiver.delete(l),this.groupIdToTransceiver.delete(r.groupIdForStreamId(l)))}f+=1}}getMidForStreamId(n){var r;return(r=this.streamIdToTransceiver.get(n))===null||r===void 0?void 0:r.mid}setStreamIdForMid(n,r){for(const[c,f]of this.streamIdToTransceiver.entries())if(f.mid===n){this.streamIdToTransceiver.delete(c),this.streamIdToTransceiver.set(r,f);return}}getMidForGroupId(n){var r;return(r=this.groupIdToTransceiver.get(n))===null||r===void 0?void 0:r.mid}transceiverIsVideo(n){return n.receiver&&n.receiver.track&&n.receiver.track.kind==="video"||n.sender&&n.sender.track&&n.sender.track.kind==="video"}debugDumpTransceivers(){let n="",r=0;for(const c of this.peer.getTransceivers())this.transceiverIsVideo(c)&&(n+=`transceiver index=${r} mid=${c.mid} subscription=${this.videoSubscriptions[r]} direction=${c.direction}
`,r+=1);return n}setTransceiverInput(n,r){return g(this,void 0,void 0,function*(){n&&(r?n.direction="sendrecv":n.direction="inactive",yield n.sender.replaceTrack(r))})}forEachRedMetricsObserver(n){for(const r of this.redMetricsObservers)i.default.nextTick(()=>{this.redMetricsObservers.has(r)&&r.recoveryMetricsDidReceive(n)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new u.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var n,r;const c=!!window.RTCRtpScriptTransform,f=!!RTCRtpSender.prototype.createEncodedStreams;if(c)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(f)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([o.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(S){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${S}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),S}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=S=>{if(S.data.type==="REDWorkerLog")this.logger.info(S.data.log);else if(S.data.type==="RedundantAudioEncoderStats"){const l=new m.default;l.currentTimestampMs=Date.now(),l.ssrc=S.data.ssrc,l.totalAudioPacketsLost=S.data.totalAudioPacketsLost,l.totalAudioPacketsExpected=S.data.totalAudioPacketsExpected,l.totalAudioPacketsRecoveredRed=S.data.totalAudioPacketsRecoveredRed,l.totalAudioPacketsRecoveredFec=S.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(l)}},c)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(f){const S=this._localAudioTransceiver.sender.createEncodedStreams(),l=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:S,receive:l},[S.readable,S.writable,l.readable,l.writable])}(n=this.meetingSessionContext)===null||n===void 0||n.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((r=this.meetingSessionContext)===null||r===void 0?void 0:r.statsCollector)}addTransceiver(n,r){var c;const f=this.peer.addTransceiver(n,r);if(!(!((c=this.peer.getConfiguration())===null||c===void 0)&&c.encodedInsertableStreams)||!this.audioRedWorker)return f;const S=!!window.RTCRtpScriptTransform,l=!!RTCRtpSender.prototype.createEncodedStreams;if(S)f.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),f.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(l){const y=f.sender.createEncodedStreams(),T=f.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"PassthroughTransform",send:y,receive:T},[y.readable,y.writable,T.readable,T.writable])}return f}destroyAudioRedWorkerAndStates(){var n,r;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(n=this.meetingSessionContext)===null||n===void 0||n.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((r=this.meetingSessionContext)===null||r===void 0?void 0:r.statsCollector))}setAudioPayloadTypes(n){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:n.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:n.get("opus")}))}metricsDidReceive(n){const{currentTimestampMs:r}=n,c=n.getRTCStatsReport();let f=0,S=0,l=0;c.forEach(U=>{U.kind==="audio"&&(U.type==="outbound-rtp"?S=U.packetsSent:U.type==="remote-inbound-rtp"&&(f=U.timestamp,l=U.packetsLost))}),(this.audioMetricsHistory.length===0||f>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&S>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:f,totalPacketsSent:S,totalPacketsLost:l}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const y=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),T=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),O=Math.max(y,T),[R,F]=s.default.getNumRedundantEncodingsForPacketLoss(O);if(F){this.lastHighPacketLossEventTimestampMs=r,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=r);return}else if(!this.audioRedEnabled){const U=r-this.lastAudioRedTurnOffTimestampMs,_=r-this.lastHighPacketLossEventTimestampMs;if(U>=this.audioRedPacketLossLongEvalPeriodMs&&_<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(r)}this.shouldUpdateAudioRedWorkerEncodings(r,R)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:R})}maybeResetHoldDownTimer(n){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=n)}lossPercent(n){if(this.audioMetricsHistory.length<2)return 0;const r=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,c=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,f=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let S=this.audioMetricsHistory.length-2;S>=0;S--)if(r-this.audioMetricsHistory[S].timestampMs>=n){const l=f-this.audioMetricsHistory[S].totalPacketsLost,y=c-this.audioMetricsHistory[S].totalPacketsSent,T=100*(l/y);return Math.max(0,Math.min(T,100))}return 0}shouldUpdateAudioRedWorkerEncodings(n,r){return this.currentNumRedundantEncodings===r?(this.maybeResetHoldDownTimer(n),!1):r<this.currentNumRedundantEncodings&&n-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=r,this.maybeResetHoldDownTimer(n),!0)}addRedundantAudioRecoveryMetricsObserver(n){this.redMetricsObservers.add(n)}removeRedundantAudioRecoveryMetricsObserver(n){this.redMetricsObservers.delete(n)}constructor(n,r,c){this.logger=n,this.browserBehavior=r,this.meetingSessionContext=c,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");d.default=e},IGBW:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g;(function(p){p.IDLE="IDLE",p.RUNNING="RUNNING",p.CANCELED="CANCELED",p.FINISHED="FINISHED"})(g||(g={})),d.default=g},IKDz:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(u=5e3,m=2,s=64,o=100,i=15){this.flushIntervalMs=u,this.flushSize=m,this.maxBufferCapacityKb=s,this.totalBufferItems=o,this.retryCountLimit=i}},"EventBufferConfiguration");d.default=g},InPl:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("U9CR")),m=p(h("ZsEg"));let s=a(class Gl{get mediaStream(){return this._mediaStream}set mediaStream(i){this._mediaStream=i}acquireAudioInputStream(){return g(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),m.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return g(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(i){return g(this,void 0,void 0,function*(){return i&&i.video&&i.video.mandatory&&i.video.mandatory.chromeMediaSource&&i.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(i):navigator.mediaDevices.getDisplayMedia(i)})}acquireScreenCaptureDisplayInputStream(i,e){return g(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(i,e))})}screenCaptureDisplayMediaConstraints(i,e){return{audio:!!(!i&&new u.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!i&&{frameRate:{max:e||Gl.defaultFrameRate}}),i&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:e||Gl.defaultFrameRate}})}}toggleMediaStream(i){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==i&&(this.mediaStream.getTracks()[t].enabled=i,e=!0);return e}cleanup(){if(this.mediaStream)for(let i=0;i<this.mediaStream.getTracks().length;i++)this.mediaStream.getTracks()[i].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(i){}removeMediaStreamBrokerObserver(i){}constructor(i){this.logger=i}},"ContentShareMediaStreamBroker");d.default=s,s.defaultFrameRate=15},Iprt:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={InternalError:"internal_error"},t=Object(s.a)("sharedInvites.canGetLink generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"sharedInvites.canGetLink",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to sharedInvites.canGetLink
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersharedInvitesCanGetLinkFetcher",description:"sharedInvites.canGetLink generated fetcher"}},IrJe:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'PassthroughTransform') {
                encoder.setupPassthroughTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupPassthroughTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. This is a bad packet.
        if (!gotLastBlock) {
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(encodings[encodings.length - 1].timestamp, frameMetadata.synchronizationSource);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(timestamp, ssrc) {
        if (timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;d.default=g},IsLT:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(c,f,S,l){function y(T){return T instanceof S?T:new S(function(O){O(T)})}return a(y,"adopt"),new(S||(S=Promise))(function(T,O){function R(_){try{U(l.next(_))}catch(P){O(P)}}a(R,"fulfilled");function F(_){try{U(l.throw(_))}catch(P){O(P)}}a(F,"rejected");function U(_){_.done?T(_.value):y(_.value).then(R,F)}a(U,"step"),U((l=l.apply(c,f||[])).next())})},p=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(d,"__esModule",{value:!0});const u=h("EkyC"),m=h("KvYa"),s=p(h("DE61")),o=p(h("U9CR")),i=p(h("ac3q")),e=a(()=>s.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",n={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let r=a(class{static defaultAssetSpec(){const f=i.default.sdkVersionSemVer;return{assetGroup:`sdk-${f.major}.${f.minor}`}}static createUrlWithParams(f,S){const l=new URL(f),y=Object.keys(S);for(const T of y)S[T]!==void 0&&l.searchParams.set(T,S[T]);return l.toString()}static resolveSpec(f){const{paths:S=n,model:l=e(),assetGroup:y=this.defaultAssetSpec().assetGroup,revisionID:T=this.defaultAssetSpec().revisionID}=f||{},O={assetGroup:y,revisionID:T,sdk:encodeURIComponent(i.default.sdkVersion),ua:encodeURIComponent(i.default.sdkUserAgentLowResolution)};return S.worker=this.createUrlWithParams(S.worker,O),S.wasm=this.createUrlWithParams(S.wasm,O),S.simd=this.createUrlWithParams(S.simd,O),l.path=this.createUrlWithParams(l.path,O),{paths:S,model:l,assetGroup:y,revisionID:T}}static resolveOptions(f){f.reportingPeriodMillis||(f.reportingPeriodMillis=1e3);const S=30;return f.filterCPUUtilization?(f.filterCPUUtilization<0||f.filterCPUUtilization>100)&&(f.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${S} percent`),f.filterCPUUtilization=S):f.filterCPUUtilization=S,f}static isSupported(f,S){const{logger:l}=S;return typeof globalThis>"u"?(l.info("Browser does not have globalThis."),Promise.resolve(!1)):new o.default().supportsBackgroundFilter()?m.supportsWASM(globalThis,l)?this.supportsBackgroundFilter(globalThis,f,l):(l.info("Browser does not support WASM."),Promise.resolve(!1)):(l.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,S=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0;return g(this,void 0,void 0,function*(){if(!m.supportsWorker(f,l))return l.info("Browser does not support web workers."),!1;const y=S.paths.worker;try{const T=yield u.loadWorker(y,"BackgroundFilterWorker",{},null);try{T.terminate()}catch(O){l.info(`Failed to terminate worker. ${O.message}`)}return!0}catch(T){return l.info(`Failed to fetch and instantiate test worker ${T.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");d.default=r},Iwfh:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"SDPMediaSection");d.default=g},"J+fJ":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.AudioLogEvent=void 0;var g;(function(p){p[p.DeviceChanged=0]="DeviceChanged",p[p.MutedLocal=1]="MutedLocal",p[p.UnmutedLocal=2]="UnmutedLocal",p[p.Connected=3]="Connected",p[p.ConnectFailed=4]="ConnectFailed",p[p.RedmicStartLoss=5]="RedmicStartLoss",p[p.RedmicEndLoss=6]="RedmicEndLoss"})(g=d.AudioLogEvent||(d.AudioLogEvent={})),d.default=g},J1op:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("DUgj"));let u=a(class Nd{allowSubscribe(s,o){let i=0;const e=this.currentNetworkEvent;if(o>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=o,!0;if(o<this.referenceBitrate){if(this.currentNetworkEvent=1,i=this.getSubscribeDelay(this.currentNetworkEvent,s),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>i)return this.referenceBitrate=o,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(s,o){let i=Nd.MINIMUM_DELAY_MS;const e=Nd.MAXIMUM_DELAY_MS-Nd.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(s){case 1:i+=e*t*(1+o/10),i=Math.min(Nd.MAXIMUM_DELAY_MS,i);break}return i}constructor(s=0,o=0){this.networkIssueResponseDelayFactor=s,this.networkIssueRecoveryDelayFactor=o,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=p.default.Default,s<0?s=0:s>1&&(s=1),this.networkIssueResponseDelayFactor=s,o<0?o=0:o>1&&(o=1),this.networkIssueRecoveryDelayFactor=o}},"VideoPriorityBasedPolicyConfig");d.default=u,u.MINIMUM_DELAY_MS=2e3,u.MAXIMUM_DELAY_MS=8e3,u.Default=new u(0,0),u.UnstableNetworkPreset=new u(0,1),u.StableNetworkPreset=new u(1,0)},J5JU:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const g=h("2IS5");d.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let p=a(class{subscribeToTranscriptEvent(m){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(d.TRANSCRIPTION_DATA_MESSAGE_TOPIC,s=>{for(const o of g.TranscriptEventConverter.from(s))for(const i of this.transcriptEventCallbacks)i(o)}),this.transcriptEventCallbacks.add(m)}unsubscribeFromTranscriptEvent(m){this.transcriptEventCallbacks.delete(m),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(d.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(m){this.realtimeController=m,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");d.default=p},J93s:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class zu{static builder(){return new zu}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const u={height:144,width:256,range:[0,1],channels:3},m={height:144,width:256,range:[0,1],channels:1},s="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=s,this.input=u,this.output=m,this}withPath(u){return this.path=u,this}withInput(u){return this.input=u,this}withOutput(u){return this.output=u,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");d.default=g},JBVX:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0})},JEbH:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0})},JHsX:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.SessionStateControllerAction=void 0;var g;(function(p){p[p.Connect=0]="Connect",p[p.FinishConnecting=1]="FinishConnecting",p[p.Update=2]="Update",p[p.FinishUpdating=3]="FinishUpdating",p[p.Reconnect=4]="Reconnect",p[p.Disconnect=5]="Disconnect",p[p.Fail=6]="Fail",p[p.FinishDisconnecting=7]="FinishDisconnecting"})(g=d.SessionStateControllerAction||(d.SessionStateControllerAction={})),d.default=g},JJ3a:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(S,l,y,T){function O(R){return R instanceof y?R:new y(function(F){F(R)})}return a(O,"adopt"),new(y||(y=Promise))(function(R,F){function U(L){try{P(T.next(L))}catch(A){F(A)}}a(U,"fulfilled");function _(L){try{P(T.throw(L))}catch(A){F(A)}}a(_,"rejected");function P(L){L.done?R(L.value):O(L.value).then(U,_)}a(P,"step"),P((T=T.apply(S,l||[])).next())})},p=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(d,"__esModule",{value:!0});const u=h("Zit3"),m=p(h("Np2I")),s=p(h("Q8+J")),o=p(h("evlv")),i=p(h("ULlC")),e=p(h("6/h7")),t=p(h("PsbS")),n=p(h("jHTc")),r=p(h("4EN+")),c=p(h("p3mT"));let f=a(class{addObserver(l){this.logger.info("adding messaging observer"),this.observerQueue.add(l)}removeObserver(l){this.logger.info("removing messaging observer"),this.observerQueue.delete(l)}start(){return g(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),s.default.removeLogger(this.logger))}forEachObserver(l){for(const y of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(y)&&l(y)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",l=>{this.receiveMessageHandler(l.data)}),this.webSocket.addEventListener("close",l=>{this.closeEventHandler(l)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(l){return g(this,void 0,void 0,function*(){return yield this.startConnectingInternal(l),yield new Promise((y,T)=>{this.bootstrapResolved=y,this.bootstrapRejected=T})})}startConnectingInternal(l){var y;return g(this,void 0,void 0,function*(){let T=this.configuration.endpointUrl;if(l||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),l||T===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const R=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((y=R.Endpoint)===null||y===void 0)&&y.Url?T=R.Endpoint.Url:T=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else T=(yield this.configuration.chimeClient.send(new u.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${T}`)}catch(R){this.logger.error(`Messaging Session failed to resolve endpoint: ${R}`);const F=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(F);return}const O=yield this.prepareWebSocketUrl(T);this.logger.info(`opening connection to ${O}`),l||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(O,[],!0),this.forEachObserver(R=>{R.messagingSessionDidStartConnecting&&R.messagingSessionDidStartConnecting(l)}),this.setUpEventListeners()})}prepareWebSocketUrl(l){return g(this,void 0,void 0,function*(){const y=new Map;return y.set("userArn",[this.configuration.userArn]),y.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===c.default.Connect&&y.set("prefetch-on",[c.default.Connect]),this.configuration.prefetchSortBy&&y.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",l,"/connect","",y)})}isClosed(){return this.webSocket.readyState()===r.default.None||this.webSocket.readyState()===r.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(l){try{const y=JSON.parse(l),T=y.Headers["x-amz-chime-event-type"],O=new o.default(T,y.Headers,y.Payload||null);if(!this.isSessionEstablished&&T==="SESSION_ESTABLISHED"){this.forEachObserver(F=>{F.messagingSessionDidStart&&F.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const R=this.preBootstrapMessages.length;for(let F=0;F<R;F++){const U=this.preBootstrapMessages.shift();this.forEachObserver(_=>{this.sendMessageToObserver(_,U)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(O);return}this.forEachObserver(R=>{this.sendMessageToObserver(R,O)})}catch(y){this.logger.error(`Messaging parsing failed: ${y}`)}}sendMessageToObserver(l,y){l.messagingSessionDidReceiveMessage&&l.messagingSessionDidReceiveMessage(y)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>g(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(l){this.logger.info(`WebSocket close: ${l.code} ${l.reason}`),l.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(l.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(y=>{y.messagingSessionDidStop&&y.messagingSessionDidStop(l)}):this.bootstrapRejected(l))}canReconnect(l){return l===1001||l===1006||l>=1011&&l<=1014||l>4e3&&l!==4002&&l!==4003&&l!==4401}constructor(l,y,T,O,R){this.configuration=l,this.logger=y,this.webSocket=T,this.reconnectController=O,this.sigV4=R,this.observerQueue=new Set,this.webSocket||(this.webSocket=new n.default(this.logger)),this.reconnectController||(this.reconnectController=new i.default(l.reconnectTimeoutMs,new m.default(l.reconnectFixedWaitMs,l.reconnectShortBackoffMs,l.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),s.default.addLogger(this.logger),s.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");d.default=f},"JMN+":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"TranscriptAlternative");d.default=g},JOZa:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.SessionStateControllerDeferPriority=void 0;var g;(function(p){p[p.DoNotDefer=0]="DoNotDefer",p[p.Low=1]="Low",p[p.Medium=2]="Medium",p[p.High=3]="High",p[p.VeryHigh=4]="VeryHigh"})(g=d.SessionStateControllerDeferPriority||(d.SessionStateControllerDeferPriority={})),d.default=g},JTre:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("Sa54")),u=g(h("bTau")),m=g(h("5mqp"));let s=a(class Zo{static connectVideoStreamToVideoElement(i,e,t){const n=t&&i.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(Zo.setVideoElementFlag(e,"disablePictureInPicture",t),Zo.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==n&&(e.style.transform=n),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==i&&(e.srcObject=i,new p.default().requiresVideoPlayWorkaround()&&e.paused)){const r=e.play();r!==void 0&&r.catch(c=>{console.warn("Error playing video in Safari",c)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(i)if(e)t||(i.srcObject=null,i.style.transform="");else{if(!i.srcObject)return;i.pause(),i.style.transform="",Zo.setVideoElementFlag(i,"disablePictureInPicture",!1),Zo.setVideoElementFlag(i,"disableRemotePlayback",!1),i.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&Zo.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new m.default}devicePixelRatioChanged(i){this.tileState.devicePixelRatio=i,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(i,e,t,n,r,c,f){let S=!1;this.tileState.boundAttendeeId!==i&&(this.tileState.boundAttendeeId=i,new u.default(i).hasModality(u.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),S=!0),this.tileState.boundExternalUserId!==f&&(this.tileState.boundExternalUserId=f,S=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,S=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,S=!0),this.tileState.videoStreamContentWidth!==n&&(this.tileState.videoStreamContentWidth=n,S=!0),this.tileState.videoStreamContentHeight!==r&&(this.tileState.videoStreamContentHeight=r,S=!0),this.tileState.streamId!==c&&(this.tileState.streamId=c,S=!0),S&&this.sendTileStateUpdate()}bindVideoElement(i){let e=!1;this.tileState.boundVideoElement!==i&&(this.tileState.boundVideoElement=i,e=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==i.clientWidth&&(this.tileState.videoElementCSSWidthPixels=i.clientWidth,e=!0),this.tileState.videoElementCSSHeightPixels!==i.clientHeight&&(this.tileState.videoElementCSSHeightPixels=i.clientHeight,e=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),e&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const i=document.createElement("canvas"),e=this.tileState.boundVideoElement;i.width=e.videoWidth||e.width,i.height=e.videoHeight||e.height;const t=i.getContext("2d");return t.drawImage(e,0,0,i.width,i.height),t.getImageData(0,0,i.width,i.height)}setStreamId(i){this.tileState.streamId=i,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?Zo.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):Zo.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(i,e,t){e in i&&(i[e]=t)}constructor(i,e,t,n){this.tileController=t,this.devicePixelRatioMonitor=n,this.tileState=new m.default,this.tileState.tileId=i,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");d.default=s},JXEU:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={FailedToRecordInteraction:"failed_to_record_interaction",InvalidComponent:"invalid_component",InvalidType:"invalid_type"},t=Object(s.a)("users.interactions.set generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l),T=yield r(Object(m.apiCall)({method:"users.interactions.set",args:y,reason:f.reason}));return Object(i.a)(T)}catch(S){throw Object(o.a)({getState:c}).error(`API call to users.interactions.set
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherusersInteractionsSetFetcher",description:"users.interactions.set generated fetcher"}},JaxT:function(W,d,h){"use strict";h.d(d,"a",function(){return g});const g={Sent:"sent",Expired:"expired",Revoked:"revoked"}},JsnC:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.SDPCandidateType=void 0;var g;(function(p){p.Host="host",p.ServerReflexive="srflx",p.PeerReflexive="prflx",p.Relay="relay"})(g=d.SDPCandidateType||(d.SDPCandidateType={})),d.default=g},Jsna:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("Np2I")),u=g(h("eeYi")),m=g(h("ir/0")),s=g(h("r9Lw")),o=g(h("/U1e")),i=g(h("a16/")),e=g(h("6Bxv")),t=g(h("lUhs")),n=g(h("iNgN")),r=g(h("ULlC")),c=g(h("jHTc")),f=g(h("2nae"));let S=a(class extends f.default{setAudioProfile(y){}start(){}stop(){}promoteToPrimaryMeeting(y){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(y){const T=new o.default;T.meetingId="",T.externalMeetingId="",T.credentials=new i.default,T.credentials.attendeeId="",T.credentials.joinToken="",T.urls=new n.default,T.urls.turnControlURL="",T.urls.audioHostURL="",T.urls.signalingURL="wss://localhost/";const O=new m.default;super(y||T,O,new c.default(new m.default),new s.default,new r.default(0,new p.default(0,0,0)),new u.default(y||T,O))}},"NoOpAudioVideoController");d.default=S},"K+bq":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("j+uH")),m=p(h("IGBW"));let s=a(class extends u.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return g(this,void 0,void 0,function*(){for(const i of this.tasksToRunSerially){this.getStatus()===m.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${i.name()}`),this.currentTask=i,yield i.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${i.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const n of t)n.setParent(this)}},"SerialGroupTask");d.default=s},K4CH:function(W,d,h){var g;(function(p,u){"use strict";var m="1.0.2",s="",o="?",i="function",e="undefined",t="object",n="string",r="major",c="model",f="name",S="type",l="vendor",y="version",T="architecture",O="console",R="mobile",F="tablet",U="smarttv",_="wearable",P="embedded",L=255,A="Amazon",M="Apple",k="ASUS",G="BlackBerry",K="Browser",H="Chrome",X="Edge",oe="Firefox",le="Google",re="Huawei",he="LG",Pe="Microsoft",pe="Motorola",Me="Opera",We="Samsung",Ae="Sony",lt="Xiaomi",Ne="Zebra",Xe="Facebook",je=a(function(nt,$t){var It={};for(var Fe in nt)$t[Fe]&&$t[Fe].length%2===0?It[Fe]=$t[Fe].concat(nt[Fe]):It[Fe]=nt[Fe];return It},"extend"),Te=a(function(nt){for(var $t={},It=0;It<nt.length;It++)$t[nt[It].toUpperCase()]=nt[It];return $t},"enumerize"),At=a(function(nt,$t){return typeof nt===n?sn($t).indexOf(sn(nt))!==-1:!1},"has"),sn=a(function(nt){return nt.toLowerCase()},"lowerize"),Dt=a(function(nt){return typeof nt===n?nt.replace(/[^\d\.]/g,s).split(".")[0]:u},"majorize"),tn=a(function(nt,$t){if(typeof nt===n)return nt=nt.replace(/^\s\s*/,s).replace(/\s\s*$/,s),typeof $t===e?nt:nt.substring(0,L)},"trim"),Yt=a(function(nt,$t){for(var It=0,Fe,Rt,Qe,Qt,Nn,Zt;It<$t.length&&!Nn;){var mn=$t[It],ni=$t[It+1];for(Fe=Rt=0;Fe<mn.length&&!Nn;)if(Nn=mn[Fe++].exec(nt),Nn)for(Qe=0;Qe<ni.length;Qe++)Zt=Nn[++Rt],Qt=ni[Qe],typeof Qt===t&&Qt.length>0?Qt.length===2?typeof Qt[1]==i?this[Qt[0]]=Qt[1].call(this,Zt):this[Qt[0]]=Qt[1]:Qt.length===3?typeof Qt[1]===i&&!(Qt[1].exec&&Qt[1].test)?this[Qt[0]]=Zt?Qt[1].call(this,Zt,Qt[2]):u:this[Qt[0]]=Zt?Zt.replace(Qt[1],Qt[2]):u:Qt.length===4&&(this[Qt[0]]=Zt?Qt[3].call(this,Zt.replace(Qt[1],Qt[2])):u):this[Qt]=Zt||u;It+=2}},"rgxMapper"),Tn=a(function(nt,$t){for(var It in $t)if(typeof $t[It]===t&&$t[It].length>0){for(var Fe=0;Fe<$t[It].length;Fe++)if(At($t[It][Fe],nt))return It===o?u:It}else if(At($t[It],nt))return It===o?u:It;return nt},"strMapper"),Xt={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Cn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Dn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[y,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[y,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,y],[/opios[\/ ]+([\w\.]+)/i],[y,[f,Me+" Mini"]],[/\bopr\/([\w\.]+)/i],[y,[f,Me]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[f,y],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[y,[f,"UC"+K]],[/\bqbcore\/([\w\.]+)/i],[y,[f,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[y,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[y,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[y,[f,"IE"]],[/yabrowser\/([\w\.]+)/i],[y,[f,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure "+K],y],[/\bfocus\/([\w\.]+)/i],[y,[f,oe+" Focus"]],[/\bopt\/([\w\.]+)/i],[y,[f,Me+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[y,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[y,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[y,[f,Me+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[y,[f,"MIUI "+K]],[/fxios\/([-\w\.]+)/i],[y,[f,oe]],[/\bqihu|(qi?ho?o?|360)browser/i],[[f,"360 "+K]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1 "+K],y],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],y],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[f,y],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,Xe],y],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[f,y],[/\bgsa\/([\w\.]+) .*safari\//i],[y,[f,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[y,[f,H+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,H+" WebView"],y],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[y,[f,"Android "+K]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,y],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[y,[f,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[y,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[y,Tn,Xt]],[/(webkit|khtml)\/([\w\.]+)/i],[f,y],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],y],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[y,[f,oe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[f,y]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[T,"amd64"]],[/(ia32(?=;))/i],[[T,sn]],[/((?:i[346]|x)86)[;\)]/i],[[T,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[T,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[T,"armhf"]],[/windows (ce|mobile); ppc;/i],[[T,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[T,/ower/,s,sn]],[/(sun4\w)[;\)]/i],[[T,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[T,sn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[l,We],[S,F]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[l,We],[S,R]],[/\((ip(?:hone|od)[\w ]*);/i],[c,[l,M],[S,R]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[l,M],[S,F]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[l,re],[S,F]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[c,[l,re],[S,R]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[l,lt],[S,R]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[l,lt],[S,F]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[l,"OPPO"],[S,R]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[l,"Vivo"],[S,R]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[l,"Realme"],[S,R]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[l,pe],[S,R]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[l,pe],[S,F]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[l,he],[S,F]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[l,he],[S,R]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[l,"Lenovo"],[S,F]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[l,"Nokia"],[S,R]],[/(pixel c)\b/i],[c,[l,le],[S,F]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[l,le],[S,R]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[l,Ae],[S,R]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[l,Ae],[S,F]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[l,"OnePlus"],[S,R]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[l,A],[S,F]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[l,A],[S,R]],[/(playbook);[-\w\),; ]+(rim)/i],[c,l,[S,F]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[l,G],[S,R]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[l,k],[S,F]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[l,k],[S,R]],[/(nexus 9)/i],[c,[l,"HTC"],[S,F]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[l,[c,/_/g," "],[S,R]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[l,"Acer"],[S,F]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[l,"Meizu"],[S,R]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[l,"Sharp"],[S,R]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[l,c,[S,R]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[l,c,[S,F]],[/(surface duo)/i],[c,[l,Pe],[S,F]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[l,"Fairphone"],[S,R]],[/(u304aa)/i],[c,[l,"AT&T"],[S,R]],[/\bsie-(\w*)/i],[c,[l,"Siemens"],[S,R]],[/\b(rct\w+) b/i],[c,[l,"RCA"],[S,F]],[/\b(venue[\d ]{2,7}) b/i],[c,[l,"Dell"],[S,F]],[/\b(q(?:mv|ta)\w+) b/i],[c,[l,"Verizon"],[S,F]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[l,"Barnes & Noble"],[S,F]],[/\b(tm\d{3}\w+) b/i],[c,[l,"NuVision"],[S,F]],[/\b(k88) b/i],[c,[l,"ZTE"],[S,F]],[/\b(nx\d{3}j) b/i],[c,[l,"ZTE"],[S,R]],[/\b(gen\d{3}) b.+49h/i],[c,[l,"Swiss"],[S,R]],[/\b(zur\d{3}) b/i],[c,[l,"Swiss"],[S,F]],[/\b((zeki)?tb.*\b) b/i],[c,[l,"Zeki"],[S,F]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[l,"Dragon Touch"],c,[S,F]],[/\b(ns-?\w{0,9}) b/i],[c,[l,"Insignia"],[S,F]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[l,"NextBook"],[S,F]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,"Voice"],c,[S,R]],[/\b(lvtel\-)?(v1[12]) b/i],[[l,"LvTel"],c,[S,R]],[/\b(ph-1) /i],[c,[l,"Essential"],[S,R]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[l,"Envizen"],[S,F]],[/\b(trio[-\w\. ]+) b/i],[c,[l,"MachSpeed"],[S,F]],[/\btu_(1491) b/i],[c,[l,"Rotor"],[S,F]],[/(shield[\w ]+) b/i],[c,[l,"Nvidia"],[S,F]],[/(sprint) (\w+)/i],[l,c,[S,R]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[l,Pe],[S,R]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[l,Ne],[S,F]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[l,Ne],[S,R]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,c,[S,O]],[/droid.+; (shield) bui/i],[c,[l,"Nvidia"],[S,O]],[/(playstation [345portablevi]+)/i],[c,[l,Ae],[S,O]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[l,Pe],[S,O]],[/smart-tv.+(samsung)/i],[l,[S,U]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[l,We],[S,U]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[l,he],[S,U]],[/(apple) ?tv/i],[l,[c,M+" TV"],[S,U]],[/crkey/i],[[c,H+"cast"],[l,le],[S,U]],[/droid.+aft(\w)( bui|\))/i],[c,[l,A],[S,U]],[/\(dtv[\);].+(aquos)/i],[c,[l,"Sharp"],[S,U]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[l,tn],[c,tn],[S,U]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[S,U]],[/((pebble))app/i],[l,c,[S,_]],[/droid.+; (glass) \d/i],[c,[l,le],[S,_]],[/droid.+; (wt63?0{2,3})\)/i],[c,[l,Ne],[S,_]],[/(quest( 2)?)/i],[c,[l,Xe],[S,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[l,[S,P]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[S,R]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[S,F]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[S,F]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[S,R]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[l,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[y,[f,X+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[y,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[f,y],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[y,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,y],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[f,[y,Tn,Cn]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,"Windows"],[y,Tn,Cn]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[y,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,"Mac OS"],[y,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[y,f],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[f,y],[/\(bb(10);/i],[y,[f,G]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[y,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[y,[f,oe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[y,[f,"webOS"]],[/crkey\/([\d\.]+)/i],[y,[f,H+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[f,"Chromium OS"],y],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,y],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],y],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[f,y]]},cn=a(function(nt,$t){if(typeof nt===t&&($t=nt,nt=u),!(this instanceof cn))return new cn(nt,$t).getResult();var It=nt||(typeof p!==e&&p.navigator&&p.navigator.userAgent?p.navigator.userAgent:s),Fe=$t?je(Dn,$t):Dn;return this.getBrowser=function(){var Rt={};return Rt[f]=u,Rt[y]=u,Yt.call(Rt,It,Fe.browser),Rt.major=Dt(Rt.version),Rt},this.getCPU=function(){var Rt={};return Rt[T]=u,Yt.call(Rt,It,Fe.cpu),Rt},this.getDevice=function(){var Rt={};return Rt[l]=u,Rt[c]=u,Rt[S]=u,Yt.call(Rt,It,Fe.device),Rt},this.getEngine=function(){var Rt={};return Rt[f]=u,Rt[y]=u,Yt.call(Rt,It,Fe.engine),Rt},this.getOS=function(){var Rt={};return Rt[f]=u,Rt[y]=u,Yt.call(Rt,It,Fe.os),Rt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return It},this.setUA=function(Rt){return It=typeof Rt===n&&Rt.length>L?tn(Rt,L):Rt,this},this.setUA(It),this},"UAParser");cn.VERSION=m,cn.BROWSER=Te([f,y,r]),cn.CPU=Te([T]),cn.DEVICE=Te([c,l,S,O,R,U,F,_,P]),cn.ENGINE=cn.OS=Te([f,y]),typeof d!==e?(typeof W!==e&&W.exports&&(d=W.exports=cn),d.UAParser=cn):i==="function"&&h("PDX0")?(g=function(){return cn}.call(d,h,d,W),g!==u&&(W.exports=g)):typeof p!==e&&(p.UAParser=cn);var Mn=typeof p!==e&&(p.jQuery||p.Zepto);if(Mn&&!Mn.ua){var _n=new cn;Mn.ua=_n.getResult(),Mn.ua.get=function(){return _n.getUA()},Mn.ua.set=function(nt){_n.setUA(nt);var $t=_n.getResult();for(var It in $t)Mn.ua[It]=$t[It]}}})(typeof window=="object"?window:this)},K5tc:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.SessionStateControllerAction=void 0;var g;(function(p){p[p.Connect=0]="Connect",p[p.FinishConnecting=1]="FinishConnecting",p[p.Update=2]="Update",p[p.FinishUpdating=3]="FinishUpdating",p[p.Reconnect=4]="Reconnect",p[p.Disconnect=5]="Disconnect",p[p.Fail=6]="Fail",p[p.FinishDisconnecting=7]="FinishDisconnecting"})(g=d.SessionStateControllerAction||(d.SessionStateControllerAction={})),d.default=g},K7TJ:function(W,d,h){"use strict";function g(p){for(var u=-1,m=p==null?0:p.length,s={};++u<m;){var o=p[u];s[o[0]]=o[1]}return s}a(g,"fromPairs"),d.a=g},KCGh:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(u,m,s,o){this.sequenceNumber=u,this.message=m,this.timestampMs=s,this.logLevel=o}},"Log");d.default=g},KEX5:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(c,f,S,l){function y(T){return T instanceof S?T:new S(function(O){O(T)})}return a(y,"adopt"),new(S||(S=Promise))(function(T,O){function R(_){try{U(l.next(_))}catch(P){O(P)}}a(R,"fulfilled");function F(_){try{U(l.throw(_))}catch(P){O(P)}}a(F,"rejected");function U(_){_.done?T(_.value):y(_.value).then(R,F)}a(U,"step"),U((l=l.apply(c,f||[])).next())})},p=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(d,"__esModule",{value:!0});const u=h("K4CH"),m=h("crgu"),s=p(h("HK1f")),o=p(h("pewp")),i=p(h("V2kw")),e=p(h("F7zz")),t=p(h("ac3q")),n=p(h("iAlb"));let r=a(class Ms{addObserver(f){this.observerSet.add(f)}removeObserver(f){this.observerSet.delete(f)}forEachObserver(f){for(const S of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(S)&&f(S)})}publishEvent(f,S){return g(this,void 0,void 0,function*(){const l=Date.now();this.meetingHistoryStates.push({name:f,timestampMs:l});const y=Object.freeze(Object.assign(this.getAttributes(l),S));this.forEachObserver(T=>{T.eventDidReceive(f,y)}),this.reportEvent(f,l,S)})}reportEvent(f,S,l){var y;return g(this,void 0,void 0,function*(){let T;try{l&&(T=n.default(l)),yield(y=this.eventReporter)===null||y===void 0?void 0:y.reportEvent(S,f,T)}catch(O){this.logger.error(`Error reporting event ${O}`)}})}setupEventReporter(f,S,l){if(l)this._eventReporter=l;else if(f.urls){const y=f.urls.eventIngestionURL;if(y){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:T,credentials:{attendeeId:O,joinToken:R}}=f,F=new i.default(T,O,R),U=new s.default(F,y);this._eventReporter=new o.default(U,S)}}}getAttributes(f){var S,l;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((S=this.parserResult)===null||S===void 0?void 0:S.os.name)||Ms.UNAVAILABLE,osVersion:((l=this.parserResult)===null||l===void 0?void 0:l.os.version)||Ms.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:f}}get eventReporter(){return this._eventReporter}destroy(){return g(this,void 0,void 0,function*(){m.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(f,S,l){var y,T,O,R,F,U,_;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=S,this.configuration=f,this.setupEventReporter(f,S,l);try{this.parserResult=navigator&&navigator.userAgent?new u.UAParser(navigator.userAgent).getResult():null}catch(P){this.logger.error(P.message)}this.browserMajorVersion=((O=(T=(y=this.parserResult)===null||y===void 0?void 0:y.browser)===null||T===void 0?void 0:T.version)===null||O===void 0?void 0:O.split(".")[0])||Ms.UNAVAILABLE,this.browserName=((R=this.parserResult)===null||R===void 0?void 0:R.browser.name)||Ms.UNAVAILABLE,this.browserVersion=((F=this.parserResult)===null||F===void 0?void 0:F.browser.version)||Ms.UNAVAILABLE,this.deviceName=[((U=this.parserResult)===null||U===void 0?void 0:U.device.vendor)||"",((_=this.parserResult)===null||_===void 0?void 0:_.device.model)||""].join(" ").trim()||Ms.UNAVAILABLE}},"DefaultEventController");d.default=r,r.UNAVAILABLE="Unavailable"},KJDN:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class extends Error{constructor(u,m){super(m||"Error fetching device."),this.cause=u,this.name="GetUserMediaError"}},"GetUserMediaError");d.default=g},KSud:function(W,d,h){"use strict";function g(p){var u=p;return u.placeholder}a(g,"getHolder"),d.a=g},Ka3M:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"TranscriptLanguageWithScore");d.default=g},KsuK:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(u,m,s,o){function i(e){return e instanceof s?e:new s(function(t){t(e)})}return a(i,"adopt"),new(s||(s=Promise))(function(e,t){function n(f){try{c(o.next(f))}catch(S){t(S)}}a(n,"fulfilled");function r(f){try{c(o.throw(f))}catch(S){t(S)}}a(r,"rejected");function c(f){f.done?e(f.value):i(f.value).then(n,r)}a(c,"step"),c((o=o.apply(u,m||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});let p=a(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return g(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(m){this.canvas=m,this.destroyed=!1}},"CanvasVideoFrameBuffer");d.default=p},KvYa:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(l,y,T,O){function R(F){return F instanceof T?F:new T(function(U){U(F)})}return a(R,"adopt"),new(T||(T=Promise))(function(F,U){function _(A){try{L(O.next(A))}catch(M){U(M)}}a(_,"fulfilled");function P(A){try{L(O.throw(A))}catch(M){U(M)}}a(P,"rejected");function L(A){A.done?F(A.value):R(A.value).then(_,P)}a(L,"step"),L((O=O.apply(l,y||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.isOldChrome=d.supportsWASMStreaming=d.supportsSharedArrayBuffer=d.supportsWASM=d.supportsAudioWorklet=d.supportsWorker=d.supportsVoiceFocusWorker=d.supportsWASMPostMessage=d.isSafari=void 0;const p=h("EkyC"),u=a(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),m=a(function(){const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,T=y.match(/Safari\//),O=y.match(/Chrom(?:e|ium)\//);return!!(T&&!O)},"isSafari");d.isSafari=m;const s=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return d.isSafari(l)?!1:u(l)?(f(l)||0)<95:!0},"supportsWASMPostMessage");d.supportsWASMPostMessage=s;const o=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0,T=arguments.length>2?arguments[2]:void 0;return g(void 0,void 0,void 0,function*(){if(!d.supportsWorker(l,T))return!1;const O=`${y.paths.workers}worker-v1.js`;try{const R=yield p.loadWorker(O,"VoiceFocusTestWorker",y,T);try{R.terminate()}catch(F){T==null||T.debug("Failed to terminate worker.",F)}return!0}catch(R){return T==null||T.info("Failed to fetch and instantiate test worker",R),!1}})},"supportsVoiceFocusWorker");d.supportsVoiceFocusWorker=o;const i=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!l.Worker}catch(T){return y==null||y.info("Does not support Worker",T),!1}},"supportsWorker");d.supportsWorker=i;const e=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!l.AudioWorklet&&!!l.AudioWorkletNode}catch(T){return y==null||y.info("Does not support Audio Worklet",T),!1}},"supportsAudioWorklet");d.supportsAudioWorklet=e;const t=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!l.WebAssembly&&(!!l.WebAssembly.compile||!!l.WebAssembly.compileStreaming)}catch(T){return y==null||y.info("Does not support WASM",T),!1}},"supportsWASM");d.supportsWASM=t;const n=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,T=arguments.length>2?arguments[2]:void 0;try{return!!l.SharedArrayBuffer&&(!!y.chrome||!!l.crossOriginIsolated)}catch{return T==null||T.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");d.supportsSharedArrayBuffer=n;const r=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;var T;try{return!!(!((T=l.WebAssembly)===null||T===void 0)&&T.compileStreaming)}catch(O){return y==null||y.info("Does not support WASM streaming compilation",O),!1}},"supportsWASMStreaming");d.supportsWASMStreaming=r;const c=90,f=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!l.chrome)return}catch{}const y=l.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(y)return parseInt(y[1],10)},"chromeVersion"),S=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;const T=f(l);return T&&T<c?(y==null||y.debug(`Chrome ${T} has incomplete SIMD support.`),!0):!1},"isOldChrome");d.isOldChrome=S},KyYT:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.None=d.Some=d.Maybe=void 0;let g=a(class{static of(s){return s==null?u.of():p.of(s)}},"Maybe");d.Maybe=g;let p=a(class Gu{map(s){return g.of(s(this.value))}flatMap(s){return s(this.value)}get(){return this.value}getOrElse(s){return this.value}defaulting(s){return g.of(this.getOrElse(s))}static of(s){if(s==null)throw new Error("value is ${value}");return new Gu(s)}constructor(s){this.value=s,this.isSome=!0,this.isNone=!1}},"Some");d.Some=p;let u=a(class Zd{get(){throw new Error("value is null")}getOrElse(s){return s}map(s){return new Zd}flatMap(s){return new Zd}defaulting(s){return g.of(this.getOrElse(s))}static of(){return new Zd}constructor(){this.isSome=!1,this.isNone=!0}},"None");d.None=u},"L+i+":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("yQ3g")),m=p(h("aVV0"));let s=a(class extends m.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return g(this,void 0,void 0,function*(){const i=new u.default(this.timeoutMs);i.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{i.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");d.default=s},LDIi:function(W,d,h){"use strict";W.exports=o;var g=h("j4TH"),p,u=g.LongBits,m=g.utf8;function s(c,f){return RangeError("index out of range: "+c.pos+" + "+(f||1)+" > "+c.len)}a(s,"indexOutOfRange");function o(c){this.buf=c,this.pos=0,this.len=c.length}a(o,"Reader");var i=typeof Uint8Array<"u"?a(function(f){if(f instanceof Uint8Array||Array.isArray(f))return new o(f);throw Error("illegal buffer")},"create_typed_array"):a(function(f){if(Array.isArray(f))return new o(f);throw Error("illegal buffer")},"create_array"),e=a(function(){return g.Buffer?a(function(S){return(o.create=a(function(y){return g.Buffer.isBuffer(y)?new p(y):i(y)},"create_buffer"))(S)},"create_buffer_setup"):i},"create");o.create=e(),o.prototype._slice=g.Array.prototype.subarray||g.Array.prototype.slice,o.prototype.uint32=a(function(){var f=4294967295;return a(function(){if(f=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(f=(f|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(f=(f|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(f=(f|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(f=(f|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return f;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return f},"read_uint32")},"read_uint32_setup")(),o.prototype.int32=a(function(){return this.uint32()|0},"read_int32"),o.prototype.sint32=a(function(){var f=this.uint32();return f>>>1^-(f&1)|0},"read_sint32");function t(){var c=new u(0,0),f=0;if(this.len-this.pos>4){for(;f<4;++f)if(c.lo=(c.lo|(this.buf[this.pos]&127)<<f*7)>>>0,this.buf[this.pos++]<128)return c;if(c.lo=(c.lo|(this.buf[this.pos]&127)<<28)>>>0,c.hi=(c.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return c;f=0}else{for(;f<3;++f){if(this.pos>=this.len)throw s(this);if(c.lo=(c.lo|(this.buf[this.pos]&127)<<f*7)>>>0,this.buf[this.pos++]<128)return c}return c.lo=(c.lo|(this.buf[this.pos++]&127)<<f*7)>>>0,c}if(this.len-this.pos>4){for(;f<5;++f)if(c.hi=(c.hi|(this.buf[this.pos]&127)<<f*7+3)>>>0,this.buf[this.pos++]<128)return c}else for(;f<5;++f){if(this.pos>=this.len)throw s(this);if(c.hi=(c.hi|(this.buf[this.pos]&127)<<f*7+3)>>>0,this.buf[this.pos++]<128)return c}throw Error("invalid varint encoding")}a(t,"readLongVarint"),o.prototype.bool=a(function(){return this.uint32()!==0},"read_bool");function n(c,f){return(c[f-4]|c[f-3]<<8|c[f-2]<<16|c[f-1]<<24)>>>0}a(n,"readFixed32_end"),o.prototype.fixed32=a(function(){if(this.pos+4>this.len)throw s(this,4);return n(this.buf,this.pos+=4)},"read_fixed32"),o.prototype.sfixed32=a(function(){if(this.pos+4>this.len)throw s(this,4);return n(this.buf,this.pos+=4)|0},"read_sfixed32");function r(){if(this.pos+8>this.len)throw s(this,8);return new u(n(this.buf,this.pos+=4),n(this.buf,this.pos+=4))}a(r,"readFixed64"),o.prototype.float=a(function(){if(this.pos+4>this.len)throw s(this,4);var f=g.float.readFloatLE(this.buf,this.pos);return this.pos+=4,f},"read_float"),o.prototype.double=a(function(){if(this.pos+8>this.len)throw s(this,4);var f=g.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,f},"read_double"),o.prototype.bytes=a(function(){var f=this.uint32(),S=this.pos,l=this.pos+f;if(l>this.len)throw s(this,f);if(this.pos+=f,Array.isArray(this.buf))return this.buf.slice(S,l);if(S===l){var y=g.Buffer;return y?y.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,S,l)},"read_bytes"),o.prototype.string=a(function(){var f=this.bytes();return m.read(f,0,f.length)},"read_string"),o.prototype.skip=a(function(f){if(typeof f=="number"){if(this.pos+f>this.len)throw s(this,f);this.pos+=f}else do if(this.pos>=this.len)throw s(this);while(this.buf[this.pos++]&128);return this},"skip"),o.prototype.skipType=function(c){switch(c){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(c=this.uint32()&7)!==4;)this.skipType(c);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+c+" at offset "+this.pos)}return this},o._configure=function(c){p=c,o.create=e(),p._configure();var f=g.Long?"toLong":"toNumber";g.merge(o.prototype,{int64:a(function(){return t.call(this)[f](!1)},"read_int64"),uint64:a(function(){return t.call(this)[f](!0)},"read_uint64"),sint64:a(function(){return t.call(this).zzDecode()[f](!1)},"read_sint64"),fixed64:a(function(){return r.call(this)[f](!0)},"read_fixed64"),sfixed64:a(function(){return r.call(this)[f](!1)},"read_sfixed64")})}},LEQH:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("GtHv")),m=h("vjEy");let s=a(class extends u.default{drawImageWithMask(i,e){const t=this.blurredImage,{canvasCtx:n,targetCanvas:r}=this,{width:c,height:f}=r;if(!e||!t){n.clearRect(0,0,c,f);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),n.save(),n.clearRect(0,0,c,f),n.drawImage(this.scaledCanvas,0,0,c,f),n.globalCompositeOperation="source-in",n.drawImage(i,0,0,c,f),n.globalCompositeOperation="destination-over",n.drawImage(this.blurCanvas,0,0,c,f),n.restore()}setBlurStrength(i){if(super.setBlurStrength(i),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(i){this.blurredImage=i.payload.blurOutput,super.handlePredict(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return g(this,void 0,void 0,function*(){i.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(i,e){super(i,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");d.default=s},LIUS:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const p=h("XCDq"),u=g(h("0LIx")),m=g(h("OEM7"));let s=a(class Co extends u.default{localStreamDescriptions(){const i=[];return this._localStreamInfos.forEach(e=>{i.push(e.clone())}),i}integrateUplinkPolicyDecision(i){let e=!0,t=0;for(let n=0;n<i.length;n++){const r=i[n].maxBitrate/1e3,c=i[n].maxFramerate;if(!e||n===this._localStreamInfos.length){e=!1;const f=new m.default;f.maxBitrateKbps=r,f.maxFrameRate=c,f.disabledByUplinkPolicy=r===0,f.rid=i[n].rid,r!==0&&(f.timeEnabled=Date.now()),this._localStreamInfos.push(f),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&r>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=r,this._localStreamInfos[t].maxFrameRate=c,this._localStreamInfos[t].disabledByUplinkPolicy=r===0,this._localStreamInfos[t].disabledByUplinkPolicy===!0&&(this._localStreamInfos[t].disabledByWebRTC=!1),t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(i){super.integrateBitratesFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const n of i.bitrates)e.add(n.sourceStreamId),this.streamIdToBitrateKbpsMap.set(n.sourceStreamId,this.convertBpsToKbps(n.avgBitrateBps));for(const n of t)e.has(n)||(this.streamIdToBitrateKbpsMap.get(n)===Co.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(n,Co.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(n,Co.NOT_SENDING_STREAM_BITRATE));for(let n=0;n<this._localStreamInfos.length;n++){this._localStreamInfos[n].disabledByWebRTC=!1;const r=this._localStreamInfos[n].streamId;this._localStreamInfos[n].disabledByUplinkPolicy||(this.streamIdToBitrateKbpsMap.has(r)?this.streamIdToBitrateKbpsMap.get(r)===Co.NOT_SENDING_STREAM_BITRATE&&this._lastBitRateMsgTime-this._localStreamInfos[n].timeEnabled>Co.BitratesMsgFrequencyMs&&(this._localStreamInfos[n].disabledByWebRTC=!0):this._lastBitRateMsgTime-this._localStreamInfos[n].timeEnabled>Co.BitratesMsgFrequencyMs&&(this._localStreamInfos[n].disabledByWebRTC=!0))}this._lastBitRateMsgTime=Date.now(),this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let i="";for(const e of this._localStreamInfos)i+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByWebRTC=${e.disabledByWebRTC} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>i)}integrateIndexFrame(i){super.integrateIndexFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const n of this.currentIndex.sources)n.mediaType===p.SdkStreamMediaType.VIDEO&&(e.add(n.streamId),this.streamIdToBitrateKbpsMap.has(n.streamId)||this.streamIdToBitrateKbpsMap.set(n.streamId,Co.UNSEEN_STREAM_BITRATE));for(const n of t)e.has(n)||this.streamIdToBitrateKbpsMap.delete(n)}integrateSubscribeAckFrame(i){if(super.integrateSubscribeAckFrame(i),!i.allocations||i.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of i.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,Co.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(i){let e=0;return this._sendRidToVideoStreamIdMap.has(i)&&(e=this._sendRidToVideoStreamIdMap.get(i)),e}constructor(i){super(i),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map,this._lastBitRateMsgTime=Date.now()}},"SimulcastVideoStreamIndex");d.default=s,s.UNSEEN_STREAM_BITRATE=-2,s.RECENTLY_INACTIVE_STREAM_BITRATE=-1,s.NOT_SENDING_STREAM_BITRATE=0,s.BitratesMsgFrequencyMs=4e3},LK2A:function(W,d,h){"use strict";h.r(d),function(g){h.d(d,"AutocompleteActions",function(){return ct}),h.d(d,"CardRenderType",function(){return li}),h.d(d,"CollabApi",function(){return nt}),h.d(d,"CollabPopoverDismissSource",function(){return we}),h.d(d,"CollabUrlType",function(){return Kn}),h.d(d,"CommentFocusTarget",function(){return Jt}),h.d(d,"CommentLevel",function(){return it}),h.d(d,"DialogContext",function(){return Ue}),h.d(d,"DocBlockStyle",function(){return Rn}),h.d(d,"DocInlineStyle",function(){return Wn}),h.d(d,"EmbeddedMoveDirection",function(){return yi}),h.d(d,"EmbeddedObjectType",function(){return vn}),h.d(d,"EmbeddedUIAttributes",function(){return xn}),h.d(d,"EmbeddedUiAction",function(){return bi}),h.d(d,"EmbeddedUiContext",function(){return qt}),h.d(d,"ErrorSource",function(){return Oe}),h.d(d,"Feature",function(){return Ce}),h.d(d,"FullTableModification",function(){return hi}),h.d(d,"GetSlackObjectFailureReason",function(){return gt}),h.d(d,"GrafterUrls",function(){return e}),h.d(d,"NavigationTypeMetric",function(){return di}),h.d(d,"SectionInsertionType",function(){return Re}),h.d(d,"ShortcutModifier",function(){return De}),h.d(d,"SlackListContentRenderType",function(){return Gn}),h.d(d,"SlackObjectActionType",function(){return Pt}),h.d(d,"SlackObjectType",function(){return pt}),h.d(d,"SlackShortcutCommandType",function(){return _t}),h.d(d,"SlackShortcutMetricSource",function(){return zn}),h.d(d,"SlackUnfurlContentRenderType",function(){return gn}),h.d(d,"TablePart",function(){return un}),h.d(d,"TablePartModificationType",function(){return Xn}),h.d(d,"TableSelectionMergeAction",function(){return Ei}),h.d(d,"TableSelectionModification",function(){return an}),h.d(d,"TemplateControlAction",function(){return nn}),h.d(d,"TemplateTriggerType",function(){return bt}),h.d(d,"TemplateType",function(){return kt}),h.d(d,"ToastMessageContext",function(){return fe}),h.d(d,"UnfurlType",function(){return Oi});class p{constructor(){this.o=!1,this.l=[]}run(){this.o=!0;const Z=this.l;this.l=[];for(let de=0;de<Z.length;de++)Z[de]()}add(Z){this.o?Z():this.l.push(Z)}}a(p,"t");var u,m;(function(N){var Z;(Z=N.Op||(N.Op={}))[Z.DID_INITIALIZE=8]="DID_INITIALIZE",Z[Z.DID_FAIL_TO_INITIALIZE=9]="DID_FAIL_TO_INITIALIZE"})(u||(u={})),function(N){var Z;(Z=N.Op||(N.Op={}))[Z.INIT=0]="INIT"}(m||(m={}));class s{constructor(Z){this._=new Map,this.u=null,this.destinationFn=Z}setTransportHook(Z){this.u=Z}tearDown(){}addHandler(Z,de){this._.has(Z)&&this.logError(`Already had handler for op ${Z} will overwrite.`),this._.set(Z,de)}getHandler(Z){const de=this._.get(Z);return de?this.u?(ce,ve)=>{var me;return(me=this.u)===null||me===void 0||me.call(this,Z,ce,i.INCOMING),de(ce,He=>{var ke;return(ke=this.u)===null||ke===void 0||ke.call(this,Z,He,i.OUTGOING_REPLY),ve(He)})}:de:null}invoke(Z,de,ce){var ve;if((ve=this.u)===null||ve===void 0||ve.call(this,Z,de,i.OUTGOING),this.u&&ce){const ke=ce;ce=a($e=>{var Be;(Be=this.u)===null||Be===void 0||Be.call(this,Z,$e,i.INCOMING_REPLY),ke($e)},"i")}const me=this.destinationFn().getHandler(Z);if(!me)return void this.logError(`Bridge transport doesn't have handler for op ${Z}`);let He;try{He=me(de,ke=>{ce?ce(ke):this.logError(`Invoke response received without callback for op ${Z}`)})}catch{o(Z,de)}He instanceof Promise&&He.catch(ke=>o(Z,de))}logError(Z){}}a(s,"s");let o=a((N,Z,de)=>{let ce="";try{ce=JSON.stringify(Z)}catch{ce="(Unserializable message)"}},"n");var i,e,t;(function(N){N[N.INCOMING=1]="INCOMING",N[N.INCOMING_REPLY=2]="INCOMING_REPLY",N[N.OUTGOING=3]="OUTGOING",N[N.OUTGOING_REPLY=4]="OUTGOING_REPLY"})(i||(i={})),function(N){N.CONTROLLER_CSS="https://quip.codes/-/static/less/stylesheet/-?retina=True&mode=normal&less=collab%2Fcontroller.less",N.CONTROLLER_JS="https://slackdocs.codes:3000/ts/src/collab/controller/bundle.ts",N.EMBEDDED_JS="https://slackdocs.codes/-/static-script-files?grafted=True&resource_bundle_name=collab_embedded"}(e||(e={})),function(N){N.BRIDGE_TRANSPORT_SET="bridge-transport-set",N.BRIDGE_TRANSPORT_READY="bridge-transport-ready",N.HANDLER_REGISTERED="handler-registered",N.HANDLER_REGISTRATION_FINISHED="handler_registration_finished",N.MESSAGE_SENT="message_sent",N.MESSAGE_HANDLED="message-handled",N.INIT_SENT="init_sent",N.INIT_RECEIVED="init_received",N.DID_INIT_SENT="did_init_sent",N.DID_INIT_RECEIVED="did_init_received",N.BRIDGE_OPEN="bridge-open",N.ERROR="error",N.SYSTEMJS_LOADED="systemjs-loaded",N.CONTROLLER_SYSTEMJS_MODULE_IMPORTED="controller-systemjs-imported",N.CONTROLLER_INIT_DATA_FETCHED="controller-init-data-fetched",N.CONTROLLER_RESOURCE_DATA_FETCHED="controller-resource-data-fetched",N.PROBE="probe",N.OTHER="misc"}(t||(t={}));class n{constructor(Z){this.T=Z,this.O=[],this.S=[],this.I=[],this.N=[],this.A=[],this.L=Date.now(),this.onlyBefore("Handler registered late",t.HANDLER_REGISTERED,[t.HANDLER_REGISTRATION_FINISHED]),this.onlyAfter("Message sent before bridge open",t.MESSAGE_SENT,[t.BRIDGE_OPEN]),this.onlyAfter("Message handled before bridge open",t.MESSAGE_HANDLED,[t.BRIDGE_OPEN])}getTimeoutForPromise(){return n.TIMEOUT_FOR_PROMISE}fireEvent(Z,de=null){if(this.S.filter(ve=>ve.beforeEvent==Z).forEach(ve=>{ve.afterEvents.some(me=>this.O.includes(me))&&ve.message&&this.C(`${this.T}: ${ve.message}`)}),this.I.filter(ve=>ve.afterEvent==Z).forEach(ve=>{ve.beforeEvents.some(me=>!this.O.includes(me))&&ve.message&&this.C(`${this.T}: ${ve.message}`)}),Z!=t.HANDLER_REGISTERED&&this.C(de?Promise.resolve(de).then(ve=>`${Z}: ${ve}`):Z),this.O.includes(Z))return;this.O.push(Z);const ce=[];this.N=this.N.filter(ve=>!ve.events.every(me=>this.O.includes(me))||(ce.push(ve),!1)),ce.forEach(ve=>{ve.description&&this.C(`${Z} -> ${ve.description}`),ve.callback()})}after(Z,de,ce=null){Z.every(ve=>this.O.includes(ve))?de():(ce&&this.C(`${ce} deferred`),this.N.push({events:Z,description:ce,callback:de}))}onlyBefore(Z,de,ce){this.S.push({beforeEvent:de,afterEvents:ce,message:Z})}onlyAfter(Z,de,ce){this.I.push({beforeEvents:ce,afterEvent:de,message:Z})}C(Z){if(this.A.length>n.MAX_INIT_LOG)return;const de=Date.now()-this.L,ce=Promise.resolve(Z);this.A.push({timestamp:de,message:ce}),ce.then(ve=>{console.debug(`${this.T}: ${ve}`)})}getInitLog(Z){const de=(Z?this.A.slice(0,Z):this.A).map(async ce=>({t:ce.timestamp,e:await ce.message}));return Promise.all(de).then(ce=>({id:this.T,log:ce}))}}a(n,"l"),n.MAX_INIT_LOG=50,n.TIMEOUT_FOR_PROMISE=3e4;function r(N,{logCallback:Z=a(()=>{},"e"),timeoutMillis:de=3e4,name:ce="Unnamed",context:ve=""}={}){return new Promise((me,He)=>{let ke=window.setTimeout(()=>{ke=null,Z(`${ce} promise timed out: ${ve}`),He(new Error(`${ce} promise timed out`))},de);const $e=a(()=>{ke&&(clearTimeout(ke),ke=null)},"l");N.then(Be=>{ke?($e(),me(Be)):Z(`${ce} promise resolved after timeout: ${ve}`)}).catch(Be=>{ke?($e(),He(Be)):Z(`${ce} promise rejected after timeout: ${ve}`)})})}a(r,"_");function c(N,Z,de,ce,ve){const{span:me,closeSpanFn:He}=ce.createBasicTraceSpan(ve,de,{[mn.URL]:N}),{closeSpanFn:ke}=ce.createBasicTraceSpan(me,Zt.HTTP_FETCH_HEADER),$e=new AbortController,Be=setTimeout(()=>{$e.abort()},ce.bridgeInit.getTimeoutForPromise());return fetch(N,Object.assign({signal:$e.signal},Z)).catch(ot=>{throw ke(ot),Error(`${de} fetch failed: ${ot}`)}).then(ot=>{if(clearTimeout(Be),!ot.ok)return ke(new Error(`returned ${ot.status}`)),S(ce,de,ot,me).then(Wt=>{throw Error(Wt)});ke();const{closeSpanFn:Kt}=ce.createBasicTraceSpan(me,Zt.HTTP_FETCH_CONTENT,{[mn.URL]:N});return ot.text().catch(Wt=>{throw Kt(Wt),Wt}).then(Wt=>{Kt();const{closeSpanFn:fn}=ce.createBasicTraceSpan(me,Zt.JSON_PARSE);try{const on=JSON.parse(Wt);return fn(),on}catch(on){throw fn(new Error(`${on}`)),ce.bridgeInit.fireEvent(t.ERROR,S(ce,de,ot,null)),on}})}).finally(()=>{He()})}a(c,"h");function f(N,Z,de,ce){const ve=new AbortController,me=setTimeout(()=>{ve.abort()},de.bridgeInit.getTimeoutForPromise());de.bridgeInit.fireEvent(t.OTHER,`${Z} prefetch start`);const{span:He,closeSpanFn:ke}=de.createBasicTraceSpan(ce,Zt.MODULE_PREFETCH,{[mn.URL]:N}),{closeSpanFn:$e}=de.createBasicTraceSpan(He,Zt.HTTP_FETCH_HEADER);return fetch(N,{method:"GET",mode:"cors",cache:"default",signal:ve.signal}).catch(Be=>{throw $e(Be),Error(`${Z} fetch failed: ${Be}`)}).then(Be=>{if(!Be.ok)return $e(new Error(`Returned ${Be.status}`)),S(de,Z,Be,He).then(Kt=>{throw Error(Kt)});$e();const{closeSpanFn:ot}=de.createBasicTraceSpan(He,Zt.HTTP_FETCH_CONTENT);return Be.text().then(()=>{ot(),de.bridgeInit.fireEvent(t.OTHER,`${Z} prefetch ok`)}).catch(Kt=>{throw ot(Kt),Kt})}).finally(()=>{ke(),clearTimeout(me)})}a(f,"c");function S(N,Z,de,ce){const{closeSpanFn:ve}=N.createBasicTraceSpan(ce,Zt.HTTP_FETCH_CONTENT);return de.text().then(me=>{const He=function($e){if(!$e||$e.trim().length==0)return"response body empty";try{const Be=new DOMParser().parseFromString($e,"text/html").documentElement.textContent;if(Be&&Be.trim().length>0)return Be.trim().replace(/\s+/g," ").slice(0,50)}catch{}return $e.trim().slice(0,50)}(me),ke=`${Z} fetch returned ${de.status}: ${He}`;return ve(new Error(ke)),ke}).catch(me=>{const He=`${Z} fetch returned ${de.status}: response body unavailable (${me})`;return ve(new Error(He)),He})}a(S,"a");function l(N,Z,de){let ce=null;const{id:ve,promise:me}=function($e){const Be=Symbol(),ot=new Promise(Kt=>{k.push({id:Be,callback:Wt=>{$e(),Kt(Wt)}})});return G||(G=!0,window._collabInit=Kt=>{var Wt;(Wt=k.shift())===null||Wt===void 0||Wt.callback(Kt)}),{promise:ot,id:Be}}(()=>{var $e,Be;(Be=($e=N==null?void 0:N.platformDelegate)===null||$e===void 0?void 0:$e.endTraceOrSpan)===null||Be===void 0||Be.call($e,ce)}),He=me.then($e=>(N.bridgeInit.fireEvent(t.OTHER,"_collabInit called"),$e));return function($e,Be,ot){return Be.then(Kt=>{if(Kt.module_loader_url==null)throw Error("No module loader URL.  Server likely isn't in SystemJS mode.");const{span:Wt,closeSpanFn:fn}=$e.createBasicTraceSpan(ot,Zt.LOAD_CONTROLLER),on=$e.config.useGraftedMode?e.CONTROLLER_JS:Kt.controller_entry_module_url;return function(hn,Ot,wn,Sn){wn&&(M=wn);const yn=hn.bridgeInit;if(U){const ci=F;return yn.fireEvent(t.OTHER,`Collab ${ci} is loading systemjs, reusing the promise`),U.then(()=>{yn.fireEvent(t.OTHER,`Systemjs promise reused from collab ${ci} succeeded`)}).catch(pn=>{throw yn.fireEvent(t.ERROR,`Systemjs promise reused from collab ${ci} failed: ${pn}`),pn})}let pi,In=null;if(_())yn.fireEvent(t.OTHER,"systemjs already loaded, running prepareImport"),In="System.prepareImport() promise resolved",pi=r(System.prepareImport(!0),{name:"System.prepareImport",timeoutMillis:yn.getTimeoutForPromise()});else{yn.fireEvent(t.OTHER,"No SystemJS found, loading it");const{span:ci,closeSpanFn:pn}=hn.createBasicTraceSpan(Sn,Zt.LOAD_SYSTEMJS,{[mn.JS_PREFETCH_ENABLED]:"true",[mn.URL]:Ot});In="systemjs script tag onload fired",pi=function(wi,On,rn){return f(On,"systemjs-module-loader",wi,rn).then(()=>{const ut=document.createElement("script");return new Promise((ze,Bn)=>{const{closeSpanFn:Bi}=wi.createBasicTraceSpan(rn,Zt.SCRIPT_TAG);ut.src=On,ut.defer=!0,ut.crossOrigin="anonymous",ut.onload=()=>{Bi(),ze()},ut.onerror=Qn=>{const An=Error(`systemjs onerror called: ${Qn}`);Bi(An),Bn(An)},document.body.appendChild(ut)}).then(()=>{if(!_())throw Error("SystemJS not found after it was loaded")}).catch(ze=>{throw typeof System=="object"&&(delete window.System,wi.bridgeInit.fireEvent(t.OTHER,"Cleaned up systemjs global object")),ut.onload=null,ut.onerror=null,ut.parentNode&&(ut.parentNode.removeChild(ut),wi.bridgeInit.fireEvent(t.OTHER,"Cleaned up systemjs loader script tag")),ze})})}(hn,Ot,ci).finally(()=>{pn()})}return F=hn.id,U=pi.then(()=>{yn.fireEvent(t.SYSTEMJS_LOADED,In)}).finally(()=>{U=null,F=null}),U}($e,Kt.module_loader_url,Kt.import_map,Wt).then(()=>{var hn,Ot;return O(on,(Ot=(hn=Kt.import_map)===null||hn===void 0?void 0:hn.imports)!==null&&Ot!==void 0?Ot:{},$e,Wt)}).finally(()=>{fn()})})}(N,Z,de).then(()=>{var $e,Be,ot;return ce=(ot=(Be=($e=N==null?void 0:N.platformDelegate)===null||$e===void 0?void 0:$e.startSpan)===null||Be===void 0?void 0:Be.call($e,de,Zt.AWAIT_CALLBACK))!==null&&ot!==void 0?ot:null,r(He,{name:"_collabInit callback",timeoutMillis:N.bridgeInit.getTimeoutForPromise()}).catch(Kt=>{var Wt,fn;throw(fn=(Wt=N==null?void 0:N.platformDelegate)===null||Wt===void 0?void 0:Wt.endTraceOrSpan)===null||fn===void 0||fn.call(Wt,ce,{[mn.ERROR]:`${Kt}`}),Kt})}).catch($e=>{var Be;throw Be=ve,k=k.filter(ot=>ot.id!==Be),$e})}a(l,"d");let y=null,T=null;function O(N,Z,de,ce){var ve;const me=de.bridgeInit;if(T){const Be=y;return me.fireEvent(t.OTHER,`Collab ${Be} is loading the controller, waiting for it to finish...`),T.then(()=>(me.fireEvent(t.OTHER,`Collab ${Be} module loading complete`),O(N,Z,de,ce))).catch(ot=>(me.fireEvent(t.OTHER,`Collab ${Be} module loading failed`),O(N,Z,de,ce)))}if(me.fireEvent(t.OTHER,"Loading controller module"),System.fork===void 0)return Promise.reject(Error("SystemJS is missing the fork() method"));if(de.config.useSystemJsSharedFork&&!A){const Be=((ve=Object.entries(Z).find(([ot])=>ot.endsWith("-ancillary.js")))===null||ve===void 0?void 0:ve[1])||null;A=Be?System.sharedFork([Be]):null}const He=System.fork(Z,A);me.fireEvent(t.OTHER,`controller module${System.isAlreadyLoaded(N)?" ":" not "}in systemjs cache`);const{span:ke,closeSpanFn:$e}=de.createBasicTraceSpan(ce,Zt.LOAD_CONTROLLER_MODULE,{[mn.JS_PREFETCH_ENABLED]:"true",[mn.URL]:N});return T=f(N,"controller-module",de,ke).then(()=>{const{closeSpanFn:Be}=de.createBasicTraceSpan(ke,Zt.SYSTEMJS_IMPORT_MODULE,{[mn.URL]:N}),ot=[],Kt=new MutationObserver(Wt=>{ot.push(...R(Wt))});return Kt.observe(document.head,{childList:!0}),He.import(N).then(()=>{Be(),me.fireEvent(t.CONTROLLER_SYSTEMJS_MODULE_IMPORTED)}).catch(Wt=>{Be(Wt),ot.push(...R(Kt.takeRecords()));let fn=0;throw ot.forEach(on=>{on.onload=null,on.onerror=null,on.parentNode&&(on.parentNode.removeChild(on),fn++)}),fn>0&&me.fireEvent(t.OTHER,`Cleaned up ${fn} SystemJS script tags`),System.resetInstantiationCache()&&me.fireEvent(t.OTHER,"SystemJS cache cleared"),Wt}).finally(()=>{Kt.disconnect()})}).finally(()=>{$e(),y=null,T=null}),y=de.id,T}a(O,"O");function R(N){const Z=[];return N.forEach(de=>{de.addedNodes.forEach(ce=>{ce instanceof HTMLScriptElement&&ce.getAttribute("systemjs")==="1"&&Z.push(ce)})}),Z}a(R,"S");let F=null,U=null;function _(){return typeof System=="object"&&typeof System.register=="function"}a(_,"A");function P(){if(!M)return console.warn("No import map data found"),[];const N=M.imports;return!N||typeof N!="object"?(console.warn("Imports property missing from importMapsData"),[]):Object.values(N).filter(Z=>typeof Z=="string"||Z instanceof String)}a(P,"L");const L={};let A,M,k=[],G=!1,K=null;class H extends s{constructor(Z,de){super(de),this.m=Z,this.R=Z.bridgeInit,this.D()}tearDown(){super.tearDown()}p(Z){var de,ce;console.error("EmbeddedSameOriginBridgeTransport did not load",Z),Z&&console.error(Z.stack),this.R.fireEvent(t.ERROR,`Failure constructing EmbeddedSameOriginBridgeTransport: ${Z}`),(ce=(de=this.m.config.delegate)===null||de===void 0?void 0:de.didFailToInitialize)===null||ce===void 0||ce.call(de,"exception",Z)}D(){var Z,de,ce;const ve=(ce=(de=(Z=this.m.platformDelegate)===null||Z===void 0?void 0:Z.startTrace)===null||de===void 0?void 0:de.call(Z,Zt.COLLAB_INIT,{[mn.CONTROLLER_ID]:`${this.m.id}`}))!==null&&ce!==void 0?ce:null,me=function(ke,$e){const Be=new FormData,{authToken:ot,userJwt:Kt,getSlackToken:Wt,isGov:fn}=ke.config;ot&&Be.append("oauth_token",ot),Kt&&Be.append("user_jwt",Kt),Wt&&Be.append("token",Wt());const on=ke.config.xhrWithCredentials===!0?"include":void 0,hn=c(`${Nn(ke)}/collab/controller-init?format=map`,{method:"POST",body:Be,credentials:on},Zt.CONTROLLER_INIT,ke,$e).then(Sn=>(ke.bridgeInit.fireEvent(t.CONTROLLER_INIT_DATA_FETCHED),Sn)),Ot=window.QUIP_VERSION_NAME||"server",wn=new URLSearchParams([["version-name",Ot]]);return ke.config.language&&wn.append("language-code",ke.config.language),wn.append("cdn_fallback",`${ke.getAttemptNumber()}`),fn&&wn.append("serve_gov","1"),K=c(`${Nn(ke)}/collab/controller-resources?${wn.toString()}`,{method:"GET",credentials:on},Zt.CONTROLLER_RESORCES,ke,$e).then(Sn=>(ke.bridgeInit.fireEvent(t.CONTROLLER_RESOURCE_DATA_FETCHED),Sn)).catch(Sn=>(K=null,ke.bridgeInit.fireEvent(t.ERROR,`controller-resources request failed: ${Sn}`),{module_loader_url:null,controller_entry_module_url:null,import_map:null})),Promise.all([hn,K]).then(Sn=>{const[yn,pi]=Sn;return Object.assign(Object.assign({},yn),pi)})}(this.m,ve),He=l(this.m,me,ve);Promise.all([He,me]).then(ke=>{var $e;const Be=ke[0],ot=ke[1];Be.main(ot.init_options,ot.preserialized,this.m.config.getSlackToken?null:ot.oauth_token,this.m.config.getSlackToken?null:ot.oauth_token_expiry,($e=this.m.config.getSlackToken)!==null&&$e!==void 0?$e:null,Nn(this.m),this.destinationFn(),ot.js_initializer,ot.user_id,this.m.config.xhrWithCredentials,this.m.config.enableWebCaching?ot.web_cache_key:void 0,this.m.config.enableWebCaching?ot.web_cache_key_version:void 0,this.m.config.requestsAreCors,ot.body_classes,ot.css_url,!!this.m.config.useGraftedMode,this.m.config.pathRewriteHook),this.R.fireEvent(t.BRIDGE_TRANSPORT_READY)}).catch(ke=>this.p(ke)).finally(()=>{var ke,$e;($e=(ke=this.m.platformDelegate)===null||ke===void 0?void 0:ke.endTraceOrSpan)===null||$e===void 0||$e.call(ke,ve)})}logError(Z){this.R.fireEvent(t.ERROR,Z)}}a(H,"M");class X{constructor(Z){this.embeddedSide=new H(Z,()=>this.controllerSide),this.controllerSide=new s(()=>this.embeddedSide)}}a(X,"v");function oe(N,Z){let de=null;for(const ce of function(ve){const me=[];for(const He of Object.keys(ve))isNaN(Number(He))&&me.push(He);return me}(N))N[ce]===Z&&(de=ce);return de||(de=String(Z)),de+=` (${Z})`,de}a(oe,"P");const le={[i.INCOMING]:"ToEmbedded",[i.OUTGOING]:"FromEmbedded",[i.INCOMING_REPLY]:"ReplyToEmbedded",[i.OUTGOING_REPLY]:"ReplyFromEmbedded"},re=[u.Op.DID_INITIALIZE,u.Op.DID_FAIL_TO_INITIALIZE],he=[];class Pe{constructor(Z,de){this.M=Z,this.v=de,this.A=[],this.P=[],this.U={[le[i.INCOMING]]:{},[le[i.OUTGOING_REPLY]]:{},[le[i.OUTGOING]]:{},[le[i.INCOMING_REPLY]]:{}}}getHook(){const Z=this.A,de=this.P,ce=this.U;return(ve,me,He)=>{var ke,$e;const Be={ts:Date.now(),op:ve,message:me,type:He},ot=Me(He,ve);if((ke=($e=ce[le[He]])[ot])!==null&&ke!==void 0||($e[ot]=0),ce[le[He]][ot]+=1,Z.length>=30)for(de.push(Be);de.length>20;)de.shift();else Z.push(Be)}}getReport(Z=!0){var de;return{collabInstanceId:this.M,collabInstanceTeamId:(de=this.v)!==null&&de!==void 0?de:"not_provided",reportTimestamp:Date.now(),messageCounts:this.U,startupLog:pe(this.A,Z),recentLog:pe(this.P,Z)}}}a(Pe,"b");function pe(N,Z=!0){return N.map(de=>{const ce={op:Me(de.type,de.op),type:le[de.type]};var ve,me;return Z&&(ve=de.type,me=de.op,!([i.INCOMING,i.OUTGOING_REPLY].includes(ve)?re.includes(me):he.includes(me)))||(ce.message=de.message),Z||(ce.ts=de.ts),ce})}a(pe,"F");function Me(N,Z){return[i.INCOMING,i.OUTGOING_REPLY].includes(N)?oe(u.Op,Z):oe(m.Op,Z)}a(Me,"G");class We{constructor(Z){this.R=Z.bridgeInit,this.F=function(de){return new X(de).embeddedSide}(Z),this.G=new Pe(Z.id,Z.config.teamId),this.R.fireEvent(t.BRIDGE_TRANSPORT_SET),this.F.setTransportHook(this.G.getHook())}init(Z){this.R.after([t.BRIDGE_TRANSPORT_SET,t.BRIDGE_TRANSPORT_READY,t.HANDLER_REGISTRATION_FINISHED],()=>{this.invoke(m.Op.INIT,Z),this.R.fireEvent(t.INIT_SENT)})}tearDown(){this.F.tearDown()}invoke(Z,de){const ce=Z==m.Op.INIT,ve=a(()=>{this.F.invoke(Z,de),ce||this.R.fireEvent(t.MESSAGE_SENT,`Op ${Z}`)},"n");ce?ve():this.R.after([t.BRIDGE_OPEN],ve,`Send op ${Z}`)}addHandler(Z,de){this.F.addHandler(Z,Z===u.Op.DID_INITIALIZE?de:ce=>{this.R.after([t.BRIDGE_OPEN],()=>{de(ce),this.R.fireEvent(t.MESSAGE_HANDLED,`Op ${Z}`)},`Handle op ${Z}`)})}getDebugReport(Z=!0){return this.G.getReport(Z)}}a(We,"B");class Ae{constructor(Z,de){this.B=new WeakMap,this.H=Z,this.K=de}get(){const Z=this.H.get();return this.$(Z)}getAsync(){return this.H.getAsync().then(Z=>this.$(Z))}listen(Z){let de=this.B.get(Z);de||(de=a((ce,ve)=>{Z(this.$(ce),this.K(ve))},"e"),this.B.set(Z,de)),this.H.listen(de)}once(Z){let de=this.B.get(Z);de||(de=a((ce,ve)=>{Z(this.$(ce),this.K(ve))},"e"),this.B.set(Z,de)),this.H.once(de)}unlisten(Z){const de=this.B.get(Z);de&&this.H.unlisten(de)}$(Z){if(Z!==void 0)return this.K(Z)}}a(Ae,"y");class lt{constructor(Z,de){this.H=Z,this.V=de}get(){return this.H.get()}getAsync(){const Z=this.H.getAsync();return new Promise((de,ce)=>{Z.then(ve=>{ve?de(ve):this.H.once((me,He)=>{de(He??this.V)})}).catch(ce)})}listen(Z){this.H.listen(Z)}unlisten(Z){this.H.unlisten(Z)}once(Z){this.H.once(Z)}}a(lt,"H");var Ne;(function(N){N[N.DOC_DISPLAY_TITLE=0]="DOC_DISPLAY_TITLE",N[N.DOC_UPDATED_USEC=1]="DOC_UPDATED_USEC",N[N.DOC_EMBED_SCROLL_POSITION=2]="DOC_EMBED_SCROLL_POSITION",N[N.DOC_BLOCK_KIT_THUMBNAIL=3]="DOC_BLOCK_KIT_THUMBNAIL",N[N.SECTION_SNIPPET=4]="SECTION_SNIPPET",N[N.CANNED_DOC_NAME=5]="CANNED_DOC_NAME",N[N.DOC_IS_EMPTY=6]="DOC_IS_EMPTY",N[N.DOC_LAST_UPDATED_USER_ID=8]="DOC_LAST_UPDATED_USER_ID",N[N.A11Y_READ_ONLY_MODE=9]="A11Y_READ_ONLY_MODE",N[N.DOC_EMBED_FOCUS_STATE=10]="DOC_EMBED_FOCUS_STATE",N[N.DOC_EMBED_SELECTION_STATE=11]="DOC_EMBED_SELECTION_STATE",N[N.TEXT_SECTION_OVERLAY_SHOWING=12]="TEXT_SECTION_OVERLAY_SHOWING",N[N.DOC_HAS_FILE_UNFURLS=13]="DOC_HAS_FILE_UNFURLS",N[N.TEMPLATE_CONTROLS_BE=14]="TEMPLATE_CONTROLS_BE",N[N.DOC_NEW_SECTION_USEC=15]="DOC_NEW_SECTION_USEC",N[N.TEMPLATE_CONTROLS_FE=16]="TEMPLATE_CONTROLS_FE",N[N.DOC_HAS_HEADER_IMAGE=17]="DOC_HAS_HEADER_IMAGE"})(Ne||(Ne={}));const Xe=new WeakMap;class je{constructor(Z={}){this.Y=new Set,this.W=Z}add(Z,de){if(!this.Y.has(Z)&&(this.Y.add(Z),de&&Xe.set(Z,de),this.Y.size===1)){const{didStartHavingListeners:ce}=this.W;ce&&ce()}}addOneShot(Z,de){const ce=a((...ve)=>{this.remove(ce),Z.apply(window,ve)},"i");this.add(ce,de)}remove(Z){if(this.Y.delete(Z)&&this.Y.size===0){const{didStopHavingListeners:de}=this.W;de&&de()}}removeAll(){this.Y.forEach(Z=>this.remove(Z))}empty(){return this.Y.size===0}notify(...Z){if(this.Y.size===0)return;const{notifyDecorator:de,catchError:ce}=this.W;let ve;de&&(ve=de());const me=Array.from(this.Y);for(let He=0;He<me.length;He++)if(ce)try{me[He].apply(window,Z)}catch(ke){ce(ke)}else me[He].apply(window,Z);ve&&ve.clear()}debugGetDescriptions(){return Array.from(this.Y,(Z,de)=>Xe.get(Z)||`<anonymous-${de}>`)}}a(je,"V");class Te{constructor(Z,de,ce,ve=!1){this.X=Z,this.J=de,this.Z=ce,this.q=ve;const me=a((He,ke)=>{this.Y.notify(He,ke)},"n");this.Y=new je({didStartHavingListeners:()=>this.Z.addListener(Z,de,me),didStopHavingListeners:()=>{this.Z.removeListener(Z,de,me),this.q||this.Z.cleanupStorage(Z,de)}})}get(){return this.Z.getValue(this.X,this.J)}getAsync(){return this.Z.getValueAsync(this.X,this.J)}listen(Z){this.Y.add(Z)}unlisten(Z){this.Y.remove(Z)}unlistenAll(){this.Y.removeAll()}once(Z){this.Y.addOneShot(Z)}}a(Te,"k");class At{constructor(Z){this.Y=new je,this.tt=Z}set(Z){const de=this.tt;this.tt=Z,this.Y.notify(de,Z)}get(){return this.tt}getAsync(){return Promise.resolve(this.get())}listen(Z){this.Y.add(Z)}unlisten(Z){this.Y.remove(Z)}once(Z){this.Y.addOneShot(Z)}}a(At,"j");class sn{constructor(Z){this.et=new Map,this.m=Z}didCreateDoc(Z,de){const ce=this.et.get(Z);ce?(this.et.set(de,ce),ce.idInternal.set(de)):console.warn(`Could not find doc mapped to ID ${Z}`)}didDeleteDoc(Z){const de=this.et.get(Z);de==null||de.deletedInternal.set(!0)}didTryToLoadWithTempId(Z){const de=this.et.get(Z);de==null||de.didTryToLoadWithTempIdInternal.set(!0)}create(Z={}){const{title:de,cannedDoc:ce,context:ve,usesOnlyInlineTextComments:me,content:He}=Z;return this.controllerAccess.docs.createDoc(de,ce,ve,me,He).then(ke=>this.get(ke))}get(Z){let de=this.et.get(Z);return de||(de=new Dt(Z,this.m),this.et.set(Z,de)),de}get controllerAccess(){return this.m.controllerAccess}setEditsDisabled(Z,de){for(const ce of Yt.values())ce.doc().id.get()===Z&&ce.docEditor.setEditsDisabled(de);this.controllerAccess.docs.reloadThread(Z)}getBlockKitThumbnail(Z,de=!0,ce){const ve=Fe(this.m),me=ce?`${Z}/${ce}`:Z;return new lt(new Te(Ne.DOC_BLOCK_KIT_THUMBNAIL,me,ve,!0),'{"blocks": []}').getAsync().then(JSON.parse).then(He=>(de&&He.blocks.length>0&&He.blocks.shift(),He))}getCannedDocName(Z){const de=Fe(this.m);return new lt(new Te(Ne.CANNED_DOC_NAME,Z,de,!0),"").getAsync().then(ce=>ce.length===0?null:ce)}getSectionSnippet(Z){const de=Fe(this.m);return new lt(new Te(Ne.SECTION_SNIPPET,Z,de,!0),"").getAsync()}setDebugOption(Z,de){this.controllerAccess.docs.setDebugOption(Z,de)}findSlackObject(Z,de,ce){return this.controllerAccess.docs.findSlackObject(Z,de,ce)}insertSlackObject(Z,de,ce,ve,me){return this.controllerAccess.docs.insertSlackObject(Z,de,ce,ve,me)}editLink(Z,de,ce){this.controllerAccess.docs.editLink(Z,de,ce)}loadData(Z,de){return this.controllerAccess.docs.loadData([Z],de)}it(){return $t(this.m)}}a(sn,"Y");class Dt{constructor(Z,de){this.st=null,this.id=this.idInternal=new At(Z),this.m=de;const ce=Fe(this.m);this.title=new Te(Ne.DOC_DISPLAY_TITLE,Z,ce),this.lastUpdated=new Ae(new Te(Ne.DOC_UPDATED_USEC,Z,ce,!0),ve=>new Date(ve/1e3)),this.lastUpdatedUsec=new Te(Ne.DOC_UPDATED_USEC,Z,ce,!0),this.lastUpdatedSlackUserId=new Te(Ne.DOC_LAST_UPDATED_USER_ID,Z,ce,!0),this.deleted=this.deletedInternal=new At(!1),this.isEmpty=new Te(Ne.DOC_IS_EMPTY,Z,ce,!0),this.hasPerformedEditingAction=new At(!1),this.hasFileUnfurls=new Te(Ne.DOC_HAS_FILE_UNFURLS,Z,ce,!0),this.templateControlsInfo=new Te(Ne.TEMPLATE_CONTROLS_BE,Z,ce,!0),this.lastNewSectionUpdated=new Ae(new Te(Ne.DOC_NEW_SECTION_USEC,Z,ce,!0),ve=>new Date(ve/1e3)),this.hasHeaderImage=new Te(Ne.DOC_HAS_HEADER_IMAGE,Z,ce,!0),this.didTryToLoadWithTempIdInternal=new At(!1)}getBlockKitThumbnailValue(){if(!this.st&&this.isCreated()){const Z=Fe(this.m);this.st=new Ae(new Te(Ne.DOC_BLOCK_KIT_THUMBNAIL,this.idInternal.get(),Z,!0),JSON.parse)}return this.st}embed(Z,de={mode:"editor",templateOptions:{allowTemplateOverlay:!1}}){let ce=tn.get(Z);return ce||(ce=new Xt(this,Z,de,this.m),tn.set(Z,ce),ce.mount()),ce.doc()!==this&&console.error("There was a different document embedded in the container",Z),ce}isCreated(){return!this.idInternal.get().startsWith("temp:")}failedToCreate(){return!this.isCreated()&&this.deletedInternal.get()}triedToLoadTempId(){return this.didTryToLoadWithTempIdInternal.get()}}a(Dt,"W");const tn=new WeakMap,Yt=new Map,Tn={mode:"editor"};class Xt{constructor(Z,de,ce,ve){this.rendered=new At(!1),this.incrementalRendered=new At(!1),this.failedToLoad=new At(!1),this.loadInfo=new At(void 0),this.editingActionPerformed=new At(!1),this.loadError=new At(void 0),this.editorContainer=new At(void 0),this.nt=!1,this.ot=!1,this.rt=[],this.Et=Z,this.lt=de,this.W=Object.assign(Object.assign({},Tn),ce),this.m=ve,this._t=`${Dn}-${this.m.id}-${cn++}`,this.ht=function(){const me=document.createElement("div");return me.classList.add("collab-root"),me}(),this.ct(Ne.DOC_EMBED_SCROLL_POSITION),this.scrollPosition=this.ct(Ne.DOC_EMBED_SCROLL_POSITION),this.focusState=this.ct(Ne.DOC_EMBED_FOCUS_STATE),this.selectionState=this.ct(Ne.DOC_EMBED_SELECTION_STATE),this.a11yReadOnlyMode=this.ct(Ne.A11Y_READ_ONLY_MODE),this.textSectionOverlayShowing=this.ct(Ne.TEXT_SECTION_OVERLAY_SHOWING),this.templateControls=this.at(Ne.TEMPLATE_CONTROLS_FE,new Map),this.hasHeaderImage=this.ct(Ne.DOC_HAS_HEADER_IMAGE),this.title=this.Et.title,this.controllerAccess.run(()=>{this.dt=this.controllerAccess.docs.getDocEditor(this._t)})}get docEditor(){if(!this.dt)throw new Error("DocEditor object not set");return this.dt}get controllerAccess(){return this.m.controllerAccess}ct(Z){const de=Fe(this.m),ce=new Te(Z,this._t,de,!1);return this.rt.push(ce),ce}at(Z,de){return new lt(this.ct(Z),de)}onEditorLoadError(Z){console.info("[QUIP] Editor load error",Z),this.failedToLoad.set(!0),this.loadError.set(Z),this.ut()}didLoadModel(Z){this.loadInfo.set(Z)}didRender(Z){this.rendered.set(!0),this.failedToLoad.set(!1),this.loadError.set(void 0),this.editorContainer.set(Z)}didFinishIncrementalRender(){this.incrementalRendered.set(!0)}didPerformEditingAction(){this.editingActionPerformed.set(!0)}doc(){return this.Et}docId(){return this.Et.id.get()}containerElement(){return this.lt}frameName(){return this._t}mount(){if(Yt.set(this._t,this),!this.ot){const Z=this.ht;Z.style.visibility="hidden",this.lt.appendChild(Z);let de=Z.ownerDocument.defaultView;de||(console.warn(`Mounting ${this._t} into element with no window`),de=window),this.nt=!0,this.controllerAccess.run(()=>{this.docEditor.createdViewFrame(Z)}),Z.style.visibility="visible",this.ot&&this.Tt(),this.ot=!0}this.nt&&this.Tt()}unmount(){try{console.info(`[Quip] unmount doc with frame name ${this._t}. Frame loaded ${this.nt}`),this.nt&&(this.ut(),this.rendered.set(!1),this.incrementalRendered.set(!1),this.failedToLoad.set(!1),this.loadError.set(void 0),this.nt=!1),this.ot&&(tn.delete(this.lt),this.ht.remove(),this.ot=!1),Yt.delete(this._t),this.rt.forEach(Z=>Z.unlistenAll())}catch(Z){console.warn("[Quip] Error thrown in unmount",Z)}}it(){return $t(this.m)}Tt(){this.controllerAccess.run(()=>{this.docEditor.renderDoc(this.Et.id.get(),this.W)})}ut(){this.controllerAccess.run(()=>{this.docEditor.cleanupViewFrame()})}setCommentsUiProvider(Z){this.commentsUiProvider=Z,Z==null||Z.setDelegate(this.docEditor)}setAutocompleteUiProvider(Z){this.autocompleteUiProvider=Z,Z==null||Z.setDelegate(this.docEditor)}setPermalinkUiProvider(Z){this.permalinkUiProvider=Z}setEmbeddedUiProvider(Z){this.embeddedUiProvider=Z}setErrorUiProvider(Z){this.errorUiProvider=Z}setEditorUiConnector(Z){this.editorUiConnector=Z,Z==null||Z.setDelegate(this.docEditor)}}a(Xt,"Z");class Cn{constructor(Z){this.Ot=Z}getFrameByName(Z){return this.Ot.get(Z)}withFrame(Z,de){const ce=this.getFrameByName(Z);ce||console.warn(`Could not find a frame with name ${Z}.`),de(ce)}}a(Cn,"q");const Dn=`collab-doc-${(1e3*Math.random()).toString(36)}`;let cn=0;class Mn{constructor(){this.St=[],this.It=!1}get docs(){return this.Nt}get settings(){return this.At}get providers(){return this.Lt}run(Z){this.It?Z():this.St.push(Z)}setObjects({docs:Z,settings:de,providers:ce}){this.It=!0,this.Nt=Z,this.At=de,this.Lt=ce;for(const ve of this.St)ve();this.St=[]}}a(Mn,"tt");let _n=0;class nt{constructor(Z){this.id=_n++,this.o=!1,this.Ct=!1,this.config=Z,this.platformDelegate=Z.delegate,this.bridgeInit=nt.Rt(`embedded ${this.id}`);const de=new We(this);It.set(this,de),this.controllerAccess=new Mn,this.docs=new sn(this),this.failedToInitialize=new At(!1),this.initializationError=new At(void 0),this.Dt()}Dt(){if(this.o)return void this.bridgeInit.fireEvent(t.ERROR,"Collab instance initialized more than once");const{appearance:Z,language:de,delegate:ce,commentsDataProvider:ve,bookmarksDataProvider:me,fileDataProvider:He,slackObjectProvider:ke,features:$e,documentEventProvider:Be,underlineAllLinks:ot,enableAnimations:Kt,displayEmojiAsPlainText:Wt,spellcheckEnabled:fn,embeddedConfigProvider:on,embeddedUiProvider:hn,topLevelTeamId:Ot,anchorLinkProvider:wn,slackObjectUIProvider:Sn,slackTextyHtmlConversionProvider:yn,useSmartQuotesAndDashes:pi,atomStorageProvider:In}=this.config,ci=this.it();ci.init({features:$e,delegate:ce,anchorLinkProvider:wn,bookmarksDataProvider:me,commentsDataProvider:ve,documentEventProvider:Be,fileDataProvider:He,slackObjectProvider:ke,slackObjectUIProvider:Sn,slackTextyHtmlConversionProvider:yn,mountedFrameProvider:new Cn(Yt),embeddedAccessDelegate:this.controllerAccess,docs:this.docs}),this.controllerAccess.run(()=>{this.atomClient=this.controllerAccess.providers.getAtomClient(In)});const pn=new p;var wi,On;pn.add(()=>{Z&&this.ft(Z),de&&this.Mt(de),ot!==void 0&&this.setUnderlineAllLinks(ot),Kt!==void 0&&this.setEnableAnimations(Kt),Wt!==void 0&&this.setDisplayEmojiAsPlainText(Wt),fn!==void 0&&this.setSpellcheckEnabled(fn),Ot&&this.vt(Ot),pi!==void 0&&this.setUseSmartQuotesAndDashes(pi)}),function(rn,ut,ze){if(!ze)return;const Bn=ze.supportedAutocompleteTypes;Bn&&ut.add(()=>{rn.providers.registerAutocompleteTypes(Bn)}),rn.run(()=>ze.setDelegate(rn.providers.getSlackObjectProviderDelegate()))}(this.controllerAccess,pn,ke),function(rn,ut={},ze,Bn,Bi=Qn=>{}){rn.addHandler(u.Op.DID_INITIALIZE,()=>{var Qn;(Qn=ut.didInitialize)===null||Qn===void 0||Qn.call(ut),ze.run(),Bn.fireEvent(t.DID_INIT_RECEIVED)}),rn.addHandler(u.Op.DID_FAIL_TO_INITIALIZE,({initError:Qn})=>{var An;Bi(Qn),(An=ut.didFailToInitialize)===null||An===void 0||An.call(ut,Qn)})}(ci,ce,pn,this.bridgeInit,rn=>{this.Pt(!0,rn)}),wi=this.controllerAccess,On=ve,wi.run(()=>{On==null||On.setDelegate(wi.providers.getCommentsDataProviderDelegate())}),function(rn,ut){rn.run(()=>{ut==null||ut.setDelegate(rn.providers.getBookmarksDataProviderDelegate())})}(this.controllerAccess,me),function(rn,ut){rn.run(()=>ut==null?void 0:ut.setDelegate(rn.providers.getDocumentEventProviderDelegate()))}(this.controllerAccess,Be),function(rn,ut,ze){ze&&ut.add(()=>{rn.providers.registerEmbeddedUiProvider(ze.config())})}(this.controllerAccess,pn,on||hn),this.o=!0,this.bridgeInit.fireEvent(t.HANDLER_REGISTRATION_FINISHED)}Pt(Z,de){const ce=this.failedToInitialize,ve=this.initializationError;ce.set(Z),ve.set(de)}static Rt(Z){const de=new n(Z);return de.after([t.BRIDGE_TRANSPORT_SET,t.BRIDGE_TRANSPORT_READY,t.INIT_SENT,t.DID_INIT_RECEIVED,t.HANDLER_REGISTRATION_FINISHED],()=>{de.fireEvent(t.BRIDGE_OPEN)}),de}controllerModuleUrls(){return P()}preload(){return!this.Ct&&(P().forEach(Z=>{if(!L[Z]){const de=document.createElement("link");de.rel="preload",de.as="script",de.href=Z,de.crossOrigin="anonymous",L[Z]=de,document.head.appendChild(de)}}),this.Ct=!0,!0)}tearDown(){this.it().tearDown(),It.delete(this),this.Pt(!1),this.o=!1}createBasicTraceSpan(Z,de,ce){var ve,me,He;const ke=(He=(me=(ve=this.platformDelegate)===null||ve===void 0?void 0:ve.startSpan)===null||me===void 0?void 0:me.call(ve,Z,de,ce))!==null&&He!==void 0?He:null;return ke?{span:ke,closeSpanFn:$e=>{var Be,ot;(ot=(Be=this.platformDelegate)===null||Be===void 0?void 0:Be.endTraceOrSpan)===null||ot===void 0||ot.call(Be,ke,$e?{[mn.ERROR]:`${$e}`}:{})}}:{span:null,closeSpanFn:()=>{}}}getAttemptNumber(){var Z;return(Z=this.config.attemptNumber)!==null&&Z!==void 0?Z:0}preloadThreads(Z,de){this.controllerAccess.run(()=>this.controllerAccess.docs.preloadData(Z,de))}setAppearance(Z){this.config.appearance=Z,this.ft(Z)}setLanguage(Z){this.config.language=Z}setAppKeyboardFocusModeEnabled(Z,de){this.Ut(Z,de)}ft(Z){this.controllerAccess.settings.setAppearance(Z)}Mt(Z){this.controllerAccess.settings.setLanguage(Z)}Ut(Z,de){this.controllerAccess.settings.setAppKeyboardFocusModeEnabled(Z,de)}vt(Z){this.controllerAccess.settings.setDefaultTeamId(Z)}setUnderlineAllLinks(Z){this.controllerAccess.settings.setUnderlineLinks(Z)}setEnableAnimations(Z){this.controllerAccess.settings.setEnableAnimations(Z)}setDisplayEmojiAsPlainText(Z){this.controllerAccess.settings.setDisplayEmojiAsPlainText(Z)}setSpellcheckEnabled(Z){this.controllerAccess.settings.setSpellcheckEnabled(Z)}setUseSmartQuotesAndDashes(Z){this.controllerAccess.settings.setUseSmartQuotesAndDashes(Z)}async getInitLog(Z){return Object.assign(Object.assign({},await this.bridgeInit.getInitLog(Z)),{lm:"SYSTEMJS_SCRIPT_CONTROLLER",dr:!0})}async getInitLogStr(Z){for(let de=n.MAX_INIT_LOG;de>=0;de--){const ce=JSON.stringify(await this.getInitLog(de));if(ce.length<=Z)return ce}return"Failed to generate"}getDebugReport(Z){return this.getBridgeDebugReport(Z)}getBridgeDebugReport(Z=!0){return this.it().getDebugReport(Z)}it(){return It.get(this)}}a(nt,"it");function $t(N){return It.get(N)}a($t,"st");const It=new Map;function Fe(N){return N.atomClient}a(Fe,"ot");const Rt=document.querySelector("script[src*='/collab/embedded.js']"),Qe=Rt==null?void 0:Rt.src,Qt=Qe?new URL(Qe).origin:"https://prod.slack.quip.systems";function Nn(N){return N.config.origin||Qt}a(Nn,"_t");var Zt,mn;(function(N){N.COLLAB_INIT="collab-init",N.CONTROLLER_INIT="controller-init",N.CONTROLLER_RESORCES="controller-resources",N.HTTP_FETCH_HEADER="http-fetch-header",N.HTTP_FETCH_CONTENT="http-fetch-content",N.JSON_PARSE="json-parse",N.LOAD_CONTROLLER="load-controller",N.AWAIT_CALLBACK="await-callback",N.LOAD_SYSTEMJS="load-systemjs",N.MODULE_PREFETCH="module-prefetch",N.SCRIPT_TAG="script-tag",N.LOAD_CONTROLLER_MODULE="load-controller-module",N.SYSTEMJS_IMPORT_MODULE="systemjs-import-module"})(Zt||(Zt={})),function(N){N.CONTROLLER_ID="controller-id",N.ERROR="error",N.JS_PREFETCH_ENABLED="js-prefetch-enabled",N.URL="url"}(mn||(mn={}));const ni=(()=>{if(typeof g=="object")return g;if(typeof window=="object")return window;if(typeof self=="object")return self;throw new Error("Cannot find global")})();function fi(N,Z,de){const ce=N.split(".");let ve=de||ni;for(let me=0;me<ce.length;me++){const He=ce[me];me===ce.length-1?ve[He]=Z:(He in ve||(ve[He]={}),ve=ve[He])}}a(fi,"dt");var di,Wn,Rn,bt,ee,ae,fe,Ue,we,Ce,De,pt,gt,ct,_t,zn,vn,li,Gn,gn,yi,un,Xn,an,hi,xn,bi,Ei,Kn,Oi,Re,Oe,Et,it,Pt,qt,Jt,kt,nn;(function(N){N[N.IN_APP_USER_INITIATED=0]="IN_APP_USER_INITIATED",N[N.PERMALINK=1]="PERMALINK",N[N.POPOUT=2]="POPOUT"})(di||(di={})),function(N){N.BOLD="bold",N.ITALIC="italic",N.UNDERLINE="underline",N.STRIKETHROUGH="strikethrough",N.CODE="code",N.SUBSCRIPT="subscript",N.SUPERSCRIPT="superscript",N.LINK="link"}(Wn||(Wn={})),function(N){N.PLAIN="plain",N.H1="h1",N.H2="h2",N.H3="h3",N.CODE="code",N.BLOCKQUOTE="blockquote",N.LIST_BULLET="list_bullet",N.LIST_NUMBERED="list_numbered",N.LIST_CHECKLIST="list_checklist"}(Rn||(Rn={})),function(N){N.TODO_LISTS="todo_lists",N.LINKS_N_RESOURCES="links_and_resources",N.MEETING_NOTES="meeting_notes",N.BLANK_PAGE="blank_page"}(bt||(bt={})),function(N){N.CACHE="cache",N.MEMORY="memory",N.NETWORK="network"}(ee||(ee={})),function(N){N.NONE="none",N.SCROLL_TO_SECTION="scroll_to_section",N.FOCUS_SECTION="focus_section"}(ae||(ae={})),function(N){N[N.LINK_COPIED=0]="LINK_COPIED",N[N.LINK_FILE_SHARE_BLOCKED=1]="LINK_FILE_SHARE_BLOCKED",N[N.TABLE_SIZE_LIMIT_REACHED=2]="TABLE_SIZE_LIMIT_REACHED"}(fe||(fe={})),function(N){N[N.UNSUPPORTED_FILE_TYPE=0]="UNSUPPORTED_FILE_TYPE"}(Ue||(Ue={})),function(N){N[N.ANY=1]="ANY",N[N.ON_MOUSE_LEAVE=2]="ON_MOUSE_LEAVE"}(we||(we={})),function(N){N[N.COMMENTS=0]="COMMENTS",N[N.FILE_UPLOADS=1]="FILE_UPLOADS",N[N.DOCUMENT_EVENTS=2]="DOCUMENT_EVENTS",N[N.SPREADSHEETS=3]="SPREADSHEETS",N[N.HOVERCARDS=4]="HOVERCARDS",N[N.LINK_UNFURL=5]="LINK_UNFURL",N[N.UNREAD_COMMENTS=6]="UNREAD_COMMENTS",N[N.REMINDERS=7]="REMINDERS",N[N.DOCUMENT_UPDATE=8]="DOCUMENT_UPDATE",N[N.FLEXBOX_COLLAB=9]="FLEXBOX_COLLAB",N[N.SLACK_WORKFLOW_BUTTON_PROTOTYPE=10]="SLACK_WORKFLOW_BUTTON_PROTOTYPE",N[N.DOPE_TABLE=11]="DOPE_TABLE",N[N.UI_PARITY=12]="UI_PARITY",N[N.MOBILE_DOCUMENT_EDITING=13]="MOBILE_DOCUMENT_EDITING",N[N.MOBILE_IMAGE_LOADING=14]="MOBILE_IMAGE_LOADING",N[N.GALLERY_LAYOUT=15]="GALLERY_LAYOUT",N[N.ANCHOR_LINKS=16]="ANCHOR_LINKS",N[N.IMAGE_EMBEDS=17]="IMAGE_EMBEDS",N[N.IMAGE_CAPTION=18]="IMAGE_CAPTION",N[N.EMBEDS_DRAG_HANDLE=19]="EMBEDS_DRAG_HANDLE",N[N.SLACK_AUTOCOMPLETE=20]="SLACK_AUTOCOMPLETE",N[N.DOCUMENT_SLASH_COMMANDS=23]="DOCUMENT_SLASH_COMMANDS",N[N.DRAG_AND_DROP_MAX_DISTANCE=24]="DRAG_AND_DROP_MAX_DISTANCE",N[N.APP_UNFURL_NON_IFRAME_RENDERS=25]="APP_UNFURL_NON_IFRAME_RENDERS",N[N.A11Y_KEYBOARD_NAVIGATION=28]="A11Y_KEYBOARD_NAVIGATION",N[N.INSERT_TOOLBAR=29]="INSERT_TOOLBAR",N[N.MENTIONS_SHARE=30]="MENTIONS_SHARE",N[N.TEXT_IN_GALLERY_LAYOUT=31]="TEXT_IN_GALLERY_LAYOUT",N[N.AUTOSIZE_FLEXBOX=32]="AUTOSIZE_FLEXBOX",N[N.FORMATTING_TOOLBAR=33]="FORMATTING_TOOLBAR",N[N.UI_PARITY_SLACK_LINK_INSPECTOR=34]="UI_PARITY_SLACK_LINK_INSPECTOR",N[N.PREVENT_OBJECTS_IN_LISTS=35]="PREVENT_OBJECTS_IN_LISTS",N[N.DISALLOW_SECTION_COMMENTS=37]="DISALLOW_SECTION_COMMENTS",N[N.SECTION_TOOLBAR_ON_LEFT=38]="SECTION_TOOLBAR_ON_LEFT",N[N.MOBILE_WEBVIEW_UNFURLS=39]="MOBILE_WEBVIEW_UNFURLS",N[N.INLINE_COMMENTS=40]="INLINE_COMMENTS",N[N.UNIVERSAL_DRAG_PREVIEW=41]="UNIVERSAL_DRAG_PREVIEW",N[N.DISABLE_GLOBAL_SHORTCUTS=42]="DISABLE_GLOBAL_SHORTCUTS",N[N.NARROW_COLLAB_INDENTATION=43]="NARROW_COLLAB_INDENTATION",N[N.EXPANDED_FLEXBOX_MARGIN=44]="EXPANDED_FLEXBOX_MARGIN",N[N.ADD_COLUMN_FROM_SECTION_MENU=45]="ADD_COLUMN_FROM_SECTION_MENU",N[N.REQUEST_COMPLETION_HOOK=46]="REQUEST_COMPLETION_HOOK",N[N.A11Y_CARET=47]="A11Y_CARET",N[N.BOOKMARKS=48]="BOOKMARKS",N[N.GRIDLIKE_DRAG_AND_DROP_PLACEMENT=50]="GRIDLIKE_DRAG_AND_DROP_PLACEMENT",N[N.SLACK_MESSAGE_TITLE=51]="SLACK_MESSAGE_TITLE",N[N.LENIENT_STARTUP=52]="LENIENT_STARTUP",N[N.ALLOW_SELECTING_ARCHIVED_COMMENTS=53]="ALLOW_SELECTING_ARCHIVED_COMMENTS",N[N.ANIMATE_LAYOUT_DRAG=54]="ANIMATE_LAYOUT_DRAG",N[N.STATIC_TITLES=55]="STATIC_TITLES",N[N.PROFILE_UNFURLS=56]="PROFILE_UNFURLS",N[N.DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES=57]="DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES",N[N.MOBILE_NATIVE_UNFURLS=58]="MOBILE_NATIVE_UNFURLS",N[N.DEFAULT_UNFURLS_ON_PASTE=59]="DEFAULT_UNFURLS_ON_PASTE",N[N.SAVED_FOR_LATER=60]="SAVED_FOR_LATER",N[N.COMMENTS_REDESIGN=61]="COMMENTS_REDESIGN",N[N.SLACK_USER_CONTEXT_MENU=62]="SLACK_USER_CONTEXT_MENU",N[N.SLACK_OBJECT_CONTROL_CONTEXT_MENUS=63]="SLACK_OBJECT_CONTROL_CONTEXT_MENUS",N[N.JS_MODULE_PREFETCH=64]="JS_MODULE_PREFETCH",N[N.SLACK_SECTION_MENUS=65]="SLACK_SECTION_MENUS",N[N.PADDING_RESIZING=66]="PADDING_RESIZING",N[N.HOVERABLE_SECTION_MENU=68]="HOVERABLE_SECTION_MENU",N[N.SLACK_PRESENCE_UPDATES=69]="SLACK_PRESENCE_UPDATES",N[N.HIDE_INLINE_COMMENT_BUBBLES=70]="HIDE_INLINE_COMMENT_BUBBLES",N[N.HIDE_ADD_COMMENT_BUBBLE=71]="HIDE_ADD_COMMENT_BUBBLE",N[N.HYPERLINK_CONTEXT_MENU=72]="HYPERLINK_CONTEXT_MENU",N[N.UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI=73]="UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI",N[N.LOCK_SECTION_FOR_INLINE_ANNOTATION=74]="LOCK_SECTION_FOR_INLINE_ANNOTATION",N[N.EDITABLE_CONTROL=75]="EDITABLE_CONTROL",N[N.OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION=76]="OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION",N[N.MOVE_CARET_WHEN_OPENING_ANNOTATION=77]="MOVE_CARET_WHEN_OPENING_ANNOTATION",N[N.DISABLE_TITLE_UNFURL=79]="DISABLE_TITLE_UNFURL",N[N.HIDE_STUB_ANNOTATIONS=80]="HIDE_STUB_ANNOTATIONS",N[N.OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS=81]="OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS",N[N.USE_EXTERNAL_EDITOR_SAVE=82]="USE_EXTERNAL_EDITOR_SAVE",N[N.IMPROVED_WORD_WRAPPING=83]="IMPROVED_WORD_WRAPPING",N[N.HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS=84]="HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS",N[N.USE_NEW_FIND_MODAL=85]="USE_NEW_FIND_MODAL",N[N.DISPLAY_COMMENT_TOOLTIP=86]="DISPLAY_COMMENT_TOOLTIP",N[N.HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT=87]="HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT",N[N.SLACK_FILE_UNFURL_PLACEHOLDER=88]="SLACK_FILE_UNFURL_PLACEHOLDER",N[N.PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS=89]="PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS",N[N.CLEANUP_SENTINEL=90]="CLEANUP_SENTINEL",N[N.OPEN_COMMENTS_HIGHLIGHT_TEMPORARY=91]="OPEN_COMMENTS_HIGHLIGHT_TEMPORARY",N[N.UNFURL_PRIVATE_MESSAGES=92]="UNFURL_PRIVATE_MESSAGES",N[N.MOBILE_DISABLE_PRESENCE_MENU_POPOVER=93]="MOBILE_DISABLE_PRESENCE_MENU_POPOVER",N[N.CANVAS_GA_FAST_FOLLOW=95]="CANVAS_GA_FAST_FOLLOW",N[N.BRIDGE_REFACTORING=96]="BRIDGE_REFACTORING",N[N.SIMPLE_TABLES=97]="SIMPLE_TABLES",N[N.ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS=98]="ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS",N[N.ALLOW_SLACK_OBJECT_TITLE_UNFURL=99]="ALLOW_SLACK_OBJECT_TITLE_UNFURL",N[N.ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL=100]="ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL",N[N.CANVAS_GA_FAST_FOLLOW_2=101]="CANVAS_GA_FAST_FOLLOW_2",N[N.USE_LEFT_GUTTER_DISPLAY=102]="USE_LEFT_GUTTER_DISPLAY",N[N.USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD=103]="USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD",N[N.TITLE_BLOCK_KIT_FORMAT=104]="TITLE_BLOCK_KIT_FORMAT",N[N.USE_LIST_ITEM_MARKER_CONTAINER=105]="USE_LIST_ITEM_MARKER_CONTAINER",N[N.ALLOW_SLACK_TEMPLATE_PLACEHOLDER=106]="ALLOW_SLACK_TEMPLATE_PLACEHOLDER",N[N.USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS=107]="USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS",N[N.IMAGE_RESIZING=108]="IMAGE_RESIZING",N[N.PRIVATE_MESSAGE_SPEEDBUMP_MODAL=109]="PRIVATE_MESSAGE_SPEEDBUMP_MODAL",N[N.ALLOW_HEADER_IMAGE=110]="ALLOW_HEADER_IMAGE",N[N.PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS=111]="PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS",N[N.USE_NEW_SECTION_HIGHLIGHT=112]="USE_NEW_SECTION_HIGHLIGHT",N[N.MODEL_INTEGRITY_PROBE=113]="MODEL_INTEGRITY_PROBE",N[N.MODEL_INTEGRITY_CHANGES_CHECK=114]="MODEL_INTEGRITY_CHANGES_CHECK",N[N.MODEL_FSCK_PROBE=115]="MODEL_FSCK_PROBE",N[N.MODEL_UPDATES_PROBE=116]="MODEL_UPDATES_PROBE",N[N.SIMPLE_TABLES_FULL_BLEED=117]="SIMPLE_TABLES_FULL_BLEED",N[N.IMAGE_MIN_DIMENSIONS=118]="IMAGE_MIN_DIMENSIONS",N[N.SIMPLE_TABLES_MOBILE_DISPLAY_SCALE=119]="SIMPLE_TABLES_MOBILE_DISPLAY_SCALE",N[N.SLACK_TEXTY_CLIPBOARD=120]="SLACK_TEXTY_CLIPBOARD",N[N.ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE=121]="ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE",N[N.SINGLE_HOVERABLE_SECTION_MENU=122]="SINGLE_HOVERABLE_SECTION_MENU",N[N.SIMPLE_TABLES_FIT_TO_PAGE=123]="SIMPLE_TABLES_FIT_TO_PAGE",N[N.TRANSIENT_SECTION_HIGHLIGHTING=124]="TRANSIENT_SECTION_HIGHLIGHTING",N[N.OPTIMIZE_CONTROLS_RENDERING=125]="OPTIMIZE_CONTROLS_RENDERING",N[N.SIMPLE_TABLES_MOBILE_EDITING=126]="SIMPLE_TABLES_MOBILE_EDITING",N[N.OPTIMIZE_EMBEDS_RENDERING=127]="OPTIMIZE_EMBEDS_RENDERING",N[N.CONTENT_REACTION_BAR=128]="CONTENT_REACTION_BAR",N[N.GUTTER_REDESIGN=129]="GUTTER_REDESIGN",N[N.SLASH_SHORTCUT_COMMANDS=130]="SLASH_SHORTCUT_COMMANDS",N[N.USE_NATIVE_LINK_INSPECTOR=131]="USE_NATIVE_LINK_INSPECTOR",N[N.SECTION_UPDATE_PILL_ENABLED=132]="SECTION_UPDATE_PILL_ENABLED",N[N.SIMPLE_TABLES_CELL_MERGING=133]="SIMPLE_TABLES_CELL_MERGING",N[N.HIGHLIGHT_IN_STANDALONE_CANVASES=134]="HIGHLIGHT_IN_STANDALONE_CANVASES",N[N.BLUE_GREY_MENTIONS=135]="BLUE_GREY_MENTIONS",N[N.SLASH_SHORTCUT_COMMANDS_NUX=136]="SLASH_SHORTCUT_COMMANDS_NUX",N[N.OPTIMIZE_SECTION_STATUS=137]="OPTIMIZE_SECTION_STATUS",N[N.UNFURL_EMBED=138]="UNFURL_EMBED",N[N.SLACK_REACT_17=139]="SLACK_REACT_17",N[N.ENABLE_REACT_18=140]="ENABLE_REACT_18",N[N.PAUSE_PRIVATE_MESSAGE_UNFURL_SNAPSHOTS=141]="PAUSE_PRIVATE_MESSAGE_UNFURL_SNAPSHOTS",N[N.DRAGGABLE_CONTROL=142]="DRAGGABLE_CONTROL",N[N.NEW_COLUMN_PLACEHOLDERS=143]="NEW_COLUMN_PLACEHOLDERS"}(Ce||(Ce={})),function(N){N[N.NONE=0]="NONE",N[N.SHIFT=1]="SHIFT",N[N.ALT=2]="ALT",N[N.META=4]="META",N[N.CTRL=8]="CTRL",N[N.MOD=16]="MOD"}(De||(De={})),function(N){N[N.CHANNEL=0]="CHANNEL",N[N.USER=1]="USER",N[N.EMOJI=2]="EMOJI",N[N.FILE=4]="FILE",N[N.UNFURL=5]="UNFURL",N[N.DOCUMENT=6]="DOCUMENT",N[N.LINK=7]="LINK",N[N.DOCUMENT_USER_ACCESS=9]="DOCUMENT_USER_ACCESS",N[N.PENDING_URL=10]="PENDING_URL",N[N.GENERIC=11]="GENERIC",N[N.TEMPLATE=12]="TEMPLATE",N[N.BACKGROUND=13]="BACKGROUND",N[N.WIDGET=14]="WIDGET",N[N.LIST=15]="LIST"}(pt||(pt={})),function(N){N[N.NOT_FOUND=0]="NOT_FOUND"}(gt||(gt={})),function(N){N[N.CLOSE=0]="CLOSE",N[N.SELECT=1]="SELECT",N[N.MOVE_SELECTION_DOWN=2]="MOVE_SELECTION_DOWN",N[N.MOVE_SELECTION_UP=3]="MOVE_SELECTION_UP"}(ct||(ct={})),function(N){N.CANVAS="insert-canvas",N.AUDIO="insert-audio",N.VIDEO="insert-video",N.FILE="insert-file",N.WORKFLOW="insert-workflow",N.PROFILE="insert-profile",N.CODE="inline-code",N.CHANNEL="ac-trigger-channel",N.CODEBLOCK="insert-codeblock",N.BLOCKQUOTE="insert-blockquote",N.PLAIN="insert-plain",N.H1="insert-h1",N.H2="insert-h2",N.H3="insert-h3",N.IMAGE="insert-image",N.TABLE="insert-table",N.CHECKLIST="insert-checklist",N.BULLET_LIST="insert-bullet-list",N.ORDERED_LIST="insert-ordered-list",N.DIVIDER="insert-divider",N.TWO_COLUMNS="layout-two-columns",N.THREE_COLUMNS="layout-three-columns"}(_t||(_t={})),function(N){N.DEFAULT_SOURCE="canvas-shortcut-command"}(zn||(zn={})),function(N){N[N.SLACK_OBJECT=0]="SLACK_OBJECT",N[N.LINK=1]="LINK",N[N.HEADER=2]="HEADER",N[N.TEXT=3]="TEXT",N[N.DIVIDER=4]="DIVIDER",N[N.HYPERLINK=5]="HYPERLINK",N[N.TITLE=6]="TITLE",N[N.TABLE=7]="TABLE",N[N.DRAG_OVERLAY=8]="DRAG_OVERLAY",N[N.COMMENT_METADATA=9]="COMMENT_METADATA"}(vn||(vn={})),function(N){N[N.DEFAULT=0]="DEFAULT",N[N.BUTTON=1]="BUTTON"}(li||(li={})),function(N){N.STATIC="list-static",N.DYNAMIC="list-dynamic"}(Gn||(Gn={})),function(N){N.DEFAULT="unfurl-default",N.EMBED="unfurl-embed"}(gn||(gn={})),function(N){N[N.PREVIOUS=0]="PREVIOUS",N[N.NEXT=1]="NEXT"}(yi||(yi={})),function(N){N.ROW="row",N.COLUMN="column"}(un||(un={})),function(N){N.INSERT_BEFORE="insert_before",N.INSERT_AFTER="insert_after",N.DELETE="delete"}(Xn||(Xn={})),function(N){N.CLEAR_CONTENTS="clear_contents",N.MERGE_CELLS="merge_cells",N.UNMERGE_CELLS="unmerge_cells"}(an||(an={})),function(N){N.TOGGLE_HAS_HEADER_ROW="toggle_has_header_row",N.TOGGLE_HAS_HEADER_COLUMN="toggle_has_header_column",N.DISTRIBUTE_COLUMNS="distribute_columns",N.TOGGLE_FIT_TO_PAGE="toggle_fit_to_page"}(hi||(hi={})),function(N){N.NO_FOCUS_ON_CLICK="data-no-focus-section-on-click",N.NO_DRAG_ON_MOUSE_MOVE="data-no-drag-on-mouse-move",N.EMBEDDED_FILE_CARD_CLASSNAME="card-view__file_card",N.EMBEDDED_IMAGE_CARD_CLASSNAME="card-view__image_card"}(xn||(xn={})),function(N){N[N.DISMISS_POPOVER=0]="DISMISS_POPOVER",N[N.REMOVE_ASSOCIATED_CONTENT=1]="REMOVE_ASSOCIATED_CONTENT",N[N.COPY_OBJECT=2]="COPY_OBJECT",N[N.CREATE_OR_VIEW_COMMENT=3]="CREATE_OR_VIEW_COMMENT",N[N.REPLACE_FILE=4]="REPLACE_FILE",N[N.SWITCH_UNFURL_TYPE=5]="SWITCH_UNFURL_TYPE",N[N.PREVENT_POPOVER_DISMISS=6]="PREVENT_POPOVER_DISMISS",N[N.SYNC_METADATA=7]="SYNC_METADATA",N[N.COPY_SECTION_LINK=8]="COPY_SECTION_LINK",N[N.SET_BLOCK_STYLE=9]="SET_BLOCK_STYLE",N[N.ADD_COLUMN=10]="ADD_COLUMN",N[N.MOVE_LINE=11]="MOVE_LINE",N[N.TOGGLE_COLLAPSE=12]="TOGGLE_COLLAPSE",N[N.CHECK_ALL=13]="CHECK_ALL",N[N.UNCHECK_ALL=14]="UNCHECK_ALL",N[N.REMOVE_CHECKED=15]="REMOVE_CHECKED",N[N.MOVE_CHECKED_TO_BOTTOM=16]="MOVE_CHECKED_TO_BOTTOM",N[N.SORT_ALPHA=17]="SORT_ALPHA",N[N.TAKE_OVER_EDITING=18]="TAKE_OVER_EDITING",N[N.ADD_TEXT_BELOW=19]="ADD_TEXT_BELOW",N[N.UPDATE_INLINE_ENTITY_DISPLAY_INFO=20]="UPDATE_INLINE_ENTITY_DISPLAY_INFO",N[N.ON_LINK_INSPECTOR_INPUT_CHANGE=21]="ON_LINK_INSPECTOR_INPUT_CHANGE",N[N.FOCUS_ASSOCIATED_SECTION=22]="FOCUS_ASSOCIATED_SECTION",N[N.UNFURL_URL=23]="UNFURL_URL",N[N.MODIFY_TABLE=24]="MODIFY_TABLE",N[N.RESUME_SNAPSHOTS=25]="RESUME_SNAPSHOTS",N[N.OPEN_POPOVER=26]="OPEN_POPOVER",N[N.CANCEL_HEADER_IMAGE=27]="CANCEL_HEADER_IMAGE",N[N.PREVIEW_HEADER_IMAGE=28]="PREVIEW_HEADER_IMAGE",N[N.SAVE_HEADER_IMAGE=29]="SAVE_HEADER_IMAGE",N[N.MESSAGE_UNFURL_CONFIRMATION=30]="MESSAGE_UNFURL_CONFIRMATION",N[N.UNFURL_URLS=31]="UNFURL_URLS"}(bi||(bi={})),function(N){N.MERGE="merge",N.UNMERGE="unmerge"}(Ei||(Ei={})),function(N){N[N.SLACK_MESSAGE=0]="SLACK_MESSAGE",N[N.SLACK_FILE=1]="SLACK_FILE",N[N.SLACK_IMAGE_FILE=8]="SLACK_IMAGE_FILE",N[N.SLACK_DOCUMENT=2]="SLACK_DOCUMENT",N[N.SLACK_DOCUMENT_SECTION=3]="SLACK_DOCUMENT_SECTION",N[N.SLACK_PUBLIC_LINK=4]="SLACK_PUBLIC_LINK",N[N.SLACK_USER=5]="SLACK_USER",N[N.SLACK_CHANNEL=6]="SLACK_CHANNEL",N[N.SLACK_WORKFLOW=7]="SLACK_WORKFLOW",N[N.SLACK_WIDGET=9]="SLACK_WIDGET",N[N.SLACK_EMBED=10]="SLACK_EMBED"}(Kn||(Kn={})),function(N){N[N.CARD=0]="CARD",N[N.INLINE=1]="INLINE",N[N.LINK=2]="LINK",N[N.WIDGET=3]="WIDGET"}(Oi||(Oi={})),function(N){N.IMAGE="image",N.HORIZONTAL_RULE="horizontal-rule",N.CHECKLIST="checklist",N.NUMBERED_LIST="numbered-list",N.BULLETED_LIST="bullet-list",N.TABLE="table",N.CODE="code",N.TEXT_H1_STYLE="large-heading",N.TEXT_H2_STYLE="medium-heading",N.TEXT_H3_STYLE="small-heading",N.TEXT_PLAIN_STYLE="plain",N.BLOCKQUOTE="blockquote",N.LAYOUT="layout"}(Re||(Re={})),function(N){N[N.DOCUMENT_SAVING=1]="DOCUMENT_SAVING",N[N.IO=2]="IO",N[N.LISTENER=3]="LISTENER",N[N.ELEMENT=4]="ELEMENT"}(Oe||(Oe={})),function(N){N[N.NONE=0]="NONE",N[N.DOCUMENT_FAILED_TO_LOAD=1]="DOCUMENT_FAILED_TO_LOAD",N[N.DOCUMENT_SAVE_FAILED=2]="DOCUMENT_SAVE_FAILED",N[N.DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE=3]="DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE",N[N.DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE=4]="DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE",N[N.DOCUMENT_TOO_LARGE_TO_SAVE=5]="DOCUMENT_TOO_LARGE_TO_SAVE",N[N.SESSION_EXPIRED=6]="SESSION_EXPIRED",N[N.THREAD_CLOSED=7]="THREAD_CLOSED",N[N.DOCUMENT_SAVE_FAILED_TO_COMPLETE=8]="DOCUMENT_SAVE_FAILED_TO_COMPLETE",N[N.DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES=9]="DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES"}(Et||(Et={})),function(N){N[N.WRITE=0]="WRITE",N[N.READ=1]="READ",N[N.NONE=2]="NONE"}(it||(it={})),function(N){N.DOWNLOAD="download",N.EDIT_FILE="edit-file",N.OPEN_IN_NEW_WINDOW="open-in-new-window",N.PREVIEW_FILE="preview-file",N.VIEW_FULL_SCREEN="view-full-screen",N.SHARE="share"}(Pt||(Pt={})),function(N){N[N.HOVERCARD=0]="HOVERCARD",N[N.CARD=1]="CARD",N[N.HEADER=2]="HEADER",N[N.CONTROL_CONTEXT_MENU=3]="CONTROL_CONTEXT_MENU",N[N.SECTION_MENU=4]="SECTION_MENU",N[N.HYPERLINK_CONTEXT_MENU=5]="HYPERLINK_CONTEXT_MENU",N[N.HYPERLINK_INSPECTOR_TOOLBAR=6]="HYPERLINK_INSPECTOR_TOOLBAR",N[N.CONTROL_OBJECT_OBSERVER=7]="CONTROL_OBJECT_OBSERVER",N[N.TABLE_SELECTION_MENU=8]="TABLE_SELECTION_MENU",N[N.FILE_UPLOAD_BLOCKED_OVERLAY=9]="FILE_UPLOAD_BLOCKED_OVERLAY",N[N.EPHEMERAL_MESSAGE_MODAL_TRIGGER=10]="EPHEMERAL_MESSAGE_MODAL_TRIGGER",N[N.VARIABLE_EDIT_POPOVER=11]="VARIABLE_EDIT_POPOVER",N[N.CONTENT_REACTION_BAR=12]="CONTENT_REACTION_BAR",N[N.GUTTER_REACTION_ICON=13]="GUTTER_REACTION_ICON",N[N.HEADER_IMAGE_PICKER=14]="HEADER_IMAGE_PICKER"}(qt||(qt={})),function(N){N.NONE="none",N.THREAD_ROOT="thread_root",N.THREAD_COMPOSER="thread_composer"}(Jt||(Jt={})),function(N){N.TEXT="text",N.USER="user",N.CHANNEL="channel",N.DATE="date"}(kt||(kt={})),function(N){N.INSERT="insert",N.EDIT="edit",N.REMOVE="remove",N.SHOW_CREATION_POPOVER="show_creation_popover",N.HIGHLIGHT="highlight"}(nn||(nn={})),fi("Collab",nt),fi("dumpCollabDebugReport",function(){It.forEach((N,Z)=>{Z.getInitLog().then(de=>{console.log(`Collab instance ${Z.id} debug report:`,Z.getBridgeDebugReport(!1),de)})})}),window.JS_CLIENT_HASH="KfXnsMELCDcZKmD0ic8RkQ",window.QUIP_VERSION_NAME="quipbuild_2024_03_12T00_04_0f67320"}.call(this,h("yLpj"))},LNXf:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(e,t,n,r){function c(f){return f instanceof n?f:new n(function(S){S(f)})}return a(c,"adopt"),new(n||(n=Promise))(function(f,S){function l(O){try{T(r.next(O))}catch(R){S(R)}}a(l,"fulfilled");function y(O){try{T(r.throw(O))}catch(R){S(R)}}a(y,"rejected");function T(O){O.done?f(O.value):c(O.value).then(l,y)}a(T,"step"),T((r=r.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0});const u=h("hGh8"),m=p(h("hEYi")),s=h("f2XL"),o=p(h("aVV0"));let i=a(class extends o.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return g(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new u.MeetingSessionStatus(u.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,n)=>{let r=a(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new u.MeetingSessionStatus(u.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(S){S.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new u.MeetingSessionStatus(u.MeetingSessionStatusCode.SignalingRequestFailed)),t()),S.type===m.default.ReceivedSignalFrame&&S.message.type===s.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(u.MeetingSessionStatus.fromSignalFrame(S.message)),t())}constructor(S,l,y){this.signalingClient=S,this.completionCallback=l,this.logger=y}},"Interceptor");const c=new r(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=c,this.context.signalingClient.registerObserver(c)})}constructor(t,n,r){super(t.logger),this.context=t,this.credentials=n,this.completionCallback=r,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");d.default=i},LUct:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("H7ma")),u=g(h("OND3")),m=h("KyYT"),s=g(h("XJrD")),o=g(h("GxrV"));let i=a(class Hn{updateConnectionMetric(t){let{uplinkKbps:n=0}=t;if(isNaN(n))return;this.startTimeMs===0&&(this.startTimeMs=Date.now()),Date.now()-this.startTimeMs<Hn.startupDurationMs?this.lastUplinkBandwidthKbps=Hn.defaultUplinkBandwidthKbps:this.lastUplinkBandwidthKbps=n,this.logger.debug(()=>`simulcast: uplink policy update metrics ${this.lastUplinkBandwidthKbps}`);let r=Hn.holdDownDurationMs;this.currentActiveStreams===3?r=Hn.holdDownDurationMs*2:(this.currentActiveStreams===2&&n<=this.midDisabledRate||this.currentActiveStreams===1&&n<=this.hiDisabledRate)&&(r=Hn.holdDownDurationMs/2),!(Date.now()<this.lastUpdatedMs+r)&&(this.newQualityMap=this.calculateEncodingParameters(!1))}calculateEncodingParameters(t){const n=[new o.default,new o.default,new o.default];let r=0,c=0;if(this.currentActiveStreams===0?(r=this.lastUplinkBandwidthKbps+1,c=0):this.currentActiveStreams===1?(r=this.enableFhdVideo?4e3:2400,c=this.hiDisabledRate):this.currentActiveStreams===2?(r=this.enableFhdVideo?1600:1e3,c=this.midDisabledRate):(r=this.enableFhdVideo?500:300,c=0),t||this.lastUplinkBandwidthKbps>=r||this.lastUplinkBandwidthKbps<=c){this.shouldDisableSimulcast?(this.newActiveStreams=0,n[0].maxBitrateKbps=0,n[1].maxBitrateKbps=this.hiTargetBitrateKbps,n[2].maxBitrateKbps=0):this.numSenders<=4&&this.lastUplinkBandwidthKbps>=this.hiDisabledRate?(this.newActiveStreams=1,n[0].maxBitrateKbps=this.lowTargetBitrateKbps,n[1].maxBitrateKbps=0,n[2].maxBitrateKbps=this.hiTargetBitrateKbps):this.lastUplinkBandwidthKbps>=this.midDisabledRate?(this.newActiveStreams=2,n[0].maxBitrateKbps=this.lastUplinkBandwidthKbps>=this.midTargetBitrateKbps*.7?this.lowTargetBitrateKbps*2/3:this.lowTargetBitrateKbps/2,n[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,n[2].maxBitrateKbps=0):(this.newActiveStreams=3,n[0].maxBitrateKbps=this.lowTargetBitrateKbps,n[1].maxBitrateKbps=0,n[2].maxBitrateKbps=0);const f=n.map((S,l,y)=>S.maxBitrateKbps);this.newQualityMap=this.fillEncodingParamWithBitrates(f),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters bw:${this.lastUplinkBandwidthKbps} numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`)}return this.newQualityMap}chooseMediaTrackConstraints(){return{width:{ideal:this.enableFhdVideo?1920:1280},height:{ideal:this.enableFhdVideo?1080:768},frameRate:{ideal:15}}}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.currentActiveStreams=this.newActiveStreams,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const n=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,r=n!==this.numSenders,c=t.numberOfParticipants(),f=c>=0&&c<=2,S=this.shouldDisableSimulcast!==f;this.numSenders=n,this.shouldDisableSimulcast=f,this.optimalParameters=new s.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,this.newQualityMap=this.calculateEncodingParameters(r||S)}wantsResubscribe(){let t=!this.encodingParametersEqual();this.nextLocalDescriptions=this.videoIndex.localStreamDescriptions();for(let n=0;n<this.nextLocalDescriptions.length;n++){const r=this.nextLocalDescriptions[n].streamId;if(r!==0&&r){const c=this.currLocalDescriptions.findIndex(f=>f.streamId===r);c!==-1&&this.nextLocalDescriptions[n].disabledByWebRTC!==this.currLocalDescriptions[c].disabledByWebRTC&&(t=!0)}}return t&&(this.lastUpdatedMs=Date.now()),this.currLocalDescriptions=this.nextLocalDescriptions,t}compareEncodingParameter(t,n){return JSON.stringify(t)===JSON.stringify(n)}encodingParametersEqual(){let t=!1;for(const n of u.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(n),this.currentQualityMap.get(n)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiDisabledRate=t?Hn.kHiDisabledRateFhd:Hn.kHiDisabledRateHd,this.midDisabledRate=t?Hn.kMidDisabledRateFhd:Hn.kMidDisabledRateHd,this.hiTargetBitrateKbps=t?Hn.kHiTargetBitrateKbpsFhd:Hn.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?Hn.kMidTargetBitrateKbpsFhd:Hn.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?Hn.kLowTargetBitrateKbpsFhd:Hn.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const n=new Map,r=1e3,c=u.default.NAME_ARR_ASCENDING,f=t;let S=this.shouldDisableSimulcast?1:4;for(let l=0;l<c.length;l++){const y=c[l];n.set(y,{rid:y,active:f[l]>0,scaleResolutionDownBy:Math.max(S,1),maxBitrate:f[l]*r}),S=S/2}return n}getQualityMapString(t){let n="";const r=this.videoIndex.localStreamDescriptions();return r.length===3&&t.forEach(c=>{let f=!1;c.rid==="low"?f=r[0].disabledByWebRTC:c.rid==="mid"?f=r[1].disabledByWebRTC:f=r[2].disabledByWebRTC,n+=`{ rid: ${c.rid} active:${c.active} disabledByWebRTC: ${f} maxBitrate:${c.maxBitrate}}`}),n}getEncodingSimulcastLayer(t){switch(t){case 0:return p.default.High;case 1:return p.default.LowAndHigh;case 2:return p.default.LowAndMedium;case 3:return p.default.Low}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(n=>{m.Maybe.of(n.encodingSimulcastLayersDidChange).map(r=>r.bind(n)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const n of this.observerQueue)t(n)}constructor(t,n){this.selfAttendeeId=t,this.logger=n,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.currentActiveStreams=1,this.lastUplinkBandwidthKbps=Hn.defaultUplinkBandwidthKbps,this.startTimeMs=0,this.lastUpdatedMs=Date.now(),this.videoIndex=null,this.currLocalDescriptions=[],this.nextLocalDescriptions=[],this.observerQueue=new Set,this.hiDisabledRate=Hn.kHiDisabledRateHd,this.midDisabledRate=Hn.kMidDisabledRateHd,this.hiTargetBitrateKbps=Hn.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=Hn.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=Hn.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new s.default(0,0,0,0,!0),this.parametersInEffect=new s.default(0,0,0,0,!0),this.lastUplinkBandwidthKbps=Hn.defaultUplinkBandwidthKbps,this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");d.default=i,i.defaultUplinkBandwidthKbps=1200,i.startupDurationMs=6e3,i.holdDownDurationMs=4e3,i.defaultMaxFrameRate=15,i.kHiDisabledRateHd=700,i.kMidDisabledRateHd=240,i.kHiDisabledRateFhd=1200,i.kMidDisabledRateFhd=400,i.kHiTargetBitrateKbpsHd=1200,i.kMidTargetBitrateKbpsHd=600,i.kLowTargetBitrateKbpsHd=300,i.kHiTargetBitrateKbpsFhd=2e3,i.kMidTargetBitrateKbpsFhd=1e3,i.kLowTargetBitrateKbpsFhd=500},LVIV:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0})},LhvI:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("aVV0"));let m=a(class extends u.default{run(){var o,i;return g(this,void 0,void 0,function*(){if(!(!((i=(o=this.context.meetingSessionConfiguration)===null||o===void 0?void 0:o.urls)===null||i===void 0)&&i.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(o){super(o.logger),this.context=o,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");d.default=m},LmyK:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.ClientMetricReportDirection=void 0;var g;(function(p){p[p.UPSTREAM=0]="UPSTREAM",p[p.DOWNSTREAM=1]="DOWNSTREAM"})(g=d.ClientMetricReportDirection||(d.ClientMetricReportDirection={})),d.default=g},Lrln:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("Sa54")),m=p(h("RUbL"));let s=a(class Kl{get mediaStream(){return this._mediaStream}set mediaStream(i){this._mediaStream=i}acquireAudioInputStream(){return g(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),m.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return g(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(i){return g(this,void 0,void 0,function*(){return i&&i.video&&i.video.mandatory&&i.video.mandatory.chromeMediaSource&&i.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(i):navigator.mediaDevices.getDisplayMedia(i)})}acquireScreenCaptureDisplayInputStream(i,e){return g(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(i,e))})}screenCaptureDisplayMediaConstraints(i,e){return{audio:!!(!i&&new u.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!i&&{frameRate:{max:e||Kl.defaultFrameRate}}),i&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:e||Kl.defaultFrameRate}})}}toggleMediaStream(i){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==i&&(this.mediaStream.getTracks()[t].enabled=i,e=!0);return e}cleanup(){if(this.mediaStream)for(let i=0;i<this.mediaStream.getTracks().length;i++)this.mediaStream.getTracks()[i].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(i){}removeMediaStreamBrokerObserver(i){}constructor(i){this.logger=i}},"ContentShareMediaStreamBroker");d.default=s,s.defaultFrameRate=15},Lspx:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.TargetDisplaySize=void 0;var g;(function(p){p[p.Low=0]="Low",p[p.Medium=1]="Medium",p[p.High=2]="High",p[p.Maximum=3]="Maximum"})(g=d.TargetDisplaySize||(d.TargetDisplaySize={})),d.default=g},LuEC:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("ghxq"));let u=a(class extends p.default{isSendingAudioUnhealthy(){const s=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),o=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return s&&o}health(){if(this.isSendingAudioUnhealthy()){const s=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!s?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(s,o,i){super(o,i,"Sending Audio Health"),this.logger=s,this.sendingAudioFailureSamplesToConsider=o.sendingAudioFailureSamplesToConsider>0?o.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=o.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=o.maximumTimesToWarn,this.coolDownTimeMs=o.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");d.default=u},Lxy7:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.FXLIB_PATH=d.WORKER_PATH=d.CDN_BASE_PATH=d.RESOURCE_CONSTRAINTS=d.SEGMENTATION_MODEL=d.DEFAULT_STREAM_PARAMETERS=d.WORKER_MSG=void 0,d.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},d.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},d.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},d.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},d.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const g="/ml_media_fx/otherassets";d.WORKER_PATH=`${g}/worker.js`,d.FXLIB_PATH=`${g}/fxlib.js`},M1uR:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckNetworkUDPConnectivityFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",p[p.ConnectionFailed=2]="ConnectionFailed",p[p.ICENegotiationFailed=3]="ICENegotiationFailed"})(g=d.CheckNetworkUDPConnectivityFeedback||(d.CheckNetworkUDPConnectivityFeedback={})),d.default=g},M2az:function(W){W.exports=JSON.parse(`{"name":"@aws-sdk/client-chime-sdk-messaging","description":"AWS SDK for JavaScript Chime Sdk Messaging Client for Node.js, Browser and React Native","version":"3.341.0","scripts":{"build":"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4","clean":"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo chime-sdk-messaging"},"main":"./dist-cjs/index.js","types":"./dist-types/index.d.ts","module":"./dist-es/index.js","sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.341.0","@aws-sdk/config-resolver":"3.341.0","@aws-sdk/credential-provider-node":"3.341.0","@aws-sdk/fetch-http-handler":"3.341.0","@aws-sdk/hash-node":"3.341.0","@aws-sdk/invalid-dependency":"3.341.0","@aws-sdk/middleware-content-length":"3.341.0","@aws-sdk/middleware-endpoint":"3.341.0","@aws-sdk/middleware-host-header":"3.341.0","@aws-sdk/middleware-logger":"3.341.0","@aws-sdk/middleware-recursion-detection":"3.341.0","@aws-sdk/middleware-retry":"3.341.0","@aws-sdk/middleware-serde":"3.341.0","@aws-sdk/middleware-signing":"3.341.0","@aws-sdk/middleware-stack":"3.341.0","@aws-sdk/middleware-user-agent":"3.341.0","@aws-sdk/node-config-provider":"3.341.0","@aws-sdk/node-http-handler":"3.341.0","@aws-sdk/smithy-client":"3.341.0","@aws-sdk/types":"3.341.0","@aws-sdk/url-parser":"3.341.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.341.0","@aws-sdk/util-defaults-mode-node":"3.341.0","@aws-sdk/util-endpoints":"3.341.0","@aws-sdk/util-retry":"3.341.0","@aws-sdk/util-user-agent-browser":"3.341.0","@aws-sdk/util-user-agent-node":"3.341.0","@aws-sdk/util-utf8":"3.310.0","@smithy/protocol-http":"^1.0.1","@smithy/types":"^1.0.0","tslib":"^2.5.0","uuid":"^8.3.2"},"devDependencies":{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31","@types/uuid":"^8.3.0","concurrently":"7.0.0","downlevel-dts":"0.10.1","rimraf":"3.0.2","typedoc":"0.23.23","typescript":"~4.9.5"},"engines":{"node":">=14.0.0"},"typesVersions":{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},"files":["dist-*/**"],"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","browser":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},"homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-chime-sdk-messaging","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-chime-sdk-messaging"}}`)},M39V:function(W,d,h){(function(g,p){W.exports=p()})(this,function(){return function(g){var p={};function u(m){if(p[m])return p[m].exports;var s=p[m]={i:m,l:!1,exports:{}};return g[m].call(s.exports,s,s.exports,u),s.l=!0,s.exports}return a(u,"r"),u.m=g,u.c=p,u.d=function(m,s,o){u.o(m,s)||Object.defineProperty(m,s,{enumerable:!0,get:o})},u.r=function(m){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},u.t=function(m,s){if(1&s&&(m=u(m)),8&s||4&s&&typeof m=="object"&&m&&m.__esModule)return m;var o=Object.create(null);if(u.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:m}),2&s&&typeof m!="string")for(var i in m)u.d(o,i,function(e){return m[e]}.bind(null,i));return o},u.n=function(m){var s=m&&m.__esModule?function(){return m.default}:function(){return m};return u.d(s,"a",s),s},u.o=function(m,s){return Object.prototype.hasOwnProperty.call(m,s)},u.p="",u(u.s=90)}({17:function(g,p,u){"use strict";p.__esModule=!0,p.default=void 0;var m=u(18),s=function(){function o(){}return a(o,"e"),o.getFirstMatch=function(i,e){var t=e.match(i);return t&&t.length>0&&t[1]||""},o.getSecondMatch=function(i,e){var t=e.match(i);return t&&t.length>1&&t[2]||""},o.matchAndReturnConst=function(i,e,t){if(i.test(e))return t},o.getWindowsVersionName=function(i){switch(i){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},o.getMacOSVersionName=function(i){var e=i.split(".").splice(0,2).map(function(t){return parseInt(t,10)||0});if(e.push(0),e[0]===10)switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},o.getAndroidVersionName=function(i){var e=i.split(".").splice(0,2).map(function(t){return parseInt(t,10)||0});if(e.push(0),!(e[0]===1&&e[1]<5))return e[0]===1&&e[1]<6?"Cupcake":e[0]===1&&e[1]>=6?"Donut":e[0]===2&&e[1]<2?"Eclair":e[0]===2&&e[1]===2?"Froyo":e[0]===2&&e[1]>2?"Gingerbread":e[0]===3?"Honeycomb":e[0]===4&&e[1]<1?"Ice Cream Sandwich":e[0]===4&&e[1]<4?"Jelly Bean":e[0]===4&&e[1]>=4?"KitKat":e[0]===5?"Lollipop":e[0]===6?"Marshmallow":e[0]===7?"Nougat":e[0]===8?"Oreo":e[0]===9?"Pie":void 0},o.getVersionPrecision=function(i){return i.split(".").length},o.compareVersions=function(i,e,t){t===void 0&&(t=!1);var n=o.getVersionPrecision(i),r=o.getVersionPrecision(e),c=Math.max(n,r),f=0,S=o.map([i,e],function(l){var y=c-o.getVersionPrecision(l),T=l+new Array(y+1).join(".0");return o.map(T.split("."),function(O){return new Array(20-O.length).join("0")+O}).reverse()});for(t&&(f=c-Math.min(n,r)),c-=1;c>=f;){if(S[0][c]>S[1][c])return 1;if(S[0][c]===S[1][c]){if(c===f)return 0;c-=1}else if(S[0][c]<S[1][c])return-1}},o.map=function(i,e){var t,n=[];if(Array.prototype.map)return Array.prototype.map.call(i,e);for(t=0;t<i.length;t+=1)n.push(e(i[t]));return n},o.find=function(i,e){var t,n;if(Array.prototype.find)return Array.prototype.find.call(i,e);for(t=0,n=i.length;t<n;t+=1){var r=i[t];if(e(r,t))return r}},o.assign=function(i){for(var e,t,n=i,r=arguments.length,c=new Array(r>1?r-1:0),f=1;f<r;f++)c[f-1]=arguments[f];if(Object.assign)return Object.assign.apply(Object,[i].concat(c));var S=a(function(){var l=c[e];typeof l=="object"&&l!==null&&Object.keys(l).forEach(function(y){n[y]=l[y]})},"o");for(e=0,t=c.length;e<t;e+=1)S();return i},o.getBrowserAlias=function(i){return m.BROWSER_ALIASES_MAP[i]},o.getBrowserTypeByAlias=function(i){return m.BROWSER_MAP[i]||""},o}();p.default=s,g.exports=p.default},18:function(g,p,u){"use strict";p.__esModule=!0,p.ENGINE_MAP=p.OS_MAP=p.PLATFORMS_MAP=p.BROWSER_MAP=p.BROWSER_ALIASES_MAP=void 0,p.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},p.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},p.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},p.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},p.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(g,p,u){"use strict";p.__esModule=!0,p.default=void 0;var m,s=(m=u(91))&&m.__esModule?m:{default:m},o=u(18);function i(t,n){for(var r=0;r<n.length;r++){var c=n[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}a(i,"a");var e=function(){function t(){}a(t,"e");var n,r,c;return t.getParser=function(f,S){if(S===void 0&&(S=!1),typeof f!="string")throw new Error("UserAgent should be a string");return new s.default(f,S)},t.parse=function(f){return new s.default(f).getResult()},n=t,c=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(r=null)&&i(n.prototype,r),c&&i(n,c),t}();p.default=e,g.exports=p.default},91:function(g,p,u){"use strict";p.__esModule=!0,p.default=void 0;var m=t(u(92)),s=t(u(93)),o=t(u(94)),i=t(u(95)),e=t(u(17));function t(r){return r&&r.__esModule?r:{default:r}}a(t,"u");var n=function(){function r(f,S){if(S===void 0&&(S=!1),f==null||f==="")throw new Error("UserAgent parameter can't be empty");this._ua=f,this.parsedResult={},S!==!0&&this.parse()}a(r,"e");var c=r.prototype;return c.getUA=function(){return this._ua},c.test=function(f){return f.test(this._ua)},c.parseBrowser=function(){var f=this;this.parsedResult.browser={};var S=e.default.find(m.default,function(l){if(typeof l.test=="function")return l.test(f);if(l.test instanceof Array)return l.test.some(function(y){return f.test(y)});throw new Error("Browser's test function is not valid")});return S&&(this.parsedResult.browser=S.describe(this.getUA())),this.parsedResult.browser},c.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},c.getBrowserName=function(f){return f?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},c.getBrowserVersion=function(){return this.getBrowser().version},c.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},c.parseOS=function(){var f=this;this.parsedResult.os={};var S=e.default.find(s.default,function(l){if(typeof l.test=="function")return l.test(f);if(l.test instanceof Array)return l.test.some(function(y){return f.test(y)});throw new Error("Browser's test function is not valid")});return S&&(this.parsedResult.os=S.describe(this.getUA())),this.parsedResult.os},c.getOSName=function(f){var S=this.getOS().name;return f?String(S).toLowerCase()||"":S||""},c.getOSVersion=function(){return this.getOS().version},c.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},c.getPlatformType=function(f){f===void 0&&(f=!1);var S=this.getPlatform().type;return f?String(S).toLowerCase()||"":S||""},c.parsePlatform=function(){var f=this;this.parsedResult.platform={};var S=e.default.find(o.default,function(l){if(typeof l.test=="function")return l.test(f);if(l.test instanceof Array)return l.test.some(function(y){return f.test(y)});throw new Error("Browser's test function is not valid")});return S&&(this.parsedResult.platform=S.describe(this.getUA())),this.parsedResult.platform},c.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},c.getEngineName=function(f){return f?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},c.parseEngine=function(){var f=this;this.parsedResult.engine={};var S=e.default.find(i.default,function(l){if(typeof l.test=="function")return l.test(f);if(l.test instanceof Array)return l.test.some(function(y){return f.test(y)});throw new Error("Browser's test function is not valid")});return S&&(this.parsedResult.engine=S.describe(this.getUA())),this.parsedResult.engine},c.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},c.getResult=function(){return e.default.assign({},this.parsedResult)},c.satisfies=function(f){var S=this,l={},y=0,T={},O=0;if(Object.keys(f).forEach(function(M){var k=f[M];typeof k=="string"?(T[M]=k,O+=1):typeof k=="object"&&(l[M]=k,y+=1)}),y>0){var R=Object.keys(l),F=e.default.find(R,function(M){return S.isOS(M)});if(F){var U=this.satisfies(l[F]);if(U!==void 0)return U}var _=e.default.find(R,function(M){return S.isPlatform(M)});if(_){var P=this.satisfies(l[_]);if(P!==void 0)return P}}if(O>0){var L=Object.keys(T),A=e.default.find(L,function(M){return S.isBrowser(M,!0)});if(A!==void 0)return this.compareVersion(T[A])}},c.isBrowser=function(f,S){S===void 0&&(S=!1);var l=this.getBrowserName().toLowerCase(),y=f.toLowerCase(),T=e.default.getBrowserTypeByAlias(y);return S&&T&&(y=T.toLowerCase()),y===l},c.compareVersion=function(f){var S=[0],l=f,y=!1,T=this.getBrowserVersion();if(typeof T=="string")return f[0]===">"||f[0]==="<"?(l=f.substr(1),f[1]==="="?(y=!0,l=f.substr(2)):S=[],f[0]===">"?S.push(1):S.push(-1)):f[0]==="="?l=f.substr(1):f[0]==="~"&&(y=!0,l=f.substr(1)),S.indexOf(e.default.compareVersions(T,l,y))>-1},c.isOS=function(f){return this.getOSName(!0)===String(f).toLowerCase()},c.isPlatform=function(f){return this.getPlatformType(!0)===String(f).toLowerCase()},c.isEngine=function(f){return this.getEngineName(!0)===String(f).toLowerCase()},c.is=function(f,S){return S===void 0&&(S=!1),this.isBrowser(f,S)||this.isOS(f)||this.isPlatform(f)},c.some=function(f){var S=this;return f===void 0&&(f=[]),f.some(function(l){return S.is(l)})},r}();p.default=n,g.exports=p.default},92:function(g,p,u){"use strict";p.__esModule=!0,p.default=void 0;var m,s=(m=u(17))&&m.__esModule?m:{default:m},o=/version\/(\d+(\.?_?\d+)+)/i,i=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=s.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||s.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=s.default.getFirstMatch(o,e)||s.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=s.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||s.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=s.default.getFirstMatch(o,e)||s.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=s.default.getFirstMatch(o,e)||s.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=s.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||s.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=s.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||s.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=s.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||s.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=s.default.getFirstMatch(o,e)||s.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=s.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=s.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=s.default.getFirstMatch(o,e)||s.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=s.default.getFirstMatch(o,e)||s.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=s.default.getFirstMatch(o,e)||s.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=s.default.getFirstMatch(o,e)||s.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=s.default.getFirstMatch(o,e)||s.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=s.default.getFirstMatch(o,e)||s.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=s.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=s.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=s.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=s.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=s.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=s.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=s.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=s.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=s.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=s.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=s.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=s.default.getFirstMatch(o,e)||s.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=s.default.getFirstMatch(o,e)||s.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=s.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=s.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=s.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=s.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=s.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=s.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=s.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=s.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=s.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=s.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=s.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=s.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=e.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:s.default.getFirstMatch(t,e),version:s.default.getSecondMatch(t,e)}}}];p.default=i,g.exports=p.default},93:function(g,p,u){"use strict";p.__esModule=!0,p.default=void 0;var m,s=(m=u(17))&&m.__esModule?m:{default:m},o=u(18),i=[{test:[/Roku\/DVP/],describe:function(e){var t=s.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=s.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=s.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=s.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=s.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=s.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=s.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=s.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=s.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=s.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=s.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=s.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||s.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||s.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=s.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=s.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=s.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];p.default=i,g.exports=p.default},94:function(g,p,u){"use strict";p.__esModule=!0,p.default=void 0;var m,s=(m=u(17))&&m.__esModule?m:{default:m},o=u(18),i=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=s.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=s.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return e.getBrowserName(!0)==="blackberry"},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return e.getBrowserName(!0)==="bada"},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return e.getBrowserName()==="windows phone"},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return e.getOSName(!0)==="android"},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return e.getOSName(!0)==="macos"},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return e.getOSName(!0)==="windows"},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return e.getOSName(!0)==="linux"},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return e.getOSName(!0)==="playstation 4"},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return e.getOSName(!0)==="roku"},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];p.default=i,g.exports=p.default},95:function(g,p,u){"use strict";p.__esModule=!0,p.default=void 0;var m,s=(m=u(17))&&m.__esModule?m:{default:m},o=u(18),i=[{test:function(e){return e.getBrowserName(!0)==="microsoft edge"},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=s.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=s.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=s.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=s.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=s.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];p.default=i,g.exports=p.default}})})},M9Lm:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});const p=h("hlxM"),u=h("nSNv");let m=a(class extends u.VoiceFocusAudioWorkletNode{enable(){return g(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return g(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return g(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(o){var i;const e=o.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(o){var i;const e=o.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(o,i){super(o,i.processor,i),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:n,fetchBehavior:r,delegate:c}=i;this.delegate=c,this.worker=n,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:f,agc:S,supportFarendStream:l}=i.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:o.sampleRate===16e3?160:480,enabled:f,agc:S,fetchBehavior:r,model:e,supportFarendStream:l});const y=p.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:y,key:"buffer",fetchBehavior:r,path:t})}},"VoiceFocusWorkerPostMessageNode");d.default=m},MFJ1:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=h("rwhO"),m=p(h("3EKQ"));let s=a(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(i){this.logger.error(`Event Reporting - Error starting the event buffer ${i}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(i){this.logger.error(`Event Reporting - Error stopping the event buffer ${i}`)}}reportEvent(i,e,t){return g(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${i}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:i,name:e,attributes:t})}catch(n){this.logger.error(`Event Reporting - Error adding event to buffer ${n}`)}})}destroy(){return g(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),u.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(i,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:n,eventBufferConfiguration:r}=i,{eventsToIgnore:c}=t;this.eventBuffer=new m.default(r,t,n,this.importantEvents,e),this.logger=e,this.eventsToIgnore=c,this.start()}},"DefaultMeetingEventReporter");d.default=s},ML5K:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("6/h7")),u=g(h("8wPz")),m=g(h("hEYi")),s=h("f2XL"),o=h("KyYT");let i=a(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const n of this.observerQueue)p.default.nextTick(()=>{this.observerQueue.has(n)&&t(n)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(n=>{o.Maybe.of(n.didMissPongs).map(r=>r.bind(n)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=s.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=s.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const n=s.SdkPingPongFrame.create();n.pingId=t,n.type=s.SdkPingPongType.PONG,this.signalingClient.pingPong(n)}handleSignalingClientEvent(t){switch(t.type){case m.default.WebSocketOpen:this.startPingInterval();break;case m.default.WebSocketFailed:case m.default.WebSocketError:this.logger.warn(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.WebSocketClosing:case m.default.WebSocketClosed:this.logger.info(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.ReceivedSignalFrame:if(t.message.type!==s.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===s.SdkPingPongType.PONG){const n=t.message.pingPong.pingId;if(n!==this.pingId){this.logger.warn(`unexpected ping id ${n} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let r;if(typeof t.message.timestampMs=="number")r=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${n} with timestamp ${r}`);const f=t.timestampMs-this.pingTimestampLocalMs,S=Math.round(r-f/2),l=this.pingTimestampLocalMs-S;this.logger.info(`local clock skew estimate=${l}ms from ping-pong time=${f}ms`),this.forEachObserver(y=>{o.Maybe.of(y.didReceivePong).map(T=>T.bind(y)(n,l,f))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,n,r){this.signalingClient=t,this.intervalMs=n,this.logger=r,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new u.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");d.default=i},MW3S:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.numToUint8=void 0;function g(p){return new Uint8Array([(p&4278190080)>>24,(p&16711680)>>16,(p&65280)>>8,p&255])}a(g,"numToUint8"),d.numToUint8=g},MdQ0:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.uint32ArrayFrom=d.numToUint8=d.isEmptyData=d.convertToBuffer=void 0;var g=h("xsFo");Object.defineProperty(d,"convertToBuffer",{enumerable:!0,get:function(){return g.convertToBuffer}});var p=h("C5aR");Object.defineProperty(d,"isEmptyData",{enumerable:!0,get:function(){return p.isEmptyData}});var u=h("MW3S");Object.defineProperty(d,"numToUint8",{enumerable:!0,get:function(){return u.numToUint8}});var m=h("ZzQ1");Object.defineProperty(d,"uint32ArrayFrom",{enumerable:!0,get:function(){return m.uint32ArrayFrom}})},MelK:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=h("cYl2");let p=a(class qd{compress(m,s){if(s.length>0){const e=Math.min(s.length,qd.MAX_DICTIONARY_SIZE);s=s.slice(0,e)}const o={memLevel:qd.Z_MEM_LEVEL,dictionary:s};return g.deflateRaw(m,o)}decompress(m,s){if(s.length>0){const e=Math.min(s.length,qd.MAX_DICTIONARY_SIZE);s=s.slice(0,e)}const o={to:"string",dictionary:s,chunkSize:4096};let i="";try{i=g.inflateRaw(m,o)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return i}constructor(m){this.logger=m}},"ZLIBTextCompressor");d.default=p,p.Z_MEM_LEVEL=9,p.MAX_DICTIONARY_SIZE=31744},MhWp:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=h("f2XL");let p=a(class Ku{clone(){const m=new Ku;return m.attendeeId=this.attendeeId,m.groupId=this.groupId,m.streamId=this.streamId,m.ssrc=this.ssrc,m.trackLabel=this.trackLabel,m.maxBitrateKbps=this.maxBitrateKbps,m.avgBitrateKbps=this.avgBitrateKbps,m.maxFrameRate=this.maxFrameRate,m.timeEnabled=this.timeEnabled,m.disabledByWebRTC=this.disabledByWebRTC,m.disabledByUplinkPolicy=this.disabledByUplinkPolicy,m.width=this.width,m.height=this.height,m}toStreamDescriptor(){const m=g.SdkStreamDescriptor.create();return m.mediaType=g.SdkStreamMediaType.VIDEO,m.trackLabel=this.trackLabel,m.attendeeId=this.attendeeId,m.streamId=this.streamId,m.groupId=this.groupId,m.framerate=this.maxFrameRate,m.maxBitrateKbps=this.disabledByUplinkPolicy||this.disabledByWebRTC?0:this.maxBitrateKbps,m.avgBitrateBps=this.avgBitrateKbps,m}totalPixels(){return this.width*this.height}constructor(m,s,o,i,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=m,this.groupId=s,this.streamId=o,this.maxBitrateKbps=i,this.avgBitrateKbps=e}},"VideoStreamDescription");d.default=p},MpTp:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class $l{add(u){this.ids.add(u)}array(){return Array.from(this.ids.values()).sort((m,s)=>m-s)}contain(u){return this.ids.has(u)}forEach(u){this.ids.forEach(u)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(u){if(!u)return this.ids.size===0;const m=this.array(),s=u.array();if(m.length!==s.length)return!1;for(let o=0;o<m.length;o++)if(m[o]!==s[o])return!1;return!0}clone(){return new $l(this.array())}remove(u){this.ids.delete(u)}toJSON(){return this.array()}truncate(u){const m=this.array();return new $l(m.splice(0,u))}constructor(u){this.ids=new Set(u)}},"DefaultVideoStreamIdSet");d.default=g},Mr6q:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{addObserver(u){this.observers.add(u)}removeObserver(u){this.observers.delete(u)}filterFrameDurationHigh(u){var m;for(const s of this.observers)(m=s.filterFrameDurationHigh)===null||m===void 0||m.call(s,u)}filterCPUUtilizationHigh(u){var m;for(const s of this.observers)(m=s.filterCPUUtilizationHigh)===null||m===void 0||m.call(s,u)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");d.default=g},MvPG:function(W,d,h){"use strict";h.d(d,"a",function(){return e}),h.d(d,"b",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={UnknownMethod:"unknown_method",AccessDenied:"access_denied",TriggerNotFound:"trigger_not_found"},t=Object(s.a)("workflows.triggers.info generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"workflows.triggers.info",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to workflows.triggers.info
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherworkflowsTriggersInfoFetcher",description:"workflows.triggers.info generated fetcher"}},N7sO:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.isEmptyData=void 0;function g(p){return typeof p=="string"?p.length===0:p.byteLength===0}a(g,"isEmptyData"),d.isEmptyData=g},N8ne:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("mlaT"));let u=a(class{info(s){for(const o of this._loggers)o.info(s)}warn(s){for(const o of this._loggers)o.warn(s)}error(s){for(const o of this._loggers)o.error(s)}debug(s){let o,i;typeof s=="string"?i=s:s?i=a(()=>(o||(o=s()),o),"memoized"):i=""+s;for(const e of this._loggers)e.debug(i)}setLogLevel(s){for(const o of this._loggers)o.setLogLevel(s)}getLogLevel(){for(const s of this._loggers)return s.getLogLevel();return p.default.OFF}constructor(...s){this._loggers=s}},"MultiLogger");d.default=u},N9oo:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("lUhs")),m=p(h("AUdx")),s=p(h("aVV0"));let o=a(class $u extends s.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return g(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new m.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new m.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=n=>{this.removeEventListener(),t(n)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=n=>{if(this.context.logger.info(`ice candidate: ${n.candidate?n.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),n.candidate&&(m.default.isRTPCandidate(n.candidate.candidate)&&this.context.iceCandidates.push(n.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new m.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=$u.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");d.default=o,o.CHROME_VPN_TIMEOUT_MS=5e3},NBIk:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.VideoQualityAdaptationPreference=void 0;var g;(function(p){p[p.Balanced=0]="Balanced",p[p.MaintainFramerate=1]="MaintainFramerate",p[p.MaintainResolution=2]="MaintainResolution"})(g=d.VideoQualityAdaptationPreference||(d.VideoQualityAdaptationPreference={})),d.default=g},NDMw:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.isAudioTransformDevice=void 0;function g(p){return!!p&&typeof p=="object"&&"mute"in p&&"stop"in p&&"intrinsicDevice"in p}a(g,"isAudioTransformDevice"),d.isAudioTransformDevice=g},NE7a:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");d.default=g},NFcc:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckVideoInputFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.Failed=1]="Failed",p[p.PermissionDenied=2]="PermissionDenied"})(g=d.CheckVideoInputFeedback||(d.CheckVideoInputFeedback={})),d.default=g},NGEu:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={UserNotFound:"user_not_found",InvalidInviteType:"invalid_invite_type",Ratelimited:"ratelimited"},t=Object(s.a)("connectInvites.list generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"connectInvites.list",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to connectInvites.list
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconnectInvitesListFetcher",description:"connectInvites.list generated fetcher"}},NUAg:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("IBi3"));let u=a(class extends p.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(s,o,i){super(s,o,i)}},"VideoOnlyTransceiverController");d.default=u},NWIo:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("riOr"));let u=a(class{updateConnectionMetric(s){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var s,o,i,e,t,n,r,c,f,S,l,y;const T=new Map,O=1e3,R=p.default.NAME_ARR_ASCENDING;return T.set(R[0],{rid:R[0],active:!0,scaleResolutionDownBy:((o=(s=this.encodingParams)===null||s===void 0?void 0:s.low)===null||o===void 0?void 0:o.scaleResolutionDownBy)||2,maxBitrate:(((e=(i=this.encodingParams)===null||i===void 0?void 0:i.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*O,maxFramerate:((n=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||n===void 0?void 0:n.maxFramerate)||5}),T.set(R[1],{rid:R[1],active:!0,scaleResolutionDownBy:((c=(r=this.encodingParams)===null||r===void 0?void 0:r.high)===null||c===void 0?void 0:c.scaleResolutionDownBy)||1,maxBitrate:(((S=(f=this.encodingParams)===null||f===void 0?void 0:f.high)===null||S===void 0?void 0:S.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*O,maxFramerate:(y=(l=this.encodingParams)===null||l===void 0?void 0:l.high)===null||y===void 0?void 0:y.maxFramerate}),this.getQualityMapString(T),T}updateIndex(s){this.videoIndex=s}wantsResubscribe(){var s,o;let i=!1;this.nextLocalDescriptions=(s=this.videoIndex)===null||s===void 0?void 0:s.localStreamDescriptions();for(let e=0;e<((o=this.nextLocalDescriptions)===null||o===void 0?void 0:o.length);e++){const t=this.nextLocalDescriptions[e].streamId;if(t!==0&&t){const n=this.currLocalDescriptions.findIndex(r=>r.streamId===t);n!==-1&&this.nextLocalDescriptions[e].disabledByWebRTC!==this.currLocalDescriptions[n].disabledByWebRTC&&(i=!0)}}return this.currLocalDescriptions=this.nextLocalDescriptions,i}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(s){}setHasBandwidthPriority(s){}setHighResolutionFeatureEnabled(s){this.enableUhdContent=s,this.defaultHiTargetBitrateKbps=s?2e3:1200,this.defaultLowTargetBitrateKbps=s?500:300}getQualityMapString(s){var o;let i="";const e=(o=this.videoIndex)===null||o===void 0?void 0:o.localStreamDescriptions();(e==null?void 0:e.length)>0&&(s.forEach(t=>{let n=!1;t.rid==="low"?n=e[0].disabledByWebRTC:n=e[1].disabledByWebRTC,i+=`{ rid: ${t.rid} active:${t.active} disabledByWebRTC: ${n} maxBitrate:${t.maxBitrate} scaleResolutionDownBy:${t.scaleResolutionDownBy} maxFrameRate:${t.maxFramerate}`}),this.logger.info(`simulcast: content policy:chooseEncodingParameters newQualityMap: ${i}`))}addObserver(s){}removeObserver(s){}forEachObserver(s){}constructor(s,o){this.logger=s,this.encodingParams=o,this.videoIndex=null,this.currLocalDescriptions=[],this.nextLocalDescriptions=[],this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");d.default=u},Ni8D:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{reportEvent(u,m,s){}start(){}stop(){}constructor(){}},"NoOpEventReporter");d.default=g},Np2I:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const u=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,u}constructor(u,m,s){this.fixedWaitMs=u,this.shortBackoffMs=m,this.longBackoffMs=s,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");d.default=g},Nzn3:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(u){}},"NoOpTask");d.default=g},O9RP:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.DeferredPromise=void 0;let g=a(class{getPromise(){return this.promise}resolvePromise(u){this.resolve(u)}resolveAndReplacePromise(u){this.resolve(u),this.promise=new Promise((m,s)=>{this.resolve=m,this.reject=s})}rejectPromise(u){this.reject(u)}rejectAndReplacePromise(u){this.reject(u),this.promise=new Promise((m,s)=>{this.resolve=m,this.reject=s})}constructor(){this.promise=new Promise((u,m)=>{this.resolve=u,this.reject=m})}},"DeferredPromise");d.DeferredPromise=g},OEM7:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=h("XCDq");let p=a(class Ju{clone(){const m=new Ju;return m.attendeeId=this.attendeeId,m.groupId=this.groupId,m.streamId=this.streamId,m.ssrc=this.ssrc,m.trackLabel=this.trackLabel,m.maxBitrateKbps=this.maxBitrateKbps,m.avgBitrateKbps=this.avgBitrateKbps,m.maxFrameRate=this.maxFrameRate,m.timeEnabled=this.timeEnabled,m.disabledByWebRTC=this.disabledByWebRTC,m.disabledByUplinkPolicy=this.disabledByUplinkPolicy,m.width=this.width,m.height=this.height,m}toStreamDescriptor(){const m=g.SdkStreamDescriptor.create();return m.mediaType=g.SdkStreamMediaType.VIDEO,m.trackLabel=this.trackLabel,m.attendeeId=this.attendeeId,m.streamId=this.streamId,m.groupId=this.groupId,m.framerate=this.maxFrameRate,m.maxBitrateKbps=this.disabledByUplinkPolicy||this.disabledByWebRTC?0:this.maxBitrateKbps,m.avgBitrateBps=this.avgBitrateKbps,m}totalPixels(){return this.width*this.height}constructor(m,s,o,i,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=m,this.groupId=s,this.streamId=o,this.maxBitrateKbps=i,this.avgBitrateKbps=e}},"VideoStreamDescription");d.default=p},OND3:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("IBi3"));let m=a(class jr extends u.default{setEncodingParameters(o){return g(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(o.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(let n=0;n<t.encodings.length;n++)t.encodings[n].rid===jr.LOW_LEVEL_NAME&&this.copyEncodingParams(o.get(jr.LOW_LEVEL_NAME),t.encodings[n]),t.encodings[n].rid===jr.MID_LEVEL_NAME&&this.copyEncodingParams(o.get(jr.MID_LEVEL_NAME),t.encodings[n]),t.encodings[n].rid===jr.HIGH_LEVEL_NAME&&this.copyEncodingParams(o.get(jr.HIGH_LEVEL_NAME),t.encodings[n]);yield i.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(o){return g(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var o,i;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((i=(o=this.meetingSessionContext)===null||o===void 0?void 0:o.audioProfile)===null||i===void 0)&&i.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const i=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of i)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(o,i){i.active=o.active,i.maxBitrate=o.maxBitrate,i.scaleResolutionDownBy=o.scaleResolutionDownBy,i.maxFramerate=o.maxFramerate}constructor(o,i,e){super(o,i,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let n=0;n<jr.NAME_ARR_ASCENDING.length;n++){const r=jr.NAME_ARR_ASCENDING[n];this.videoQualityControlParameterMap.set(r,{rid:r,scaleResolutionDownBy:t,maxBitrate:jr.BITRATE_ARR_ASCENDING[n]*1e3}),t=t/2}}},"SimulcastTransceiverController");d.default=m,m.LOW_LEVEL_NAME="low",m.MID_LEVEL_NAME="mid",m.HIGH_LEVEL_NAME="hi",m.NAME_ARR_ASCENDING=["low","mid","hi"],m.BITRATE_ARR_ASCENDING=[200,400,1100]},OV1w:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("/AJg"));let u=a(class{constructor(s){this.applicationMetadata=s,this.serverSideNetworkAdaption=p.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");d.default=u},Obod:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(c,f,S,l){function y(T){return T instanceof S?T:new S(function(O){O(T)})}return a(y,"adopt"),new(S||(S=Promise))(function(T,O){function R(_){try{U(l.next(_))}catch(P){O(P)}}a(R,"fulfilled");function F(_){try{U(l.throw(_))}catch(P){O(P)}}a(F,"rejected");function U(_){_.done?T(_.value):y(_.value).then(R,F)}a(U,"step"),U((l=l.apply(c,f||[])).next())})},p=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("IsLT")),m=p(h("zd8f")),s=p(h("mlaT")),o=p(h("ZZPe")),i=p(h("PR0U")),e=p(h("hrQK")),t=p(h("gLI0"));let n=a(class extends o.default{setBlurStrength(){}loadAssets(){return g(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),r=a(class ha extends u.default{static create(f,S){return g(this,void 0,void 0,function*(){f=ha.resolveSpec(f),S=ha.resolveOptions(S);const{logger:l}=S,y=yield ha.isSupported(f,S);if(l.info(`processor is ${y?"":"not"} supported`),!y)return l.warn("Using no-op processor because background blur is not supported"),new n;let T;return(yield e.default.isSupported())?(l.info("Using browser-provided background blur"),T=new e.default(f,S)):(l.info("Using built-in background blur"),T=new i.default(f,S)),yield T.loadAssets(),T})}static resolveOptions(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=Object.assign({},f);return S.blurStrength||(S.blurStrength=t.default.MEDIUM),S.logger||(S.logger=new m.default("BackgroundBlurProcessor",s.default.INFO)),S=super.resolveOptions(S),S}static isSupported(f,S){return f=ha.resolveSpec(f),S=ha.resolveOptions(S),super.isSupported(f,S)}},"BackgroundBlurVideoFrameProcessor");d.default=r},OcJO:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");d.default=g},OdWA:function(W,d,h){"use strict";h.d(d,"a",function(){return e});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e=Object(s.a)("users.interactions.list generated fetcher",function(){var t=Object(g.coroutine)(function*(n,r,c){try{const f=["reason"],S=Object(u.a)(c,f),l=Object(i.b)(S),y=yield n(Object(m.apiCall)({method:"users.interactions.list",args:l,reason:c.reason}));return Object(i.a)(y)}catch(f){throw Object(o.a)({getState:r}).error(`API call to users.interactions.list
				with reason ${c.reason} failed, initiated by generated fetcher`),f}});return function(n,r,c){return t.apply(this,arguments)}}());e.meta={name:"createFetcher",key:"createFetcherusersInteractionsListFetcher",description:"users.interactions.list generated fetcher"}},Ol9i:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"TranscriptItem");d.default=g},Olm7:function(W,d,h){"use strict";var g=h("fywt"),p=h("ntxC");function u(m,s){var o=[];if(!(m&&m.length))return o;var i=-1,e=[],t=m.length;for(s=Object(g.a)(s,3);++i<t;){var n=m[i];s(n,i,m)&&(o.push(n),e.push(i))}return Object(p.a)(m,e),o}a(u,"remove"),d.a=u},Oxpw:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g;(function(p){p.Unread="unread",p.LastMessageTimestamp="last-message-timestamp"})(g||(g={})),d.default=g},P3Bx:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class el{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(u){let m=0;for(const s of u.streams){const o=!!s.attendeeId,i=!!s.externalUserId,e=s.hasOwnProperty("muted"),t=!!s.dropped;if(o){this.attendeeIdToStreamId[s.attendeeId]&&this.attendeeIdToStreamId[s.attendeeId]<s.audioStreamId&&delete this.attendeeIdToStreamId[s.attendeeId],this.streamIdToAttendeeId[s.audioStreamId]=s.attendeeId;const n=i?s.externalUserId:s.attendeeId;this.streamIdToExternalUserId[s.audioStreamId]=n,this.attendeeIdToStreamId[s.attendeeId]=s.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(s.attendeeId,!0,n,!1,{attendeeIndex:m++,attendeesInFrame:u.streams.length})}if(e){const n=this.streamIdToAttendeeId[s.audioStreamId],r=this.streamIdToExternalUserId[s.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(n,null,s.muted,null,r)}if(!o&&!e){const n=this.streamIdToAttendeeId[s.audioStreamId];if(n){const r=this.streamIdToExternalUserId[s.audioStreamId];delete this.streamIdToAttendeeId[s.audioStreamId],delete this.streamIdToExternalUserId[s.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[s.audioStreamId],this.attendeeIdToStreamId[n]===s.audioStreamId&&delete this.attendeeIdToStreamId[n];let c=!1;for(const f of Object.keys(this.streamIdToAttendeeId)){const S=parseInt(f);if(S>s.audioStreamId&&this.streamIdToAttendeeId[S]===n){c=!0;break}}c||this.realtimeController.realtimeSetAttendeeIdPresence(n,!1,r,t,{attendeeIndex:m++,attendeesInFrame:u.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(u),this.sessionReconnected=!1)}cleanUpState(u){const m=Object.values(this.streamIdToAttendeeId),s=u.streams.map(i=>i.attendeeId),o=m.filter(i=>!s.includes(i));for(const[i,e]of o.entries()){const t=this.attendeeIdToStreamId[e],n=this.streamIdToExternalUserId[t];if(delete this.streamIdToAttendeeId[t],delete this.streamIdToExternalUserId[t],delete this.warnedAboutMissingStreamIdMapping[t],delete this.attendeeIdToStreamId[e],e===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(e,!1,n,!1,{attendeeIndex:i,attendeesInFrame:e.length})}}sendRealtimeUpdatesForAudioMetadata(u){let m=null,s=null;for(const o of u.attendeeStates){const i=this.attendeeIdForStreamId(o.audioStreamId);o.hasOwnProperty("volume")&&(m===null&&(m={}),i!==null&&(m[i]=this.normalizedVolume(o))),o.hasOwnProperty("signalStrength")&&(s===null&&(s={}),i!==null&&(s[i]=this.normalizedSignalStrength(o)))}this.applyRealtimeUpdatesForAudioMetadata(m,s)}normalizedVolume(u){const s=1-(-u.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(s,0),1)}normalizedSignalStrength(u){const m=u.signalStrength/el.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(m,0),1)}applyRealtimeUpdatesForAudioMetadata(u,m){for(const s in this.streamIdToAttendeeId){const o=this.streamIdToAttendeeId[s],i=this.streamIdToExternalUserId[s];let e=null,t=null;u!==null&&(u.hasOwnProperty(o)?e=u[o]:e=el.IMPLICIT_VOLUME),m!==null&&(m.hasOwnProperty(o)?t=m[o]:t=el.IMPLICIT_SIGNAL_STRENGTH),(e!==null||t!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(o,e,null,t,i)}}attendeeIdForStreamId(u){if(u===0)return null;const m=this.streamIdToAttendeeId[u];return m||(this.warnedAboutMissingStreamIdMapping[u]||(this.warnedAboutMissingStreamIdMapping[u]=!0,this.logger.warn(`volume indicator stream id ${u} seen before being defined`)),null)}constructor(u,m,s,o,i){this.logger=u,this.realtimeController=m,this.minVolumeDecibels=s,this.maxVolumeDecibels=o,this.selfAttendeeId=i,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");d.default=g,g.MAX_SIGNAL_STRENGTH_LEVELS=2,g.IMPLICIT_VOLUME=0,g.IMPLICIT_SIGNAL_STRENGTH=1},"P7D+":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0}),d.VideoPreferences=d.MutableVideoPreferences=d.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const p=g(h("/sFY"));function u(e,t,n){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||n===void 0)return[];const r=new Array,c=new Map,f=new Map;for(const S of t){const l=e.transceiverController.getMidForGroupId(S);if(l===void 0)continue;const y=e.videoStreamIndex.attendeeIdForGroupId(S);c.set(y,l),f.set(y,S)}for(const S of n){const l=new p.default,y=c.get(S.attendeeId);y!==void 0&&(l.mid=y,l.attendeeId=S.attendeeId,l.groupId=f.get(S.attendeeId),l.priority=Number.MAX_SAFE_INTEGER-S.priority,l.targetBitrateKbps=S.targetSizeToBitrateKbps(S.targetSize),l.qualityAdaptationPreference=S.degradationPreference,r.push(l))}return r}a(u,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),d.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=u;let m=a(class Jl{static default(){return new Jl([])}[Symbol.iterator](){let t=0;const n=this.items;return{next(){return t<n.length?{done:!1,value:n[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,n){const r=this.items.findIndex(n);r===-1?this.items.push(t):this.has(t)?this.items.splice(r,1):this.items[r]=t}remove(t){this.items=this.items.filter(n=>!n.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const n of this.items)if(!t.items.some(r=>r.equals(n)))return!1;return!0}has(t){return this.items.some(n=>n.equals(t))}some(t){return this.items.some(t)}clone(){return new Jl([...this.items])}sort(){this.items.sort((t,n)=>t.partialCompare(n))}modify(){return new s(this)}constructor(t=[]){this.items=t}},"ObjectSet"),s=a(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,n){this.items.has(t)&&!this.items.some(n)||(this.cow(),this.items.replaceFirst(t,n))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new m){this.items=t,this.copied=!1}},"SetBuilder"),o=a(class{add(t){this.builder.add(t)}replaceFirst(t,n){this.builder.replaceFirst(t,n)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new i(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");d.MutableVideoPreferences=o;let i=a(class Yl{static prepare(){return new o(new s)}static default(){return new Yl(m.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new o(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=Yl.prepare();for(const n of this.items)t.add(n.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");d.VideoPreferences=i,d.default=i},P7Xm:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("Biyp"));let m=a(class pa{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new u.default(0,0,0,0,!1),this.parametersInEffect=new u.default(0,0,0,0,!1),this.encodingParamMap.set(pa.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(o){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(o){var i;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=o.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),n=o.numberOfParticipants();if(this.numParticipants===n&&this.numberOfPublishedVideoSources===t){(i=this.logger)===null||i===void 0||i.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=n,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let o=1;if(this.transceiverController){const i=this.getStreamCaptureSetting();i&&(o=this.calculateEncodingParameters(i).scaleResolutionDownBy)}this.optimalParameters=new u.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,o,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let o=640;return this.getNumberOfPublishedVideoSources()>4&&(o=320),o}captureHeight(){let o=384;return this.getNumberOfPublishedVideoSources()>4&&(o=192),o}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let o=0;return this.getNumberOfPublishedVideoSources()<=2?o=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?o=this.idealMaxBandwidthKbps*2/3:o=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(o)}setIdealMaxBandwidthKbps(o){this.idealMaxBandwidthKbps=o}setHasBandwidthPriority(o){this.hasBandwidthPriority=o}setTransceiverController(o){this.transceiverController=o}setSVCEnabled(o){var i;this.enableSVC=o,(i=this.logger)===null||i===void 0||i.info(`setSVCEnabled, enable: ${o}}`)}setHighResolutionFeatureEnabled(o){this.enableHighResolutionFeature=o}updateTransceiverController(){return g(this,void 0,void 0,function*(){const o=this.getStreamCaptureSetting();if(!o)return;const i=this.calculateEncodingParameters(o);this.shouldUpdateEndcodingParameters(i)&&(this.encodingParamMap.set(pa.encodingMapKey,i),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(o){var i,e;const t=(e=(i=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||i===void 0?void 0:i.encodings)===null||e===void 0?void 0:e[0];return o.maxBitrate!==(t==null?void 0:t.maxBitrate)||o.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(o==null?void 0:o.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(o){var i,e,t;const n=this.maxBandwidthKbps()*1e3;let r=1,c=720;if(o.height!==void 0&&o.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(c=pa.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),pa.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],c===480&&(!((i=this.browserBehavior)===null||i===void 0)&&i.disable480pResolutionScaleDown())&&(c=360),r=Math.max(Math.min(o.height,o.width)/c,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${r} for capture resolution ${o.width}x${o.height}. New dimension is ${o.width/r}x${o.height/r}`)),this.enableSVC){let f;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?f="L1T1":f=c>=720?"L3T3":c>=360?"L2T3":"L1T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${n}  targetHeight: ${c}  scalabilityMode: ${f}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:r,maxBitrate:n,scalabilityMode:f}}else return{scaleResolutionDownBy:r,maxBitrate:n}}getStreamCaptureSetting(){var o,i,e,t;return(t=(e=(i=(o=this.transceiverController)===null||o===void 0?void 0:o.localVideoTransceiver())===null||i===void 0?void 0:i.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var o;return(o=this.numberOfPublishedVideoSources)!==null&&o!==void 0?o:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(o,i){const e=o??i,t=e.length>0&&pa.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(o,i=!0,e=void 0,t=void 0){this.selfAttendeeId=o,this.scaleResolution=i,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");d.default=m,m.encodingMapKey="video",m.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],m.SVCCodecNames=["VP9"]},PDX0:function(W,d){(function(h){W.exports=h}).call(this,{})},PPZC:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.AudioLogEvent=void 0;var g;(function(p){p[p.DeviceChanged=0]="DeviceChanged",p[p.MutedLocal=1]="MutedLocal",p[p.UnmutedLocal=2]="UnmutedLocal",p[p.Connected=3]="Connected",p[p.ConnectFailed=4]="ConnectFailed",p[p.RedmicStartLoss=5]="RedmicStartLoss",p[p.RedmicEndLoss=6]="RedmicEndLoss"})(g=d.AudioLogEvent||(d.AudioLogEvent={})),d.default=g},PR0U:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("hrQK")),m=h("gLI0");let s=a(class extends u.default{drawImageWithMask(i,e){const t=this.blurredImage,{canvasCtx:n,targetCanvas:r}=this,{width:c,height:f}=r;if(!e||!t){n.clearRect(0,0,c,f);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),n.save(),n.clearRect(0,0,c,f),n.drawImage(this.scaledCanvas,0,0,c,f),n.globalCompositeOperation="source-in",n.drawImage(i,0,0,c,f),n.globalCompositeOperation="destination-over",n.drawImage(this.blurCanvas,0,0,c,f),n.restore()}setBlurStrength(i){if(super.setBlurStrength(i),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(i){this.blurredImage=i.payload.blurOutput,super.handlePredict(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return g(this,void 0,void 0,function*(){i.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(i,e){super(i,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");d.default=s},PSPT:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(F,U,_,P){function L(A){return A instanceof _?A:new _(function(M){M(A)})}return a(L,"adopt"),new(_||(_=Promise))(function(A,M){function k(H){try{K(P.next(H))}catch(X){M(X)}}a(k,"fulfilled");function G(H){try{K(P.throw(H))}catch(X){M(X)}}a(G,"rejected");function K(H){H.done?A(H.value):L(H.value).then(k,G)}a(K,"step"),K((P=P.apply(F,U||[])).next())})},p=this&&this.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("kUL9")),m=p(h("U9CR")),s=p(h("ZsEg")),o=p(h("wkYg")),i=p(h("j+uH")),e=p(h("iQPr")),t=p(h("PmG3")),n=p(h("ig3o")),r=p(h("Rx4Y")),c=p(h("nWLk")),f=p(h("s3Gi")),S=p(h("VKrp")),l=p(h("M1uR")),y=p(h("sTsL")),T=p(h("6k9T")),O=p(h("dazq"));let R=a(class Yu{static delay(U){return g(this,void 0,void 0,function*(){return new Promise(_=>setTimeout(_,U))})}checkAudioInput(U){return g(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(U),yield this.meetingSession.audioVideo.stopAudioInput(),n.default.Succeeded}catch(_){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${_}`),_ instanceof o.default?n.default.PermissionDenied:n.default.Failed}})}checkAudioOutput(U,_){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return g(this,void 0,void 0,function*(){try{const L=U?s.default.getIntrinsicDeviceId(U):"";return yield this.playTone(L,this.configuration.audioOutputFrequency,P),(yield _())?r.default.Succeeded:r.default.Failed}catch(L){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${L}`),r.default.Failed}finally{this.stopTone()}})}playTone(U,_,P){return g(this,void 0,void 0,function*(){const A=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=s.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=_,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const k=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,k),this.gainNode.gain.linearRampToValueAtTime(A,k+.1),this.oscillatorNode.start();const G=new u.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield G.bindAudioDevice({deviceId:U}))}catch(K){this.logger.error(`Failed to bind audio device: ${K}`)}try{yield G.bindAudioElement(P||new Audio)}catch(K){this.logger.error(`Failed to bind audio element: ${K}`)}yield G.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const U=1,_=.1,P=this.configuration.audioOutputGain,L=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(P,L+_+U),this.gainNode.gain.linearRampToValueAtTime(0,L+_*2+U),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(U){return g(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(U),yield this.meetingSession.audioVideo.stopVideoInput(),T.default.Succeeded}catch(_){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${_}`),_ instanceof o.default?T.default.PermissionDenied:T.default.Failed}})}checkCameraResolution(U,_,P){return g(this,void 0,void 0,function*(){let L;try{const A=s.default.getIntrinsicDeviceId(U),M={video:this.calculateVideoConstraint(A,_,P)};L=yield navigator.mediaDevices.getUserMedia(M)}catch(A){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${_} height ${P} failed with error ${A}`),A&&A.name==="OverconstrainedError"?c.default.ResolutionNotSupported:A&&A.name==="NotAllowedError"?c.default.PermissionDenied:c.default.Failed}finally{L&&L.getTracks().forEach(function(A){A.stop()})}return c.default.Succeeded})}calculateVideoConstraint(U,_,P){const L=this.browserBehavior.requiresResolutionAlignment(_,P),A={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(A.deviceId=U,A.width=_,A.height=P):(A.deviceId={exact:U},A.width={exact:L[0]},A.height={exact:L[1]}),A}checkContentShareConnectivity(U){return g(this,void 0,void 0,function*(){let _=!1,P=!1;const L={contentShareDidStart:()=>{_=!0}},A={audioVideoDidStart:()=>{P=!0}};try{return this.meetingSession.audioVideo.addObserver(A),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(L),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(U),yield this.executeTimeoutTask(()=>g(this,void 0,void 0,function*(){return P&&_})),P?(yield this.stopMeeting(),_?f.default.Succeeded:f.default.TimedOut):f.default.ConnectionFailed}catch(M){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${M}`),M.name==="NotAllowedError"?f.default.PermissionDenied:f.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(A),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(L)}})}checkAudioConnectivity(U){return g(this,void 0,void 0,function*(){let _=!1;const P={packetsReceived:0},L=this.meetingSession.audioVideo,A={metricsDidReceive(k){k.getRTCStatsReport().forEach(G=>{G.type==="inbound-rtp"&&(G.mediaType==="audio"||G.kind==="audio")&&(P.packetsReceived=G.packetsReceived)})}},M=a((k,G,K,H)=>{k===this.meetingSession.configuration.credentials.attendeeId&&G&&(_=!0)},"attendeePresenceHandler");try{yield L.startAudioInput(U)}catch(k){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${k}`),k instanceof o.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return L.realtimeSubscribeToAttendeeIdPresence(M),L.addObserver(A),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>g(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(_,P)})),L.removeObserver(A),L.realtimeUnsubscribeToAttendeeIdPresence(M),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(_,P)?t.default.Succeeded:t.default.AudioNotReceived):(L.removeObserver(A),L.realtimeUnsubscribeToAttendeeIdPresence(M),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(U){return g(this,void 0,void 0,function*(){const _=this.meetingSession.audioVideo;let P=0;const L={metricsDidReceive(A){A.getRTCStatsReport().forEach(k=>{k.type==="outbound-rtp"&&(k.mediaType==="video"||k.kind==="video")&&(P=k.packetsSent)})}};try{yield _.startVideoInput(U)}catch(A){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${A}`),A instanceof o.default?y.default.VideoInputPermissionDenied:y.default.VideoInputRequestFailed}return _.addObserver(L),(yield this.startMeeting())?(_.startLocalVideoTile(),yield this.executeTimeoutTask(()=>g(this,void 0,void 0,function*(){return P>0})),yield _.stopVideoInput(),yield this.stopMeeting(),_.removeObserver(L),P<=0?y.default.VideoNotSent:y.default.Succeeded):y.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return g(this,void 0,void 0,function*(){let U=!1;const _={metricsDidReceive(L){L.getRTCStatsReport().forEach(M=>{M.type==="candidate-pair"&&M.state==="succeeded"&&(U=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(L){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${L}`),l.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=L=>{const A=this.originalURLRewriter(L);return A.includes("transport=tcp")?"":A};const P=this.meetingSession.audioVideo;return P.addObserver(_),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>g(this,void 0,void 0,function*(){return U})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),P.removeObserver(_),U?l.default.Succeeded:l.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,l.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return g(this,void 0,void 0,function*(){let U=!1;const _={metricsDidReceive(L){L.getRTCStatsReport().forEach(M=>{M.type==="candidate-pair"&&M.state==="succeeded"&&(U=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(L){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${L}`),S.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=L=>{const A=this.originalURLRewriter(L);return A.includes("transport=udp")?"":A};const P=this.meetingSession.audioVideo;return P.addObserver(_),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>g(this,void 0,void 0,function*(){return U})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),P.removeObserver(_),U?S.default.Succeeded:S.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,S.default.ConnectionFailed)})}startMeeting(){return g(this,void 0,void 0,function*(){let U=!1;const _={audioVideoDidStart:()=>{U=!0}};return this.meetingSession.audioVideo.addObserver(_),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>g(this,void 0,void 0,function*(){return U})),this.meetingSession.audioVideo.removeObserver(_),U})}stopMeeting(){return g(this,void 0,void 0,function*(){let U=!1;const _={audioVideoDidStop:P=>{U=!0}};return this.meetingSession.audioVideo.addObserver(_),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>g(this,void 0,void 0,function*(){return U})),this.meetingSession.audioVideo.removeObserver(_),U})}executeTimeoutTask(U){return g(this,void 0,void 0,function*(){let _=!1,P=a(class extends i.default{cancel(){this.isCancelled=!0}run(){return g(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield U()){_=!0;break}yield Yu.delay(this.waitDurationMs)}})}constructor(M,k){super(M),this.waitDurationMs=k,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new P(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),_})}isAudioConnectionSuccessful(U,_){return U&&_.packetsReceived>0}constructor(U,_,P=new O.default){this.logger=U,this.meetingSession=_,this.configuration=P,this.browserBehavior=new m.default}},"DefaultMeetingReadinessChecker");d.default=R},PbSJ:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"TranscriptionStatus");d.default=g},PhnE:function(W,d,h){"use strict";var g=d;g.build="minimal",g.Writer=h("hl97"),g.BufferWriter=h("92Bn"),g.Reader=h("s0Ci"),g.BufferReader=h("5xrR"),g.util=h("kU+7"),g.rpc=h("rIeS"),g.roots=h("k8sa"),g.configure=p;function p(){g.util._configure(),g.Writer._configure(g.BufferWriter),g.Reader._configure(g.BufferReader)}a(p,"configure"),p()},PmG3:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckAudioConnectivityFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.AudioInputRequestFailed=1]="AudioInputRequestFailed",p[p.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",p[p.ConnectionFailed=3]="ConnectionFailed",p[p.AudioNotReceived=4]="AudioNotReceived"})(g=d.CheckAudioConnectivityFeedback||(d.CheckAudioConnectivityFeedback={})),d.default=g},PsbS:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=h("3wzr"),m=h("BQaj"),s=p(h("59sL"));let o=a(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const n=new u.Sha256(t);return n.update(e),n.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,n,r){return g(this,void 0,void 0,function*(){const c=yield this.hmac(t,"AWS4"+e),f=yield this.hmac(n,c),S=yield this.hmac(r,f);return yield this.hmac("aws4_request",S)})}signURL(e,t,n,r,c,f,S){return g(this,void 0,void 0,function*(){const l=this.getDateTimeString(),y=this.getDateString(l),T="AWS4-HMAC-SHA256";let O="";this.chimeClient.config.region instanceof Function?O=yield this.chimeClient.config.region():O=this.chimeClient.config.region;const R="host",F="host:"+r.toLowerCase()+`
`,U=y+"/"+O+"/"+n+"/aws4_request";let _;this.chimeClient.config.credentials instanceof Function?_=yield this.chimeClient.config.credentials():_=this.chimeClient.config.credentials;let P=new Map;P.set("X-Amz-Algorithm",[T]),P.set("X-Amz-Credential",[encodeURIComponent(_.accessKeyId+"/"+U)]),P.set("X-Amz-Date",[l]),P.set("X-Amz-Expires",["10"]),P.set("X-Amz-SignedHeaders",["host"]),_.sessionToken&&P.set("X-Amz-Security-Token",[encodeURIComponent(_.sessionToken)]),P.set(s.default.X_AMZN_VERSION,[encodeURIComponent(s.default.sdkVersion)]),P.set(s.default.X_AMZN_USER_AGENT,[encodeURIComponent(s.default.sdkUserAgentLowResolution)]),S==null||S.forEach((X,oe)=>{const le=encodeURIComponent(oe);X.sort().forEach(re=>{P.has(le)||P.set(le,[]),P.get(le).push(encodeURIComponent(re))})});let L="";P=new Map([...P.entries()].sort()),P.forEach((X,oe)=>{X.forEach(le=>{L.length&&(L+="&"),L+=oe+"="+le})});const A=e+`
`+c+`
`+L+`
`+F+`
`+R+`
`+m.toHex(yield this.hmac(f)),M=m.toHex(yield this.hmac(A)),k=`AWS4-HMAC-SHA256
`+l+`
`+y+"/"+O+"/"+n+`/aws4_request
`+M,G=yield this.getSignatureKey(_.secretAccessKey,y,O,n),K=m.toHex(yield this.hmac(k,G)),H=L+"&X-Amz-Signature="+K;return t+"://"+r+c+"?"+H})}constructor(e){this.chimeClient=e}},"DefaultSigV4");d.default=o},PvdL:function(W,d,h){"use strict";h.d(d,"a",function(){return e}),h.d(d,"b",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={MissingArgument:"missing_argument",NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",FeatureDisabled:"feature_disabled",OrgsSevered:"orgs_severed",InternalError:"internal_error",CustomInvitesNotSupported:"custom_invites_not_supported",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match"},t=Object(s.a)("sharedInvites.accept generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"sharedInvites.accept",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to sharedInvites.accept
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersharedInvitesAcceptFetcher",description:"sharedInvites.accept generated fetcher"}},PwtQ:function(W,d,h){"use strict";W.exports=u;var g=h("wDi9");(u.prototype=Object.create(g.prototype)).constructor=u;var p=h("j4TH");function u(){g.call(this)}a(u,"BufferWriter"),u._configure=function(){u.alloc=p._Buffer_allocUnsafe,u.writeBytesBuffer=p.Buffer&&p.Buffer.prototype instanceof Uint8Array&&p.Buffer.prototype.set.name==="set"?a(function(o,i,e){i.set(o,e)},"writeBytesBuffer_set"):a(function(o,i,e){if(o.copy)o.copy(i,e,0,o.length);else for(var t=0;t<o.length;)i[e++]=o[t++]},"writeBytesBuffer_copy")},u.prototype.bytes=a(function(o){p.isString(o)&&(o=p._Buffer_from(o,"base64"));var i=o.length>>>0;return this.uint32(i),i&&this._push(u.writeBytesBuffer,i,o),this},"write_bytes_buffer");function m(s,o,i){s.length<40?p.utf8.write(s,o,i):o.utf8Write?o.utf8Write(s,i):o.write(s,i)}a(m,"writeStringBuffer"),u.prototype.string=a(function(o){var i=p.Buffer.byteLength(o);return this.uint32(i),i&&this._push(m,i,o),this},"write_string_buffer"),u._configure()},Q1Gq:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={InvalidAuth:"invalid_auth",MissingArgument:"missing_argument",Shrug:"shrug"},t=Object(s.a)("helpdesk.categories generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason","token"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"helpdesk.categories",args:y,reason:f.reason,computeToken:!1}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to helpdesk.categories
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskCategoriesFetcher",description:"helpdesk.categories generated fetcher"}},Q2ix:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.SessionStateControllerTransitionResult=void 0;var g;(function(p){p[p.Transitioned=0]="Transitioned",p[p.NoTransitionAvailable=1]="NoTransitionAvailable",p[p.DeferredTransition=2]="DeferredTransition",p[p.TransitionFailed=3]="TransitionFailed"})(g=d.SessionStateControllerTransitionResult||(d.SessionStateControllerTransitionResult={})),d.default=g},"Q8+J":function(W,d,h){"use strict";(function(g){Object.defineProperty(d,"__esModule",{value:!0});let p=a(class ir{static register(){!("document"in g)||!document.addEventListener||ir.shouldRegisterCSPMonitor&&(ir.added||(document.addEventListener("securitypolicyviolation",ir.listener),ir.added=!0))}static unregister(){!("document"in g)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",ir.listener),ir.loggers=new Set,ir.added=!1)}static disable(){ir.shouldRegisterCSPMonitor=!1,ir.unregister()}static addLogger(m){m&&ir.loggers.add(m)}static removeLogger(m){m&&ir.loggers.delete(m)}},"CSPMonitor");d.default=p,p.loggers=new Set,p.shouldRegisterCSPMonitor=!0,p.added=!1,p.listener=u=>{const m=`Security Policy Violation
Blocked URI: ${u.blockedURI}
Violated Directive: ${u.violatedDirective}
Original Policy: ${u.originalPolicy}
Document URI: ${u.documentURI}
Source File: ${u.sourceFile}
Line No.: ${u.lineNumber}
`;for(const s of p.loggers)s.error(m);p.loggers.size===0&&console.error(m)}}).call(this,h("yLpj"))},QPT4:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g;(function(p){p.PRONUNCIATION="pronunciation",p.PUNCTUATION="punctuation"})(g||(g={})),d.default=g},QUzi:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("KJDN"));let u=a(class extends p.default{constructor(s){super(s),this.name="NotFoundError"}},"NotFoundError");d.default=u},QhKv:function(W,d,h){"use strict";W.exports=u;var g=h("LDIi");(u.prototype=Object.create(g.prototype)).constructor=u;var p=h("j4TH");function u(m){g.call(this,m)}a(u,"BufferReader"),u._configure=function(){p.Buffer&&(u.prototype._slice=p.Buffer.prototype.slice)},u.prototype.string=a(function(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))},"read_string_buffer"),u._configure()},QzVx:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");d.default=g},"R+jL":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");d.default=g},R4Nl:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d,"__esModule",{value:!0}),d.getRandomValues=d.getFormattedOffset=d.getDefaultAssetSpec=d.toLowerCasePropertyNames=d.isIFramed=d.wait=void 0;const p=g(h("59sL"));function u(t){return new Promise(n=>setTimeout(n,t))}a(u,"wait"),d.wait=u;function m(){var t;try{return((t=window.frameElement)===null||t===void 0?void 0:t.nodeName)==="IFRAME"||parent!==top}catch{return!0}}a(m,"isIFramed"),d.isIFramed=m;function s(t){return t===null?null:typeof t!="object"?t:Array.isArray(t)?t.map(s):Object.keys(t).reduce((n,r)=>{const c=t[r],f=typeof c=="object"?s(c):c;return n[r.toLowerCase()]=f,n},{})}a(s,"toLowerCasePropertyNames"),d.toLowerCasePropertyNames=s;function o(){const t=p.default.sdkVersionSemVer;return{assetGroup:`sdk-${t.major}.${t.minor}`}}a(o,"getDefaultAssetSpec"),d.getDefaultAssetSpec=o;function i(t){const n=Math.abs(t),r=t<=0?"+":"-",c=Math.floor(n/60).toString().padStart(2,"0"),f=Math.floor(n%60).toString().padStart(2,"0");return`${r}${c}:${f}`}a(i,"getFormattedOffset"),d.getFormattedOffset=i;function e(t){try{window.crypto.getRandomValues(t)}catch{new DataView(t.buffer).setUint32(0,Math.trunc(Math.random()*Math.pow(2,32)),!0)}}a(e,"getRandomValues"),d.getRandomValues=e},R9j3:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(y,T,O,R){function F(U){return U instanceof O?U:new O(function(_){_(U)})}return a(F,"adopt"),new(O||(O=Promise))(function(U,_){function P(M){try{A(R.next(M))}catch(k){_(k)}}a(P,"fulfilled");function L(M){try{A(R.throw(M))}catch(k){_(k)}}a(L,"rejected");function A(M){M.done?U(M.value):F(M.value).then(P,L)}a(A,"step"),A((R=R.apply(y,T||[])).next())})},p=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("uCvS")),m=p(h("LmyK")),s=p(h("mpmV")),o=p(h("Xf/8")),i=p(h("NE7a")),e=p(h("tcc5")),t=p(h("dPBs")),n=p(h("8wPz")),r=h("f2XL"),c=h("KyYT"),f=p(h("J+fJ")),S=p(h("DG83"));let l=a(class tl{toAttribute(T){return this.toSuffix(T).substring(1)}toSuffix(T){return T.toLowerCase()===T?`_${T}`:T.toUpperCase()===T?`_${T.toLowerCase()}`:T.replace(/([A-Z][a-z]+)/g,function(O){return`_${O}`}).replace(/([A-Z][A-Z]+)/g,function(O){return`_${O}`}).toLowerCase()}logLatency(T,O,R){const F=this.toSuffix(T);this.logEventTime("meeting"+F,O,R)}logStateTimeout(T,O){const R=this.toSuffix(T);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},O),{state:`state${R}`}))}logAudioEvent(T,O){const R="audio"+this.toSuffix(f.default[T]);this.logEvent(R,O)}logVideoEvent(T,O){const R="video"+this.toSuffix(S.default[T]);this.logEvent(R,O)}logEventTime(T,O){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const F=Object.assign(Object.assign({},R),{call_id:this.audioVideoController.configuration.meetingId,client_type:tl.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${T}: ${JSON.stringify(F)}`),this.metricsAddTime(T,O,F)}logMeetingSessionStatus(T){const O=`${T.statusCode()}`;this.logEvent(O);const R={status:O,status_code:`${T.statusCode()}`};this.logEvent("meeting_session_status",R),T.isTerminal()&&this.logEvent("meeting_session_stopped",R),T.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",R),T.isFailure()&&this.logEvent("meeting_session_failed",R)}logLifecycleEvent(T,O){const R={lifecycle_event:`lifecycle${this.toSuffix(e.default[T])}`,lifecycle_event_code:`${T}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[O])}`,lifecycle_event_condition_code:`${O}`};this.logEvent("meeting_session_lifecycle",R)}logEvent(T){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const R=Object.assign(Object.assign({},O),{call_id:this.audioVideoController.configuration.meetingId,client_type:tl.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${T}: ${JSON.stringify(R)}`),this.metricsLogEvent(T,R)}start(T,O){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=T,this.videoStreamIndex=O,this.clientMetricReport=new u.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new n.default(this.interval),this.intervalScheduler.start(()=>g(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}updateMetricValues(T,O){const R=O?this.clientMetricReport.streamMetricReports[Number(T.ssrc)]:this.clientMetricReport.globalMetricReport;let F;O?F=this.clientMetricReport.getMetricMap(R.mediaType,R.direction):F=this.clientMetricReport.getMetricMap();for(const U in T)U in F&&(typeof T[U]=="number"?(R.previousMetrics[U]=R.currentMetrics[U],R.currentMetrics[U]=T[U]):typeof T[U]=="string"?R.currentStringMetrics[U]=T[U]:typeof T[U]=="object"?(R.previousObjectMetrics[U]=R.currentObjectMetrics[U]===void 0?T[U]:R.currentObjectMetrics[U],R.currentObjectMetrics[U]=T[U]):this.logger.error(`Unknown metric value type ${typeof T[U]} for metric ${U}`))}processRawMetricReports(T){this.clientMetricReport.currentSsrcs={};const O=Date.now();for(const R of T){const F=this.isStreamRawMetricReport(R.type);if(F){const U=this.clientMetricReport.streamMetricReports[Number(R.ssrc)];if(U)U.mediaType===s.default.VIDEO&&U.direction===m.default.UPSTREAM?U.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(R.rid):U.streamId=this.videoStreamIndex.streamIdForSSRC(Number(R.ssrc));else{const _=new i.default;_.mediaType=this.getMediaType(R),_.direction=this.getDirectionType(R),_.mediaType===s.default.VIDEO&&_.direction===m.default.UPSTREAM?_.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(R.rid):this.videoStreamIndex.allStreams().empty()||(_.streamId=this.videoStreamIndex.streamIdForSSRC(Number(R.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(_.groupId=this.videoStreamIndex.groupIdForSSRC(Number(R.ssrc)))),this.clientMetricReport.streamMetricReports[Number(R.ssrc)]=_}this.clientMetricReport.currentSsrcs[Number(R.ssrc)]=1}this.updateMetricValues(R,F)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=O,this.clientMetricReport.print()}addStreamMetricDimensionFrames(T,O){const R=this.clientMetricReport.getStreamDimensionMap();for(const F in O.currentStringMetrics)if(F in R){const U=r.SdkStreamDimension.create();U.type=R[F];const _=r.SdkDimensionValue.create();_.stringValue=O.currentStringMetrics[F],U.value=_,T.dimensions.push(U)}}addMetricFrame(T,O,R,F){const U=R.type,_=R.transform,P=R.source,L=O.streamMetricFrames.length,A=O.streamMetricFrames[L-1];if(U){const M=r.SdkMetric.create();M.type=U,M.value=_(P||T,F),F?A.metrics.push(M):O.globalMetrics.push(M)}}addGlobalMetricsToProtobuf(T){const O=this.clientMetricReport.getMetricMap();for(const R in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(R,T,O[R])}addStreamMetricsToProtobuf(T){for(const O in this.clientMetricReport.streamMetricReports){const R=this.clientMetricReport.streamMetricReports[O],F=r.SdkStreamMetricFrame.create();F.streamId=R.streamId,F.metrics=[],this.addStreamMetricDimensionFrames(F,R),T.streamMetricFrames.push(F);const U=this.clientMetricReport.getMetricMap(R.mediaType,R.direction);for(const _ in R.currentMetrics)this.addMetricFrame(_,T,U[_],Number(O));for(const _ in R.currentStringMetrics)this.addMetricFrame(_,T,U[_],Number(O));for(const _ in R.currentObjectMetrics)this.addMetricFrame(_,T,U[_],Number(O))}}makeClientMetricProtobuf(){const T=r.SdkClientMetricFrame.create();return T.globalMetrics=[],T.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(T),this.addStreamMetricsToProtobuf(T),T}sendClientMetricProtobuf(T){this.signalingClient.sendClientMetrics(T)}isStreamRawMetricReport(T){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(T)}getMediaType(T){return T.kind==="audio"?s.default.AUDIO:s.default.VIDEO}getDirectionType(T){const{type:O}=T;return O==="inbound-rtp"||O==="remote-outbound-rtp"||O==="inbound-rtp-red"?m.default.DOWNSTREAM:m.default.UPSTREAM}isValidStandardRawMetric(T){return T.type==="inbound-rtp"||T.type==="inbound-rtp-red"||T.type==="outbound-rtp"||T.type==="remote-inbound-rtp"||T.type==="remote-outbound-rtp"||T.type==="candidate-pair"&&T.state==="succeeded"||T.type==="media-source"&&T.kind==="audio"}isValidSsrc(T){let O=!0;return this.isStreamRawMetricReport(T.type)&&this.getDirectionType(T)===m.default.DOWNSTREAM&&this.getMediaType(T)===s.default.VIDEO&&(O=this.videoStreamIndex.streamIdForSSRC(Number(T.ssrc))>0),O}isValidRawMetricReport(T){return this.isValidStandardRawMetric(T)&&this.isValidSsrc(T)}filterRawMetricReports(T){const O=[];for(const R of T)this.isValidRawMetricReport(R)&&O.push(R);return O}handleRawMetricReports(T){const O=this.filterRawMetricReports(T);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(O)}`);const R=[];this.maybeAddRedRecoveryMetrics(R),this.clientMetricReport.customStatsReports=R,O.push(...R),this.processRawMetricReports(O);const F=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(F),this.audioVideoController.forEachObserver(U=>{c.Maybe.of(U.metricsDidReceive).map(_=>_.bind(U)(this.clientMetricReport.clone()))})}getStatsWrapper(){return g(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const T=[];try{const O=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=O,O.forEach(R=>{T.push(R)}),this.handleRawMetricReports(T)}catch(O){this.logger.error(O.message)}})}overrideObservableMetric(T,O){this.clientMetricReport.overrideObservableMetric(T,O)}recoveryMetricsDidReceive(T){this.redRecoveryMetricReport=T}maybeAddRedRecoveryMetrics(T){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(T.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}constructor(T,O,R=tl.INTERVAL_MS){this.audioVideoController=T,this.logger=O,this.interval=R,this.intervalScheduler=null,this.redRecoveryMetricReport=new o.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.metricsAddTime=(F,U,_)=>{},this.metricsLogEvent=(F,U)=>{}}},"StatsCollector");d.default=l,l.INTERVAL_MS=1e3,l.CLIENT_TYPE="amazon-chime-sdk-js"},RUbL:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(_,P,L,A){function M(k){return k instanceof L?k:new L(function(G){G(k)})}return a(M,"adopt"),new(L||(L=Promise))(function(k,G){function K(oe){try{X(A.next(oe))}catch(le){G(le)}}a(K,"fulfilled");function H(oe){try{X(A.throw(oe))}catch(le){G(le)}}a(H,"rejected");function X(oe){oe.done?k(oe.value):M(oe.value).then(K,H)}a(X,"step"),X((A=A.apply(_,P||[])).next())})},p=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("Sa54")),m=p(h("Y8b2")),s=p(h("6/h7")),o=p(h("o13v")),i=h("KyYT"),e=p(h("FxSh")),t=p(h("JTre")),n=h("NDMw"),r=p(h("DbLV")),c=p(h("xzjI")),f=p(h("B7cK")),S=p(h("UW8m")),l=p(h("XhYu")),y=p(h("V4cD")),T=p(h("SgmS")),O=p(h("dWQL")),R=h("dWP+");let F=a(class bn{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var P;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(P=this.mediaDeviceWrapper)===null||P===void 0||P.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var P;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(P=this.mediaDeviceWrapper)===null||P===void 0||P.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return g(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return g(this,void 0,void 0,function*(){const L=yield this.listDevicesOfKind("audioinput",P);return this.trace("listAudioInputDevices",P,L),L})}listVideoInputDevices(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return g(this,void 0,void 0,function*(){const L=yield this.listDevicesOfKind("videoinput",P);return this.trace("listVideoInputDevices",P,L),L})}listAudioOutputDevices(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return g(this,void 0,void 0,function*(){const L=yield this.listDevicesOfKind("audiooutput",P);return this.trace("listAudioOutputDevices",P,L),L})}pushAudioMeetingStateForPermissions(P){var L;(L=this.eventController)===null||L===void 0||L.publishEvent(P===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(P){var L;(L=this.eventController)===null||L===void 0||L.publishEvent(P===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(P){return g(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(P))})}startAudioInputTask(P){var L;return g(this,void 0,void 0,function*(){if(P===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return n.isAudioTransformDevice(P)?(this.logger.info(`Choosing transform input device ${P}`),yield this.chooseAudioTransformInputDevice(P)):(this.logger.info(`Choosing intrinsic audio input device ${P}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",P)),this.trace("startAudioInputDevice",P,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(L=this.transform)===null||L===void 0?void 0:L.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(A){throw A}})}stopAudioInput(){return g(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return g(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(P){var L;return g(this,void 0,void 0,function*(){if(((L=this.transform)===null||L===void 0?void 0:L.device)===P)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const A=bn.getAudioContext();if(!(A instanceof OfflineAudioContext))switch(A.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield A.resume()}let M;try{M=yield P.createAudioNode(A)}catch(G){throw this.logger.error(`Unable to create transform device node: ${G}.`),G}const k=yield P.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",k),this.logger.debug(`Got inner stream: ${k}.`),this.setTransform(P,M)})}chooseVideoTransformInputDevice(P){var L;return g(this,void 0,void 0,function*(){if(this.eventController&&P instanceof e.default&&P.passEventControllerToProcessors(this.eventController),P===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const A=this.chosenVideoTransformDevice;A&&this.logger.info("Switched from previous VideoTransformDevice");const M=!!A,k=yield P.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((L=this.activeDevices.video)===null||L===void 0?void 0:L.stream,k)){this.logger.info("video transform device needs new intrinsic device"),M&&A.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=P,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",k),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=P,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield P.transformStream(this.activeDevices.video.stream)})}startVideoInput(P){return g(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(P))})}startVideoInputTask(P){return g(this,void 0,void 0,function*(){if(!P){this.logger.error("Invalid video input device");return}try{return R.isVideoTransformDevice(P)?(this.logger.info(`Choosing video transform device ${P}`),yield this.chooseVideoTransformInputDevice(P),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",P),this.trace("startVideoInputDevice",P),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(L){throw L}})}stopVideoInput(){return g(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return g(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(P){return g(this,void 0,void 0,function*(){this.audioOutputDeviceId=P,this.watchForDeviceChangesIfNecessary();const L=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(L),this.trace("chooseAudioOutput",P,null)})}addDeviceChangeObserver(P){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(P),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(P){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(P),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var P,L;if(!this.activeDevices.audio)return null;const A=(L=(P=this.transform)===null||P===void 0?void 0:P.nodes)===null||L===void 0?void 0:L.end;if(A){const M=A.context.createAnalyser();return M.removeOriginalInputs=()=>{try{A.disconnect(M)}catch{}},A.connect(M),M}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(P){const L=bn.getAudioContext(),A=L.createAnalyser(),M=L.createMediaStreamSource(P);return M.connect(A),this.trace("createAnalyserNodeForAudioInput"),A.removeOriginalInputs=()=>{try{M.disconnect(A)}catch{}},A}startVideoPreviewForVideoInput(P){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",P.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,P,!0),this.trace("startVideoPreviewForVideoInput",P.id)}stopVideoPreviewForVideoInput(P){t.default.disconnectVideoStreamFromVideoElement(P,!1),this.trace("stopVideoPreviewForVideoInput",P.id)}setDeviceLabelTrigger(P){if(this.deviceInfoCache){for(const L of this.deviceInfoCache)if(!L.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=P,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(P){let L=null;return this.useWebAudio?(L=bn.getAudioContext().createMediaStreamSource(P),L.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",P.id),L}chooseVideoInputQuality(P,L,A){const M=this.browserBehavior.requiresResolutionAlignment(P,L);this.videoInputQualitySettings=new O.default(M[0],M[1],A)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return g(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return g(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(P){return g(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(P){const L=this.activeDevices[P];if(!L)return;const A=L.endedCallback,M=L.trackMuteCallback,k=L.trackUnmuteCallback;for(const G of L.stream.getTracks())G.stop(),A&&G.removeEventListener("ended",A),M&&G.removeEventListener("mute",M),k&&G.removeEventListener("unmute",k),delete L.endedCallback,delete L.trackMuteCallback,delete L.trackUnmuteCallback,delete this.activeDevices[P]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(P){var L;let A=this.activeDevices.audio;if(this.useWebAudio&&(A=this.getMediaStreamDestinationNode()),!!A){for(const M of A.stream.getTracks())M.enabled!==P&&(M.enabled=P);this.muted!==!P&&(this.muted=!P,(L=this.transform)===null||L===void 0||L.device.mute(this.muted))}}static getIntrinsicDeviceId(P){if(!P)return;if(typeof P=="string")return P;if(P.id)return P.id;const A=P.deviceId;if(!A)return;if(typeof A=="string"||Array.isArray(A))return A;const M=A;if(typeof M.exact=="string"||Array.isArray(M.exact))return M.exact}static createEmptyAudioDevice(){return bn.synthesizeAudioDevice(0)}static synthesizeAudioDevice(P){const L=bn.getAudioContext(),A=L.createMediaStreamDestination();if(P){const M=L.createGain();M.gain.value=.1,M.connect(A);const k=L.createOscillator();k.frequency.value=P,k.connect(M),k.start()}else{const M=L.createBufferSource();try{M.buffer=L.createBuffer(1,L.sampleRate*5,L.sampleRate)}catch(k){if(k&&k.name==="NotSupportedError")M.buffer=L.createBuffer(1,bn.defaultSampleRate*5,bn.defaultSampleRate);else throw k}M.buffer.getChannelData(0)[0]=3e-4,M.loop=!0,M.connect(A),M.start()}return A.stream}listDevicesOfKind(P,L){return g(this,void 0,void 0,function*(){return(L||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(P)})}updateDeviceInfoCacheFromBrowser(){var P;return g(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let A=yield navigator.mediaDevices.enumerateDevices(),M=!0;for(const k of A)if(!k.label){M=!1;break}if(!M)try{this.logger.info("attempting to trigger media device labels since they are hidden");const k=yield this.deviceLabelTrigger();A=yield navigator.mediaDevices.enumerateDevices();for(const G of k.getTracks())G.stop()}catch(k){this.logger.info("unable to get media device labels"),(P=this.eventController)===null||P===void 0||P.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(k)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(A)}`),this.deviceInfoCache=A})}listCachedDevicesOfKind(P){const L=[];if(this.deviceInfoCache)for(const A of this.deviceInfoCache)A.kind===P&&L.push(A);return L}handleDeviceChange(){return g(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){s.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const P=this.listCachedDevicesOfKind("audioinput"),L=this.listCachedDevicesOfKind("videoinput"),A=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const M=this.listCachedDevicesOfKind("audioinput"),k=this.listCachedDevicesOfKind("videoinput"),G=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(K=>{this.areDeviceListsEqual(P,M)||i.Maybe.of(K.audioInputsChanged).map(H=>H.bind(K)(M)),this.areDeviceListsEqual(L,k)||i.Maybe.of(K.videoInputsChanged).map(H=>H.bind(K)(k)),this.areDeviceListsEqual(A,G)||i.Maybe.of(K.audioOutputsChanged).map(H=>H.bind(K)(G))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(P,L){return g(this,void 0,void 0,function*(){try{P==="audio"?(this.logger.warn("Audio input device which was active is no longer available, resetting to null device"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}P==="audio"?this.forEachObserver(A=>{i.Maybe.of(A.audioInputStreamEnded).map(M=>M.bind(A)(L))}):this.forEachObserver(A=>{i.Maybe.of(A.videoInputStreamEnded).map(M=>M.bind(A)(L))})})}forEachObserver(P){for(const L of this.deviceChangeObservers)s.default.nextTick(()=>{this.deviceChangeObservers.has(L)&&P(L)})}forEachMediaStreamBrokerObserver(P){for(const L of this.mediaStreamBrokerObservers)s.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(L)&&P(L)})}areDeviceListsEqual(P,L){return JSON.stringify(P.map(A=>JSON.stringify(A)).sort())===JSON.stringify(L.map(A=>JSON.stringify(A)).sort())}intrinsicDeviceAsMediaStream(P){return P&&P.id?P:null}hasSameMediaStreamId(P,L,A){var M,k,G,K;let H;return P==="audio"?(H=A==null?void 0:A.audio.streamId,!!H&&H===((k=(M=L.constraints)===null||M===void 0?void 0:M.audio)===null||k===void 0?void 0:k.streamId)):(H=A==null?void 0:A.video.streamId,!!H&&H===((K=(G=L==null?void 0:L.constraints)===null||G===void 0?void 0:G.video)===null||K===void 0?void 0:K.streamId))}hasSameGroupId(P,L,A){if(P==="")return!0;const M=bn.getIntrinsicDeviceId(A);return this.logger.debug(`Checking deviceIds ${M} of type ${typeof M} with groupId ${P}`),typeof M=="string"&&P===this.getGroupIdFromDeviceId(L,M)}getGroupIdFromDeviceId(P,L){if(this.deviceInfoCache!==null){const A=this.listCachedDevicesOfKind(`${P}input`).find(M=>M.deviceId===L);if(A&&A.groupId)return this.logger.debug(`GroupId of deviceId ${L} found in cache is ${A.groupId}`),A.groupId}return this.logger.debug(`GroupId of deviceId ${L} found in cache is empty`),""}handleGetUserMediaError(P,L){if(!P)throw new c.default(P);switch(P.name){case"NotReadableError":case"TrackStartError":throw new S.default(P);case"NotFoundError":case"DevicesNotFoundError":throw new f.default(P);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw L&&L<bn.permissionDeniedOriginDetectionThresholdMs?new y.default(P,"Permission denied by browser"):new y.default(P,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new l.default(P);case"TypeError":throw new T.default(P);case"AbortError":default:throw new c.default(P)}}matchesDeviceSelection(P,L,A,M){return A&&A.stream.active&&(this.hasSameMediaStreamId(P,A,M)||A.groupId!==null&&this.hasSameGroupId(A.groupId,P,L))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(A.constraints)} to proposed constraints ${JSON.stringify(M)}`),A.matchesConstraints(M)):!1}chooseInputIntrinsicDevice(P,L){var A,M;return g(this,void 0,void 0,function*(){const k=this.getMediaStreamConstraints(P,L);if(this.matchesDeviceSelection(P,L,this.activeDevices[P],k)){this.logger.info(`reusing existing ${P} input device`);return}this.activeDevices[P]&&this.activeDevices[P].stream&&this.stopTracksAndRemoveCallbacks(P);const G=Date.now(),K=new r.default;try{this.logger.info(`requesting new ${P} device with constraint ${JSON.stringify(k)}`);const H=this.intrinsicDeviceAsMediaStream(L);P==="audio"&&L===null?(K.stream=bn.createEmptyAudioDevice(),K.constraints=null):H?(this.logger.info(`using media stream ${H.id} for ${P} device`),K.stream=H,K.constraints=k):(K.stream=yield navigator.mediaDevices.getUserMedia(k),K.constraints=k),yield this.handleNewInputDevice(P,K)}catch(H){const X=this.getErrorMessage(H);P==="audio"?(A=this.eventController)===null||A===void 0||A.publishEvent("audioInputFailed",{audioInputErrorMessage:X}):(M=this.eventController)===null||M===void 0||M.publishEvent("videoInputFailed",{videoInputErrorMessage:X}),this.logger.error(`failed to get ${P} device for constraints ${JSON.stringify(k)}: ${X}`);let oe=!0;if(H&&"constraint"in H&&(this.logger.error(`Over-constrained by constraint: ${H.constraint}`),this.useMediaConstraintsFallback)){const le=this.getMediaStreamConstraints(P,L,!0),re=JSON.stringify(le);if(re!==JSON.stringify(k)){this.logger.info(`retry requesting new ${P} device with minimal constraint ${re}`);try{K.stream=yield navigator.mediaDevices.getUserMedia(le),K.constraints=le,yield this.handleNewInputDevice(P,K),oe=!1}catch(he){this.logger.error(`failed to get ${P} device for constraints ${re}: ${this.getErrorMessage(he)}`)}}}if(oe){if(P==="audio"){this.logger.info(`choosing null ${P} device instead`);try{K.stream=bn.createEmptyAudioDevice(),K.constraints=null,yield this.handleNewInputDevice(P,K)}catch(le){this.logger.error(`failed to choose null ${P} device. ${le.name}: ${le.message}`)}}this.handleGetUserMediaError(H,Date.now()-G)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(P){return P?P.name&&P.message?`${P.name}: ${P.message}`:P.name?P.name:P.message?P.message:"UnknownError":"UnknownError"}handleNewInputDevice(P,L){var A;return g(this,void 0,void 0,function*(){this.logger.info(`got ${P} device for constraints ${JSON.stringify(L.constraints)}`);const M=(A=this.getMediaTrackSettings(L.stream))===null||A===void 0?void 0:A.deviceId;L.groupId=M?this.getGroupIdFromDeviceId(P,M):"",this.activeDevices[P]=L,this.logger.debug(`Set activeDevice to ${JSON.stringify(L)}`),this.watchForDeviceChangesIfNecessary();const k=L.stream.getTracks()[0];if(k&&(L.endedCallback=()=>{this.activeDevices[P]&&this.activeDevices[P].stream===L.stream&&(this.handleDeviceStreamEnded(P,M),delete L.endedCallback)},k.addEventListener("ended",L.endedCallback,{once:!0})),P==="audio"){const G=L.stream.getAudioTracks()[0];if(G){const K=G.getSettings().deviceId||L.stream;L.trackMuteCallback=()=>{this.mediaStreamMuteObserver(K,!0)},L.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(K,!1)},G.addEventListener("mute",L.trackMuteCallback,{once:!1}),G.addEventListener("unmute",L.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),G.muted?L.trackMuteCallback():L.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(P,L,A,M){if(M&&this.listCachedDevicesOfKind(`${P}input`).length===1)return!0;const k={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?k.deviceId=L:k.deviceId={exact:L},A&&(k.groupId=A),M?k:P==="video"?(k.width={ideal:this.videoInputQualitySettings.videoWidth},k.height={ideal:this.videoInputQualitySettings.videoHeight},k.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},k):(this.supportSampleRateConstraint()&&(k.sampleRate={ideal:bn.defaultSampleRate}),this.supportSampleSizeConstraint()&&(k.sampleSize={ideal:bn.defaultSampleSize}),this.supportChannelCountConstraint()&&(k.channelCount={ideal:bn.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},k))}getMediaStreamConstraintsFromTrackConstraints(P,L){return P==="audio"?{audio:L}:{video:L}}getMediaStreamConstraints(P,L){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,M={};if(!L)return null;const k=this.intrinsicDeviceAsMediaStream(L);if(k)return M.streamId=k.id,this.getMediaStreamConstraintsFromTrackConstraints(P,M);if(typeof L=="string"){let G="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?G=this.getGroupIdFromDeviceId(P,L):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),M=this.calculateMediaStreamConstraints(P,L,G,A),this.getMediaStreamConstraintsFromTrackConstraints(P,M)}return U(L)?(M=this.calculateMediaStreamConstraints(P,L.deviceId,L.groupId,A),this.getMediaStreamConstraintsFromTrackConstraints(P,M)):(M=L,this.getMediaStreamConstraintsFromTrackConstraints(P,M))}deviceInfoFromDeviceId(P,L){if(this.deviceInfoCache===null)return null;for(const A of this.deviceInfoCache)if(A.kind===P&&A.deviceId===L)return A;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(P,L){if(!P||!P.active||!L)return!1;if(L.id)return P.id===L.id;const A=this.getMediaTrackSettings(P);if(!A.deviceId)return!1;const M=bn.getIntrinsicDeviceId(L);return typeof M=="string"?A.deviceId===M:!1}getMediaTrackSettings(P){var L;return(L=P.getTracks()[0])===null||L===void 0?void 0:L.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const P=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(P)}setTransform(P,L){var A,M;(M=(A=this.transform)===null||A===void 0?void 0:A.nodes)===null||M===void 0||M.end.disconnect(),this.transform={nodes:L,device:P};const k=L==null?void 0:L.end,G=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${k} to destination ${G}.`),k==null||k.connect(G),this.reconnectAudioInputs()}removeTransform(){var P;const L=this.transform;if(L)return(P=this.transform.nodes)===null||P===void 0||P.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),L}attachAudioInputStreamToAudioContext(P){var L;(L=this.audioInputSourceNode)===null||L===void 0||L.disconnect(),this.audioInputSourceNode=bn.getAudioContext().createMediaStreamSource(P);const A=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(A)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=bn.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var P,L;return((L=(P=this.transform)===null||P===void 0?void 0:P.nodes)===null||L===void 0?void 0:L.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(P){bn.defaultLatencyHint=P}static getAudioContext(){if(!bn.audioContext){const P={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(P.sampleRate=bn.defaultSampleRate),new u.default().requiresPlaybackLatencyHintForAudioContext()&&(P.latencyHint="playback"),bn.defaultLatencyHint&&(P.latencyHint=bn.defaultLatencyHint),bn.audioContext=new(window.AudioContext||window.webkitAudioContext)(P)}return bn.audioContext}static closeAudioContext(){if(bn.audioContext)try{bn.audioContext.close()}catch{}bn.audioContext=null}addMediaStreamBrokerObserver(P){this.mediaStreamBrokerObservers.add(P)}removeMediaStreamBrokerObserver(P){this.mediaStreamBrokerObservers.delete(P)}publishVideoInputDidChangeEvent(P){this.forEachMediaStreamBrokerObserver(L=>{L.videoInputDidChange&&L.videoInputDidChange(P)}),this.pushVideoMeetingStateForPermissions(P)}publishAudioInputDidChangeEvent(P){this.forEachMediaStreamBrokerObserver(L=>{L.audioInputDidChange&&L.audioInputDidChange(P)}),this.pushAudioMeetingStateForPermissions(P)}publishAudioOutputDidChangeEvent(P){this.forEachMediaStreamBrokerObserver(L=>{L.audioOutputDidChange&&L.audioOutputDidChange(P)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(P,L,A){let M=`API/DefaultDeviceController/${P}`;typeof L<"u"&&(M+=` ${JSON.stringify(L)}`),typeof A<"u"&&(M+=` -> ${JSON.stringify(A)}`),this.logger.info(M)}constructor(P,L,A=new u.default,M){this.logger=P,this.browserBehavior=A,this.eventController=M,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new o.default,this.videoInputTaskQueue=new o.default,this.muted=!1,this.mediaStreamMuteObserver=(H,X)=>{for(const oe of this.deviceChangeObservers)s.default.nextTick(()=>{this.deviceChangeObservers.has(oe)&&oe.audioInputMuteStateChanged&&oe.audioInputMuteStateChanged(H,X)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:k=!1,useMediaConstraintsFallback:G=!0}=L||{};this.useWebAudio=k,this.useMediaConstraintsFallback=G,this.videoInputQualitySettings=new O.default(bn.defaultVideoWidth,bn.defaultVideoHeight,bn.defaultVideoFrameRate);const K=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=K[0],this.videoInputQualitySettings.videoHeight=K[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new m.default().create();const H=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(H)}`)}catch(H){P.error(H.message)}}},"DefaultDeviceController");d.default=F,F.permissionDeniedOriginDetectionThresholdMs=500,F.defaultVideoWidth=960,F.defaultVideoHeight=540,F.defaultVideoFrameRate=15,F.defaultSampleRate=48e3,F.defaultSampleSize=16,F.defaultChannelCount=1,F.audioContext=null;function U(_){return typeof _=="object"&&"deviceId"in _&&"groupId"in _&&"kind"in _&&"label"in _}a(U,"isMediaDeviceInfo")},RfPO:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class Rs{static isTimestampRecent(u,m){return Date.now()<u+m}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}isConnectionStartRecent(u){return Rs.isTimestampRecent(this.connectionStartTimestampMs,u)}isLastPacketLossRecent(u){return Rs.isTimestampRecent(this.lastPacketLossInboundTimestampMs,u)}isGoodSignalRecent(u){return Rs.isTimestampRecent(this.lastGoodSignalTimestampMs,u)}isWeakSignalRecent(u){return Rs.isTimestampRecent(this.lastWeakSignalTimestampMs,u)}isNoSignalRecent(u){return Rs.isTimestampRecent(this.lastNoSignalTimestampMs,u)}clone(){const u=new Rs;return u.connectionStartTimestampMs=this.connectionStartTimestampMs,u.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,u.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,u.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,u.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,u.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,u.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,u.consecutiveMissedPongs=this.consecutiveMissedPongs,u.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),u.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),u.audioSpeakerDelayMs=this.audioSpeakerDelayMs,u}setConsecutiveMissedPongs(u){this.consecutiveMissedPongs=u}setConsecutiveStatsWithNoPackets(u){this.consecutiveStatsWithNoPackets=u}setConsecutiveStatsWithNoAudioPacketsSent(u){this.consecutiveStatsWithNoAudioPacketsSent=u}setLastPacketLossInboundTimestampMs(u){this.lastPacketLossInboundTimestampMs=u}setLastNoSignalTimestampMs(u){this.lastNoSignalTimestampMs=u}setLastWeakSignalTimestampMs(u){this.lastWeakSignalTimestampMs=u}setLastGoodSignalTimestampMs(u){this.lastGoodSignalTimestampMs=u}setAudioSpeakerDelayMs(u){this.audioSpeakerDelayMs=u}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");d.default=g},Rx4Y:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckAudioOutputFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.Failed=1]="Failed"})(g=d.CheckAudioOutputFeedback||(d.CheckAudioOutputFeedback={})),d.default=g},SM5d:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"TranscriptLanguageWithScore");d.default=g},SO8M:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("Sa54"));let u=a(class nl{static fullbandSpeechMono(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new nl(4e4,s)}static fullbandMusicMono(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new nl(64e3,s)}static fullbandMusicStereo(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new nl(128e3,s)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(s=null,o=!0){this.audioBitrateBps=s,this.enableAudioRedundancy=new p.default().supportsAudioRedundancy()&&o}},"AudioProfile");d.default=u},Sa54:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});const p=h("e0ae"),u=h("K4CH");let m=a(class Xl{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const o of this.chromeLike)if(o===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const o of this.webkitBrowsers)if(o===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=Xl.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=Xl.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}supportsAudioRedundancy(){return this.hasChromiumWebRTC()?this.engineMajorVersion()>=107:!this.hasFirefoxWebRTC()}requiresResolutionAlignment(o,i){return this.isAndroid()&&this.isPixel3()?[Math.ceil(o/64)*64,Math.ceil(i/64)*64]:[o,i]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const o=[];for(const i in this.browserSupport)o.push(`${this.browserName[i]} ${this.browserSupport[i]}+`);return o.join(", ")}supportedVideoCodecs(){return g(this,void 0,void 0,function*(){const o=new RTCPeerConnection;return o.addTransceiver("video",{direction:"inactive",streams:[]}),(yield o.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(i=>i.includes("a=rtpmap:")).map(i=>i.replace(/.* /,"").replace(/\/.*/,"")).filter((i,e,t)=>t.indexOf(i)===e).filter(i=>i!=="rtx"&&i!=="red"&&i!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return(this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox())&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=p.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new u.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");d.default=m,m.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,m.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},SdmA:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckVideoConnectivityFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.VideoInputRequestFailed=1]="VideoInputRequestFailed",p[p.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",p[p.ConnectionFailed=3]="ConnectionFailed",p[p.VideoNotSent=4]="VideoNotSent"})(g=d.CheckVideoConnectivityFeedback||(d.CheckVideoConnectivityFeedback={})),d.default=g},SgmS:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("xzjI"));let u=a(class extends p.default{constructor(s){super(s),this.name="TypeError"}},"TypeError");d.default=u},Sl5A:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g;(function(p){p.IDLE="IDLE",p.RUNNING="RUNNING",p.CANCELED="CANCELED",p.FINISHED="FINISHED"})(g||(g={})),d.default=g},Sz6V:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(u,m){this.signalingURL=u,this.joinToken=m}},"SignalingClientConnectionRequest");d.default=g},"T44/":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0}),d.VideoPreferences=d.MutableVideoPreferences=d.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const p=g(h("bQ+R"));function u(e,t,n){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||n===void 0)return[];const r=new Array,c=new Map,f=new Map;for(const S of t){const l=e.transceiverController.getMidForGroupId(S);if(l===void 0)continue;const y=e.videoStreamIndex.attendeeIdForGroupId(S);c.set(y,l),f.set(y,S)}for(const S of n){const l=new p.default,y=c.get(S.attendeeId);y!==void 0&&(l.mid=y,l.attendeeId=S.attendeeId,l.groupId=f.get(S.attendeeId),l.priority=Number.MAX_SAFE_INTEGER-S.priority,l.targetBitrateKbps=S.targetSizeToBitrateKbps(S.targetSize),l.qualityAdaptationPreference=S.degradationPreference,r.push(l))}return r}a(u,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),d.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=u;let m=a(class Ql{static default(){return new Ql([])}[Symbol.iterator](){let t=0;const n=this.items;return{next(){return t<n.length?{done:!1,value:n[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,n){const r=this.items.findIndex(n);r===-1?this.items.push(t):this.has(t)?this.items.splice(r,1):this.items[r]=t}remove(t){this.items=this.items.filter(n=>!n.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const n of this.items)if(!t.items.some(r=>r.equals(n)))return!1;return!0}has(t){return this.items.some(n=>n.equals(t))}some(t){return this.items.some(t)}clone(){return new Ql([...this.items])}sort(){this.items.sort((t,n)=>t.partialCompare(n))}modify(){return new s(this)}constructor(t=[]){this.items=t}},"ObjectSet"),s=a(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,n){this.items.has(t)&&!this.items.some(n)||(this.cow(),this.items.replaceFirst(t,n))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new m){this.items=t,this.copied=!1}},"SetBuilder"),o=a(class{add(t){this.builder.add(t)}replaceFirst(t,n){this.builder.replaceFirst(t,n)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new i(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");d.MutableVideoPreferences=o;let i=a(class Zl{static prepare(){return new o(new s)}static default(){return new Zl(m.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new o(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=Zl.prepare();for(const n of this.items)t.add(n.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");d.VideoPreferences=i,d.default=i},TYXu:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");d.default=g},TdKi:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});const p=h("hlxM"),u=h("nSNv"),m={ready:0,enabled:1},s={disabled:0,enabled:1,stopped:2};let o=a(class extends u.VoiceFocusAudioWorkletNode{enable(){return g(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,s.enabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return g(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,s.disabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return g(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,m.enabled,s.stopped),Atomics.notify(this.state,m.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const n=e.data;switch(n.message){case"ready":if(!n.shared)throw new Error("No shared state.");this.state=new Int32Array(n.shared.state),this.port.postMessage(n);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(n);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(n);break;default:return}}onProcessorMessage(e){var t;const n=e.data;switch(n.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(n);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:n,resamplerURL:r,worker:c,fetchBehavior:f,delegate:S}=t;this.delegate=S,this.worker=c,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:l,supportFarendStream:y}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:l,model:n,supportFarendStream:y});const T=p.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:T,key:"resampler",fetchBehavior:f,path:r})}},"VoiceFocusWorkerBufferNode");d.default=o},Tsvd:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");d.default=g},"U++r":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3}},"ConnectionHealthPolicyConfiguration");d.default=g},U3GI:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");d.default=g},U9CR:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});const p=h("e0ae"),u=h("K4CH");let m=a(class ql{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const o of this.chromeLike)if(o===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const o of this.webkitBrowsers)if(o===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=ql.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=ql.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}supportsAudioRedundancy(){return this.hasChromiumWebRTC()?this.engineMajorVersion()>=107:!this.hasFirefoxWebRTC()}requiresResolutionAlignment(o,i){return this.isAndroid()&&this.isPixel3()?[Math.ceil(o/64)*64,Math.ceil(i/64)*64]:[o,i]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const o=[];for(const i in this.browserSupport)o.push(`${this.browserName[i]} ${this.browserSupport[i]}+`);return o.join(", ")}supportedVideoCodecs(){return g(this,void 0,void 0,function*(){const o=new RTCPeerConnection;return o.addTransceiver("video",{direction:"inactive",streams:[]}),(yield o.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(i=>i.includes("a=rtpmap:")).map(i=>i.replace(/.* /,"").replace(/\/.*/,"")).filter((i,e,t)=>t.indexOf(i)===e).filter(i=>i!=="rtx"&&i!=="red"&&i!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return(this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox())&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=p.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new u.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");d.default=m,m.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,m.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},UIXl:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{calculateScore(u,m,s){(s||m===null)&&(m=0),this.volumes.hasOwnProperty(u)||(this.volumes[u]=0),m>this.silenceThreshold?m=1:m=0;const o=this.volumes[u]*this.speakerWeight+m*(1-this.speakerWeight);this.volumes[u]=o;for(const i in this.volumes)i!==u&&(this.volumes[i]=Math.max(this.volumes[i]-this.takeoverRate*m,0));return o<this.cutoffThreshold?0:o}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(u=.9,m=.01,s=.2,o=.2){this.speakerWeight=u,this.cutoffThreshold=m,this.silenceThreshold=s,this.takeoverRate=o,this.volumes={}}},"DefaultActiveSpeakerPolicy");d.default=g},ULlC:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("yQ3g"));let u=a(class Xu{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(s){this._isFirstConnection=s,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(s,o){const i=this.shouldReconnect&&!this.hasPastReconnectDeadline();return i&&(this.backoffCancel=o,this.backoffTimer=new p.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,s()})),i}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new Xu(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(s){this.lastActiveTimestampMs=s}constructor(s,o){this.reconnectTimeoutMs=s,this.backoffPolicy=o,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");d.default=u},UW8m:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("xzjI"));let u=a(class extends p.default{constructor(s){super(s),this.name="NotReadableError"}},"NotReadableError");d.default=u},V2kw:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const u={};return u.type=this.type,u.v=this.v,u.meetingId=this.meetingId,u.attendeeId=this.attendeeId,u}constructor(u,m,s,o=[]){this.type="Meet",this.v=1,this.meetingId=u,this.attendeeId=m,this.eventsToIgnore=o,this.authenticationToken=s}},"MeetingEventsClientConfiguration");d.default=g},V3UW:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("uctb")),u=g(h("6/h7"));let m=a(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const o of this.dependencies)o.cancel();this.logger.info(`Canceling ${this.name()}`),u.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&u.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>p.default.INFO||!this.dependencies)return;const o=this.dependencies.filter(i=>i).map(i=>i.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${o}`)}run(){if(this.promise)return this.promise;const o=this.dependencies?Promise.all(this.dependencies.map(i=>i==null?void 0:i.run())):Promise.resolve();return this.logDependencies(),this.ongoing=o.then(()=>this.task.run()),this.promise=new Promise((i,e)=>{this.cancelPromise=e,this.ongoing.then(i).catch(e)})}setParent(o){this.task.setParent(o)}constructor(o,i,e){this.logger=o,this.task=i,this.dependencies=e,this.canceled=!1}},"OnceTask");d.default=m},V4cD:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("xzjI"));let u=a(class extends p.default{constructor(s,o){super(s,o),this.name="PermissionDeniedError"}},"PermissionDeniedError");d.default=u},V5IF:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");d.default=g},V7js:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.MAX_HASHABLE_LENGTH=d.INIT=d.KEY=d.DIGEST_LENGTH=d.BLOCK_SIZE=void 0,d.BLOCK_SIZE=64,d.DIGEST_LENGTH=32,d.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),d.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],d.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},VCUZ:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d,"__esModule",{value:!0}),d.getRandomValues=d.getFormattedOffset=d.getDefaultAssetSpec=d.toLowerCasePropertyNames=d.isIFramed=d.wait=void 0;const p=g(h("ac3q"));function u(t){return new Promise(n=>setTimeout(n,t))}a(u,"wait"),d.wait=u;function m(){var t;try{return((t=window.frameElement)===null||t===void 0?void 0:t.nodeName)==="IFRAME"||parent!==top}catch{return!0}}a(m,"isIFramed"),d.isIFramed=m;function s(t){return t===null?null:typeof t!="object"?t:Array.isArray(t)?t.map(s):Object.keys(t).reduce((n,r)=>{const c=t[r],f=typeof c=="object"?s(c):c;return n[r.toLowerCase()]=f,n},{})}a(s,"toLowerCasePropertyNames"),d.toLowerCasePropertyNames=s;function o(){const t=p.default.sdkVersionSemVer;return{assetGroup:`sdk-${t.major}.${t.minor}`}}a(o,"getDefaultAssetSpec"),d.getDefaultAssetSpec=o;function i(t){const n=Math.abs(t),r=t<=0?"+":"-",c=Math.floor(n/60).toString().padStart(2,"0"),f=Math.floor(n%60).toString().padStart(2,"0");return`${r}${c}:${f}`}a(i,"getFormattedOffset"),d.getFormattedOffset=i;function e(t){try{window.crypto.getRandomValues(t)}catch{new DataView(t.buffer).setUint32(0,Math.trunc(Math.random()*Math.pow(2,32)),!0)}}a(e,"getRandomValues"),d.getRandomValues=e},VKrp:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckNetworkTCPConnectivityFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",p[p.ConnectionFailed=2]="ConnectionFailed",p[p.ICENegotiationFailed=3]="ICENegotiationFailed"})(g=d.CheckNetworkTCPConnectivityFeedback||(d.CheckNetworkTCPConnectivityFeedback={})),d.default=g},VPK4:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"Transcript");d.default=g},VUud:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={NotificationNotFound:"notification_not_found",InvalidAction:"invalid_action",ErrorPersistingImpression:"error_persisting_impression",ChannelNotFound:"channel_not_found",InvalidNotificationParams:"invalid_notification_params",CannotProvideChannelAndEntityId:"cannot_provide_channel_and_entity_id",MissingEntityType:"missing_entity_type",InvalidEntityType:"invalid_entity_type"},t=Object(s.a)("megaphone.setNotificationAsSeen generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"megaphone.setNotificationAsSeen",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to megaphone.setNotificationAsSeen
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchermegaphoneSetNotificationAsSeenFetcher",description:"megaphone.setNotificationAsSeen generated fetcher"}},VWEK:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g;(function(p){p.PRONUNCIATION="pronunciation",p.PUNCTUATION="punctuation"})(g||(g={})),d.default=g},VWHd:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("Biyp"));let u=a(class{updateConnectionMetric(s){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(s){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new p.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(s){}setHasBandwidthPriority(s){}setHighResolutionFeatureEnabled(s){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");d.default=u},"VYs+":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("ZdbB"));let m=a(class Wr extends u.default{setEncodingParameters(o){return g(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(o.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(let n=0;n<t.encodings.length;n++)t.encodings[n].rid===Wr.LOW_LEVEL_NAME&&this.copyEncodingParams(o.get(Wr.LOW_LEVEL_NAME),t.encodings[n]),t.encodings[n].rid===Wr.MID_LEVEL_NAME&&this.copyEncodingParams(o.get(Wr.MID_LEVEL_NAME),t.encodings[n]),t.encodings[n].rid===Wr.HIGH_LEVEL_NAME&&this.copyEncodingParams(o.get(Wr.HIGH_LEVEL_NAME),t.encodings[n]);yield i.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(o){return g(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var o,i;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((i=(o=this.meetingSessionContext)===null||o===void 0?void 0:o.audioProfile)===null||i===void 0)&&i.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const i=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of i)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(o,i){i.active=o.active,i.maxBitrate=o.maxBitrate,i.scaleResolutionDownBy=o.scaleResolutionDownBy,i.maxFramerate=o.maxFramerate}constructor(o,i,e){super(o,i,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let n=0;n<Wr.NAME_ARR_ASCENDING.length;n++){const r=Wr.NAME_ARR_ASCENDING[n];this.videoQualityControlParameterMap.set(r,{rid:r,scaleResolutionDownBy:t,maxBitrate:Wr.BITRATE_ARR_ASCENDING[n]*1e3}),t=t/2}}},"SimulcastTransceiverController");d.default=m,m.LOW_LEVEL_NAME="low",m.MID_LEVEL_NAME="mid",m.HIGH_LEVEL_NAME="hi",m.NAME_ARR_ASCENDING=["low","mid","hi"],m.BITRATE_ARR_ASCENDING=[200,400,1100]},VcdL:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(m,s,o,i){function e(t){return t instanceof o?t:new o(function(n){n(t)})}return a(e,"adopt"),new(o||(o=Promise))(function(t,n){function r(S){try{f(i.next(S))}catch(l){n(l)}}a(r,"fulfilled");function c(S){try{f(i.throw(S))}catch(l){n(l)}}a(c,"rejected");function f(S){S.done?t(S.value):e(S.value).then(r,c)}a(f,"step"),f((i=i.apply(m,s||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.VideoFxCanvasOpsManager=void 0;const p=h("6qF3");let u=a(class{getInferenceInputData(s){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(s,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(s){return g(this,void 0,void 0,function*(){if(this.streamParameters=s,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const o=document.createElement("canvas");o.width=this.streamParameters.width,o.height=this.streamParameters.height,o.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=o}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(s){return g(this,void 0,void 0,function*(){const o=s.backgroundReplacement.backgroundImageURL,i=s.backgroundReplacement.defaultColor;if(o)try{const e=yield this.loadImage(o);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(i)})}resizeAndSetReplacementImage(s){const o=document.createElement("canvas"),i=o.getContext("2d");o.width=this.streamParameters.width,o.height=this.streamParameters.height,i.drawImage(s,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=o}resizeAndSetReplacementColor(s){const o=document.createElement("canvas"),i=o.getContext("2d");o.width=this.streamParameters.width,o.height=this.streamParameters.height,i.fillStyle=s,i.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=o}loadImage(s){return g(this,void 0,void 0,function*(){const i=yield(yield fetch(s).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(i),new Promise((t,n)=>{e.onload=()=>{t(e)},e.onerror=r=>{n(r)}})})}constructor(s,o){this.streamParameters=s,this.outputCanvas=o,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");d.VideoFxCanvasOpsManager=u},VgUL:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("wQGL"));let u=a(class{updateConnectionMetric(s){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var s,o,i,e,t,n,r,c,f,S,l,y;const T=new Map,O=1e3,R=p.default.NAME_ARR_ASCENDING;return T.set(R[0],{rid:R[0],active:!0,scaleResolutionDownBy:((o=(s=this.encodingParams)===null||s===void 0?void 0:s.low)===null||o===void 0?void 0:o.scaleResolutionDownBy)||2,maxBitrate:(((e=(i=this.encodingParams)===null||i===void 0?void 0:i.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*O,maxFramerate:((n=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||n===void 0?void 0:n.maxFramerate)||5}),T.set(R[1],{rid:R[1],active:!0,scaleResolutionDownBy:((c=(r=this.encodingParams)===null||r===void 0?void 0:r.high)===null||c===void 0?void 0:c.scaleResolutionDownBy)||1,maxBitrate:(((S=(f=this.encodingParams)===null||f===void 0?void 0:f.high)===null||S===void 0?void 0:S.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*O,maxFramerate:(y=(l=this.encodingParams)===null||l===void 0?void 0:l.high)===null||y===void 0?void 0:y.maxFramerate}),this.getQualityMapString(T),T}updateIndex(s){this.videoIndex=s}wantsResubscribe(){var s,o;let i=!1;this.nextLocalDescriptions=(s=this.videoIndex)===null||s===void 0?void 0:s.localStreamDescriptions();for(let e=0;e<((o=this.nextLocalDescriptions)===null||o===void 0?void 0:o.length);e++){const t=this.nextLocalDescriptions[e].streamId;if(t!==0&&t){const n=this.currLocalDescriptions.findIndex(r=>r.streamId===t);n!==-1&&this.nextLocalDescriptions[e].disabledByWebRTC!==this.currLocalDescriptions[n].disabledByWebRTC&&(i=!0)}}return this.currLocalDescriptions=this.nextLocalDescriptions,i}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(s){}setHasBandwidthPriority(s){}setHighResolutionFeatureEnabled(s){this.enableUhdContent=s,this.defaultHiTargetBitrateKbps=s?2e3:1200,this.defaultLowTargetBitrateKbps=s?500:300}getQualityMapString(s){var o;let i="";const e=(o=this.videoIndex)===null||o===void 0?void 0:o.localStreamDescriptions();(e==null?void 0:e.length)>0&&(s.forEach(t=>{let n=!1;t.rid==="low"?n=e[0].disabledByWebRTC:n=e[1].disabledByWebRTC,i+=`{ rid: ${t.rid} active:${t.active} disabledByWebRTC: ${n} maxBitrate:${t.maxBitrate} scaleResolutionDownBy:${t.scaleResolutionDownBy} maxFrameRate:${t.maxFramerate}`}),this.logger.info(`simulcast: content policy:chooseEncodingParameters newQualityMap: ${i}`))}addObserver(s){}removeObserver(s){}forEachObserver(s){}constructor(s,o){this.logger=s,this.encodingParams=o,this.videoIndex=null,this.currLocalDescriptions=[],this.nextLocalDescriptions=[],this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");d.default=u},VhCr:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(u,m,s,o,i,e,t,n,r,c){this.attendeeId=u,this.sdpOffer=m,this.audioHost=s,this.audioMuted=o,this.audioCheckin=i,this.receiveStreamIds=e,this.localVideoEnabled=t,this.videoStreamDescriptions=n,this.connectionTypeHasVideo=r,this.compressedSdpOffer=c,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");d.default=g},VoiG:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"TranscriptionStatus");d.default=g},"W+eo":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("j+uH"));let m=a(class extends u.default{cancel(){for(const o of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${o.name()}`),o.cancel()}run(){return g(this,void 0,void 0,function*(){const o=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),o.push(e.run());const i=[];for(let e=0;e<o.length;e++){try{yield o[e]}catch(t){i.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(i.length>0){const e=i.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(o,i,e){super(o),this.taskName=i,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");d.default=m},WHnE:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("Sa54")),m=p(h("6/h7"));let s=a(class{bindAudioElement(i){return g(this,void 0,void 0,function*(){if(!i)throw new Error(`Cannot bind audio element: ${i}`);return this.audioElement=i,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(i=>{this.audioStream&&i.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(i){return g(this,void 0,void 0,function*(){if(i){this.audioStream=i;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(i){return g(this,void 0,void 0,function*(){if(i&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=i,this.bindAudioMix()})}forEachObserver(i){for(const e of this.observers)m.default.nextTick(()=>{i(e)})}bindAudioMix(){var i,e;return g(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(l=>{t&&l.meetingAudioStreamBecameInactive(t),this.audioStream&&l.meetingAudioStreamBecameActive(this.audioStream)});const n=((i=this.audioDevice)===null||i===void 0?void 0:i.deviceId)!==this.audioElement.sinkId;if(n&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const r=this.audioDevice?this.audioDevice.deviceId:"",c=this.audioElement.sinkId;if(r===c)return;const f=this.audioElement,S=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(f.srcObject=null),n)try{yield f.setSinkId(r)}catch(l){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${l}`),l}this.browserBehavior.hasChromiumWebRTC()&&(f.srcObject=S)})}getCurrentMeetingAudioStream(){return g(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(i){return g(this,void 0,void 0,function*(){this.observers.add(i)})}removeAudioMixObserver(i){return g(this,void 0,void 0,function*(){this.observers.delete(i)})}audioOutputDidChange(i){return g(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(i)})}constructor(i){this.logger=i,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new u.default,this.observers=new Set}},"DefaultAudioMixController");d.default=s},WRer:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("hEYi")),m=h("f2XL"),s=p(h("aVV0"));let o=a(class extends s.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return g(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(e){if(e.type!==u.default.ReceivedSignalFrame||e.message.type!==m.SdkSignalFrame.Type.PAUSE&&e.message.type!==m.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,n=e.message.type;if(this.context.logger.info(`received new ${n===m.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const r=t.groupIds.map(c=>{const f=this.context.videoStreamIndex.attendeeIdForGroupId(c);return this.context.videoTileController.getVideoTileForAttendeeId(f)});for(const c of r)c!==void 0&&(n===m.SdkSignalFrame.Type.PAUSE?c.state().paused||(this.serverPausedVideoTileIds.add(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(f=>{f.tileWillBePausedByDownlinkPolicy(c.id())}),c.pause()):c.state().paused&&this.serverPausedVideoTileIds.has(c.id())&&(this.serverPausedVideoTileIds.delete(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(f=>{f.tileWillBeUnpausedByDownlinkPolicy(c.id())}),c.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");d.default=o},"WW/M":function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={UserNotFound:"user_not_found",InvalidInviteType:"invalid_invite_type",Ratelimited:"ratelimited"},t=Object(s.a)("connectInvites.listPending generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"connectInvites.listPending",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to connectInvites.listPending
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconnectInvitesListPendingFetcher",description:"connectInvites.listPending generated fetcher"}},WcgR:function(W,d,h){"use strict";var g=h("ILaC"),p=h("uE2L"),u=h("LV2V"),m=h("ngjY"),s=h("KSud"),o=h("nzLN"),i=1,e=32,t=Object(u.a)(function(l,y,T){var O=i;if(T.length){var R=Object(o.a)(T,Object(s.a)(t));O|=e}return Object(m.a)(l,O,y,T,R)});t.placeholder={};var n=t,r=h("Tjpy"),c=h("Tchk"),f=Object(r.a)(function(l,y){return Object(g.a)(y,function(T){T=Object(c.a)(T),Object(p.a)(l,T,n(l[T],l))}),l}),S=d.a=f},Wdtm:function(W,d,h){"use strict";var g=this&&this.__createBinding||(Object.create?function(l,y,T,O){O===void 0&&(O=T),Object.defineProperty(l,O,{enumerable:!0,get:function(){return y[T]}})}:function(l,y,T,O){O===void 0&&(O=T),l[O]=y[T]}),p=this&&this.__setModuleDefault||(Object.create?function(l,y){Object.defineProperty(l,"default",{enumerable:!0,value:y})}:function(l,y){l.default=y}),u=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var y={};if(l!=null)for(var T in l)T!=="default"&&Object.prototype.hasOwnProperty.call(l,T)&&g(y,l,T);return p(y,l),y},m=this&&this.__awaiter||function(l,y,T,O){function R(F){return F instanceof T?F:new T(function(U){U(F)})}return a(R,"adopt"),new(T||(T=Promise))(function(F,U){function _(A){try{L(O.next(A))}catch(M){U(M)}}a(_,"fulfilled");function P(A){try{L(O.throw(A))}catch(M){U(M)}}a(P,"rejected");function L(A){A.done?F(A.value):R(A.value).then(_,P)}a(L,"step"),L((O=O.apply(l,y||[])).next())})},s=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(d,"__esModule",{value:!0});const o=s(h("aZba")),i=s(h("papz")),e=s(h("42jQ")),t=u(h("/AJg")),n=s(h("HbHZ")),r=s(h("OV1w")),c=h("XCDq"),f=s(h("j+uH"));let S=a(class extends f.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return m(this,void 0,void 0,function*(){const y=yield new Promise((T,O)=>{const R=this.context;R.turnCredentials=null;let F=a(class{cancel(){this.signalingClient.removeObserver(this),O(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(L){if(L.type===n.default.WebSocketClosed){let M=`The signaling connection was closed with code ${L.closeCode} and reason: ${L.closeReason}`;R.logger.warn(M);let k=i.default.SignalingBadRequest;L.closeCode===4410?(M="The meeting already ended.",R.logger.warn(M),k=i.default.MeetingEnded):L.closeCode>=4500&&L.closeCode<4600&&(k=i.default.SignalingInternalServerError),R.audioVideoController.handleMeetingSessionStatus(new o.default(k),new Error(M));return}if(L.type!==n.default.ReceivedSignalFrame)return;if(L.message.type===c.SdkSignalFrame.Type.JOIN_ACK){const M=L.message.joinack;if(!M){R.audioVideoController.handleMeetingSessionStatus(new o.default(i.default.SignalingRequestFailed),new Error("Join ACK message did not include expected frame"));return}if(M.videoSubscriptionLimit&&(R.videoSubscriptionLimit=M.videoSubscriptionLimit),R.serverSupportsCompression=M.wantsCompressedSdp,M.defaultServerSideNetworkAdaption!==void 0&&M.defaultServerSideNetworkAdaption!==t.default.Default&&R.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const k=M.defaultServerSideNetworkAdaption;R.logger.info(`Overriding server side network adaption value to ${k}`),R.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(k))}M&&M.turnCredentials?(R.turnCredentials=new e.default,R.turnCredentials.username=M.turnCredentials.username,R.turnCredentials.password=M.turnCredentials.password,R.turnCredentials.ttl=M.turnCredentials.ttl,R.turnCredentials.uris=M.turnCredentials.uris.map(k=>R.meetingSessionConfiguration.urls.urlRewriter(k)).filter(k=>!!k)):R.logger.error("missing TURN credentials in JoinAckFrame");return}if(L.message.type!==c.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const A=L.message.index;T(A)}constructor(L){this.signalingClient=L}},"IndexFrameInterceptor");const U=new F(this.context.signalingClient);this.context.signalingClient.registerObserver(U),this.taskCanceler=U,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const _=new r.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(_.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),_.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(_.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),_.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(_)});this.context.logger.info(`received first index ${JSON.stringify(y)}`),this.context.indexFrame=y})}constructor(y){super(y.logger),this.context=y,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");d.default=S},Wjms:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(u,m,s,o){function i(e){return e instanceof s?e:new s(function(t){t(e)})}return a(i,"adopt"),new(s||(s=Promise))(function(e,t){function n(f){try{c(o.next(f))}catch(S){t(S)}}a(n,"fulfilled");function r(f){try{c(o.throw(f))}catch(S){t(S)}}a(r,"rejected");function c(f){f.done?e(f.value):i(f.value).then(n,r)}a(c,"step"),c((o=o.apply(u,m||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});let p=a(class{process(m){return g(this,void 0,void 0,function*(){return m})}destroy(){return g(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");d.default=p},Wnnr:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("Z/hr"));let u=a(class{makeTile(s,o,i,e){return new p.default(s,o,i,e)}},"DefaultVideoTileFactory");d.default=u},X3Fi:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=h("K4CH"),u=g(h("59sL"));let m=a(class ks{getParserResult(){var o,i;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((o=this.parserResult)===null||o===void 0?void 0:o.os.name)||ks.UNAVAILABLE,osVersion:((i=this.parserResult)===null||i===void 0?void 0:i.os.version)||ks.UNAVAILABLE,sdkVersion:u.default.sdkVersion,sdkName:u.default.sdkName}}constructor(o){var i,e,t,n,r,c,f;try{this.parserResult=navigator&&navigator.userAgent?new p.UAParser(navigator.userAgent).getResult():void 0}catch(S){o.error(S.message)}this.browserMajorVersion=((t=(e=(i=this.parserResult)===null||i===void 0?void 0:i.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||ks.UNAVAILABLE,this.browserName=((n=this.parserResult)===null||n===void 0?void 0:n.browser.name)||ks.UNAVAILABLE,this.browserVersion=((r=this.parserResult)===null||r===void 0?void 0:r.browser.version)||ks.UNAVAILABLE,this.deviceName=[((c=this.parserResult)===null||c===void 0?void 0:c.device.vendor)||"",((f=this.parserResult)===null||f===void 0?void 0:f.device.model)||""].join(" ").trim()||ks.UNAVAILABLE}},"DefaultUserAgentParser");d.default=m,m.UNAVAILABLE="Unavailable"},X9Jc:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});function g(u){return u.map(m=>typeof m=="object"?JSON.stringify(m):`${m}`).join(" ")}a(g,"stringify");let p=a(class{debug(){for(var m=arguments.length,s=new Array(m),o=0;o<m;o++)s[o]=arguments[o];this.base.debug(g(s))}info(){for(var m=arguments.length,s=new Array(m),o=0;o<m;o++)s[o]=arguments[o];this.base.info(g(s))}warn(){for(var m=arguments.length,s=new Array(m),o=0;o<m;o++)s[o]=arguments[o];this.base.warn(g(s))}error(){for(var m=arguments.length,s=new Array(m),o=0;o<m;o++)s[o]=arguments[o];this.base.error(g(s))}constructor(m){this.base=m}},"LoggerAdapter");d.default=p},XCDq:function(W,d,h){"use strict";var g=h("A4hc"),p=g.Reader,u=g.Writer,m=g.util,s=g.roots.default||(g.roots.default={});s.SdkSignalFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkSignalFrame"),o.prototype.timestampMs=m.Long?m.Long.fromBits(0,0,!0):0,o.prototype.type=1,o.prototype.error=null,o.prototype.join=null,o.prototype.joinack=null,o.prototype.sub=null,o.prototype.suback=null,o.prototype.index=null,o.prototype.pause=null,o.prototype.leave=null,o.prototype.leaveAck=null,o.prototype.bitrates=null,o.prototype.audioControl=null,o.prototype.audioMetadata=null,o.prototype.audioStreamIdInfo=null,o.prototype.pingPong=null,o.prototype.audioStatus=null,o.prototype.clientMetric=null,o.prototype.dataMessage=null,o.prototype.remoteVideoUpdate=null,o.prototype.primaryMeetingJoin=null,o.prototype.primaryMeetingJoinAck=null,o.prototype.primaryMeetingLeave=null,o.prototype.notification=null,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&s.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&s.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&s.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&s.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&s.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&s.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&s.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&s.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&s.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&s.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&s.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&s.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&s.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&s.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&s.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&s.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&s.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&s.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&s.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&s.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&s.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&s.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkSignalFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.timestampMs=e.uint64();break}case 2:{r.type=e.int32();break}case 3:{r.error=s.SdkErrorFrame.decode(e,e.uint32());break}case 4:{r.join=s.SdkJoinFrame.decode(e,e.uint32());break}case 5:{r.joinack=s.SdkJoinAckFrame.decode(e,e.uint32());break}case 6:{r.sub=s.SdkSubscribeFrame.decode(e,e.uint32());break}case 7:{r.suback=s.SdkSubscribeAckFrame.decode(e,e.uint32());break}case 8:{r.index=s.SdkIndexFrame.decode(e,e.uint32());break}case 10:{r.pause=s.SdkPauseResumeFrame.decode(e,e.uint32());break}case 11:{r.leave=s.SdkLeaveFrame.decode(e,e.uint32());break}case 12:{r.leaveAck=s.SdkLeaveAckFrame.decode(e,e.uint32());break}case 14:{r.bitrates=s.SdkBitrateFrame.decode(e,e.uint32());break}case 17:{r.audioControl=s.SdkAudioControlFrame.decode(e,e.uint32());break}case 18:{r.audioMetadata=s.SdkAudioMetadataFrame.decode(e,e.uint32());break}case 19:{r.audioStreamIdInfo=s.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break}case 20:{r.pingPong=s.SdkPingPongFrame.decode(e,e.uint32());break}case 21:{r.audioStatus=s.SdkAudioStatusFrame.decode(e,e.uint32());break}case 22:{r.clientMetric=s.SdkClientMetricFrame.decode(e,e.uint32());break}case 23:{r.dataMessage=s.SdkDataMessageFrame.decode(e,e.uint32());break}case 25:{r.remoteVideoUpdate=s.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break}case 26:{r.primaryMeetingJoin=s.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break}case 27:{r.primaryMeetingJoinAck=s.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break}case 28:{r.primaryMeetingLeave=s.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break}case 35:{r.notification=s.SdkNotificationFrame.decode(e,e.uint32());break}default:e.skipType(c&7);break}}if(!r.hasOwnProperty("timestampMs"))throw m.ProtocolError("missing required 'timestampMs'",{instance:r});if(!r.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:r});return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isInteger(e.timestampMs)&&!(e.timestampMs&&m.isInteger(e.timestampMs.low)&&m.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=s.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=s.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=s.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=s.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=s.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=s.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=s.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=s.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=s.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=s.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=s.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=s.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=s.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=s.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=s.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=s.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=s.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=s.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=s.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=s.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=s.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=s.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkSignalFrame)return e;var t=new s.SdkSignalFrame;switch(e.timestampMs!=null&&(m.Long?(t.timestampMs=m.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=s.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=s.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=s.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=s.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=s.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=s.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=s.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=s.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=s.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=s.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=s.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=s.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=s.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=s.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=s.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=s.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=s.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=s.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=s.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=s.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=s.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=s.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if(t.defaults){if(m.Long){var r=new m.Long(0,0,!0);n.timestampMs=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.timestampMs=t.longs===String?"0":0;n.type=t.enums===String?"JOIN":1,n.error=null,n.join=null,n.joinack=null,n.sub=null,n.suback=null,n.index=null,n.pause=null,n.leave=null,n.leaveAck=null,n.bitrates=null,n.audioControl=null,n.audioMetadata=null,n.audioStreamIdInfo=null,n.pingPong=null,n.audioStatus=null,n.clientMetric=null,n.dataMessage=null,n.remoteVideoUpdate=null,n.primaryMeetingJoin=null,n.primaryMeetingJoinAck=null,n.primaryMeetingLeave=null,n.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?n.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:n.timestampMs=t.longs===String?m.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?s.SdkSignalFrame.Type[e.type]===void 0?e.type:s.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(n.error=s.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(n.join=s.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(n.joinack=s.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(n.sub=s.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(n.suback=s.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(n.index=s.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(n.pause=s.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(n.leave=s.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(n.leaveAck=s.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(n.bitrates=s.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(n.audioControl=s.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(n.audioMetadata=s.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(n.audioStreamIdInfo=s.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(n.pingPong=s.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(n.audioStatus=s.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(n.clientMetric=s.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(n.dataMessage=s.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(n.remoteVideoUpdate=s.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(n.primaryMeetingJoin=s.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(n.primaryMeetingJoinAck=s.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(n.primaryMeetingLeave=s.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(n.notification=s.SdkNotificationFrame.toObject(e.notification,t)),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSignalFrame"},"getTypeUrl"),o.Type=function(){var i={},e=Object.create(i);return e[i[1]="JOIN"]=1,e[i[2]="JOIN_ACK"]=2,e[i[3]="SUBSCRIBE"]=3,e[i[4]="SUBSCRIBE_ACK"]=4,e[i[5]="INDEX"]=5,e[i[7]="PAUSE"]=7,e[i[8]="RESUME"]=8,e[i[9]="LEAVE"]=9,e[i[10]="LEAVE_ACK"]=10,e[i[13]="BITRATES"]=13,e[i[16]="AUDIO_CONTROL"]=16,e[i[17]="AUDIO_METADATA"]=17,e[i[18]="AUDIO_STREAM_ID_INFO"]=18,e[i[19]="PING_PONG"]=19,e[i[20]="AUDIO_STATUS"]=20,e[i[21]="CLIENT_METRIC"]=21,e[i[22]="DATA_MESSAGE"]=22,e[i[24]="REMOTE_VIDEO_UPDATE"]=24,e[i[25]="PRIMARY_MEETING_JOIN"]=25,e[i[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[i[27]="PRIMARY_MEETING_LEAVE"]=27,e[i[34]="NOTIFICATION"]=34,e}(),o}(),s.SdkErrorFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkErrorFrame"),o.prototype.status=0,o.prototype.description="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkErrorFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.status=e.uint32();break}case 2:{r.description=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!m.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!m.isString(e.description)?"description: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkErrorFrame)return e;var t=new s.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.status=0,n.description=""),e.status!=null&&e.hasOwnProperty("status")&&(n.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(n.description=e.description),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkErrorFrame"},"getTypeUrl"),o}(),s.SdkJoinFlags=function(){var o={},i=Object.create(o);return i[o[2]="HAS_STREAM_UPDATE"]=2,i[o[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,i[o[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,i}(),s.SdkClientDetails=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkClientDetails"),o.prototype.appName="",o.prototype.appVersion="",o.prototype.deviceModel="",o.prototype.deviceMake="",o.prototype.platformName="",o.prototype.platformVersion="",o.prototype.clientSource="",o.prototype.chimeSdkVersion="",o.prototype.clientUtcOffset="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkClientDetails;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.appName=e.string();break}case 2:{r.appVersion=e.string();break}case 3:{r.deviceModel=e.string();break}case 4:{r.deviceMake=e.string();break}case 5:{r.platformName=e.string();break}case 6:{r.platformVersion=e.string();break}case 7:{r.clientSource=e.string();break}case 8:{r.chimeSdkVersion=e.string();break}case 9:{r.clientUtcOffset=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!m.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!m.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!m.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!m.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!m.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!m.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!m.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!m.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!m.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkClientDetails)return e;var t=new s.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.appName="",n.appVersion="",n.deviceModel="",n.deviceMake="",n.platformName="",n.platformVersion="",n.clientSource="",n.chimeSdkVersion="",n.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(n.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(n.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(n.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(n.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(n.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(n.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(n.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(n.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(n.clientUtcOffset=e.clientUtcOffset),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientDetails"},"getTypeUrl"),o}(),s.SdkServerSideNetworkAdaption=function(){var o={},i=Object.create(o);return i[o[1]="DEFAULT"]=1,i[o[2]="NONE"]=2,i[o[3]="BANDWIDTH_PROBING"]=3,i[o[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,i}(),s.SdkJoinFrame=function(){function o(i){if(this.supportedServerSideNetworkAdaptions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkJoinFrame"),o.prototype.protocolVersion=2,o.prototype.maxNumOfVideos=0,o.prototype.flags=0,o.prototype.clientDetails=null,o.prototype.audioSessionId=m.Long?m.Long.fromBits(0,0,!0):0,o.prototype.wantsCompressedSdp=!1,o.prototype.serverSideNetworkAdaption=1,o.prototype.supportedServerSideNetworkAdaptions=m.emptyArray,o.prototype.wantsAllTemporalLayersInIndex=!1,o.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&s.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[n]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkJoinFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.protocolVersion=e.uint32();break}case 2:{r.maxNumOfVideos=e.uint32();break}case 3:{r.flags=e.uint32();break}case 4:{r.clientDetails=s.SdkClientDetails.decode(e,e.uint32());break}case 6:{r.audioSessionId=e.uint64();break}case 7:{r.wantsCompressedSdp=e.bool();break}case 10:{r.serverSideNetworkAdaption=e.int32();break}case 11:{if(r.supportedServerSideNetworkAdaptions&&r.supportedServerSideNetworkAdaptions.length||(r.supportedServerSideNetworkAdaptions=[]),(c&7)===2)for(var f=e.uint32()+e.pos;e.pos<f;)r.supportedServerSideNetworkAdaptions.push(e.int32());else r.supportedServerSideNetworkAdaptions.push(e.int32());break}case 12:{r.wantsAllTemporalLayersInIndex=e.bool();break}case 13:{r.disablePeriodicKeyframeRequestOnContentSender=e.bool();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!m.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!m.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!m.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=s.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!m.isInteger(e.audioSessionId)&&!(e.audioSessionId&&m.isInteger(e.audioSessionId.low)&&m.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)switch(e.supportedServerSideNetworkAdaptions[n]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean"?"wantsAllTemporalLayersInIndex: boolean expected":e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkJoinFrame)return e;var t=new s.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=s.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(m.Long?(t.audioSessionId=m.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){default:if(typeof e.serverSideNetworkAdaption=="number"){t.serverSideNetworkAdaption=e.serverSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)switch(e.supportedServerSideNetworkAdaptions[n]){default:if(typeof e.supportedServerSideNetworkAdaptions[n]=="number"){t.supportedServerSideNetworkAdaptions[n]=e.supportedServerSideNetworkAdaptions[n];break}case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[n]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[n]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[n]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[n]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.supportedServerSideNetworkAdaptions=[]),t.defaults){if(n.protocolVersion=2,n.maxNumOfVideos=0,n.flags=0,n.clientDetails=null,m.Long){var r=new m.Long(0,0,!0);n.audioSessionId=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.audioSessionId=t.longs===String?"0":0;n.wantsCompressedSdp=!1,n.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,n.wantsAllTemporalLayersInIndex=!1,n.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(n.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(n.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(n.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(n.clientDetails=s.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?n.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:n.audioSessionId=t.longs===String?m.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(n.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(n.serverSideNetworkAdaption=t.enums===String?s.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]===void 0?e.serverSideNetworkAdaption:s.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){n.supportedServerSideNetworkAdaptions=[];for(var c=0;c<e.supportedServerSideNetworkAdaptions.length;++c)n.supportedServerSideNetworkAdaptions[c]=t.enums===String?s.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[c]]===void 0?e.supportedServerSideNetworkAdaptions[c]:s.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[c]]:e.supportedServerSideNetworkAdaptions[c]}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&(n.wantsAllTemporalLayersInIndex=e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(n.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinFrame"},"getTypeUrl"),o}(),s.SdkJoinAckFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkJoinAckFrame"),o.prototype.turnCredentials=null,o.prototype.videoSubscriptionLimit=0,o.prototype.wantsCompressedSdp=!1,o.prototype.defaultServerSideNetworkAdaption=1,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&s.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkJoinAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.turnCredentials=s.SdkTurnCredentials.decode(e,e.uint32());break}case 2:{r.videoSubscriptionLimit=e.uint32();break}case 3:{r.wantsCompressedSdp=e.bool();break}case 4:{r.defaultServerSideNetworkAdaption=e.int32();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=s.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!m.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkJoinAckFrame)return e;var t=new s.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=s.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){default:if(typeof e.defaultServerSideNetworkAdaption=="number"){t.defaultServerSideNetworkAdaption=e.defaultServerSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.turnCredentials=null,n.videoSubscriptionLimit=0,n.wantsCompressedSdp=!1,n.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(n.turnCredentials=s.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(n.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(n.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(n.defaultServerSideNetworkAdaption=t.enums===String?s.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]===void 0?e.defaultServerSideNetworkAdaption:s.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinAckFrame"},"getTypeUrl"),o}(),s.SdkLeaveFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkLeaveFrame"),o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkLeaveFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),o.fromObject=a(function(e){return e instanceof s.SdkLeaveFrame?e:new s.SdkLeaveFrame},"fromObject"),o.toObject=a(function(){return{}},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveFrame"},"getTypeUrl"),o}(),s.SdkLeaveAckFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkLeaveAckFrame"),o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkLeaveAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),o.fromObject=a(function(e){return e instanceof s.SdkLeaveAckFrame?e:new s.SdkLeaveAckFrame},"fromObject"),o.toObject=a(function(){return{}},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveAckFrame"},"getTypeUrl"),o}(),s.SdkStreamServiceType=function(){var o={},i=Object.create(o);return i[o[1]="RX"]=1,i[o[2]="TX"]=2,i[o[3]="DUPLEX"]=3,i}(),s.SdkStreamMediaType=function(){var o={},i=Object.create(o);return i[o[1]="AUDIO"]=1,i[o[2]="VIDEO"]=2,i}(),s.SdkSubscribeFrame=function(){function o(i){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkSubscribeFrame"),o.prototype.duplex=1,o.prototype.sendStreams=m.emptyArray,o.prototype.receiveStreamIds=m.emptyArray,o.prototype.sdpOffer="",o.prototype.audioHost="",o.prototype.audioCheckin=!1,o.prototype.audioMuted=!1,o.prototype.compressedSdpOffer=m.newBuffer([]),o.prototype.videoSubscriptionConfiguration=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var n=0;n<e.sendStreams.length;++n)s.SdkStreamDescriptor.encode(e.sendStreams[n],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var n=0;n<e.receiveStreamIds.length;++n)t.uint32(24).uint32(e.receiveStreamIds[n]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var n=0;n<e.videoSubscriptionConfiguration.length;++n)s.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[n],t.uint32(74).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkSubscribeFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.duplex=e.int32();break}case 2:{r.sendStreams&&r.sendStreams.length||(r.sendStreams=[]),r.sendStreams.push(s.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(r.receiveStreamIds&&r.receiveStreamIds.length||(r.receiveStreamIds=[]),(c&7)===2)for(var f=e.uint32()+e.pos;e.pos<f;)r.receiveStreamIds.push(e.uint32());else r.receiveStreamIds.push(e.uint32());break}case 4:{r.sdpOffer=e.string();break}case 5:{r.audioHost=e.string();break}case 6:{r.audioCheckin=e.bool();break}case 7:{r.audioMuted=e.bool();break}case 8:{r.compressedSdpOffer=e.bytes();break}case 9:{r.videoSubscriptionConfiguration&&r.videoSubscriptionConfiguration.length||(r.videoSubscriptionConfiguration=[]),r.videoSubscriptionConfiguration.push(s.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var n=s.SdkStreamDescriptor.verify(e.sendStreams[t]);if(n)return"sendStreams."+n}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!m.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!m.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!m.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||m.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var n=s.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(n)return"videoSubscriptionConfiguration."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkSubscribeFrame)return e;var t=new s.SdkSubscribeFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var n=0;n<e.sendStreams.length;++n){if(typeof e.sendStreams[n]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[n]=s.SdkStreamDescriptor.fromObject(e.sendStreams[n])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var n=0;n<e.receiveStreamIds.length;++n)t.receiveStreamIds[n]=e.receiveStreamIds[n]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?m.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=m.newBuffer(m.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length>=0&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var n=0;n<e.videoSubscriptionConfiguration.length;++n){if(typeof e.videoSubscriptionConfiguration[n]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[n]=s.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sendStreams=[],n.receiveStreamIds=[],n.videoSubscriptionConfiguration=[]),t.defaults&&(n.duplex=t.enums===String?"RX":1,n.sdpOffer="",n.audioHost="",n.audioCheckin=!1,n.audioMuted=!1,t.bytes===String?n.compressedSdpOffer="":(n.compressedSdpOffer=[],t.bytes!==Array&&(n.compressedSdpOffer=m.newBuffer(n.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(n.duplex=t.enums===String?s.SdkStreamServiceType[e.duplex]===void 0?e.duplex:s.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){n.sendStreams=[];for(var r=0;r<e.sendStreams.length;++r)n.sendStreams[r]=s.SdkStreamDescriptor.toObject(e.sendStreams[r],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){n.receiveStreamIds=[];for(var r=0;r<e.receiveStreamIds.length;++r)n.receiveStreamIds[r]=e.receiveStreamIds[r]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(n.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(n.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(n.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(n.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(n.compressedSdpOffer=t.bytes===String?m.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){n.videoSubscriptionConfiguration=[];for(var r=0;r<e.videoSubscriptionConfiguration.length;++r)n.videoSubscriptionConfiguration[r]=s.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeFrame"},"getTypeUrl"),o}(),s.SdkSubscribeAckFrame=function(){function o(i){if(this.allocations=[],this.tracks=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkSubscribeAckFrame"),o.prototype.duplex=1,o.prototype.allocations=m.emptyArray,o.prototype.sdpAnswer="",o.prototype.tracks=m.emptyArray,o.prototype.compressedSdpAnswer=m.newBuffer([]),o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var n=0;n<e.allocations.length;++n)s.SdkStreamAllocation.encode(e.allocations[n],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var n=0;n<e.tracks.length;++n)s.SdkTrackMapping.encode(e.tracks[n],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkSubscribeAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.duplex=e.int32();break}case 2:{r.allocations&&r.allocations.length||(r.allocations=[]),r.allocations.push(s.SdkStreamAllocation.decode(e,e.uint32()));break}case 3:{r.sdpAnswer=e.string();break}case 4:{r.tracks&&r.tracks.length||(r.tracks=[]),r.tracks.push(s.SdkTrackMapping.decode(e,e.uint32()));break}case 5:{r.compressedSdpAnswer=e.bytes();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var n=s.SdkStreamAllocation.verify(e.allocations[t]);if(n)return"allocations."+n}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!m.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var n=s.SdkTrackMapping.verify(e.tracks[t]);if(n)return"tracks."+n}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||m.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkSubscribeAckFrame)return e;var t=new s.SdkSubscribeAckFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var n=0;n<e.allocations.length;++n){if(typeof e.allocations[n]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[n]=s.SdkStreamAllocation.fromObject(e.allocations[n])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var n=0;n<e.tracks.length;++n){if(typeof e.tracks[n]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[n]=s.SdkTrackMapping.fromObject(e.tracks[n])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?m.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=m.newBuffer(m.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length>=0&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.allocations=[],n.tracks=[]),t.defaults&&(n.duplex=t.enums===String?"RX":1,n.sdpAnswer="",t.bytes===String?n.compressedSdpAnswer="":(n.compressedSdpAnswer=[],t.bytes!==Array&&(n.compressedSdpAnswer=m.newBuffer(n.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(n.duplex=t.enums===String?s.SdkStreamServiceType[e.duplex]===void 0?e.duplex:s.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){n.allocations=[];for(var r=0;r<e.allocations.length;++r)n.allocations[r]=s.SdkStreamAllocation.toObject(e.allocations[r],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(n.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){n.tracks=[];for(var r=0;r<e.tracks.length;++r)n.tracks[r]=s.SdkTrackMapping.toObject(e.tracks[r],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(n.compressedSdpAnswer=t.bytes===String?m.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeAckFrame"},"getTypeUrl"),o}(),s.SdkIndexFrame=function(){function o(i){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkIndexFrame"),o.prototype.atCapacity=!1,o.prototype.sources=m.emptyArray,o.prototype.pausedAtSourceIds=m.emptyArray,o.prototype.numParticipants=0,o.prototype.supportedReceiveCodecIntersection=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var n=0;n<e.sources.length;++n)s.SdkStreamDescriptor.encode(e.sources[n],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var n=0;n<e.pausedAtSourceIds.length;++n)t.uint32(24).uint32(e.pausedAtSourceIds[n]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var n=0;n<e.supportedReceiveCodecIntersection.length;++n)t.uint32(40).int32(e.supportedReceiveCodecIntersection[n]);return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkIndexFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.atCapacity=e.bool();break}case 2:{r.sources&&r.sources.length||(r.sources=[]),r.sources.push(s.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(r.pausedAtSourceIds&&r.pausedAtSourceIds.length||(r.pausedAtSourceIds=[]),(c&7)===2)for(var f=e.uint32()+e.pos;e.pos<f;)r.pausedAtSourceIds.push(e.uint32());else r.pausedAtSourceIds.push(e.uint32());break}case 4:{r.numParticipants=e.uint32();break}case 5:{if(r.supportedReceiveCodecIntersection&&r.supportedReceiveCodecIntersection.length||(r.supportedReceiveCodecIntersection=[]),(c&7)===2)for(var f=e.uint32()+e.pos;e.pos<f;)r.supportedReceiveCodecIntersection.push(e.int32());else r.supportedReceiveCodecIntersection.push(e.int32());break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var n=s.SdkStreamDescriptor.verify(e.sources[t]);if(n)return"sources."+n}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!m.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!m.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 11:break}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkIndexFrame)return e;var t=new s.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var n=0;n<e.sources.length;++n){if(typeof e.sources[n]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[n]=s.SdkStreamDescriptor.fromObject(e.sources[n])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var n=0;n<e.pausedAtSourceIds.length;++n)t.pausedAtSourceIds[n]=e.pausedAtSourceIds[n]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var n=0;n<e.supportedReceiveCodecIntersection.length;++n)switch(e.supportedReceiveCodecIntersection[n]){default:if(typeof e.supportedReceiveCodecIntersection[n]=="number"){t.supportedReceiveCodecIntersection[n]=e.supportedReceiveCodecIntersection[n];break}case"VP8":case 1:t.supportedReceiveCodecIntersection[n]=1;break;case"H264_BASELINE_PROFILE":case 2:t.supportedReceiveCodecIntersection[n]=2;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[n]=3;break;case"H264_MAIN_PROFILE":case 4:t.supportedReceiveCodecIntersection[n]=4;break;case"H264_HIGH_PROFILE":case 5:t.supportedReceiveCodecIntersection[n]=5;break;case"H264_CONSTRAINED_HIGH_PROFILE":case 6:t.supportedReceiveCodecIntersection[n]=6;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[n]=8;break;case"AV1_MAIN_PROFILE":case 11:t.supportedReceiveCodecIntersection[n]=11;break}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sources=[],n.pausedAtSourceIds=[],n.supportedReceiveCodecIntersection=[]),t.defaults&&(n.atCapacity=!1,n.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(n.atCapacity=e.atCapacity),e.sources&&e.sources.length){n.sources=[];for(var r=0;r<e.sources.length;++r)n.sources[r]=s.SdkStreamDescriptor.toObject(e.sources[r],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){n.pausedAtSourceIds=[];for(var r=0;r<e.pausedAtSourceIds.length;++r)n.pausedAtSourceIds[r]=e.pausedAtSourceIds[r]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(n.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){n.supportedReceiveCodecIntersection=[];for(var r=0;r<e.supportedReceiveCodecIntersection.length;++r)n.supportedReceiveCodecIntersection[r]=t.enums===String?s.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[r]]===void 0?e.supportedReceiveCodecIntersection[r]:s.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[r]]:e.supportedReceiveCodecIntersection[r]}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkIndexFrame"},"getTypeUrl"),o}(),s.SdkPauseResumeFrame=function(){function o(i){if(this.streamIds=[],this.groupIds=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkPauseResumeFrame"),o.prototype.streamIds=m.emptyArray,o.prototype.groupIds=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.streamIds!=null&&e.streamIds.length)for(var n=0;n<e.streamIds.length;++n)t.uint32(8).uint32(e.streamIds[n]);if(e.groupIds!=null&&e.groupIds.length)for(var n=0;n<e.groupIds.length;++n)t.uint32(16).uint32(e.groupIds[n]);return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkPauseResumeFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{if(r.streamIds&&r.streamIds.length||(r.streamIds=[]),(c&7)===2)for(var f=e.uint32()+e.pos;e.pos<f;)r.streamIds.push(e.uint32());else r.streamIds.push(e.uint32());break}case 2:{if(r.groupIds&&r.groupIds.length||(r.groupIds=[]),(c&7)===2)for(var f=e.uint32()+e.pos;e.pos<f;)r.groupIds.push(e.uint32());else r.groupIds.push(e.uint32());break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!m.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!m.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkPauseResumeFrame)return e;var t=new s.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var n=0;n<e.streamIds.length;++n)t.streamIds[n]=e.streamIds[n]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var n=0;n<e.groupIds.length;++n)t.groupIds[n]=e.groupIds[n]>>>0}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.streamIds=[],n.groupIds=[]),e.streamIds&&e.streamIds.length){n.streamIds=[];for(var r=0;r<e.streamIds.length;++r)n.streamIds[r]=e.streamIds[r]}if(e.groupIds&&e.groupIds.length){n.groupIds=[];for(var r=0;r<e.groupIds.length;++r)n.groupIds[r]=e.groupIds[r]}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPauseResumeFrame"},"getTypeUrl"),o}(),s.SdkBitrateFrame=function(){function o(i){if(this.bitrates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkBitrateFrame"),o.prototype.bitrates=m.emptyArray,o.prototype.serverAvailableOutgoingBitrate=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.bitrates!=null&&e.bitrates.length)for(var n=0;n<e.bitrates.length;++n)s.SdkBitrate.encode(e.bitrates[n],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkBitrateFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.bitrates&&r.bitrates.length||(r.bitrates=[]),r.bitrates.push(s.SdkBitrate.decode(e,e.uint32()));break}case 2:{r.serverAvailableOutgoingBitrate=e.uint32();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var n=s.SdkBitrate.verify(e.bitrates[t]);if(n)return"bitrates."+n}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!m.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkBitrateFrame)return e;var t=new s.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var n=0;n<e.bitrates.length;++n){if(typeof e.bitrates[n]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[n]=s.SdkBitrate.fromObject(e.bitrates[n])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.bitrates=[]),t.defaults&&(n.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){n.bitrates=[];for(var r=0;r<e.bitrates.length;++r)n.bitrates[r]=s.SdkBitrate.toObject(e.bitrates[r],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(n.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrateFrame"},"getTypeUrl"),o}(),s.SdkStreamDescriptor=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkStreamDescriptor"),o.prototype.streamId=0,o.prototype.framerate=0,o.prototype.maxBitrateKbps=0,o.prototype.trackLabel="",o.prototype.groupId=0,o.prototype.avgBitrateBps=0,o.prototype.attendeeId="",o.prototype.mediaType=1,o.prototype.externalUserId="",o.prototype.width=0,o.prototype.height=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkStreamDescriptor;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.streamId=e.uint32();break}case 2:{r.framerate=e.uint32();break}case 3:{r.maxBitrateKbps=e.uint32();break}case 4:{r.trackLabel=e.string();break}case 6:{r.groupId=e.uint32();break}case 7:{r.avgBitrateBps=e.uint32();break}case 8:{r.attendeeId=e.string();break}case 9:{r.mediaType=e.int32();break}case 10:{r.externalUserId=e.string();break}case 11:{r.width=e.uint32();break}case 12:{r.height=e.uint32();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!m.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!m.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!m.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!m.isInteger(e.height)?"height: integer expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkStreamDescriptor)return e;var t=new s.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.streamId=0,n.framerate=0,n.maxBitrateKbps=0,n.trackLabel="",n.groupId=0,n.avgBitrateBps=0,n.attendeeId="",n.mediaType=t.enums===String?"AUDIO":1,n.externalUserId="",n.width=0,n.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(n.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(n.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(n.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(n.mediaType=t.enums===String?s.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:s.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(n.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(n.height=e.height),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDescriptor"},"getTypeUrl"),o}(),s.SdkStreamAllocation=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkStreamAllocation"),o.prototype.trackLabel="",o.prototype.streamId=0,o.prototype.groupId=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkStreamAllocation;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.trackLabel=e.string();break}case 2:{r.streamId=e.uint32();break}case 3:{r.groupId=e.uint32();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkStreamAllocation)return e;var t=new s.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.trackLabel="",n.streamId=0,n.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamAllocation"},"getTypeUrl"),o}(),s.SdkTrackMapping=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTrackMapping"),o.prototype.streamId=0,o.prototype.ssrc=0,o.prototype.trackLabel="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTrackMapping;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.streamId=e.uint32();break}case 2:{r.ssrc=e.uint32();break}case 3:{r.trackLabel=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!m.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTrackMapping)return e;var t=new s.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.streamId=0,n.ssrc=0,n.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(n.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTrackMapping"},"getTypeUrl"),o}(),s.SdkBitrate=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkBitrate"),o.prototype.sourceStreamId=0,o.prototype.avgBitrateBps=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkBitrate;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.sourceStreamId=e.uint32();break}case 2:{r.avgBitrateBps=e.uint32();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!m.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkBitrate)return e;var t=new s.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.sourceStreamId=0,n.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(n.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(n.avgBitrateBps=e.avgBitrateBps),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrate"},"getTypeUrl"),o}(),s.SdkAudioControlFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkAudioControlFrame"),o.prototype.muted=!1,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkAudioControlFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.muted=e.bool();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkAudioControlFrame)return e;var t=new s.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioControlFrame"},"getTypeUrl"),o}(),s.SdkAudioMetadataFrame=function(){function o(i){if(this.attendeeStates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkAudioMetadataFrame"),o.prototype.attendeeStates=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var n=0;n<e.attendeeStates.length;++n)s.SdkAudioAttendeeState.encode(e.attendeeStates[n],t.uint32(10).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkAudioMetadataFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.attendeeStates&&r.attendeeStates.length||(r.attendeeStates=[]),r.attendeeStates.push(s.SdkAudioAttendeeState.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var n=s.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(n)return"attendeeStates."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkAudioMetadataFrame)return e;var t=new s.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var n=0;n<e.attendeeStates.length;++n){if(typeof e.attendeeStates[n]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[n]=s.SdkAudioAttendeeState.fromObject(e.attendeeStates[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){n.attendeeStates=[];for(var r=0;r<e.attendeeStates.length;++r)n.attendeeStates[r]=s.SdkAudioAttendeeState.toObject(e.attendeeStates[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioMetadataFrame"},"getTypeUrl"),o}(),s.SdkAudioAttendeeState=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkAudioAttendeeState"),o.prototype.audioStreamId=0,o.prototype.volume=0,o.prototype.muted=!1,o.prototype.signalStrength=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkAudioAttendeeState;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.audioStreamId=e.uint32();break}case 2:{r.volume=e.uint32();break}case 3:{r.muted=e.bool();break}case 4:{r.signalStrength=e.uint32();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!m.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!m.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkAudioAttendeeState)return e;var t=new s.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStreamId=0,n.volume=0,n.muted=!1,n.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(n.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(n.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(n.signalStrength=e.signalStrength),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioAttendeeState"},"getTypeUrl"),o}(),s.SdkAudioStreamIdInfoFrame=function(){function o(i){if(this.streams=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkAudioStreamIdInfoFrame"),o.prototype.streams=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.streams!=null&&e.streams.length)for(var n=0;n<e.streams.length;++n)s.SdkAudioStreamIdInfo.encode(e.streams[n],t.uint32(10).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkAudioStreamIdInfoFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.streams&&r.streams.length||(r.streams=[]),r.streams.push(s.SdkAudioStreamIdInfo.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var n=s.SdkAudioStreamIdInfo.verify(e.streams[t]);if(n)return"streams."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkAudioStreamIdInfoFrame)return e;var t=new s.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var n=0;n<e.streams.length;++n){if(typeof e.streams[n]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[n]=s.SdkAudioStreamIdInfo.fromObject(e.streams[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.streams=[]),e.streams&&e.streams.length){n.streams=[];for(var r=0;r<e.streams.length;++r)n.streams[r]=s.SdkAudioStreamIdInfo.toObject(e.streams[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfoFrame"},"getTypeUrl"),o}(),s.SdkAudioStreamIdInfo=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkAudioStreamIdInfo"),o.prototype.audioStreamId=0,o.prototype.attendeeId="",o.prototype.muted=!1,o.prototype.externalUserId="",o.prototype.dropped=!1,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkAudioStreamIdInfo;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.audioStreamId=e.uint32();break}case 2:{r.attendeeId=e.string();break}case 3:{r.muted=e.bool();break}case 4:{r.externalUserId=e.string();break}case 5:{r.dropped=e.bool();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkAudioStreamIdInfo)return e;var t=new s.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStreamId=0,n.attendeeId="",n.muted=!1,n.externalUserId="",n.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(n.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(n.dropped=e.dropped),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfo"},"getTypeUrl"),o}(),s.SdkPingPongType=function(){var o={},i=Object.create(o);return i[o[1]="PING"]=1,i[o[2]="PONG"]=2,i}(),s.SdkPingPongFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkPingPongFrame"),o.prototype.type=1,o.prototype.pingId=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkPingPongFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.type=e.int32();break}case 2:{r.pingId=e.uint32();break}default:e.skipType(c&7);break}}if(!r.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:r});if(!r.hasOwnProperty("pingId"))throw m.ProtocolError("missing required 'pingId'",{instance:r});return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return m.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkPingPongFrame)return e;var t=new s.SdkPingPongFrame;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"PING":1,n.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?s.SdkPingPongType[e.type]===void 0?e.type:s.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(n.pingId=e.pingId),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPingPongFrame"},"getTypeUrl"),o}(),s.SdkAudioStatusFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkAudioStatusFrame"),o.prototype.audioStatus=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkAudioStatusFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.audioStatus=e.uint32();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!m.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkAudioStatusFrame)return e;var t=new s.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(n.audioStatus=e.audioStatus),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStatusFrame"},"getTypeUrl"),o}(),s.SdkMetric=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkMetric"),o.prototype.type=1,o.prototype.value=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkMetric;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.type=e.int32();break}case 2:{r.value=e.double();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkMetric)return e;var t=new s.SdkMetric;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_COUNT":case 90:t.type=90;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,n.value=0),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?s.SdkMetric.Type[e.type]===void 0?e.type:s.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(n.value=t.json&&!isFinite(e.value)?String(e.value):e.value),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMetric"},"getTypeUrl"),o.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[i[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[i[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[i[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[i[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[i[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[i[7]="STUN_RTT_MS"]=7,e[i[8]="SOCKET_DISCARDED_PPS"]=8,e[i[9]="RTC_MIC_JITTER_MS"]=9,e[i[10]="RTC_MIC_PPS"]=10,e[i[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[i[12]="RTC_MIC_BITRATE"]=12,e[i[13]="RTC_MIC_RTT_MS"]=13,e[i[14]="RTC_SPK_PPS"]=14,e[i[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[i[16]="RTC_SPK_JITTER_MS"]=16,e[i[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[i[18]="RTC_SPK_BITRATE"]=18,e[i[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[i[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[i[21]="VIDEO_SENT_RTT_MS"]=21,e[i[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[i[23]="VIDEO_NACKS_RECEIVED"]=23,e[i[24]="VIDEO_PLIS_RECEIVED"]=24,e[i[25]="VIDEO_ENCODE_MS"]=25,e[i[26]="VIDEO_INPUT_FPS"]=26,e[i[27]="VIDEO_ENCODE_FPS"]=27,e[i[28]="VIDEO_SENT_FPS"]=28,e[i[29]="VIDEO_FIRS_RECEIVED"]=29,e[i[30]="VIDEO_SENT_PPS"]=30,e[i[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[i[32]="VIDEO_SENT_BITRATE"]=32,e[i[33]="VIDEO_DROPPED_FPS"]=33,e[i[34]="VIDEO_TARGET_DELAY_MS"]=34,e[i[35]="VIDEO_DECODE_MS"]=35,e[i[36]="VIDEO_OUTPUT_FPS"]=36,e[i[37]="VIDEO_RECEIVED_PPS"]=37,e[i[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[i[39]="VIDEO_RENDER_DELAY_MS"]=39,e[i[40]="VIDEO_RECEIVED_FPS"]=40,e[i[41]="VIDEO_DECODE_FPS"]=41,e[i[42]="VIDEO_NACKS_SENT"]=42,e[i[43]="VIDEO_FIRS_SENT"]=43,e[i[44]="VIDEO_RECEIVED_BITRATE"]=44,e[i[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[i[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[i[47]="VIDEO_DISCARDED_PPS"]=47,e[i[48]="VIDEO_PLIS_SENT"]=48,e[i[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[i[64]="VIDEO_ENCODE_HEIGHT"]=64,e[i[66]="VIDEO_SENT_QP_SUM"]=66,e[i[69]="VIDEO_DECODE_HEIGHT"]=69,e[i[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[i[86]="VIDEO_ENCODE_WIDTH"]=86,e[i[87]="VIDEO_DECODE_WIDTH"]=87,e[i[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[i[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[i[90]="VIDEO_FREEZE_COUNT"]=90,e[i[91]="VIDEO_FREEZE_DURATION"]=91,e[i[92]="VIDEO_PAUSE_COUNT"]=92,e[i[93]="VIDEO_PAUSE_DURATION"]=93,e[i[94]="VIDEO_QUALITY_REASON"]=94,e[i[95]="VIDEO_PROCESSING_TIME"]=95,e[i[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[i[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[i[98]="RTC_SPK_TOTAL_LOST"]=98,e[i[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[i[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[i[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[i[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e}(),o}(),s.SdkStreamMetricFrame=function(){function o(i){if(this.metrics=[],this.dimensions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkStreamMetricFrame"),o.prototype.streamId=0,o.prototype.groupId=0,o.prototype.metrics=m.emptyArray,o.prototype.dimensions=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var n=0;n<e.metrics.length;++n)s.SdkMetric.encode(e.metrics[n],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var n=0;n<e.dimensions.length;++n)s.SdkStreamDimension.encode(e.dimensions[n],t.uint32(50).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkStreamMetricFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 3:{r.streamId=e.uint32();break}case 4:{r.groupId=e.uint32();break}case 5:{r.metrics&&r.metrics.length||(r.metrics=[]),r.metrics.push(s.SdkMetric.decode(e,e.uint32()));break}case 6:{r.dimensions&&r.dimensions.length||(r.dimensions=[]),r.dimensions.push(s.SdkStreamDimension.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var n=s.SdkMetric.verify(e.metrics[t]);if(n)return"metrics."+n}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var n=s.SdkStreamDimension.verify(e.dimensions[t]);if(n)return"dimensions."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkStreamMetricFrame)return e;var t=new s.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var n=0;n<e.metrics.length;++n){if(typeof e.metrics[n]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[n]=s.SdkMetric.fromObject(e.metrics[n])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var n=0;n<e.dimensions.length;++n){if(typeof e.dimensions[n]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[n]=s.SdkStreamDimension.fromObject(e.dimensions[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.metrics=[],n.dimensions=[]),t.defaults&&(n.streamId=0,n.groupId=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.metrics&&e.metrics.length){n.metrics=[];for(var r=0;r<e.metrics.length;++r)n.metrics[r]=s.SdkMetric.toObject(e.metrics[r],t)}if(e.dimensions&&e.dimensions.length){n.dimensions=[];for(var r=0;r<e.dimensions.length;++r)n.dimensions[r]=s.SdkStreamDimension.toObject(e.dimensions[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamMetricFrame"},"getTypeUrl"),o}(),s.SdkClientMetricFrame=function(){function o(i){if(this.globalMetrics=[],this.streamMetricFrames=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkClientMetricFrame"),o.prototype.globalMetrics=m.emptyArray,o.prototype.streamMetricFrames=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var n=0;n<e.globalMetrics.length;++n)s.SdkMetric.encode(e.globalMetrics[n],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var n=0;n<e.streamMetricFrames.length;++n)s.SdkStreamMetricFrame.encode(e.streamMetricFrames[n],t.uint32(18).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkClientMetricFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.globalMetrics&&r.globalMetrics.length||(r.globalMetrics=[]),r.globalMetrics.push(s.SdkMetric.decode(e,e.uint32()));break}case 2:{r.streamMetricFrames&&r.streamMetricFrames.length||(r.streamMetricFrames=[]),r.streamMetricFrames.push(s.SdkStreamMetricFrame.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var n=s.SdkMetric.verify(e.globalMetrics[t]);if(n)return"globalMetrics."+n}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var n=s.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(n)return"streamMetricFrames."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkClientMetricFrame)return e;var t=new s.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var n=0;n<e.globalMetrics.length;++n){if(typeof e.globalMetrics[n]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[n]=s.SdkMetric.fromObject(e.globalMetrics[n])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var n=0;n<e.streamMetricFrames.length;++n){if(typeof e.streamMetricFrames[n]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[n]=s.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.globalMetrics=[],n.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){n.globalMetrics=[];for(var r=0;r<e.globalMetrics.length;++r)n.globalMetrics[r]=s.SdkMetric.toObject(e.globalMetrics[r],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){n.streamMetricFrames=[];for(var r=0;r<e.streamMetricFrames.length;++r)n.streamMetricFrames[r]=s.SdkStreamMetricFrame.toObject(e.streamMetricFrames[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientMetricFrame"},"getTypeUrl"),o}(),s.SdkStreamDimension=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkStreamDimension"),o.prototype.type=1,o.prototype.value=null,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&s.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkStreamDimension;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.type=e.int32();break}case 2:{r.value=s.SdkDimensionValue.decode(e,e.uint32());break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=s.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkStreamDimension)return e;var t=new s.SdkStreamDimension;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=s.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"VIDEO_ENCODER_NAME":1,n.value=null),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?s.SdkStreamDimension.Type[e.type]===void 0?e.type:s.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(n.value=s.SdkDimensionValue.toObject(e.value,t)),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDimension"},"getTypeUrl"),o.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ENCODER_NAME"]=1,e[i[2]="VIDEO_DECODER_NAME"]=2,e}(),o}(),s.SdkDimensionValue=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkDimensionValue"),o.prototype.stringValue="",o.prototype.boolValue=!1,o.prototype.uintValue=m.Long?m.Long.fromBits(0,0,!0):0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkDimensionValue;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.stringValue=e.string();break}case 2:{r.boolValue=e.bool();break}case 3:{r.uintValue=e.uint64();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!m.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!m.isInteger(e.uintValue)&&!(e.uintValue&&m.isInteger(e.uintValue.low)&&m.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkDimensionValue)return e;var t=new s.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(m.Long?(t.uintValue=m.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if(t.defaults)if(n.stringValue="",n.boolValue=!1,m.Long){var r=new m.Long(0,0,!0);n.uintValue=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(n.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(n.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?n.uintValue=t.longs===String?String(e.uintValue):e.uintValue:n.uintValue=t.longs===String?m.Long.prototype.toString.call(e.uintValue):t.longs===Number?new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDimensionValue"},"getTypeUrl"),o}(),s.SdkDataMessageFrame=function(){function o(i){if(this.messages=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkDataMessageFrame"),o.prototype.messages=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.messages!=null&&e.messages.length)for(var n=0;n<e.messages.length;++n)s.SdkDataMessagePayload.encode(e.messages[n],t.uint32(10).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkDataMessageFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.messages&&r.messages.length||(r.messages=[]),r.messages.push(s.SdkDataMessagePayload.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var n=s.SdkDataMessagePayload.verify(e.messages[t]);if(n)return"messages."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkDataMessageFrame)return e;var t=new s.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var n=0;n<e.messages.length;++n){if(typeof e.messages[n]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[n]=s.SdkDataMessagePayload.fromObject(e.messages[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.messages=[]),e.messages&&e.messages.length){n.messages=[];for(var r=0;r<e.messages.length;++r)n.messages[r]=s.SdkDataMessagePayload.toObject(e.messages[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessageFrame"},"getTypeUrl"),o}(),s.SdkDataMessagePayload=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkDataMessagePayload"),o.prototype.topic="",o.prototype.data=m.newBuffer([]),o.prototype.lifetimeMs=0,o.prototype.senderAttendeeId="",o.prototype.ingestTimeNs=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.senderExternalUserId="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkDataMessagePayload;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.topic=e.string();break}case 2:{r.data=e.bytes();break}case 3:{r.lifetimeMs=e.uint32();break}case 4:{r.senderAttendeeId=e.string();break}case 5:{r.ingestTimeNs=e.int64();break}case 6:{r.senderExternalUserId=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!m.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||m.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!m.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!m.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!m.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&m.isInteger(e.ingestTimeNs.low)&&m.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!m.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkDataMessagePayload)return e;var t=new s.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?m.base64.decode(e.data,t.data=m.newBuffer(m.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(m.Long?(t.ingestTimeNs=m.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if(t.defaults){if(n.topic="",t.bytes===String?n.data="":(n.data=[],t.bytes!==Array&&(n.data=m.newBuffer(n.data))),n.lifetimeMs=0,n.senderAttendeeId="",m.Long){var r=new m.Long(0,0,!1);n.ingestTimeNs=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.ingestTimeNs=t.longs===String?"0":0;n.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(n.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?m.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(n.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(n.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?n.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:n.ingestTimeNs=t.longs===String?m.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(n.senderExternalUserId=e.senderExternalUserId),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessagePayload"},"getTypeUrl"),o}(),s.SdkTurnCredentials=function(){function o(i){if(this.uris=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTurnCredentials"),o.prototype.username="",o.prototype.password="",o.prototype.ttl=0,o.prototype.uris=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var n=0;n<e.uris.length;++n)t.uint32(34).string(e.uris[n]);return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTurnCredentials;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.username=e.string();break}case 2:{r.password=e.string();break}case 3:{r.ttl=e.uint32();break}case 4:{r.uris&&r.uris.length||(r.uris=[]),r.uris.push(e.string());break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!m.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!m.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!m.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!m.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTurnCredentials)return e;var t=new s.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var n=0;n<e.uris.length;++n)t.uris[n]=String(e.uris[n])}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.uris=[]),t.defaults&&(n.username="",n.password="",n.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(n.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(n.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(n.ttl=e.ttl),e.uris&&e.uris.length){n.uris=[];for(var r=0;r<e.uris.length;++r)n.uris[r]=e.uris[r]}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTurnCredentials"},"getTypeUrl"),o}(),s.SdkTranscriptItem=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscriptItem"),o.prototype.content="",o.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.speakerAttendeeId="",o.prototype.speakerExternalUserId="",o.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.type=1,o.prototype.vocabularyFilterMatch=!1,o.prototype.confidence=0,o.prototype.stable=!1,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscriptItem;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.content=e.string();break}case 2:{r.endTime=e.int64();break}case 3:{r.speakerAttendeeId=e.string();break}case 4:{r.speakerExternalUserId=e.string();break}case 5:{r.startTime=e.int64();break}case 6:{r.type=e.int32();break}case 7:{r.vocabularyFilterMatch=e.bool();break}case 8:{r.confidence=e.double();break}case 9:{r.stable=e.bool();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!m.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!m.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscriptItem)return e;var t=new s.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if(t.defaults){if(n.content="",m.Long){var r=new m.Long(0,0,!1);n.endTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.endTime=t.longs===String?"0":0;if(n.speakerAttendeeId="",n.speakerExternalUserId="",m.Long){var r=new m.Long(0,0,!1);n.startTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.startTime=t.longs===String?"0":0;n.type=t.enums===String?"PRONUNCIATION":1,n.vocabularyFilterMatch=!1,n.confidence=0,n.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(n.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(n.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(n.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?s.SdkTranscriptItem.Type[e.type]===void 0?e.type:s.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(n.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(n.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(n.stable=e.stable),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptItem"},"getTypeUrl"),o.Type=function(){var i={},e=Object.create(i);return e[i[1]="PRONUNCIATION"]=1,e[i[2]="PUNCTUATION"]=2,e}(),o}(),s.SdkTranscriptEntity=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscriptEntity"),o.prototype.category="",o.prototype.confidence=0,o.prototype.content="",o.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.type="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscriptEntity;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.category=e.string();break}case 2:{r.confidence=e.double();break}case 3:{r.content=e.string();break}case 4:{r.endTime=e.int64();break}case 5:{r.startTime=e.int64();break}case 6:{r.type=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!m.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!m.isString(e.type)?"type: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscriptEntity)return e;var t=new s.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if(t.defaults){if(n.category="",n.confidence=0,n.content="",m.Long){var r=new m.Long(0,0,!1);n.endTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.endTime=t.longs===String?"0":0;if(m.Long){var r=new m.Long(0,0,!1);n.startTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.startTime=t.longs===String?"0":0;n.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(n.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(n.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(n.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(n.type=e.type),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptEntity"},"getTypeUrl"),o}(),s.SdkTranscriptAlternative=function(){function o(i){if(this.items=[],this.entities=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscriptAlternative"),o.prototype.items=m.emptyArray,o.prototype.transcript="",o.prototype.entities=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.items!=null&&e.items.length)for(var n=0;n<e.items.length;++n)s.SdkTranscriptItem.encode(e.items[n],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var n=0;n<e.entities.length;++n)s.SdkTranscriptEntity.encode(e.entities[n],t.uint32(26).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscriptAlternative;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.items&&r.items.length||(r.items=[]),r.items.push(s.SdkTranscriptItem.decode(e,e.uint32()));break}case 2:{r.transcript=e.string();break}case 3:{r.entities&&r.entities.length||(r.entities=[]),r.entities.push(s.SdkTranscriptEntity.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var n=s.SdkTranscriptItem.verify(e.items[t]);if(n)return"items."+n}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!m.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var n=s.SdkTranscriptEntity.verify(e.entities[t]);if(n)return"entities."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscriptAlternative)return e;var t=new s.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var n=0;n<e.items.length;++n){if(typeof e.items[n]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[n]=s.SdkTranscriptItem.fromObject(e.items[n])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var n=0;n<e.entities.length;++n){if(typeof e.entities[n]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[n]=s.SdkTranscriptEntity.fromObject(e.entities[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.items=[],n.entities=[]),t.defaults&&(n.transcript=""),e.items&&e.items.length){n.items=[];for(var r=0;r<e.items.length;++r)n.items[r]=s.SdkTranscriptItem.toObject(e.items[r],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(n.transcript=e.transcript),e.entities&&e.entities.length){n.entities=[];for(var r=0;r<e.entities.length;++r)n.entities[r]=s.SdkTranscriptEntity.toObject(e.entities[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptAlternative"},"getTypeUrl"),o}(),s.SdkTranscriptLanguageWithScore=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscriptLanguageWithScore"),o.prototype.languageCode="",o.prototype.score=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscriptLanguageWithScore;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.languageCode=e.string();break}case 2:{r.score=e.double();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscriptLanguageWithScore)return e;var t=new s.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.languageCode="",n.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(n.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(n.score=t.json&&!isFinite(e.score)?String(e.score):e.score),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptLanguageWithScore"},"getTypeUrl"),o}(),s.SdkTranscriptResult=function(){function o(i){if(this.alternatives=[],this.languageIdentification=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscriptResult"),o.prototype.alternatives=m.emptyArray,o.prototype.channelId="",o.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.isPartial=!1,o.prototype.resultId="",o.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.languageCode="",o.prototype.languageIdentification=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.alternatives!=null&&e.alternatives.length)for(var n=0;n<e.alternatives.length;++n)s.SdkTranscriptAlternative.encode(e.alternatives[n],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var n=0;n<e.languageIdentification.length;++n)s.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[n],t.uint32(66).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscriptResult;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.alternatives&&r.alternatives.length||(r.alternatives=[]),r.alternatives.push(s.SdkTranscriptAlternative.decode(e,e.uint32()));break}case 2:{r.channelId=e.string();break}case 3:{r.endTime=e.int64();break}case 4:{r.isPartial=e.bool();break}case 5:{r.resultId=e.string();break}case 6:{r.startTime=e.int64();break}case 7:{r.languageCode=e.string();break}case 8:{r.languageIdentification&&r.languageIdentification.length||(r.languageIdentification=[]),r.languageIdentification.push(s.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var n=s.SdkTranscriptAlternative.verify(e.alternatives[t]);if(n)return"alternatives."+n}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!m.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!m.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var n=s.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(n)return"languageIdentification."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscriptResult)return e;var t=new s.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var n=0;n<e.alternatives.length;++n){if(typeof e.alternatives[n]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[n]=s.SdkTranscriptAlternative.fromObject(e.alternatives[n])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var n=0;n<e.languageIdentification.length;++n){if(typeof e.languageIdentification[n]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[n]=s.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.alternatives=[],n.languageIdentification=[]),t.defaults){if(n.channelId="",m.Long){var r=new m.Long(0,0,!1);n.endTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.endTime=t.longs===String?"0":0;if(n.isPartial=!1,n.resultId="",m.Long){var r=new m.Long(0,0,!1);n.startTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.startTime=t.longs===String?"0":0;n.languageCode=""}if(e.alternatives&&e.alternatives.length){n.alternatives=[];for(var c=0;c<e.alternatives.length;++c)n.alternatives[c]=s.SdkTranscriptAlternative.toObject(e.alternatives[c],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(n.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(n.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(n.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(n.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){n.languageIdentification=[];for(var c=0;c<e.languageIdentification.length;++c)n.languageIdentification[c]=s.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[c],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptResult"},"getTypeUrl"),o}(),s.SdkTranscript=function(){function o(i){if(this.results=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscript"),o.prototype.results=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.results!=null&&e.results.length)for(var n=0;n<e.results.length;++n)s.SdkTranscriptResult.encode(e.results[n],t.uint32(10).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscript;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.results&&r.results.length||(r.results=[]),r.results.push(s.SdkTranscriptResult.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var n=s.SdkTranscriptResult.verify(e.results[t]);if(n)return"results."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscript)return e;var t=new s.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var n=0;n<e.results.length;++n){if(typeof e.results[n]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[n]=s.SdkTranscriptResult.fromObject(e.results[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.results=[]),e.results&&e.results.length){n.results=[];for(var r=0;r<e.results.length;++r)n.results[r]=s.SdkTranscriptResult.toObject(e.results[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscript"},"getTypeUrl"),o}(),s.SdkTranscriptionStatus=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscriptionStatus"),o.prototype.type=1,o.prototype.eventTime=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.transcriptionRegion="",o.prototype.transcriptionConfiguration="",o.prototype.message="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscriptionStatus;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.type=e.int32();break}case 2:{r.eventTime=e.int64();break}case 3:{r.transcriptionRegion=e.string();break}case 4:{r.transcriptionConfiguration=e.string();break}case 5:{r.message=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!m.isInteger(e.eventTime)&&!(e.eventTime&&m.isInteger(e.eventTime.low)&&m.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!m.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!m.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscriptionStatus)return e;var t=new s.SdkTranscriptionStatus;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(m.Long?(t.eventTime=m.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if(t.defaults){if(n.type=t.enums===String?"STARTED":1,m.Long){var r=new m.Long(0,0,!1);n.eventTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.eventTime=t.longs===String?"0":0;n.transcriptionRegion="",n.transcriptionConfiguration="",n.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?s.SdkTranscriptionStatus.Type[e.type]===void 0?e.type:s.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?n.eventTime=t.longs===String?String(e.eventTime):e.eventTime:n.eventTime=t.longs===String?m.Long.prototype.toString.call(e.eventTime):t.longs===Number?new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(n.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(n.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(n.message=e.message),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptionStatus"},"getTypeUrl"),o.Type=function(){var i={},e=Object.create(i);return e[i[1]="STARTED"]=1,e[i[2]="INTERRUPTED"]=2,e[i[3]="RESUMED"]=3,e[i[4]="STOPPED"]=4,e[i[5]="FAILED"]=5,e}(),o}(),s.SdkTranscriptEvent=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}a(o,"SdkTranscriptEvent"),o.prototype.status=null,o.prototype.transcript=null;var i;return Object.defineProperty(o.prototype,"Event",{get:m.oneOfGetter(i=["status","transcript"]),set:m.oneOfSetter(i)}),o.create=a(function(t){return new o(t)},"create"),o.encode=a(function(t,n){return n||(n=u.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&s.SdkTranscriptionStatus.encode(t.status,n.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&s.SdkTranscript.encode(t.transcript,n.uint32(18).fork()).ldelim(),n},"encode"),o.encodeDelimited=a(function(t,n){return this.encode(t,n).ldelim()},"encodeDelimited"),o.decode=a(function(t,n){t instanceof p||(t=p.create(t));for(var r=n===void 0?t.len:t.pos+n,c=new s.SdkTranscriptEvent;t.pos<r;){var f=t.uint32();switch(f>>>3){case 1:{c.status=s.SdkTranscriptionStatus.decode(t,t.uint32());break}case 2:{c.transcript=s.SdkTranscript.decode(t,t.uint32());break}default:t.skipType(f&7);break}}return c},"decode"),o.decodeDelimited=a(function(t){return t instanceof p||(t=new p(t)),this.decode(t,t.uint32())},"decodeDelimited"),o.verify=a(function(t){if(typeof t!="object"||t===null)return"object expected";var n={};if(t.status!=null&&t.hasOwnProperty("status")){n.Event=1;{var r=s.SdkTranscriptionStatus.verify(t.status);if(r)return"status."+r}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(n.Event===1)return"Event: multiple values";n.Event=1;{var r=s.SdkTranscript.verify(t.transcript);if(r)return"transcript."+r}}return null},"verify"),o.fromObject=a(function(t){if(t instanceof s.SdkTranscriptEvent)return t;var n=new s.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");n.status=s.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");n.transcript=s.SdkTranscript.fromObject(t.transcript)}return n},"fromObject"),o.toObject=a(function(t,n){n||(n={});var r={};return t.status!=null&&t.hasOwnProperty("status")&&(r.status=s.SdkTranscriptionStatus.toObject(t.status,n),n.oneofs&&(r.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(r.transcript=s.SdkTranscript.toObject(t.transcript,n),n.oneofs&&(r.Event="transcript")),r},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(t){return t===void 0&&(t="type.googleapis.com"),t+"/SdkTranscriptEvent"},"getTypeUrl"),o}(),s.SdkTranscriptFrame=function(){function o(i){if(this.events=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscriptFrame"),o.prototype.events=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.events!=null&&e.events.length)for(var n=0;n<e.events.length;++n)s.SdkTranscriptEvent.encode(e.events[n],t.uint32(10).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscriptFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.events&&r.events.length||(r.events=[]),r.events.push(s.SdkTranscriptEvent.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var n=s.SdkTranscriptEvent.verify(e.events[t]);if(n)return"events."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscriptFrame)return e;var t=new s.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var n=0;n<e.events.length;++n){if(typeof e.events[n]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[n]=s.SdkTranscriptEvent.fromObject(e.events[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.events=[]),e.events&&e.events.length){n.events=[];for(var r=0;r<e.events.length;++r)n.events[r]=s.SdkTranscriptEvent.toObject(e.events[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptFrame"},"getTypeUrl"),o}(),s.SdkRemoteVideoUpdateFrame=function(){function o(i){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkRemoteVideoUpdateFrame"),o.prototype.addedOrUpdatedVideoSubscriptions=m.emptyArray,o.prototype.removedVideoSubscriptionMids=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var n=0;n<e.addedOrUpdatedVideoSubscriptions.length;++n)s.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[n],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var n=0;n<e.removedVideoSubscriptionMids.length;++n)t.uint32(18).string(e.removedVideoSubscriptionMids[n]);return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkRemoteVideoUpdateFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.addedOrUpdatedVideoSubscriptions&&r.addedOrUpdatedVideoSubscriptions.length||(r.addedOrUpdatedVideoSubscriptions=[]),r.addedOrUpdatedVideoSubscriptions.push(s.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}case 2:{r.removedVideoSubscriptionMids&&r.removedVideoSubscriptionMids.length||(r.removedVideoSubscriptionMids=[]),r.removedVideoSubscriptionMids.push(e.string());break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var n=s.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(n)return"addedOrUpdatedVideoSubscriptions."+n}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!m.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkRemoteVideoUpdateFrame)return e;var t=new s.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var n=0;n<e.addedOrUpdatedVideoSubscriptions.length;++n){if(typeof e.addedOrUpdatedVideoSubscriptions[n]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[n]=s.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[n])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var n=0;n<e.removedVideoSubscriptionMids.length;++n)t.removedVideoSubscriptionMids[n]=String(e.removedVideoSubscriptionMids[n])}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addedOrUpdatedVideoSubscriptions=[],n.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){n.addedOrUpdatedVideoSubscriptions=[];for(var r=0;r<e.addedOrUpdatedVideoSubscriptions.length;++r)n.addedOrUpdatedVideoSubscriptions[r]=s.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[r],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){n.removedVideoSubscriptionMids=[];for(var r=0;r<e.removedVideoSubscriptionMids.length;++r)n.removedVideoSubscriptionMids[r]=e.removedVideoSubscriptionMids[r]}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkRemoteVideoUpdateFrame"},"getTypeUrl"),o}(),s.SdkVideoQualityAdaptationPreference=function(){var o={},i=Object.create(o);return i[o[1]="BALANCED"]=1,i[o[2]="MAINTAIN_FRAMERATE"]=2,i[o[3]="MAINTAIN_RESOLUTION"]=3,i}(),s.SdkVideoSubscriptionConfiguration=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkVideoSubscriptionConfiguration"),o.prototype.mid="",o.prototype.attendeeId="",o.prototype.streamId=0,o.prototype.priority=0,o.prototype.targetBitrateKbps=0,o.prototype.groupId=0,o.prototype.qualityAdaptationPreference=1,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkVideoSubscriptionConfiguration;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.mid=e.string();break}case 2:{r.attendeeId=e.string();break}case 3:{r.streamId=e.uint32();break}case 4:{r.priority=e.uint32();break}case 5:{r.targetBitrateKbps=e.uint32();break}case 6:{r.groupId=e.uint32();break}case 7:{r.qualityAdaptationPreference=e.int32();break}default:e.skipType(c&7);break}}if(!r.hasOwnProperty("mid"))throw m.ProtocolError("missing required 'mid'",{instance:r});return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!m.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!m.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkVideoSubscriptionConfiguration)return e;var t=new s.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){default:if(typeof e.qualityAdaptationPreference=="number"){t.qualityAdaptationPreference=e.qualityAdaptationPreference;break}break;case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.mid="",n.attendeeId="",n.streamId=0,n.priority=0,n.targetBitrateKbps=0,n.groupId=0,n.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(n.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(n.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(n.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(n.qualityAdaptationPreference=t.enums===String?s.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]===void 0?e.qualityAdaptationPreference:s.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkVideoSubscriptionConfiguration"},"getTypeUrl"),o}(),s.SdkNotificationFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkNotificationFrame"),o.prototype.level=3,o.prototype.message="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkNotificationFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.level=e.int32();break}case 2:{r.message=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkNotificationFrame)return e;var t=new s.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;default:if(typeof e.level=="number"){t.level=e.level;break}break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.level=t.enums===String?"ERROR":3,n.message=""),e.level!=null&&e.hasOwnProperty("level")&&(n.level=t.enums===String?s.SdkNotificationFrame.NotificationLevel[e.level]===void 0?e.level:s.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(n.message=e.message),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkNotificationFrame"},"getTypeUrl"),o.NotificationLevel=function(){var i={},e=Object.create(i);return e[i[1]="INFO"]=1,e[i[2]="WARNING"]=2,e[i[3]="ERROR"]=3,e}(),o}(),s.SdkPrimaryMeetingJoinFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkPrimaryMeetingJoinFrame"),o.prototype.credentials=null,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&s.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkPrimaryMeetingJoinFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.credentials=s.SdkMeetingSessionCredentials.decode(e,e.uint32());break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=s.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkPrimaryMeetingJoinFrame)return e;var t=new s.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=s.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(n.credentials=s.SdkMeetingSessionCredentials.toObject(e.credentials,t)),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinFrame"},"getTypeUrl"),o}(),s.SdkPrimaryMeetingJoinAckFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkPrimaryMeetingJoinAckFrame"),o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkPrimaryMeetingJoinAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),o.fromObject=a(function(e){return e instanceof s.SdkPrimaryMeetingJoinAckFrame?e:new s.SdkPrimaryMeetingJoinAckFrame},"fromObject"),o.toObject=a(function(){return{}},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinAckFrame"},"getTypeUrl"),o}(),s.SdkPrimaryMeetingLeaveFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkPrimaryMeetingLeaveFrame"),o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkPrimaryMeetingLeaveFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),o.fromObject=a(function(e){return e instanceof s.SdkPrimaryMeetingLeaveFrame?e:new s.SdkPrimaryMeetingLeaveFrame},"fromObject"),o.toObject=a(function(){return{}},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingLeaveFrame"},"getTypeUrl"),o}(),s.SdkMeetingSessionCredentials=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkMeetingSessionCredentials"),o.prototype.attendeeId="",o.prototype.externalUserId="",o.prototype.joinToken="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkMeetingSessionCredentials;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.attendeeId=e.string();break}case 2:{r.externalUserId=e.string();break}case 3:{r.joinToken=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!m.isString(e.joinToken)?"joinToken: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkMeetingSessionCredentials)return e;var t=new s.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.attendeeId="",n.externalUserId="",n.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(n.joinToken=e.joinToken),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMeetingSessionCredentials"},"getTypeUrl"),o}(),s.SdkVideoCodecCapability=function(){var o={},i=Object.create(o);return i[o[1]="VP8"]=1,i[o[2]="H264_BASELINE_PROFILE"]=2,i[o[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,i[o[4]="H264_MAIN_PROFILE"]=4,i[o[5]="H264_HIGH_PROFILE"]=5,i[o[6]="H264_CONSTRAINED_HIGH_PROFILE"]=6,i[o[8]="VP9_PROFILE_0"]=8,i[o[11]="AV1_MAIN_PROFILE"]=11,i}(),W.exports=s,m.Long=void 0,g.configure()},XEV2:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.isValidRevisionID=d.isValidAssetGroup=d.resolveURL=d.addQueryParams=d.withQueryString=d.withRequestHeaders=d.fetchWithBehavior=void 0;function g(t,n,r){if(!r)return fetch(t,n);const c=u(t,r),f=p(n,r);return fetch(c,f)}a(g,"fetchWithBehavior"),d.fetchWithBehavior=g;function p(t,n){return n!=null&&n.headers?t?Object.assign(Object.assign({},t),{headers:Object.assign(Object.assign({},t.headers||{}),n.headers)}):{headers:n.headers}:t}a(p,"withRequestHeaders"),d.withRequestHeaders=p;function u(t,n){if(!(n!=null&&n.escapedQueryString))return t;const r=t.lastIndexOf("?")!==-1;return`${t}${r?"&":"?"}${n.escapedQueryString}`}a(u,"withQueryString"),d.withQueryString=u;function m(t,n){const r=Object.keys(n);if(!r.length)return t;const c=new URLSearchParams(t==null?void 0:t.escapedQueryString);for(const f of r)c.append(f,n[f]);return Object.assign(Object.assign({},t),{escapedQueryString:c.toString()})}a(m,"addQueryParams"),d.addQueryParams=m;const s={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function o(t,n){return g(t,s,n).then(r=>r.redirected?r.url:t)}a(o,"resolveURL"),d.resolveURL=o;function i(t){return!!t&&/^[-.a-zA-Z0-9]+$/.test(t)}a(i,"isValidAssetGroup"),d.isValidAssetGroup=i;function e(t){return!!t&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(t)}a(e,"isValidRevisionID"),d.isValidRevisionID=e},XFRR:function(W,d,h){"use strict";function g(){}a(g,"baseLodash"),d.a=g},XJKy:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("ZdbB"));let u=a(class extends p.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(s,o,i){super(s,o,i)}},"VideoOnlyTransceiverController");d.default=u},XJrD:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class Qu{equal(u){let m=u.captureWidth()===this.cameraWidth&&u.captureHeight()===this.cameraHeight&&u.captureFrameRate()===this.cameraFrameRate&&u.encodeBitrates().length===this.encodeBitrates().length&&u.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&u.encodeWidths().length===this.encodeWidths().length&&u.encodeHeights().length===this.encodeHeights().length&&u.isSVCEncoding()===this.isSVC;if(m){for(let s=0;s<u.encodeWidths().length;s++)if(u.encodeWidths()[s]!==this.encodeWidths()[s]||u.encodeHeights()[s]!==this.encodeHeights()[s]||u.encodeBitrates()[s]!==this.encodeBitrates()[s]||u.encodeScaleResolutionDownBy()[s]!==this.encodeScaleResolutionDownBy()[s])return m=!1,m}return m}clone(){return new Qu(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(u,m,s,o,i,e=1,t=!1){this.cameraWidth=u,this.cameraHeight=m,this.cameraFrameRate=s,this.maxEncodeBitrateKbps=o,this.isSimulcast=i,this.scaleResolutionDownBy=e,this.isSVC=t}},"DefaultVideoCaptureAndEncodeParameter");d.default=g},XYJD:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"TranscriptEntity");d.default=g},"Xf/8":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");d.default=g},XhYu:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("xzjI"));let u=a(class extends p.default{constructor(s,o){super(s),this.constraint=o,this.name="OverconstrainedError"}},"OverconstrainedError");d.default=u},XnHx:function(W,d,h){"use strict";var g=h("/1FC");function p(){if(!arguments.length)return[];var u=arguments[0];return Object(g.a)(u)?u:[u]}a(p,"castArray"),d.a=p},Xv43:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(u,m,s,o){function i(e){return e instanceof s?e:new s(function(t){t(e)})}return a(i,"adopt"),new(s||(s=Promise))(function(e,t){function n(f){try{c(o.next(f))}catch(S){t(S)}}a(n,"fulfilled");function r(f){try{c(o.throw(f))}catch(S){t(S)}}a(r,"rejected");function c(f){f.done?e(f.value):i(f.value).then(n,r)}a(c,"step"),c((o=o.apply(u,m||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});let p=a(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return g(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(m){this.canvas=m,this.destroyed=!1}},"CanvasVideoFrameBuffer");d.default=p},XzFx:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(e,t,n,r){function c(f){return f instanceof n?f:new n(function(S){S(f)})}return a(c,"adopt"),new(n||(n=Promise))(function(f,S){function l(O){try{T(r.next(O))}catch(R){S(R)}}a(l,"fulfilled");function y(O){try{T(r.throw(O))}catch(R){S(R)}}a(y,"rejected");function T(O){O.done?f(O.value):c(O.value).then(l,y)}a(T,"step"),T((r=r.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("U9CR")),m=p(h("ppUg")),s=p(h("wXa7")),o=p(h("j+uH"));let i=a(class extends o.default{cancel(){if(this.cancelPromise){const t=new Error(`canceling ${this.name()}`);this.cancelPromise(t),delete this.cancelPromise}}run(){return g(this,void 0,void 0,function*(){const t=this.context.peer;let r=this.context.sdpOfferInit.sdp;this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(r=new s.default(r).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(r=new s.default(r).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new u.default().requiresDisablingH264Encoding()&&(r=new s.default(r).removeH264SupportFromSendSection().sdp);const c=this.context.audioVideoController.configuration.credentials.attendeeId;if(new m.default(c).hasModality(m.default.MODALITY_CONTENT)&&this.context.audioVideoController.configuration.enableSVC&&(r=new s.default(r).withStartingVideoSendBitrate(100).sdp),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(r=new s.default(r).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(r=new s.default(r).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(r=new s.default(r).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const l=new s.default(r).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(l)}this.logger.debug(()=>`local description is >>>${r}<<<`);const S={type:"offer",sdp:r,toJSON:null};yield new Promise((l,y)=>g(this,void 0,void 0,function*(){this.cancelPromise=T=>{y(T)};try{yield t.setLocalDescription(S),l()}catch(T){y(T)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(t){super(t.logger),this.context=t,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");d.default=i},Y2s1:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("8FET"));let u=a(class{constructor(s,o,i=new p.default){this.eventsClientConfiguration=s,this.ingestionURL=o,this.eventBufferConfiguration=i}},"EventIngestionConfiguration");d.default=u},Y8b2:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("tK6J"));let u=a(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new p.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");d.default=u},YH3u:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(c,f,S,l){function y(T){return T instanceof S?T:new S(function(O){O(T)})}return a(y,"adopt"),new(S||(S=Promise))(function(T,O){function R(_){try{U(l.next(_))}catch(P){O(P)}}a(R,"fulfilled");function F(_){try{U(l.throw(_))}catch(P){O(P)}}a(F,"rejected");function U(_){_.done?T(_.value):y(_.value).then(R,F)}a(U,"step"),U((l=l.apply(c,f||[])).next())})},p=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("ywpn")),m=p(h("e/ca")),s=p(h("uctb")),o=p(h("Wjms")),i=p(h("LEQH")),e=p(h("GtHv")),t=p(h("vjEy"));let n=a(class extends o.default{setBlurStrength(){}loadAssets(){return g(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),r=a(class ma extends u.default{static create(f,S){return g(this,void 0,void 0,function*(){f=ma.resolveSpec(f),S=ma.resolveOptions(S);const{logger:l}=S,y=yield ma.isSupported(f,S);if(l.info(`processor is ${y?"":"not"} supported`),!y)return l.warn("Using no-op processor because background blur is not supported"),new n;let T;return(yield e.default.isSupported())?(l.info("Using browser-provided background blur"),T=new e.default(f,S)):(l.info("Using built-in background blur"),T=new i.default(f,S)),yield T.loadAssets(),T})}static resolveOptions(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=Object.assign({},f);return S.blurStrength||(S.blurStrength=t.default.MEDIUM),S.logger||(S.logger=new m.default("BackgroundBlurProcessor",s.default.INFO)),S=super.resolveOptions(S),S}static isSupported(f,S){return f=ma.resolveSpec(f),S=ma.resolveOptions(S),super.isSupported(f,S)}},"BackgroundBlurVideoFrameProcessor");d.default=r},YX4P:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g=h("e/nb");g.__exportStar(h("rU8T"),d),g.__exportStar(h("LVIV"),d),g.__exportStar(h("JBVX"),d),g.__exportStar(h("JEbH"),d),g.__exportStar(h("duQQ"),d)},YXGX:function(W,d,h){"use strict";var g=h("m5Jn"),p=g.a&&new g.a;d.a=p},YbMW:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(y,T,O,R){function F(U){return U instanceof O?U:new O(function(_){_(U)})}return a(F,"adopt"),new(O||(O=Promise))(function(U,_){function P(M){try{A(R.next(M))}catch(k){_(k)}}a(P,"fulfilled");function L(M){try{A(R.throw(M))}catch(k){_(k)}}a(L,"rejected");function A(M){M.done?U(M.value):F(M.value).then(P,L)}a(A,"step"),A((R=R.apply(y,T||[])).next())})},p=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("6SO8")),m=p(h("bjg3")),s=p(h("x8On")),o=p(h("OcJO")),i=p(h("Tsvd")),e=p(h("m/NO")),t=p(h("fi20")),n=p(h("BkFD")),r=h("XCDq"),c=h("Aplu"),f=p(h("PPZC")),S=p(h("10yS"));let l=a(class il{toAttribute(T){return this.toSuffix(T).substring(1)}toSuffix(T){return T.toLowerCase()===T?`_${T}`:T.toUpperCase()===T?`_${T.toLowerCase()}`:T.replace(/([A-Z][a-z]+)/g,function(O){return`_${O}`}).replace(/([A-Z][A-Z]+)/g,function(O){return`_${O}`}).toLowerCase()}logLatency(T,O,R){const F=this.toSuffix(T);this.logEventTime("meeting"+F,O,R)}logStateTimeout(T,O){const R=this.toSuffix(T);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},O),{state:`state${R}`}))}logAudioEvent(T,O){const R="audio"+this.toSuffix(f.default[T]);this.logEvent(R,O)}logVideoEvent(T,O){const R="video"+this.toSuffix(S.default[T]);this.logEvent(R,O)}logEventTime(T,O){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const F=Object.assign(Object.assign({},R),{call_id:this.audioVideoController.configuration.meetingId,client_type:il.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${T}: ${JSON.stringify(F)}`),this.metricsAddTime(T,O,F)}logMeetingSessionStatus(T){const O=`${T.statusCode()}`;this.logEvent(O);const R={status:O,status_code:`${T.statusCode()}`};this.logEvent("meeting_session_status",R),T.isTerminal()&&this.logEvent("meeting_session_stopped",R),T.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",R),T.isFailure()&&this.logEvent("meeting_session_failed",R)}logLifecycleEvent(T,O){const R={lifecycle_event:`lifecycle${this.toSuffix(e.default[T])}`,lifecycle_event_code:`${T}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[O])}`,lifecycle_event_condition_code:`${O}`};this.logEvent("meeting_session_lifecycle",R)}logEvent(T){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const R=Object.assign(Object.assign({},O),{call_id:this.audioVideoController.configuration.meetingId,client_type:il.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${T}: ${JSON.stringify(R)}`),this.metricsLogEvent(T,R)}start(T,O){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=T,this.videoStreamIndex=O,this.clientMetricReport=new u.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new n.default(this.interval),this.intervalScheduler.start(()=>g(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}updateMetricValues(T,O){const R=O?this.clientMetricReport.streamMetricReports[Number(T.ssrc)]:this.clientMetricReport.globalMetricReport;let F;O?F=this.clientMetricReport.getMetricMap(R.mediaType,R.direction):F=this.clientMetricReport.getMetricMap();for(const U in T)U in F&&(typeof T[U]=="number"?(R.previousMetrics[U]=R.currentMetrics[U],R.currentMetrics[U]=T[U]):typeof T[U]=="string"?R.currentStringMetrics[U]=T[U]:typeof T[U]=="object"?(R.previousObjectMetrics[U]=R.currentObjectMetrics[U]===void 0?T[U]:R.currentObjectMetrics[U],R.currentObjectMetrics[U]=T[U]):this.logger.error(`Unknown metric value type ${typeof T[U]} for metric ${U}`))}processRawMetricReports(T){this.clientMetricReport.currentSsrcs={};const O=Date.now();for(const R of T){const F=this.isStreamRawMetricReport(R.type);if(F){const U=this.clientMetricReport.streamMetricReports[Number(R.ssrc)];if(U)U.mediaType===s.default.VIDEO&&U.direction===m.default.UPSTREAM?U.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(R.rid):U.streamId=this.videoStreamIndex.streamIdForSSRC(Number(R.ssrc));else{const _=new i.default;_.mediaType=this.getMediaType(R),_.direction=this.getDirectionType(R),_.mediaType===s.default.VIDEO&&_.direction===m.default.UPSTREAM?_.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(R.rid):this.videoStreamIndex.allStreams().empty()||(_.streamId=this.videoStreamIndex.streamIdForSSRC(Number(R.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(_.groupId=this.videoStreamIndex.groupIdForSSRC(Number(R.ssrc)))),this.clientMetricReport.streamMetricReports[Number(R.ssrc)]=_}this.clientMetricReport.currentSsrcs[Number(R.ssrc)]=1}this.updateMetricValues(R,F)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=O,this.clientMetricReport.print()}addStreamMetricDimensionFrames(T,O){const R=this.clientMetricReport.getStreamDimensionMap();for(const F in O.currentStringMetrics)if(F in R){const U=r.SdkStreamDimension.create();U.type=R[F];const _=r.SdkDimensionValue.create();_.stringValue=O.currentStringMetrics[F],U.value=_,T.dimensions.push(U)}}addMetricFrame(T,O,R,F){const U=R.type,_=R.transform,P=R.source,L=O.streamMetricFrames.length,A=O.streamMetricFrames[L-1];if(U){const M=r.SdkMetric.create();M.type=U,M.value=_(P||T,F),F?A.metrics.push(M):O.globalMetrics.push(M)}}addGlobalMetricsToProtobuf(T){const O=this.clientMetricReport.getMetricMap();for(const R in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(R,T,O[R])}addStreamMetricsToProtobuf(T){for(const O in this.clientMetricReport.streamMetricReports){const R=this.clientMetricReport.streamMetricReports[O],F=r.SdkStreamMetricFrame.create();F.streamId=R.streamId,F.metrics=[],this.addStreamMetricDimensionFrames(F,R),T.streamMetricFrames.push(F);const U=this.clientMetricReport.getMetricMap(R.mediaType,R.direction);for(const _ in R.currentMetrics)this.addMetricFrame(_,T,U[_],Number(O));for(const _ in R.currentStringMetrics)this.addMetricFrame(_,T,U[_],Number(O));for(const _ in R.currentObjectMetrics)this.addMetricFrame(_,T,U[_],Number(O))}}makeClientMetricProtobuf(){const T=r.SdkClientMetricFrame.create();return T.globalMetrics=[],T.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(T),this.addStreamMetricsToProtobuf(T),T}sendClientMetricProtobuf(T){this.signalingClient.sendClientMetrics(T)}isStreamRawMetricReport(T){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(T)}getMediaType(T){return T.kind==="audio"?s.default.AUDIO:s.default.VIDEO}getDirectionType(T){const{type:O}=T;return O==="inbound-rtp"||O==="remote-outbound-rtp"||O==="inbound-rtp-red"?m.default.DOWNSTREAM:m.default.UPSTREAM}isValidStandardRawMetric(T){return T.type==="inbound-rtp"||T.type==="inbound-rtp-red"||T.type==="outbound-rtp"||T.type==="remote-inbound-rtp"||T.type==="remote-outbound-rtp"||T.type==="candidate-pair"&&T.state==="succeeded"||T.type==="media-source"&&T.kind==="audio"}isValidSsrc(T){let O=!0;return this.isStreamRawMetricReport(T.type)&&this.getDirectionType(T)===m.default.DOWNSTREAM&&this.getMediaType(T)===s.default.VIDEO&&(O=this.videoStreamIndex.streamIdForSSRC(Number(T.ssrc))>0),O}isValidRawMetricReport(T){return this.isValidStandardRawMetric(T)&&this.isValidSsrc(T)}filterRawMetricReports(T){const O=[];for(const R of T)this.isValidRawMetricReport(R)&&O.push(R);return O}handleRawMetricReports(T){const O=this.filterRawMetricReports(T);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(O)}`);const R=[];this.maybeAddRedRecoveryMetrics(R),this.clientMetricReport.customStatsReports=R,O.push(...R),this.processRawMetricReports(O);const F=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(F),this.audioVideoController.forEachObserver(U=>{c.Maybe.of(U.metricsDidReceive).map(_=>_.bind(U)(this.clientMetricReport.clone()))})}getStatsWrapper(){return g(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const T=[];try{const O=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=O,O.forEach(R=>{T.push(R)}),this.handleRawMetricReports(T)}catch(O){this.logger.error(O.message)}})}overrideObservableMetric(T,O){this.clientMetricReport.overrideObservableMetric(T,O)}recoveryMetricsDidReceive(T){this.redRecoveryMetricReport=T}maybeAddRedRecoveryMetrics(T){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(T.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}constructor(T,O,R=il.INTERVAL_MS){this.audioVideoController=T,this.logger=O,this.interval=R,this.intervalScheduler=null,this.redRecoveryMetricReport=new o.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.metricsAddTime=(F,U,_)=>{},this.metricsLogEvent=(F,U)=>{}}},"StatsCollector");d.default=l,l.INTERVAL_MS=1e3,l.CLIENT_TYPE="amazon-chime-sdk-js"},YcE2:function(W,d,h){"use strict";(function(g){Object.defineProperty(d,"__esModule",{value:!0}),d.convertToBuffer=void 0;var p=h("f/KM"),u=typeof g<"u"&&g.from?function(s){return g.from(s,"utf8")}:p.fromUtf8;function m(s){return s instanceof Uint8Array?s:typeof s=="string"?u(s):ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(s)}a(m,"convertToBuffer"),d.convertToBuffer=m}).call(this,h("HDXh").Buffer)},Yugg:function(W,d,h){"use strict";h.r(d),h.d(d,"locateWindow",function(){return p});const g={};function p(){return typeof window<"u"?window:typeof self<"u"?self:g}a(p,"locateWindow")},Yvks:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckAudioConnectivityFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.AudioInputRequestFailed=1]="AudioInputRequestFailed",p[p.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",p[p.ConnectionFailed=3]="ConnectionFailed",p[p.AudioNotReceived=4]="AudioNotReceived"})(g=d.CheckAudioConnectivityFeedback||(d.CheckAudioConnectivityFeedback={})),d.default=g},"Z/hr":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("U9CR")),u=g(h("ppUg")),m=g(h("uQnq"));let s=a(class qo{static connectVideoStreamToVideoElement(i,e,t){const n=t&&i.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(qo.setVideoElementFlag(e,"disablePictureInPicture",t),qo.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==n&&(e.style.transform=n),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==i&&(e.srcObject=i,new p.default().requiresVideoPlayWorkaround()&&e.paused)){const r=e.play();r!==void 0&&r.catch(c=>{console.warn("Error playing video in Safari",c)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(i)if(e)t||(i.srcObject=null,i.style.transform="");else{if(!i.srcObject)return;i.pause(),i.style.transform="",qo.setVideoElementFlag(i,"disablePictureInPicture",!1),qo.setVideoElementFlag(i,"disableRemotePlayback",!1),i.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&qo.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new m.default}devicePixelRatioChanged(i){this.tileState.devicePixelRatio=i,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(i,e,t,n,r,c,f){let S=!1;this.tileState.boundAttendeeId!==i&&(this.tileState.boundAttendeeId=i,new u.default(i).hasModality(u.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),S=!0),this.tileState.boundExternalUserId!==f&&(this.tileState.boundExternalUserId=f,S=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,S=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,S=!0),this.tileState.videoStreamContentWidth!==n&&(this.tileState.videoStreamContentWidth=n,S=!0),this.tileState.videoStreamContentHeight!==r&&(this.tileState.videoStreamContentHeight=r,S=!0),this.tileState.streamId!==c&&(this.tileState.streamId=c,S=!0),S&&this.sendTileStateUpdate()}bindVideoElement(i){let e=!1;this.tileState.boundVideoElement!==i&&(this.tileState.boundVideoElement=i,e=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==i.clientWidth&&(this.tileState.videoElementCSSWidthPixels=i.clientWidth,e=!0),this.tileState.videoElementCSSHeightPixels!==i.clientHeight&&(this.tileState.videoElementCSSHeightPixels=i.clientHeight,e=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),e&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const i=document.createElement("canvas"),e=this.tileState.boundVideoElement;i.width=e.videoWidth||e.width,i.height=e.videoHeight||e.height;const t=i.getContext("2d");return t.drawImage(e,0,0,i.width,i.height),t.getImageData(0,0,i.width,i.height)}setStreamId(i){this.tileState.streamId=i,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?qo.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):qo.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(i,e,t){e in i&&(i[e]=t)}constructor(i,e,t,n){this.tileController=t,this.devicePixelRatioMonitor=n,this.tileState=new m.default,this.tileState.tileId=i,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");d.default=s},Z0UI:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"TranscriptAlternative");d.default=g},"Z9q/":function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={MissingArgument:"missing_argument",InvalidAuth:"invalid_auth",UnknownError:"unknown_error"},t=Object(s.a)("helpdesk.get generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason","token"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"helpdesk.get",args:y,reason:f.reason,computeToken:!1}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to helpdesk.get
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskGetFetcher",description:"helpdesk.get generated fetcher"}},ZHiL:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("mlaT")),u=g(h("aZJ3"));let m=a(class extends u.default{constructor(){super(p.default.DEBUG)}},"NoOpDebugLogger");d.default=m},ZISg:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(S,l,y,T){function O(R){return R instanceof y?R:new y(function(F){F(R)})}return a(O,"adopt"),new(y||(y=Promise))(function(R,F){function U(L){try{P(T.next(L))}catch(A){F(A)}}a(U,"fulfilled");function _(L){try{P(T.throw(L))}catch(A){F(A)}}a(_,"rejected");function P(L){L.done?R(L.value):O(L.value).then(U,_)}a(P,"step"),P((T=T.apply(S,l||[])).next())})},p=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("aZba")),m=p(h("papz")),s=p(h("wXa7")),o=p(h("aTUL")),i=h("/AJg"),e=p(h("HbHZ")),t=p(h("VhCr")),n=h("XCDq"),r=h("T44/"),c=p(h("j+uH"));let f=a(class extends c.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return g(this,void 0,void 0,function*(){let l="";if(this.context.peer&&this.context.peer.localDescription&&(l=new s.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let P=0,L=0;this.context.videoCaptureAndEncodeParameter&&(P=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),L=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const A={rid:"hi",maxBitrate:L*1e3,maxFramerate:P,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([A])}this.context.videoStreamIndex.subscribeFrameSent();const y=this.fixUpSubscriptionOrder(l,this.context.videoSubscriptions),T=this.context.videoDuplexMode===n.SdkStreamServiceType.TX||this.context.videoDuplexMode===n.SdkStreamServiceType.DUPLEX;let O,R=l;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(R=new s.default(R).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const P=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";O=this.textCompressor.compress(R,P),this.context.logger.info(`Compressed the SDP message from ${R.length} to ${O.length} bytes.`),l=""}this.context.previousSdpOffer=new s.default(l);const F=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,l,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,y,T,this.context.videoStreamIndex.localStreamDescriptions(),!0,O);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!i.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(F.videoSubscriptionConfiguration=r.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,y.map(P=>P===0?0:this.context.videoStreamIndex.groupIdForStreamId(P)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(F)}`),this.context.signalingClient.subscribe(F);const U=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(U)}`);let _="";U.compressedSdpAnswer&&U.compressedSdpAnswer.length?(_=this.textCompressor.decompress(U.compressedSdpAnswer,this.context.previousSdpAnswerAsString),_.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${U.compressedSdpAnswer.length} to ${_.length} bytes.`),this.context.sdpAnswer=_):this.context.sdpAnswer=U.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(U)})}fixUpSubscriptionOrder(l,y){if(this.context.transceiverController.getMidForStreamId===void 0)return y;const T=new Map;for(const F of y){const U=this.context.transceiverController.getMidForStreamId(F);if(U===void 0){F!==0&&this.logger.warn(`Could not find MID for stream ID: ${F}`);continue}T.set(U,F)}const O=new s.default(l).mediaSections(),R=[];for(const F of O)if(F.mediaType==="video")if(F.direction==="recvonly"){const U=T.get(F.mid);if(U===void 0){this.logger.warn(`Could not find stream ID for MID: ${F.mid}`);continue}R.push(U)}else R.push(0);return this.logger.info(`Fixed up ${JSON.stringify(y)} to ${JSON.stringify(R)} (may be same))}`),R}receiveSubscribeAck(){return new Promise((l,y)=>{const T=this.context;let O=a(class{cancel(){this.signalingClient.removeObserver(this),y(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(U){if(U.isConnectionTerminated()){const P=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${U.closeCode} and reason: ${U.closeReason}`;T.logger.warn(P);let L=m.default.TaskFailed;U.closeCode>=4500&&U.closeCode<4600&&(L=m.default.SignalingInternalServerError),T.audioVideoController.handleMeetingSessionStatus(new u.default(L),new Error(P));return}if(U.type!==e.default.ReceivedSignalFrame||U.message.type!==n.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const _=U.message.suback;l(_)}constructor(U){this.signalingClient=U}},"Interceptor");const R=new O(this.context.signalingClient);this.context.signalingClient.registerObserver(R),this.taskCanceler=R})}constructor(l){super(l.logger),this.context=l,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new o.default(l.logger)}},"SubscribeAndReceiveSubscribeAckTask");d.default=f},ZIUS:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");d.default=g},ZIxo:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.Sha256=void 0;var g=h("dFEU"),p=h("b4Ml"),u=h("xxdO"),m=h("bVud"),s=h("YX4P"),o=h("Yugg"),i=h("pU0T"),e=function(){function t(n){(0,m.supportsWebCrypto)((0,o.locateWindow)())?this.hash=new p.Sha256(n):(0,s.isMsWindow)((0,o.locateWindow)())?this.hash=new g.Sha256(n):this.hash=new u.Sha256(n)}return a(t,"Sha256"),t.prototype.update=function(n,r){this.hash.update((0,i.convertToBuffer)(n))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}();d.Sha256=e},ZPwG:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(S,l,y,T){function O(R){return R instanceof y?R:new y(function(F){F(R)})}return a(O,"adopt"),new(y||(y=Promise))(function(R,F){function U(L){try{P(T.next(L))}catch(A){F(A)}}a(U,"fulfilled");function _(L){try{P(T.throw(L))}catch(A){F(A)}}a(_,"rejected");function P(L){L.done?R(L.value):O(L.value).then(U,_)}a(P,"step"),P((T=T.apply(S,l||[])).next())})},p=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("6Bxv")),m=p(h("lUhs")),s=p(h("AUdx")),o=p(h("MelK")),i=h("DUgj"),e=p(h("hEYi")),t=p(h("iFpF")),n=h("f2XL"),r=h("P7D+"),c=p(h("aVV0"));let f=a(class extends c.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return g(this,void 0,void 0,function*(){let l="";if(this.context.peer&&this.context.peer.localDescription&&(l=new s.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let P=0,L=0;this.context.videoCaptureAndEncodeParameter&&(P=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),L=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const A={rid:"hi",maxBitrate:L*1e3,maxFramerate:P,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([A])}this.context.videoStreamIndex.subscribeFrameSent();const y=this.fixUpSubscriptionOrder(l,this.context.videoSubscriptions),T=this.context.videoDuplexMode===n.SdkStreamServiceType.TX||this.context.videoDuplexMode===n.SdkStreamServiceType.DUPLEX;let O,R=l;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(R=new s.default(R).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const P=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";O=this.textCompressor.compress(R,P),this.context.logger.info(`Compressed the SDP message from ${R.length} to ${O.length} bytes.`),l=""}this.context.previousSdpOffer=new s.default(l);const F=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,l,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,y,T,this.context.videoStreamIndex.localStreamDescriptions(),!0,O);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!i.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(F.videoSubscriptionConfiguration=r.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,y.map(P=>P===0?0:this.context.videoStreamIndex.groupIdForStreamId(P)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(F)}`),this.context.signalingClient.subscribe(F);const U=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(U)}`);let _="";U.compressedSdpAnswer&&U.compressedSdpAnswer.length?(_=this.textCompressor.decompress(U.compressedSdpAnswer,this.context.previousSdpAnswerAsString),_.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${U.compressedSdpAnswer.length} to ${_.length} bytes.`),this.context.sdpAnswer=_):this.context.sdpAnswer=U.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(U)})}fixUpSubscriptionOrder(l,y){if(this.context.transceiverController.getMidForStreamId===void 0)return y;const T=new Map;for(const F of y){const U=this.context.transceiverController.getMidForStreamId(F);if(U===void 0){F!==0&&this.logger.warn(`Could not find MID for stream ID: ${F}`);continue}T.set(U,F)}const O=new s.default(l).mediaSections(),R=[];for(const F of O)if(F.mediaType==="video")if(F.direction==="recvonly"){const U=T.get(F.mid);if(U===void 0){this.logger.warn(`Could not find stream ID for MID: ${F.mid}`);continue}R.push(U)}else R.push(0);return this.logger.info(`Fixed up ${JSON.stringify(y)} to ${JSON.stringify(R)} (may be same))}`),R}receiveSubscribeAck(){return new Promise((l,y)=>{const T=this.context;let O=a(class{cancel(){this.signalingClient.removeObserver(this),y(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(U){if(U.isConnectionTerminated()){const P=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${U.closeCode} and reason: ${U.closeReason}`;T.logger.warn(P);let L=m.default.TaskFailed;U.closeCode>=4500&&U.closeCode<4600&&(L=m.default.SignalingInternalServerError),T.audioVideoController.handleMeetingSessionStatus(new u.default(L),new Error(P));return}if(U.type!==e.default.ReceivedSignalFrame||U.message.type!==n.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const _=U.message.suback;l(_)}constructor(U){this.signalingClient=U}},"Interceptor");const R=new O(this.context.signalingClient);this.context.signalingClient.registerObserver(R),this.taskCanceler=R})}constructor(l){super(l.logger),this.context=l,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new o.default(l.logger)}},"SubscribeAndReceiveSubscribeAckTask");d.default=f},ZS2b:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class Zu{equal(u){return this.remoteVideoAvailable===u.remoteVideoAvailable&&this.canStartLocalVideo===u.canStartLocalVideo}clone(){const u=new Zu;return u.remoteVideoAvailable=this.remoteVideoAvailable,u.canStartLocalVideo=this.canStartLocalVideo,u}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");d.default=g},ZXtA:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=.8;let p=a(class{reportEvent(m){const s=m-this.lastReportedEventTimestamp;if(s>=this.reportingPeriodMillis){const o=this.filterCount,i=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=m,this.framerate===0||o===0)return;const e=Math.round(i/o),t=Math.round(this.framerate*(s/1e3))-o,n=Math.round(100*i/s);e>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:t,avgFilterDurationMillis:e,framerate:this.framerate,periodMillis:s}),n>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:n,filterMillis:i,periodMillis:s})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*g)}frameReceived(m){m!==this.framerate&&(this.framerate=m,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const s=Date.now();this.reportEvent(s)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(m,s,o,i){this.delegate=m,this.reportingPeriodMillis=s,this.filterCPUUtilization=o,this.logger=i,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");d.default=p},ZZPe:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(u,m,s,o){function i(e){return e instanceof s?e:new s(function(t){t(e)})}return a(i,"adopt"),new(s||(s=Promise))(function(e,t){function n(f){try{c(o.next(f))}catch(S){t(S)}}a(n,"fulfilled");function r(f){try{c(o.throw(f))}catch(S){t(S)}}a(r,"rejected");function c(f){f.done?e(f.value):i(f.value).then(n,r)}a(c,"step"),c((o=o.apply(u,m||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});let p=a(class{process(m){return g(this,void 0,void 0,function*(){return m})}destroy(){return g(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");d.default=p},ZdbB:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(t,n,r,c){function f(S){return S instanceof r?S:new r(function(l){l(S)})}return a(f,"adopt"),new(r||(r=Promise))(function(S,l){function y(R){try{O(c.next(R))}catch(F){l(F)}}a(y,"fulfilled");function T(R){try{O(c.throw(R))}catch(F){l(F)}}a(T,"rejected");function O(R){R.done?S(R.value):f(R.value).then(y,T)}a(O,"step"),O((c=c.apply(t,n||[])).next())})},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("f3u9")),m=p(h("OcJO")),s=p(h("3sEM")),o=p(h("IrJe")),i=p(h("F7zz"));let e=a(class{setEncodingParameters(n){return g(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const r=this._localCameraTransceiver.sender;if(!n||n.size===0)return;const c=Array.from(n.values()),f=r.getParameters();if(!f.encodings||f.encodings.length===0)f.encodings=c;else for(const S of f.encodings)for(const l of c){if((S.rid||l.rid)&&S.rid!==l.rid)continue;let y;for(y in l)y==="rid"||y==="codecPayloadType"||l.hasOwnProperty(y)&&(S[y]=l[y])}yield r.setParameters(f)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(n){return g(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const r=this._localCameraTransceiver.sender;if(!r||n<=0)return;const c=r.getParameters();c.encodings||(c.encodings=[{}]);for(const f of c.encodings)f.maxBitrate=n*1e3;yield r.setParameters(c)})}setPeer(n){this.peer=n}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(n){return this._localCameraTransceiver?n===this._localCameraTransceiver.sender.track||n===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var n,r;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((r=(n=this.meetingSessionContext)===null||n===void 0?void 0:n.audioProfile)===null||r===void 0)&&r.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(n){return g(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(n),!0)})}setAudioInput(n){return g(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,n)})}setVideoInput(n){return g(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,n)})}updateVideoTransceivers(n,r){if(!this.useTransceivers())return r.array();const c=this.peer.getTransceivers();return this.videoSubscriptions=[0],r=r.clone(),this.updateTransceivers(c,n,r),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(n,r,c){const f=c.array();n.length!==0&&!n[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(n,r,f)):n.length!==0&&this.updateTransceiverWithStop(n,r,f);for(const S of f){const l=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(S,l),this.groupIdToTransceiver.set(r.groupIdForStreamId(S),l),this.videoSubscriptions.push(S),this.logger.info(`adding transceiver mid: ${l.mid} subscription: ${S} direction: recvonly`)}}updateTransceiverWithStop(n,r,c){let f=1;this.videoSubscriptions=[0];for(const S of n){if(S===this._localCameraTransceiver||!this.transceiverIsVideo(S)||!S.mid)continue;let l=!1;const y=r.streamIdForTrack("v_"+S.mid);if(S.direction!=="inactive"&&y!==void 0){for(const[T,O]of c.entries())if(r.StreamIdsInSameGroup(y,O)){S.direction="recvonly",this.videoSubscriptions[f]=O,l=!0,this.streamIdToTransceiver.delete(y),this.streamIdToTransceiver.set(O,S),c.splice(T,1);break}}if(!l){this.videoSubscriptions[f]=0,this.logger.info(`Stopping MID: ${S.mid}, direction: ${S.direction}, current direction: ${S.currentDirection}`),S.stop();for(const[T,O]of this.streamIdToTransceiver.entries())S.mid===O.mid&&(this.streamIdToTransceiver.delete(T),this.groupIdToTransceiver.delete(r.groupIdForStreamId(T)))}f+=1}}updateTransceiverWithoutStop(n,r,c){let f=1;for(const S of n)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(this.videoSubscriptions[f]=0,S.direction!=="inactive"){const l=r.streamIdForTrack("v_"+S.mid);if(l!==void 0){for(const[y,T]of c.entries())if(r.StreamIdsInSameGroup(l,T)){S.direction="recvonly",this.videoSubscriptions[f]=T,this.streamIdToTransceiver.delete(l),this.streamIdToTransceiver.set(T,S),c.splice(y,1);break}}}f+=1}f=1;for(const S of n)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(S.direction==="inactive"&&c.length>0){S.direction="recvonly";const l=c.shift();this.videoSubscriptions[f]=l,this.streamIdToTransceiver.set(l,S),this.groupIdToTransceiver.set(r.groupIdForStreamId(l),S)}else if(this.videoSubscriptions[f]===0){S.direction="inactive";for(const[l,y]of this.streamIdToTransceiver.entries())S===y&&(this.streamIdToTransceiver.delete(l),this.groupIdToTransceiver.delete(r.groupIdForStreamId(l)))}f+=1}}getMidForStreamId(n){var r;return(r=this.streamIdToTransceiver.get(n))===null||r===void 0?void 0:r.mid}setStreamIdForMid(n,r){for(const[c,f]of this.streamIdToTransceiver.entries())if(f.mid===n){this.streamIdToTransceiver.delete(c),this.streamIdToTransceiver.set(r,f);return}}getMidForGroupId(n){var r;return(r=this.groupIdToTransceiver.get(n))===null||r===void 0?void 0:r.mid}transceiverIsVideo(n){return n.receiver&&n.receiver.track&&n.receiver.track.kind==="video"||n.sender&&n.sender.track&&n.sender.track.kind==="video"}debugDumpTransceivers(){let n="",r=0;for(const c of this.peer.getTransceivers())this.transceiverIsVideo(c)&&(n+=`transceiver index=${r} mid=${c.mid} subscription=${this.videoSubscriptions[r]} direction=${c.direction}
`,r+=1);return n}setTransceiverInput(n,r){return g(this,void 0,void 0,function*(){n&&(r?n.direction="sendrecv":n.direction="inactive",yield n.sender.replaceTrack(r))})}forEachRedMetricsObserver(n){for(const r of this.redMetricsObservers)i.default.nextTick(()=>{this.redMetricsObservers.has(r)&&r.recoveryMetricsDidReceive(n)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new u.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var n,r;const c=!!window.RTCRtpScriptTransform,f=!!RTCRtpSender.prototype.createEncodedStreams;if(c)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(f)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([o.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(S){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${S}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),S}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=S=>{if(S.data.type==="REDWorkerLog")this.logger.info(S.data.log);else if(S.data.type==="RedundantAudioEncoderStats"){const l=new m.default;l.currentTimestampMs=Date.now(),l.ssrc=S.data.ssrc,l.totalAudioPacketsLost=S.data.totalAudioPacketsLost,l.totalAudioPacketsExpected=S.data.totalAudioPacketsExpected,l.totalAudioPacketsRecoveredRed=S.data.totalAudioPacketsRecoveredRed,l.totalAudioPacketsRecoveredFec=S.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(l)}},c)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(f){const S=this._localAudioTransceiver.sender.createEncodedStreams(),l=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:S,receive:l},[S.readable,S.writable,l.readable,l.writable])}(n=this.meetingSessionContext)===null||n===void 0||n.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((r=this.meetingSessionContext)===null||r===void 0?void 0:r.statsCollector)}addTransceiver(n,r){var c;const f=this.peer.addTransceiver(n,r);if(!(!((c=this.peer.getConfiguration())===null||c===void 0)&&c.encodedInsertableStreams)||!this.audioRedWorker)return f;const S=!!window.RTCRtpScriptTransform,l=!!RTCRtpSender.prototype.createEncodedStreams;if(S)f.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),f.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(l){const y=f.sender.createEncodedStreams(),T=f.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"PassthroughTransform",send:y,receive:T},[y.readable,y.writable,T.readable,T.writable])}return f}destroyAudioRedWorkerAndStates(){var n,r;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(n=this.meetingSessionContext)===null||n===void 0||n.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((r=this.meetingSessionContext)===null||r===void 0?void 0:r.statsCollector))}setAudioPayloadTypes(n){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:n.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:n.get("opus")}))}metricsDidReceive(n){const{currentTimestampMs:r}=n,c=n.getRTCStatsReport();let f=0,S=0,l=0;c.forEach(U=>{U.kind==="audio"&&(U.type==="outbound-rtp"?S=U.packetsSent:U.type==="remote-inbound-rtp"&&(f=U.timestamp,l=U.packetsLost))}),(this.audioMetricsHistory.length===0||f>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&S>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:f,totalPacketsSent:S,totalPacketsLost:l}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const y=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),T=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),O=Math.max(y,T),[R,F]=s.default.getNumRedundantEncodingsForPacketLoss(O);if(F){this.lastHighPacketLossEventTimestampMs=r,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=r);return}else if(!this.audioRedEnabled){const U=r-this.lastAudioRedTurnOffTimestampMs,_=r-this.lastHighPacketLossEventTimestampMs;if(U>=this.audioRedPacketLossLongEvalPeriodMs&&_<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(r)}this.shouldUpdateAudioRedWorkerEncodings(r,R)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:R})}maybeResetHoldDownTimer(n){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=n)}lossPercent(n){if(this.audioMetricsHistory.length<2)return 0;const r=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,c=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,f=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let S=this.audioMetricsHistory.length-2;S>=0;S--)if(r-this.audioMetricsHistory[S].timestampMs>=n){const l=f-this.audioMetricsHistory[S].totalPacketsLost,y=c-this.audioMetricsHistory[S].totalPacketsSent,T=100*(l/y);return Math.max(0,Math.min(T,100))}return 0}shouldUpdateAudioRedWorkerEncodings(n,r){return this.currentNumRedundantEncodings===r?(this.maybeResetHoldDownTimer(n),!1):r<this.currentNumRedundantEncodings&&n-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=r,this.maybeResetHoldDownTimer(n),!0)}addRedundantAudioRecoveryMetricsObserver(n){this.redMetricsObservers.add(n)}removeRedundantAudioRecoveryMetricsObserver(n){this.redMetricsObservers.delete(n)}constructor(n,r,c){this.logger=n,this.browserBehavior=r,this.meetingSessionContext=c,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");d.default=e},Zful:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("oHvd"));let u=a(class Er extends p.default{health(){if(this.currentData.isConnectionStartRecent(Er.CONNECTION_WAIT_TIME_MS))return 1;const o=this.currentData.consecutiveStatsWithNoPackets>=Er.CONNECTION_UNHEALTHY_THRESHOLD,i=this.currentData.consecutiveMissedPongs>=Er.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>Er.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>Er.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),o||i||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${o}, missed pongs: ${i}, bad audio delay: ${e}`),0):1}constructor(s,o,i){super(o,i,"Reconnection Health"),this.logger=s,this.audioDelayPointsOverMaximum=0,Er.CONNECTION_UNHEALTHY_THRESHOLD=o.connectionUnhealthyThreshold,Er.CONNECTION_WAIT_TIME_MS=o.connectionWaitTimeMs,Er.MISSED_PONGS_THRESHOLD=o.missedPongsUpperThreshold,Er.MAXIMUM_AUDIO_DELAY_MS=o.maximumAudioDelayMs,Er.MAXIMUM_AUDIO_DELAY_DATA_POINTS=o.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");d.default=u},Zhxc:function(W,d,h){"use strict";var g=h("c3gm"),p=h("XFRR"),u=4294967295;function m(F){this.__wrapped__=F,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=u,this.__views__=[]}a(m,"LazyWrapper"),m.prototype=Object(g.a)(p.a.prototype),m.prototype.constructor=m;var s=m,o=h("+j7y"),i=h("ftz4"),e=h("Gn1W"),t=h("/1FC"),n=h("EUcb"),r=h("eAQQ");function c(F){if(F instanceof s)return F.clone();var U=new e.a(F.__wrapped__,F.__chain__);return U.__actions__=Object(r.a)(F.__actions__),U.__index__=F.__index__,U.__values__=F.__values__,U}a(c,"wrapperClone");var f=c,S=Object.prototype,l=S.hasOwnProperty;function y(F){if(Object(n.a)(F)&&!Object(t.a)(F)&&!(F instanceof s)){if(F instanceof e.a)return F;if(l.call(F,"__wrapped__"))return f(F)}return new e.a(F)}a(y,"lodash"),y.prototype=p.a.prototype,y.prototype.constructor=y;var T=y;function O(F){var U=Object(i.a)(F),_=T[U];if(typeof _!="function"||!(U in s.prototype))return!1;if(F===_)return!0;var P=Object(o.a)(_);return!!P&&F===P[0]}a(O,"isLaziable");var R=d.a=O},Zit3:function(W,d,h){"use strict";h.r(d),h.d(d,"__Client",function(){return go}),h.d(d,"ChimeSDKMessagingClient",function(){return Fi}),h.d(d,"ChimeSDKMessaging",function(){return Rl}),h.d(d,"$Command",function(){return wt}),h.d(d,"AssociateChannelFlowCommand",function(){return Ga}),h.d(d,"BatchCreateChannelMembershipCommand",function(){return Ka}),h.d(d,"ChannelFlowCallbackCommand",function(){return $a}),h.d(d,"CreateChannelBanCommand",function(){return Ja}),h.d(d,"CreateChannelCommand",function(){return Ya}),h.d(d,"CreateChannelFlowCommand",function(){return Xa}),h.d(d,"CreateChannelMembershipCommand",function(){return Qa}),h.d(d,"CreateChannelModeratorCommand",function(){return Za}),h.d(d,"DeleteChannelBanCommand",function(){return qa}),h.d(d,"DeleteChannelCommand",function(){return ed}),h.d(d,"DeleteChannelFlowCommand",function(){return td}),h.d(d,"DeleteChannelMembershipCommand",function(){return nd}),h.d(d,"DeleteChannelMessageCommand",function(){return id}),h.d(d,"DeleteChannelModeratorCommand",function(){return rd}),h.d(d,"DeleteMessagingStreamingConfigurationsCommand",function(){return od}),h.d(d,"DescribeChannelBanCommand",function(){return sd}),h.d(d,"DescribeChannelCommand",function(){return ad}),h.d(d,"DescribeChannelFlowCommand",function(){return dd}),h.d(d,"DescribeChannelMembershipCommand",function(){return ld}),h.d(d,"DescribeChannelMembershipForAppInstanceUserCommand",function(){return cd}),h.d(d,"DescribeChannelModeratedByAppInstanceUserCommand",function(){return ud}),h.d(d,"DescribeChannelModeratorCommand",function(){return fd}),h.d(d,"DisassociateChannelFlowCommand",function(){return hd}),h.d(d,"GetChannelMembershipPreferencesCommand",function(){return pd}),h.d(d,"GetChannelMessageCommand",function(){return md}),h.d(d,"GetChannelMessageStatusCommand",function(){return gd}),h.d(d,"GetMessagingSessionEndpointCommand",function(){return Sd}),h.d(d,"GetMessagingStreamingConfigurationsCommand",function(){return vd}),h.d(d,"ListChannelBansCommand",function(){return ta}),h.d(d,"ListChannelFlowsCommand",function(){return na}),h.d(d,"ListChannelMembershipsCommand",function(){return ia}),h.d(d,"ListChannelMembershipsForAppInstanceUserCommand",function(){return ra}),h.d(d,"ListChannelMessagesCommand",function(){return oa}),h.d(d,"ListChannelModeratorsCommand",function(){return sa}),h.d(d,"ListChannelsAssociatedWithChannelFlowCommand",function(){return aa}),h.d(d,"ListChannelsCommand",function(){return da}),h.d(d,"ListChannelsModeratedByAppInstanceUserCommand",function(){return la}),h.d(d,"ListSubChannelsCommand",function(){return ca}),h.d(d,"ListTagsForResourceCommand",function(){return yd}),h.d(d,"PutChannelExpirationSettingsCommand",function(){return bd}),h.d(d,"PutChannelMembershipPreferencesCommand",function(){return Ed}),h.d(d,"PutMessagingStreamingConfigurationsCommand",function(){return Td}),h.d(d,"RedactChannelMessageCommand",function(){return Cd}),h.d(d,"SearchChannelsCommand",function(){return ua}),h.d(d,"SendChannelMessageCommand",function(){return Id}),h.d(d,"TagResourceCommand",function(){return Od}),h.d(d,"UntagResourceCommand",function(){return wd}),h.d(d,"UpdateChannelCommand",function(){return Ad}),h.d(d,"UpdateChannelFlowCommand",function(){return Pd}),h.d(d,"UpdateChannelMessageCommand",function(){return Md}),h.d(d,"UpdateChannelReadMarkerCommand",function(){return Rd}),h.d(d,"paginateListChannelBans",function(){return ag}),h.d(d,"paginateListChannelFlows",function(){return lg}),h.d(d,"paginateListChannelMembershipsForAppInstanceUser",function(){return ug}),h.d(d,"paginateListChannelMemberships",function(){return hg}),h.d(d,"paginateListChannelMessages",function(){return mg}),h.d(d,"paginateListChannelModerators",function(){return Sg}),h.d(d,"paginateListChannelsAssociatedWithChannelFlow",function(){return yg}),h.d(d,"paginateListChannelsModeratedByAppInstanceUser",function(){return Eg}),h.d(d,"paginateListChannels",function(){return Cg}),h.d(d,"paginateListSubChannels",function(){return Og}),h.d(d,"paginateSearchChannels",function(){return Ag}),h.d(d,"AllowNotifications",function(){return Vf}),h.d(d,"ChannelMembershipType",function(){return Hf}),h.d(d,"ErrorCode",function(){return jf}),h.d(d,"BadRequestException",function(){return Da}),h.d(d,"ConflictException",function(){return _a}),h.d(d,"ForbiddenException",function(){return La}),h.d(d,"NotFoundException",function(){return Na}),h.d(d,"ServiceFailureException",function(){return Ba}),h.d(d,"ServiceUnavailableException",function(){return xa}),h.d(d,"ThrottledClientException",function(){return Fa}),h.d(d,"UnauthorizedClientException",function(){return Ua}),h.d(d,"ResourceLimitExceededException",function(){return Va}),h.d(d,"ExpirationCriterion",function(){return Wf}),h.d(d,"ChannelMode",function(){return zf}),h.d(d,"ChannelPrivacy",function(){return Gf}),h.d(d,"InvocationType",function(){return Kf}),h.d(d,"FallbackAction",function(){return $f}),h.d(d,"PushNotificationType",function(){return Jf}),h.d(d,"ChannelMessagePersistenceType",function(){return Yf}),h.d(d,"ChannelMessageStatus",function(){return Xf}),h.d(d,"ChannelMessageType",function(){return Qf}),h.d(d,"MessagingDataType",function(){return Zf}),h.d(d,"SortOrder",function(){return qf}),h.d(d,"SearchFieldKey",function(){return eh}),h.d(d,"SearchFieldOperator",function(){return th}),h.d(d,"IdentityFilterSensitiveLog",function(){return ri}),h.d(d,"BatchChannelMembershipsFilterSensitiveLog",function(){return Ec}),h.d(d,"BatchCreateChannelMembershipResponseFilterSensitiveLog",function(){return Tc}),h.d(d,"ChannelFilterSensitiveLog",function(){return Cc}),h.d(d,"ChannelAssociatedWithFlowSummaryFilterSensitiveLog",function(){return Ic}),h.d(d,"ChannelBanFilterSensitiveLog",function(){return Oc}),h.d(d,"ChannelBanSummaryFilterSensitiveLog",function(){return wc}),h.d(d,"ProcessorFilterSensitiveLog",function(){return Ha}),h.d(d,"ChannelFlowFilterSensitiveLog",function(){return Ac}),h.d(d,"MessageAttributeValueFilterSensitiveLog",function(){return ja}),h.d(d,"PushNotificationConfigurationFilterSensitiveLog",function(){return Il}),h.d(d,"ChannelMessageCallbackFilterSensitiveLog",function(){return Pc}),h.d(d,"ChannelFlowCallbackRequestFilterSensitiveLog",function(){return Mc}),h.d(d,"ChannelFlowSummaryFilterSensitiveLog",function(){return Rc}),h.d(d,"ChannelMembershipFilterSensitiveLog",function(){return kc}),h.d(d,"ChannelSummaryFilterSensitiveLog",function(){return Wa}),h.d(d,"ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog",function(){return Ol}),h.d(d,"PushNotificationPreferencesFilterSensitiveLog",function(){return Dc}),h.d(d,"ChannelMembershipPreferencesFilterSensitiveLog",function(){return Jd}),h.d(d,"ChannelMembershipSummaryFilterSensitiveLog",function(){return _c}),h.d(d,"ChannelMessageFilterSensitiveLog",function(){return Lc}),h.d(d,"ChannelMessageSummaryFilterSensitiveLog",function(){return Nc}),h.d(d,"ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog",function(){return wl}),h.d(d,"ChannelModeratorFilterSensitiveLog",function(){return Bc}),h.d(d,"ChannelModeratorSummaryFilterSensitiveLog",function(){return xc}),h.d(d,"TagFilterSensitiveLog",function(){return za}),h.d(d,"CreateChannelRequestFilterSensitiveLog",function(){return Fc}),h.d(d,"CreateChannelBanResponseFilterSensitiveLog",function(){return Uc}),h.d(d,"CreateChannelFlowRequestFilterSensitiveLog",function(){return Vc}),h.d(d,"CreateChannelMembershipResponseFilterSensitiveLog",function(){return Hc}),h.d(d,"CreateChannelModeratorResponseFilterSensitiveLog",function(){return jc}),h.d(d,"DescribeChannelResponseFilterSensitiveLog",function(){return Wc}),h.d(d,"DescribeChannelBanResponseFilterSensitiveLog",function(){return zc}),h.d(d,"DescribeChannelFlowResponseFilterSensitiveLog",function(){return Gc}),h.d(d,"DescribeChannelMembershipResponseFilterSensitiveLog",function(){return Kc}),h.d(d,"DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog",function(){return $c}),h.d(d,"DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog",function(){return Jc}),h.d(d,"DescribeChannelModeratorResponseFilterSensitiveLog",function(){return Yc}),h.d(d,"GetChannelMembershipPreferencesResponseFilterSensitiveLog",function(){return Xc}),h.d(d,"GetChannelMessageResponseFilterSensitiveLog",function(){return Qc}),h.d(d,"ListChannelBansRequestFilterSensitiveLog",function(){return Zc}),h.d(d,"ListChannelBansResponseFilterSensitiveLog",function(){return qc}),h.d(d,"ListChannelFlowsRequestFilterSensitiveLog",function(){return eu}),h.d(d,"ListChannelFlowsResponseFilterSensitiveLog",function(){return tu}),h.d(d,"ListChannelMembershipsRequestFilterSensitiveLog",function(){return nu}),h.d(d,"ListChannelMembershipsResponseFilterSensitiveLog",function(){return iu}),h.d(d,"ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog",function(){return ru}),h.d(d,"ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog",function(){return ou}),h.d(d,"ListChannelMessagesRequestFilterSensitiveLog",function(){return su}),h.d(d,"ListChannelMessagesResponseFilterSensitiveLog",function(){return au}),h.d(d,"ListChannelModeratorsRequestFilterSensitiveLog",function(){return du}),h.d(d,"ListChannelModeratorsResponseFilterSensitiveLog",function(){return lu}),h.d(d,"ListChannelsRequestFilterSensitiveLog",function(){return cu}),h.d(d,"ListChannelsResponseFilterSensitiveLog",function(){return uu}),h.d(d,"ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog",function(){return fu}),h.d(d,"ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog",function(){return hu}),h.d(d,"ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog",function(){return pu}),h.d(d,"ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog",function(){return mu}),h.d(d,"ListSubChannelsRequestFilterSensitiveLog",function(){return gu}),h.d(d,"ListSubChannelsResponseFilterSensitiveLog",function(){return Su}),h.d(d,"ListTagsForResourceResponseFilterSensitiveLog",function(){return vu}),h.d(d,"PutChannelMembershipPreferencesRequestFilterSensitiveLog",function(){return yu}),h.d(d,"PutChannelMembershipPreferencesResponseFilterSensitiveLog",function(){return bu}),h.d(d,"SearchChannelsRequestFilterSensitiveLog",function(){return Eu}),h.d(d,"SearchChannelsResponseFilterSensitiveLog",function(){return Tu}),h.d(d,"SendChannelMessageRequestFilterSensitiveLog",function(){return Cu}),h.d(d,"TagResourceRequestFilterSensitiveLog",function(){return Iu}),h.d(d,"UntagResourceRequestFilterSensitiveLog",function(){return Ou}),h.d(d,"UpdateChannelRequestFilterSensitiveLog",function(){return wu}),h.d(d,"UpdateChannelFlowRequestFilterSensitiveLog",function(){return Au}),h.d(d,"UpdateChannelMessageRequestFilterSensitiveLog",function(){return Pu}),h.d(d,"ChimeSDKMessagingServiceException",function(){return Ui});var g={};h.r(g),h.d(g,"isVirtualHostableS3Bucket",function(){return Uo}),h.d(g,"parseArn",function(){return rs}),h.d(g,"partition",function(){return ba}),h.d(g,"setPartitionInfo",function(){return Fs}),h.d(g,"useDefaultPartitionInfo",function(){return kn}),h.d(g,"getUserAgentPrefix",function(){return xo});var p={};h.r(p),h.d(p,"aws",function(){return g}),h.d(p,"booleanEquals",function(){return os}),h.d(p,"getAttr",function(){return Vo}),h.d(p,"isSet",function(){return as}),h.d(p,"isValidHostLabel",function(){return co}),h.d(p,"not",function(){return gr}),h.d(p,"parseURL",function(){return ds}),h.d(p,"stringEquals",function(){return ls}),h.d(p,"substring",function(){return cs}),h.d(p,"uriEncode",function(){return vr});var u;(function(C){C.ENV="env",C.CONFIG="shared config entry"})(u||(u={}));const m=a((C,v,b)=>{if(v in C){if(C[v]==="true")return!0;if(C[v]==="false")return!1;throw new Error(`Cannot load ${b} "${v}". Expected "true" or "false", got ${C[v]}.`)}},"booleanSelector"),s="AWS_USE_DUALSTACK_ENDPOINT",o="use_dualstack_endpoint",i=!1,e={environmentVariableSelector:C=>m(C,s,u.ENV),configFileSelector:C=>m(C,o,u.CONFIG),default:!1},t="AWS_USE_FIPS_ENDPOINT",n="use_fips_endpoint",r=!1,c={environmentVariableSelector:C=>m(C,t,u.ENV),configFileSelector:C=>m(C,n,u.CONFIG),default:!1},f=a(C=>{if(typeof C=="function")return C;const v=Promise.resolve(C);return()=>v},"normalizeProvider"),S=a(C=>{const{endpoint:v,urlParser:b}=C;var I,D;return{...C,tls:(I=C.tls)!==null&&I!==void 0?I:!0,endpoint:f(typeof v=="string"?b(v):v),isCustomEndpoint:!0,useDualstackEndpoint:f((D=C.useDualstackEndpoint)!==null&&D!==void 0?D:!1)}},"resolveCustomEndpointsConfig");var l=h("9oTK");const y=function(){var C=Object(l.coroutine)(function*(v){const{tls:b=!0}=v,I=yield v.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(I))throw new Error("Invalid region in client config");const x=yield v.useDualstackEndpoint(),j=yield v.useFipsEndpoint();var Q;const{hostname:$}=(Q=yield v.regionInfoProvider(I,{useDualstackEndpoint:x,useFipsEndpoint:j}))!==null&&Q!==void 0?Q:{};if(!$)throw new Error("Cannot resolve hostname from client config");return v.urlParser(`${b?"https:":"http:"}//${$}`)});return a(function(b){return C.apply(this,arguments)},"getEndpointFromRegion")}(),T=a(C=>{var v;const b=f((v=C.useDualstackEndpoint)!==null&&v!==void 0?v:!1),{endpoint:I,useFipsEndpoint:D,urlParser:x}=C;var j;return{...C,tls:(j=C.tls)!==null&&j!==void 0?j:!0,endpoint:I?f(typeof I=="string"?x(I):I):()=>y({...C,useDualstackEndpoint:b,useFipsEndpoint:D}),isCustomEndpoint:!!I,useDualstackEndpoint:b}},"resolveEndpointsConfig"),O="AWS_REGION",R="region",F={environmentVariableSelector:C=>C[O],configFileSelector:C=>C[R],default:()=>{throw new Error("Region is missing")}},U={preferredFile:"credentials"},_=a(C=>typeof C=="string"&&(C.startsWith("fips-")||C.endsWith("-fips")),"isFipsRegion"),P=a(C=>_(C)?["fips-aws-global","aws-fips"].includes(C)?"us-east-1":C.replace(/fips-(dkr-|prod-)?|-fips/,""):C,"getRealRegion"),L=a(C=>{const{region:v,useFipsEndpoint:b}=C;if(!v)throw new Error("Region is missing");return{...C,region:Object(l.coroutine)(function*(){if(typeof v=="string")return P(v);const I=yield v();return P(I)}),useFipsEndpoint:Object(l.coroutine)(function*(){const I=typeof v=="string"?v:yield v();return _(I)?!0:typeof b!="function"?Promise.resolve(!!b):b()})}},"resolveRegionConfig"),A=a(function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{useFipsEndpoint:v,useDualstackEndpoint:b}=arguments.length>1?arguments[1]:void 0;var I;return(I=C.find(D=>{let{tags:x}=D;return v===x.includes("fips")&&b===x.includes("dualstack")}))===null||I===void 0?void 0:I.hostname},"getHostnameFromVariants"),M=a((C,v)=>{let{regionHostname:b,partitionHostname:I}=v;return b||(I?I.replace("{region}",C):void 0)},"getResolvedHostname");var k;const G=a((C,v)=>{let{partitionHash:b}=v;return(k=Object.keys(b||{}).find(I=>b[I].regions.includes(C)))!==null&&k!==void 0?k:"aws"},"getResolvedPartition"),K=a((C,v)=>{let{signingRegion:b,regionRegex:I,useFipsEndpoint:D}=v;if(b)return b;if(D){const x=I.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),j=C.match(x);if(j)return j[0].slice(1,-1)}},"getResolvedSigningRegion"),H=a((C,v)=>{let{useFipsEndpoint:b=!1,useDualstackEndpoint:I=!1,signingService:D,regionHash:x,partitionHash:j}=v;var Q,$,ne,Y,Ie;const Ve=G(C,{partitionHash:j});var rt;const Ze=C in x?C:(rt=(Q=j[Ve])===null||Q===void 0?void 0:Q.endpoint)!==null&&rt!==void 0?rt:C,Ye={useFipsEndpoint:b,useDualstackEndpoint:I},yt=A(($=x[Ze])===null||$===void 0?void 0:$.variants,Ye),Yn=A((ne=j[Ve])===null||ne===void 0?void 0:ne.variants,Ye),kd=M(Ze,{regionHostname:yt,partitionHostname:Yn});if(kd===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:Ze,useFipsEndpoint:b,useDualstackEndpoint:I}}`);const Yd=K(kd,{signingRegion:(Y=x[Ze])===null||Y===void 0?void 0:Y.signingRegion,regionRegex:j[Ve].regionRegex,useFipsEndpoint:b});return{partition:Ve,signingService:D,hostname:kd,...Yd&&{signingRegion:Yd},...((Ie=x[Ze])===null||Ie===void 0?void 0:Ie.signingService)&&{signingService:x[Ze].signingService}}},"getRegionInfo");var X;(function(C){C[C.HEADER=0]="HEADER",C[C.TRAILER=1]="TRAILER"})(X||(X={}));class oe{add(v){this.values.push(v)}set(v){this.values=v}remove(v){this.values=this.values.filter(b=>b!==v)}toString(){return this.values.map(v=>v.includes(",")||v.includes(" ")?`"${v}"`:v).join(", ")}get(){return this.values}constructor({name:v,kind:b=X.HEADER,values:I=[]}){this.name=v,this.kind=b,this.values=I}}a(oe,"Field_Field");class le{setField(v){this.entries[v.name.toLowerCase()]=v}getField(v){return this.entries[v.toLowerCase()]}removeField(v){delete this.entries[v.toLowerCase()]}getByType(v){return Object.values(this.entries).filter(b=>b.kind===v)}constructor({fields:v=[],encoding:b="utf-8"}){this.entries={},v.forEach(this.setField.bind(this)),this.encoding=b}}a(le,"Fields");class re{static isInstance(v){if(!v)return!1;const b=v;return"method"in b&&"protocol"in b&&"hostname"in b&&"path"in b&&typeof b.query=="object"&&typeof b.headers=="object"}clone(){const v=new re({...this,headers:{...this.headers}});return v.query&&(v.query=he(v.query)),v}constructor(v){this.method=v.method||"GET",this.hostname=v.hostname||"localhost",this.port=v.port,this.query=v.query||{},this.headers=v.headers||{},this.body=v.body,this.protocol=v.protocol?v.protocol.slice(-1)!==":"?`${v.protocol}:`:v.protocol:"https:",this.path=v.path?v.path.charAt(0)!=="/"?`/${v.path}`:v.path:"/"}}a(re,"HttpRequest");function he(C){return Object.keys(C).reduce((v,b)=>{const I=C[b];return{...v,[b]:Array.isArray(I)?[...I]:I}},{})}a(he,"cloneQuery");class Pe{static isInstance(v){if(!v)return!1;const b=v;return typeof b.statusCode=="number"&&typeof b.headers=="object"}constructor(v){this.statusCode=v.statusCode,this.headers=v.headers||{},this.body=v.body}}a(Pe,"HttpResponse");function pe(C){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(C)}a(pe,"isValidHostname");const Me="content-length";function We(C){return v=>function(){var b=Object(l.coroutine)(function*(I){const D=I.request;if(re.isInstance(D)){const{body:x,headers:j}=D;if(x&&Object.keys(j).map(Q=>Q.toLowerCase()).indexOf(Me)===-1)try{const Q=C(x);D.headers={...D.headers,[Me]:String(Q)}}catch{}}return v({...I,request:D})});return function(I){return b.apply(this,arguments)}}()}a(We,"contentLengthMiddleware");const Ae={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},lt=a(C=>({applyToStack:v=>{v.add(We(C.bodyLengthChecker),Ae)}}),"getContentLengthPlugin"),Ne=function(){var C=Object(l.coroutine)(function*(v){const b=(v==null?void 0:v.Bucket)||"";if(typeof v.Bucket=="string"&&(v.Bucket=b.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),tn(b)){if(v.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Dt(b)||b.indexOf(".")!==-1&&!String(v.Endpoint).startsWith("http:")||b.toLowerCase()!==b||b.length<3)&&(v.ForcePathStyle=!0);return v.DisableMultiRegionAccessPoints&&(v.disableMultiRegionAccessPoints=!0,v.DisableMRAP=!0),v});return a(function(b){return C.apply(this,arguments)},"resolveParamsForS3")}(),Xe=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,je=/(\d+\.){3}\d+/,Te=/\.\./,At=/\./,sn=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,Dt=a(C=>Xe.test(C)&&!je.test(C)&&!Te.test(C),"isDnsCompatibleBucketName"),tn=a(C=>{const[v,b,I,D,x,j]=C.split(":"),Q=v==="arn"&&C.split(":").length>=6,$=[v,b,I,x,j].filter(Boolean).length===5;if(Q&&!$)throw new Error(`Invalid ARN: ${C} was an invalid ARN.`);return v==="arn"&&!!b&&!!I&&!!x&&!!j},"isArnBucketName"),Yt=a((C,v,b)=>{const I=function(){var D=Object(l.coroutine)(function*(){var x;const j=(x=b[C])!==null&&x!==void 0?x:b[v];return typeof j=="function"?j():j});return a(function(){return D.apply(this,arguments)},"configProvider")}();return C==="endpoint"||v==="endpoint"?Object(l.coroutine)(function*(){const D=yield I();if(D&&typeof D=="object"){if("url"in D)return D.url.href;if("hostname"in D){const{protocol:x,hostname:j,port:Q,path:$}=D;return`${x}//${j}${Q?":"+Q:""}${$}`}}return D}):I},"createConfigValueProvider"),Tn=function(){var C=Object(l.coroutine)(function*(v,b,I,D){const x=yield Xt(v,b,I);if(typeof I.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return I.endpointProvider(x,D)});return a(function(b,I,D,x){return C.apply(this,arguments)},"getEndpointFromInstructions")}(),Xt=function(){var C=Object(l.coroutine)(function*(v,b,I){var D;const x={},j=(b==null||(D=b.getEndpointParameterInstructions)===null||D===void 0?void 0:D.call(b))||{};for(const[Q,$]of Object.entries(j))switch($.type){case"staticContextParams":x[Q]=$.value;break;case"contextParams":x[Q]=v[$.name];break;case"clientContextParams":case"builtInParams":x[Q]=yield Yt($.name,Q,I)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify($))}return Object.keys(j).length===0&&Object.assign(x,I),String(I.serviceId).toLowerCase()==="s3"&&(yield Ne(x)),x});return a(function(b,I,D){return C.apply(this,arguments)},"resolveParams")}();function Cn(C){const v={};if(C=C.replace(/^\?/,""),C)for(const b of C.split("&")){let[I,D=null]=b.split("=");I=decodeURIComponent(I),D&&(D=decodeURIComponent(D)),I in v?Array.isArray(v[I])?v[I].push(D):v[I]=[v[I],D]:v[I]=D}return v}a(Cn,"parseQueryString");const Dn=a(C=>{if(typeof C=="string")return Dn(new URL(C));const{hostname:v,pathname:b,port:I,protocol:D,search:x}=C;let j;return x&&(j=Cn(x)),{hostname:v,port:I?parseInt(I):void 0,protocol:D,path:b,query:j}},"parseUrl"),cn=a(C=>typeof C=="object"?"url"in C?Dn(C.url):C:Dn(C),"toEndpointV1"),Mn=a(C=>{let{config:v,instructions:b}=C;return(I,D)=>function(){var x=Object(l.coroutine)(function*(j){var Q,$;const ne=yield Tn(j.input,{getEndpointParameterInstructions(){return b}},{...v},D);D.endpointV2=ne,D.authSchemes=(Q=ne.properties)===null||Q===void 0?void 0:Q.authSchemes;const Y=($=D.authSchemes)===null||$===void 0?void 0:$[0];return Y&&(D.signing_region=Y.signingRegion,D.signing_service=Y.signingName),I({...j})});return function(j){return x.apply(this,arguments)}}()},"endpointMiddleware"),_n=a((C,v)=>(b,I)=>function(){var D=Object(l.coroutine)(function*(x){const{response:j}=yield b(x);try{const Q=yield v(j,C);return{response:j,output:Q}}catch(Q){if(Object.defineProperty(Q,"$response",{value:j}),!("$metadata"in Q)){const $="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";Q.message+=`
  `+$}throw Q}});return function(x){return D.apply(this,arguments)}}(),"deserializerMiddleware"),nt=a((C,v)=>(b,I)=>function(){var D=Object(l.coroutine)(function*(x){var j;const Q=!((j=I.endpointV2)===null||j===void 0)&&j.url&&C.urlParser?Object(l.coroutine)(function*(){return C.urlParser(I.endpointV2.url)}):C.endpoint;if(!Q)throw new Error("No valid endpoint provider available.");const $=yield v(x.input,{...C,endpoint:Q});return b({...x,request:$})});return function(x){return D.apply(this,arguments)}}(),"serializerMiddleware"),$t={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},It={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Fe(C,v,b){return{applyToStack:I=>{I.add(_n(C,b),$t),I.add(nt(C,v),It)}}}a(Fe,"getSerdePlugin");const Rt={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:It.name},Qe=a((C,v)=>({applyToStack:b=>{b.addRelativeTo(Mn({config:C,instructions:v}),Rt)}}),"getEndpointPlugin"),Qt=a(C=>{var v;const b=(v=C.tls)!==null&&v!==void 0?v:!0,{endpoint:I}=C,D=I!=null?Object(l.coroutine)(function*(){return cn(yield f(I)())}):void 0,x=!!I;var j,Q;return{...C,endpoint:D,tls:b,isCustomEndpoint:x,useDualstackEndpoint:f((j=C.useDualstackEndpoint)!==null&&j!==void 0?j:!1),useFipsEndpoint:f((Q=C.useFipsEndpoint)!==null&&Q!==void 0?Q:!1)}},"resolveEndpointConfig");function Nn(C){return C}a(Nn,"resolveHostHeaderConfig");const Zt=a(C=>v=>function(){var b=Object(l.coroutine)(function*(I){if(!re.isInstance(I.request))return v(I);const{request:D}=I,{handlerProtocol:x=""}=C.requestHandler.metadata||{};if(x.indexOf("h2")>=0&&!D.headers[":authority"])delete D.headers.host,D.headers[":authority"]="";else if(!D.headers.host){let j=D.hostname;D.port!=null&&(j+=`:${D.port}`),D.headers.host=j}return v(I)});return function(I){return b.apply(this,arguments)}}(),"hostHeaderMiddleware"),mn={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},ni=a(C=>({applyToStack:v=>{v.add(Zt(C),mn)}}),"getHostHeaderPlugin"),fi=a(()=>(C,v)=>function(){var b=Object(l.coroutine)(function*(I){try{var D;const j=yield C(I),{clientName:Q,commandName:$,logger:ne,dynamoDbDocumentClientOptions:Y={}}=v,{overrideInputFilterSensitiveLog:Ie,overrideOutputFilterSensitiveLog:Ve}=Y,rt=Ie??v.inputFilterSensitiveLog,Ze=Ve??v.outputFilterSensitiveLog,{$metadata:Ye,...yt}=j.output;return ne==null||(D=ne.info)===null||D===void 0||D.call(ne,{clientName:Q,commandName:$,input:rt(I.input),output:Ze(yt),metadata:Ye}),j}catch(j){var x;const{clientName:Q,commandName:$,logger:ne,dynamoDbDocumentClientOptions:Y={}}=v,{overrideInputFilterSensitiveLog:Ie}=Y,Ve=Ie??v.inputFilterSensitiveLog;throw ne==null||(x=ne.error)===null||x===void 0||x.call(ne,{clientName:Q,commandName:$,input:Ve(I.input),error:j,metadata:j.$metadata}),j}});return function(I){return b.apply(this,arguments)}}(),"loggerMiddleware"),di={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Wn=a(C=>({applyToStack:v=>{v.add(fi(),di)}}),"getLoggerPlugin"),Rn="X-Amzn-Trace-Id",bt="AWS_LAMBDA_FUNCTION_NAME",ee="_X_AMZN_TRACE_ID",ae=a(C=>v=>function(){var b=Object(l.coroutine)(function*(I){const{request:D}=I;if(!re.isInstance(D)||C.runtime!=="node"||D.headers.hasOwnProperty(Rn))return v(I);const x=Object({NODE_ENV:"production"})[bt],j=Object({NODE_ENV:"production"})[ee],Q=a($=>typeof $=="string"&&$.length>0,"nonEmptyString");return Q(x)&&Q(j)&&(D.headers[Rn]=j),v({...I,request:D})});return function(I){return b.apply(this,arguments)}}(),"recursionDetectionMiddleware"),fe={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Ue=a(C=>({applyToStack:v=>{v.add(ae(C),fe)}}),"getRecursionDetectionPlugin");var we;(function(C){C.STANDARD="standard",C.ADAPTIVE="adaptive"})(we||(we={}));const Ce=3,De=we.STANDARD,pt=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],gt=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ct=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],_t=[500,502,503,504],zn=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],vn=a(C=>C.$retryable!==void 0,"isRetryableByTrait"),li=a(C=>pt.includes(C.name),"isClockSkewError"),Gn=a(C=>{var v,b;return((v=C.$metadata)===null||v===void 0?void 0:v.httpStatusCode)===429||gt.includes(C.name)||((b=C.$retryable)===null||b===void 0?void 0:b.throttling)==!0},"isThrottlingError"),gn=a(C=>{var v;return ct.includes(C.name)||zn.includes((C==null?void 0:C.code)||"")||_t.includes(((v=C.$metadata)===null||v===void 0?void 0:v.httpStatusCode)||0)},"isTransientError"),yi=a(C=>{var v;if(((v=C.$metadata)===null||v===void 0?void 0:v.httpStatusCode)!==void 0){const b=C.$metadata.httpStatusCode;return 500<=b&&b<=599&&!gn(C)}return!1},"isServerError");class un{getCurrentTimeInSeconds(){return Date.now()/1e3}getSendToken(){var v=this;return Object(l.coroutine)(function*(){return v.acquireTokenBucket(1)})()}acquireTokenBucket(v){var b=this;return Object(l.coroutine)(function*(){if(b.enabled){if(b.refillTokenBucket(),v>b.currentCapacity){const I=(v-b.currentCapacity)/b.fillRate*1e3;yield new Promise(D=>setTimeout(D,I))}b.currentCapacity=b.currentCapacity-v}})()}refillTokenBucket(){const v=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=v;return}const b=(v-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+b),this.lastTimestamp=v}updateClientSendingRate(v){let b;if(this.updateMeasuredRate(),Gn(v)){const D=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=D,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),b=this.cubicThrottle(D),this.enableTokenBucket()}else this.calculateTimeWindow(),b=this.cubicSuccess(this.getCurrentTimeInSeconds());const I=Math.min(b,2*this.measuredTxRate);this.updateTokenBucketRate(I)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(v){return this.getPrecise(v*this.beta)}cubicSuccess(v){return this.getPrecise(this.scaleConstant*Math.pow(v-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(v){this.refillTokenBucket(),this.fillRate=Math.max(v,this.minFillRate),this.maxCapacity=Math.max(v,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const v=this.getCurrentTimeInSeconds(),b=Math.floor(v*2)/2;if(this.requestCount++,b>this.lastTxRateBucket){const I=this.requestCount/(b-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(I*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=b}}getPrecise(v){return parseFloat(v.toFixed(8))}constructor(v){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0;var b;this.beta=(b=v==null?void 0:v.beta)!==null&&b!==void 0?b:.7;var I;this.minCapacity=(I=v==null?void 0:v.minCapacity)!==null&&I!==void 0?I:1;var D;this.minFillRate=(D=v==null?void 0:v.minFillRate)!==null&&D!==void 0?D:.5;var x;this.scaleConstant=(x=v==null?void 0:v.scaleConstant)!==null&&x!==void 0?x:.4;var j;this.smooth=(j=v==null?void 0:v.smooth)!==null&&j!==void 0?j:.8;const Q=this.getCurrentTimeInSeconds();this.lastThrottleTime=Q,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}}a(un,"DefaultRateLimiter_DefaultRateLimiter");const Xn=100,an=20*1e3,hi=500,xn=500,bi=5,Ei=10,Kn=1,Oi="amz-sdk-invocation-id",Re="amz-sdk-request",Oe=a(()=>{let C=Xn;return{computeNextBackoffDelay:a(I=>Math.floor(Math.min(an,Math.random()*2**I*C)),"computeNextBackoffDelay"),setDelayBase:a(I=>{C=I},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),Et=a(C=>{let{retryDelay:v,retryCount:b,retryCost:I}=C;return{getRetryCount:a(()=>b,"getRetryCount"),getRetryDelay:a(()=>Math.min(an,v),"getRetryDelay"),getRetryCost:a(()=>I,"getRetryCost")}},"createDefaultRetryToken");class it{acquireInitialRetryToken(v){return Object(l.coroutine)(function*(){return Et({retryDelay:Xn,retryCount:0})})()}refreshRetryTokenForRetry(v,b){var I=this;return Object(l.coroutine)(function*(){const D=yield I.getMaxAttempts();if(I.shouldRetry(v,b,D)){const x=b.errorType;I.retryBackoffStrategy.setDelayBase(x==="THROTTLING"?hi:Xn);const j=I.retryBackoffStrategy.computeNextBackoffDelay(v.getRetryCount()),Q=b.retryAfterHint?Math.max(b.retryAfterHint.getTime()-Date.now()||0,j):j,$=I.getCapacityCost(x);return I.capacity-=$,Et({retryDelay:Q,retryCount:v.getRetryCount()+1,retryCost:$})}throw new Error("No retry token available")})()}recordSuccess(v){var b;this.capacity=Math.max(xn,this.capacity+((b=v.getRetryCost())!==null&&b!==void 0?b:Kn))}getCapacity(){return this.capacity}getMaxAttempts(){var v=this;return Object(l.coroutine)(function*(){try{return yield v.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Ce}`),Ce}})()}shouldRetry(v,b,I){return v.getRetryCount()<I&&this.capacity>=this.getCapacityCost(b.errorType)&&this.isRetryableError(b.errorType)}getCapacityCost(v){return v==="TRANSIENT"?Ei:bi}isRetryableError(v){return v==="THROTTLING"||v==="TRANSIENT"}constructor(v){this.maxAttempts=v,this.mode=we.STANDARD,this.capacity=xn,this.retryBackoffStrategy=Oe(),this.maxAttemptsProvider=typeof v=="function"?v:Object(l.coroutine)(function*(){return v})}}a(it,"StandardRetryStrategy_StandardRetryStrategy");class Pt{acquireInitialRetryToken(v){var b=this;return Object(l.coroutine)(function*(){return yield b.rateLimiter.getSendToken(),b.standardRetryStrategy.acquireInitialRetryToken(v)})()}refreshRetryTokenForRetry(v,b){var I=this;return Object(l.coroutine)(function*(){return I.rateLimiter.updateClientSendingRate(b),I.standardRetryStrategy.refreshRetryTokenForRetry(v,b)})()}recordSuccess(v){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(v)}constructor(v,b){this.maxAttemptsProvider=v,this.mode=we.ADAPTIVE;const{rateLimiter:I}=b??{};this.rateLimiter=I??new un,this.standardRetryStrategy=new it(v)}}a(Pt,"AdaptiveRetryStrategy_AdaptiveRetryStrategy");class qt extends it{refreshRetryTokenForRetry(v,b){var I=this,D=a(()=>super.refreshRetryTokenForRetry,"_superprop_get_refreshRetryTokenForRetry");return Object(l.coroutine)(function*(){const x=yield D().call(I,v,b);return x.getRetryDelay=()=>I.computeNextBackoffDelay(x.getRetryCount()),x})()}constructor(v,b=Xn){super(typeof v=="function"?v:Object(l.coroutine)(function*(){return v})),typeof b=="number"?this.computeNextBackoffDelay=()=>b:this.computeNextBackoffDelay=b}}a(qt,"ConfiguredRetryStrategy_ConfiguredRetryStrategy");var Jt,kt=new Uint8Array(16);function nn(){if(!Jt&&(Jt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Jt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jt(kt)}a(nn,"rng");var N=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Z(C){return typeof C=="string"&&N.test(C)}a(Z,"validate");for(var de=Z,ce=[],ve=0;ve<256;++ve)ce.push((ve+256).toString(16).substr(1));function me(C){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=(ce[C[v+0]]+ce[C[v+1]]+ce[C[v+2]]+ce[C[v+3]]+"-"+ce[C[v+4]]+ce[C[v+5]]+"-"+ce[C[v+6]]+ce[C[v+7]]+"-"+ce[C[v+8]]+ce[C[v+9]]+"-"+ce[C[v+10]]+ce[C[v+11]]+ce[C[v+12]]+ce[C[v+13]]+ce[C[v+14]]+ce[C[v+15]]).toLowerCase();if(!de(b))throw TypeError("Stringified UUID is invalid");return b}a(me,"stringify");var He=me;function ke(C,v,b){C=C||{};var I=C.random||(C.rng||nn)();if(I[6]=I[6]&15|64,I[8]=I[8]&63|128,v){b=b||0;for(var D=0;D<16;++D)v[b+D]=I[D];return v}return He(I)}a(ke,"v4");var $e=ke;const Be=a((C,v)=>{const b=C;var I;const D=(I=v==null?void 0:v.noRetryIncrement)!==null&&I!==void 0?I:Kn;var x;const j=(x=v==null?void 0:v.retryCost)!==null&&x!==void 0?x:bi;var Q;const $=(Q=v==null?void 0:v.timeoutRetryCost)!==null&&Q!==void 0?Q:Ei;let ne=C;const Y=a(Ze=>Ze.name==="TimeoutError"?$:j,"getCapacityAmount"),Ie=a(Ze=>Y(Ze)<=ne,"hasRetryTokens");return Object.freeze({hasRetryTokens:Ie,retrieveRetryTokens:a(Ze=>{if(!Ie(Ze))throw new Error("No retry token available");const Ye=Y(Ze);return ne-=Ye,Ye},"retrieveRetryTokens"),releaseRetryTokens:a(Ze=>{ne+=Ze??D,ne=Math.min(ne,b)},"releaseRetryTokens")})},"getDefaultRetryQuota"),ot=a((C,v)=>Math.floor(Math.min(an,Math.random()*2**v*C)),"defaultDelayDecider"),Kt=a(C=>C?vn(C)||li(C)||Gn(C)||gn(C):!1,"defaultRetryDecider"),Wt=a(C=>C instanceof Error?C:C instanceof Object?Object.assign(new Error,C):typeof C=="string"?new Error(C):new Error(`AWS SDK error wrapper for ${C}`),"asSdkError");class fn{shouldRetry(v,b,I){return b<I&&this.retryDecider(v)&&this.retryQuota.hasRetryTokens(v)}getMaxAttempts(){var v=this;return Object(l.coroutine)(function*(){let b;try{b=yield v.maxAttemptsProvider()}catch{b=Ce}return b})()}retry(v,b,I){var D=this;return Object(l.coroutine)(function*(){let x,j=0,Q=0;const $=yield D.getMaxAttempts(),{request:ne}=b;for(re.isInstance(ne)&&(ne.headers[Oi]=$e());;)try{re.isInstance(ne)&&(ne.headers[Re]=`attempt=${j+1}; max=${$}`),I!=null&&I.beforeRequest&&(yield I.beforeRequest());const{response:Y,output:Ie}=yield v(b);return I!=null&&I.afterRequest&&I.afterRequest(Y),D.retryQuota.releaseRetryTokens(x),Ie.$metadata.attempts=j+1,Ie.$metadata.totalRetryDelay=Q,{response:Y,output:Ie}}catch(Y){const Ie=Wt(Y);if(j++,D.shouldRetry(Ie,j,$)){x=D.retryQuota.retrieveRetryTokens(Ie);const Ve=D.delayDecider(Gn(Ie)?hi:Xn,j),rt=on(Ie.$response),Ze=Math.max(rt||0,Ve);Q+=Ze,yield new Promise(Ye=>setTimeout(Ye,Ze));continue}throw Ie.$metadata||(Ie.$metadata={}),Ie.$metadata.attempts=j,Ie.$metadata.totalRetryDelay=Q,Ie}})()}constructor(v,b){this.maxAttemptsProvider=v,this.mode=we.STANDARD;var I;this.retryDecider=(I=b==null?void 0:b.retryDecider)!==null&&I!==void 0?I:Kt;var D;this.delayDecider=(D=b==null?void 0:b.delayDecider)!==null&&D!==void 0?D:ot;var x;this.retryQuota=(x=b==null?void 0:b.retryQuota)!==null&&x!==void 0?x:Be(xn)}}a(fn,"dist_es_StandardRetryStrategy_StandardRetryStrategy");const on=a(C=>{if(!Pe.isInstance(C))return;const v=Object.keys(C.headers).find(x=>x.toLowerCase()==="retry-after");if(!v)return;const b=C.headers[v],I=Number(b);return Number.isNaN(I)?new Date(b).getTime()-Date.now():I*1e3},"getDelayFromRetryAfterHeader");class hn extends fn{retry(v,b){var I=this,D=a(()=>super.retry,"_superprop_get_retry");return Object(l.coroutine)(function*(){return D().call(I,v,b,{beforeRequest:Object(l.coroutine)(function*(){return I.rateLimiter.getSendToken()}),afterRequest:x=>{I.rateLimiter.updateClientSendingRate(x)}})})()}constructor(v,b){const{rateLimiter:I,...D}=b??{};super(v,D),this.rateLimiter=I??new un,this.mode=we.ADAPTIVE}}a(hn,"dist_es_AdaptiveRetryStrategy_AdaptiveRetryStrategy");const Ot="AWS_MAX_ATTEMPTS",wn="max_attempts",Sn={environmentVariableSelector:C=>{const v=C[Ot];if(!v)return;const b=parseInt(v);if(Number.isNaN(b))throw new Error(`Environment variable ${Ot} mast be a number, got "${v}"`);return b},configFileSelector:C=>{const v=C[wn];if(!v)return;const b=parseInt(v);if(Number.isNaN(b))throw new Error(`Shared config file entry ${wn} mast be a number, got "${v}"`);return b},default:Ce},yn=a(C=>{const{retryStrategy:v}=C;var b;const I=f((b=C.maxAttempts)!==null&&b!==void 0?b:Ce);return{...C,maxAttempts:I,retryStrategy:Object(l.coroutine)(function*(){return v||((yield f(C.retryMode)())===we.ADAPTIVE?new Pt(I):new it(I))})}},"resolveRetryConfig"),pi="AWS_RETRY_MODE",In="retry_mode",ci={environmentVariableSelector:C=>C[pi],configFileSelector:C=>C[In],default:De},pn=a(()=>C=>function(){var v=Object(l.coroutine)(function*(b){const{request:I}=b;return re.isInstance(I)&&(delete I.headers[Oi],delete I.headers[Re]),C(b)});return function(b){return v.apply(this,arguments)}}(),"omitRetryHeadersMiddleware"),wi={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},On=a(C=>({applyToStack:v=>{v.addRelativeTo(pn(),wi)}}),"getOmitRetryHeadersPlugin"),rn=a(C=>(v,b)=>function(){var I=Object(l.coroutine)(function*(D){let x=yield C.retryStrategy();const j=yield C.maxAttempts();if(ut(x)){x=x;let Q=yield x.acquireInitialRetryToken(b.partition_id),$=new Error,ne=0,Y=0;const{request:Ie}=D;for(re.isInstance(Ie)&&(Ie.headers[Oi]=$e());;)try{re.isInstance(Ie)&&(Ie.headers[Re]=`attempt=${ne+1}; max=${j}`);const{response:Ve,output:rt}=yield v(D);return x.recordSuccess(Q),rt.$metadata.attempts=ne+1,rt.$metadata.totalRetryDelay=Y,{response:Ve,output:rt}}catch(Ve){const rt=ze(Ve);$=Wt(Ve);try{Q=yield x.refreshRetryTokenForRetry(Q,rt)}catch{throw $.$metadata||($.$metadata={}),$.$metadata.attempts=ne+1,$.$metadata.totalRetryDelay=Y,$}ne=Q.getRetryCount();const Ze=Q.getRetryDelay();Y+=Ze,yield new Promise(Ye=>setTimeout(Ye,Ze))}}else return x=x,x!=null&&x.mode&&(b.userAgent=[...b.userAgent||[],["cfg/retry-mode",x.mode]]),x.retry(v,D)});return function(D){return I.apply(this,arguments)}}(),"retryMiddleware"),ut=a(C=>typeof C.acquireInitialRetryToken<"u"&&typeof C.refreshRetryTokenForRetry<"u"&&typeof C.recordSuccess<"u","isRetryStrategyV2"),ze=a(C=>{const v={errorType:Bn(C)},b=An(C.$response);return b&&(v.retryAfterHint=b),v},"getRetryErrorInfo"),Bn=a(C=>Gn(C)?"THROTTLING":gn(C)?"TRANSIENT":yi(C)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType"),Bi={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Qn=a(C=>({applyToStack:v=>{v.add(rn(C),Bi)}}),"getRetryPlugin"),An=a(C=>{if(!Pe.isInstance(C))return;const v=Object.keys(C.headers).find(x=>x.toLowerCase()==="retry-after");if(!v)return;const b=C.headers[v],I=Number(b);return Number.isNaN(I)?new Date(b):new Date(I*1e3)},"getRetryAfterHint");class xi extends Error{static from(v){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Object.assign(new this(v.message,b),v)}constructor(v,b=!0){super(v),this.tryNextLink=b,this.name="ProviderError",Object.setPrototypeOf(this,xi.prototype)}}a(xi,"ProviderError");class Di extends xi{constructor(v,b=!0){super(v,b),this.tryNextLink=b,this.name="CredentialsProviderError",Object.setPrototypeOf(this,Di.prototype)}}a(Di,"CredentialsProviderError_CredentialsProviderError");class Zn extends xi{constructor(v,b=!0){super(v,b),this.tryNextLink=b,this.name="TokenProviderError",Object.setPrototypeOf(this,Zn.prototype)}}a(Zn,"TokenProviderError_TokenProviderError");function wo(){for(var C=arguments.length,v=new Array(C),b=0;b<C;b++)v[b]=arguments[b];return()=>{let I=Promise.reject(new xi("No providers in chain"));for(const D of v)I=I.catch(x=>{if(x!=null&&x.tryNextLink)return D();throw x});return I}}a(wo,"chain");const Ao=a(C=>()=>Promise.resolve(C),"fromStatic"),Pn=a((C,v,b)=>{let I,D,x,j=!1;const Q=function(){var $=Object(l.coroutine)(function*(){D||(D=C());try{I=yield D,x=!0,j=!1}finally{D=void 0}return I});return a(function(){return $.apply(this,arguments)},"coalesceProvider")}();return v===void 0?function(){var $=Object(l.coroutine)(function*(ne){return(!x||ne!=null&&ne.forceRefresh)&&(I=yield Q()),I});return function(ne){return $.apply(this,arguments)}}():function(){var $=Object(l.coroutine)(function*(ne){return(!x||ne!=null&&ne.forceRefresh)&&(I=yield Q()),j?I:b&&!b(I)?(j=!0,I):(v(I)&&(yield Q()),I)});return function(ne){return $.apply(this,arguments)}}()},"memoize"),mi={},sr={};for(let C=0;C<256;C++){let v=C.toString(16).toLowerCase();v.length===1&&(v=`0${v}`),mi[C]=v,sr[v]=C}function Po(C){if(C.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const v=new Uint8Array(C.length/2);for(let b=0;b<C.length;b+=2){const I=C.slice(b,b+2).toLowerCase();if(I in sr)v[b/2]=sr[I];else throw new Error(`Cannot decode unrecognized sequence ${I} as hexadecimal`)}return v}a(Po,"fromHex");function Ai(C){let v="";for(let b=0;b<C.byteLength;b++)v+=mi[C[b]];return v}a(Ai,"toHex");const Wi=a(C=>new TextEncoder().encode(C),"fromUtf8"),Vi=a(C=>typeof C=="string"?Wi(C):ArrayBuffer.isView(C)?new Uint8Array(C.buffer,C.byteOffset,C.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(C),"toUint8Array"),ar=a(C=>new TextDecoder("utf-8").decode(C),"toUtf8"),zr="X-Amz-Algorithm",Gr="X-Amz-Credential",Cr="X-Amz-Date",Kr="X-Amz-SignedHeaders",$r="X-Amz-Expires",Ir="X-Amz-Signature",Or="X-Amz-Security-Token",Mo="X-Amz-Region-Set",wr="authorization",Ar=Cr.toLowerCase(),Jr=[wr,Ar,"date"],Yr=Ir.toLowerCase(),ui="x-amz-content-sha256",Xr=Or.toLowerCase(),ko="host",Qr={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},_i=/^proxy-/,dr=/^sec-/,Pi=[/^proxy-/i,/^sec-/i],lr="AWS4-HMAC-SHA256",Do="AWS4-ECDSA-P256-SHA256",Zr="AWS4-HMAC-SHA256-PAYLOAD",qr="UNSIGNED-PAYLOAD",Ti=50,Pr="aws4_request",cr=60*60*24*7,Mi={},zi=[],ur=a((C,v,b)=>`${C}/${v}/${b}/${Pr}`,"createScope"),eo=function(){var C=Object(l.coroutine)(function*(v,b,I,D,x){const j=yield Ri(v,b.secretAccessKey,b.accessKeyId),Q=`${I}:${D}:${x}:${Ai(j)}:${b.sessionToken}`;if(Q in Mi)return Mi[Q];for(zi.push(Q);zi.length>Ti;)delete Mi[zi.shift()];let $=`AWS4${b.secretAccessKey}`;for(const ne of[I,D,x,Pr])$=yield Ri(v,$,ne);return Mi[Q]=$});return a(function(b,I,D,x,j){return C.apply(this,arguments)},"getSigningKey")}(),_o=a(()=>{zi.length=0,Object.keys(Mi).forEach(C=>{delete Mi[C]})},"clearCredentialCache"),Ri=a((C,v,b)=>{const I=new C(v);return I.update(Vi(b)),I.digest()},"hmac"),Mr=a((C,v,b)=>{let{headers:I}=C;const D={};for(const x of Object.keys(I).sort()){if(I[x]==null)continue;const j=x.toLowerCase();(j in Qr||v!=null&&v.has(j)||_i.test(j)||dr.test(j))&&(!b||b&&!b.has(j))||(D[j]=I[x].trim().replace(/\s+/g," "))}return D},"getCanonicalHeaders"),ki=a(C=>encodeURIComponent(C).replace(/[!'()*]/g,to),"escapeUri"),to=a(C=>`%${C.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode"),Lo=a(C=>C.split("/").map(ki).join("/"),"escapeUriPath"),Ci=a(C=>{let{query:v={}}=C;const b=[],I={};for(const D of Object.keys(v).sort()){if(D.toLowerCase()===Yr)continue;b.push(D);const x=v[D];typeof x=="string"?I[D]=`${ki(D)}=${ki(x)}`:Array.isArray(x)&&(I[D]=x.slice(0).sort().reduce((j,Q)=>j.concat([`${ki(D)}=${ki(Q)}`]),[]).join("&"))}return b.map(D=>I[D]).filter(D=>D).join("&")},"getCanonicalQuery"),Hi=a(C=>typeof ArrayBuffer=="function"&&C instanceof ArrayBuffer||Object.prototype.toString.call(C)==="[object ArrayBuffer]","isArrayBuffer"),fr=function(){var C=Object(l.coroutine)(function*(v,b){let{headers:I,body:D}=v;for(const x of Object.keys(I))if(x.toLowerCase()===ui)return I[x];if(D==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof D=="string"||ArrayBuffer.isView(D)||Hi(D)){const x=new b;return x.update(Vi(D)),Ai(yield x.digest())}return qr});return a(function(b,I){return C.apply(this,arguments)},"getPayloadHash")}(),no=a((C,v)=>{C=C.toLowerCase();for(const b of Object.keys(v))if(C===b.toLowerCase())return!0;return!1},"hasHeader"),No=a((C,v)=>{C=C.toLowerCase();for(const b of Object.keys(v))if(C===b.toLowerCase())return v[b]},"getHeaderValue"),Bo=a((C,v)=>{C=C.toLowerCase();for(const b of Object.keys(v))C===b.toLowerCase()&&delete v[b]},"deleteHeader"),Rr=a(C=>{let{headers:v,query:b,...I}=C;return{...I,headers:{...v},query:b?io(b):void 0}},"cloneRequest"),io=a(C=>Object.keys(C).reduce((v,b)=>{const I=C[b];return{...v,[b]:Array.isArray(I)?[...I]:I}},{}),"cloneRequest_cloneQuery"),ro=a(function(C){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{headers:b,query:I={}}=typeof C.clone=="function"?C.clone():Rr(C);for(const x of Object.keys(b)){var D;const j=x.toLowerCase();j.slice(0,6)==="x-amz-"&&!(!((D=v.unhoistableHeaders)===null||D===void 0)&&D.has(j))&&(I[x]=b[x],delete b[x])}return{...C,headers:b,query:I}},"moveHeadersToQuery"),kr=a(C=>{C=typeof C.clone=="function"?C.clone():Rr(C);for(const v of Object.keys(C.headers))Jr.indexOf(v.toLowerCase())>-1&&delete C.headers[v];return C},"prepareRequest"),Li=a(C=>oo(C).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601"),oo=a(C=>typeof C=="number"?new Date(C*1e3):typeof C=="string"?Number(C)?new Date(Number(C)*1e3):new Date(C):C,"toDate");class Gi{presign(v){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var I=this;return Object(l.coroutine)(function*(){const{signingDate:D=new Date,expiresIn:x=3600,unsignableHeaders:j,unhoistableHeaders:Q,signableHeaders:$,signingRegion:ne,signingService:Y}=b,Ie=yield I.credentialProvider();I.validateResolvedCredentials(Ie);const Ve=ne??(yield I.regionProvider()),{longDate:rt,shortDate:Ze}=$n(D);if(x>cr)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const Ye=ur(Ze,Ve,Y??I.service),yt=ro(kr(v),{unhoistableHeaders:Q});Ie.sessionToken&&(yt.query[Or]=Ie.sessionToken),yt.query[zr]=lr,yt.query[Gr]=`${Ie.accessKeyId}/${Ye}`,yt.query[Cr]=rt,yt.query[$r]=x.toString(10);const Yn=Mr(yt,j,$);return yt.query[Kr]=Ki(Yn),yt.query[Ir]=yield I.getSignature(rt,Ye,I.getSigningKey(Ie,Ve,Ze,Y),I.createCanonicalRequest(yt,Yn,yield fr(v,I.sha256))),yt})()}sign(v,b){var I=this;return Object(l.coroutine)(function*(){return typeof v=="string"?I.signString(v,b):v.headers&&v.payload?I.signEvent(v,b):I.signRequest(v,b)})()}signEvent(v,b){let{headers:I,payload:D}=v,{signingDate:x=new Date,priorSignature:j,signingRegion:Q,signingService:$}=b;var ne=this;return Object(l.coroutine)(function*(){const Y=Q??(yield ne.regionProvider()),{shortDate:Ie,longDate:Ve}=$n(x),rt=ur(Ie,Y,$??ne.service),Ze=yield fr({headers:{},body:D},ne.sha256),Ye=new ne.sha256;Ye.update(I);const yt=Ai(yield Ye.digest()),Yn=[Zr,Ve,rt,j,yt,Ze].join(`
`);return ne.signString(Yn,{signingDate:x,signingRegion:Y,signingService:$})})()}signString(v){let{signingDate:b=new Date,signingRegion:I,signingService:D}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var x=this;return Object(l.coroutine)(function*(){const j=yield x.credentialProvider();x.validateResolvedCredentials(j);const Q=I??(yield x.regionProvider()),{shortDate:$}=$n(b),ne=new x.sha256(yield x.getSigningKey(j,Q,$,D));return ne.update(Vi(v)),Ai(yield ne.digest())})()}signRequest(v){let{signingDate:b=new Date,signableHeaders:I,unsignableHeaders:D,signingRegion:x,signingService:j}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var Q=this;return Object(l.coroutine)(function*(){const $=yield Q.credentialProvider();Q.validateResolvedCredentials($);const ne=x??(yield Q.regionProvider()),Y=kr(v),{longDate:Ie,shortDate:Ve}=$n(b),rt=ur(Ve,ne,j??Q.service);Y.headers[Ar]=Ie,$.sessionToken&&(Y.headers[Xr]=$.sessionToken);const Ze=yield fr(Y,Q.sha256);!no(ui,Y.headers)&&Q.applyChecksum&&(Y.headers[ui]=Ze);const Ye=Mr(Y,D,I),yt=yield Q.getSignature(Ie,rt,Q.getSigningKey($,ne,Ve,j),Q.createCanonicalRequest(Y,Ye,Ze));return Y.headers[wr]=`${lr} Credential=${$.accessKeyId}/${rt}, SignedHeaders=${Ki(Ye)}, Signature=${yt}`,Y})()}createCanonicalRequest(v,b,I){const D=Object.keys(b).sort();return`${v.method}
${this.getCanonicalPath(v)}
${Ci(v)}
${D.map(x=>`${x}:${b[x]}`).join(`
`)}

${D.join(";")}
${I}`}createStringToSign(v,b,I){var D=this;return Object(l.coroutine)(function*(){const x=new D.sha256;x.update(Vi(I));const j=yield x.digest();return`${lr}
${v}
${b}
${Ai(j)}`})()}getCanonicalPath(v){let{path:b}=v;if(this.uriEscapePath){const I=[];for(const j of b.split("/"))(j==null?void 0:j.length)!==0&&j!=="."&&(j===".."?I.pop():I.push(j));const D=`${b!=null&&b.startsWith("/")?"/":""}${I.join("/")}${I.length>0&&(b!=null&&b.endsWith("/"))?"/":""}`;return encodeURIComponent(D).replace(/%2F/g,"/")}return b}getSignature(v,b,I,D){var x=this;return Object(l.coroutine)(function*(){const j=yield x.createStringToSign(v,b,D),Q=new x.sha256(yield I);return Q.update(Vi(j)),Ai(yield Q.digest())})()}getSigningKey(v,b,I,D){return eo(this.sha256,v,I,b,D||this.service)}validateResolvedCredentials(v){if(typeof v!="object"||typeof v.accessKeyId!="string"||typeof v.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}constructor({applyChecksum:v,credentials:b,region:I,service:D,sha256:x,uriEscapePath:j=!0}){this.service=D,this.sha256=x,this.uriEscapePath=j,this.applyChecksum=typeof v=="boolean"?v:!0,this.regionProvider=f(I),this.credentialProvider=f(b)}}a(Gi,"SignatureV4_SignatureV4");const $n=a(C=>{const v=Li(C).replace(/[\-:]/g,"");return{longDate:v,shortDate:v.slice(0,8)}},"formatDate"),Ki=a(C=>Object.keys(C).sort().join(";"),"getCanonicalHeaderList"),hr=3e5,pr=a(C=>{const v=C.credentials?Ji(C.credentials):C.credentialDefaultProvider(C),{signingEscapePath:b=!0,systemClockOffset:I=C.systemClockOffset||0,sha256:D}=C;let x;return C.signer?x=f(C.signer):C.regionInfoProvider?x=a(()=>f(C.region)().then(function(){var j=Object(l.coroutine)(function*(Q){return[(yield C.regionInfoProvider(Q,{useFipsEndpoint:yield C.useFipsEndpoint(),useDualstackEndpoint:yield C.useDualstackEndpoint()}))||{},Q]});return function(Q){return j.apply(this,arguments)}}()).then(j=>{let[Q,$]=j;const{signingRegion:ne,signingService:Y}=Q;C.signingRegion=C.signingRegion||ne||$,C.signingName=C.signingName||Y||C.serviceId;const Ie={...C,credentials:v,region:C.signingRegion,service:C.signingName,sha256:D,uriEscapePath:b},Ve=C.signerConstructor||Gi;return new Ve(Ie)}),"signer"):x=function(){var j=Object(l.coroutine)(function*(Q){Q=Object.assign({},{name:"sigv4",signingName:C.signingName||C.defaultSigningName,signingRegion:yield f(C.region)(),properties:{}},Q);const $=Q.signingRegion,ne=Q.signingName;C.signingRegion=C.signingRegion||$,C.signingName=C.signingName||ne||C.serviceId;const Y={...C,credentials:v,region:C.signingRegion,service:C.signingName,sha256:D,uriEscapePath:b},Ie=C.signerConstructor||Gi;return new Ie(Y)});return function(Q){return j.apply(this,arguments)}}(),{...C,systemClockOffset:I,signingEscapePath:b,credentials:v,signer:x}},"resolveAwsAuthConfig"),$i=a(C=>{const v=C.credentials?Ji(C.credentials):C.credentialDefaultProvider(C),{signingEscapePath:b=!0,systemClockOffset:I=C.systemClockOffset||0,sha256:D}=C;let x;return C.signer?x=f(C.signer):x=f(new Gi({credentials:v,region:C.region,service:C.signingName,sha256:D,uriEscapePath:b})),{...C,systemClockOffset:I,signingEscapePath:b,credentials:v,signer:x}},"resolveSigV4AuthConfig"),Ji=a(C=>typeof C=="function"?Pn(C,v=>v.expiration!==void 0&&v.expiration.getTime()-Date.now()<hr,v=>v.expiration!==void 0):f(C),"normalizeCredentialProvider"),Dr=a(C=>new Date(Date.now()+C),"getSkewCorrectedDate"),so=a((C,v)=>Math.abs(Dr(v).getTime()-C)>=3e5,"isClockSkewed"),_r=a((C,v)=>{const b=Date.parse(C);return so(b,v)?b-Date.now():v},"getUpdatedSystemClockOffset"),ji=a(C=>(v,b)=>function(){var I=Object(l.coroutine)(function*(D){var x,j,Q,$;if(!re.isInstance(D.request))return v(D);const ne=(x=b.endpointV2)===null||x===void 0||(j=x.properties)===null||j===void 0||(Q=j.authSchemes)===null||Q===void 0?void 0:Q[0],Y=(ne==null?void 0:ne.name)==="sigv4a"?ne==null||($=ne.signingRegionSet)===null||$===void 0?void 0:$.join(","):void 0,Ie=yield C.signer(ne),Ve=yield v({...D,request:yield Ie.sign(D.request,{signingDate:Dr(C.systemClockOffset),signingRegion:Y||b.signing_region,signingService:b.signing_service})}).catch(Ze=>{var Ye;const yt=(Ye=Ze.ServerTime)!==null&&Ye!==void 0?Ye:gi(Ze.$response);throw yt&&(C.systemClockOffset=_r(yt,C.systemClockOffset)),Ze}),rt=gi(Ve.response);return rt&&(C.systemClockOffset=_r(rt,C.systemClockOffset)),Ve});return function(D){return I.apply(this,arguments)}}(),"awsAuthMiddleware");var ao;const gi=a(C=>{var v,b;return Pe.isInstance(C)?(ao=(v=C.headers)===null||v===void 0?void 0:v.date)!==null&&ao!==void 0?ao:(b=C.headers)===null||b===void 0?void 0:b.Date:void 0},"getDateHeader"),lo={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Si=a(C=>({applyToStack:v=>{v.addRelativeTo(ji(C),lo)}}),"getAwsAuthPlugin"),Bs=Si;function ts(C){return{...C,customUserAgent:typeof C.customUserAgent=="string"?[[C.customUserAgent]]:C.customUserAgent}}a(ts,"resolveUserAgentConfig");var xs=h("syoQ");let Yi=xs,vi="";const ba=a(C=>{const{partitions:v}=Yi;for(const I of v){const{regions:D,outputs:x}=I;for(const[j,Q]of Object.entries(D))if(j===C)return{...x,...Q}}for(const I of v){const{regionRegex:D,outputs:x}=I;if(new RegExp(D).test(C))return{...x}}const b=v.find(I=>I.id==="aws");if(!b)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...b.outputs}},"partition_partition"),Fs=a(function(C){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";Yi=C,vi=v},"setPartitionInfo"),kn=a(()=>{Fs(xs,"")},"useDefaultPartitionInfo"),xo=a(()=>vi,"getUserAgentPrefix"),mr="endpoints";function Xi(C){return typeof C!="object"||C==null?C:"ref"in C?`$${Xi(C.ref)}`:"fn"in C?`${C.fn}(${(C.argv||[]).map(Xi).join(", ")})`:JSON.stringify(C,null,2)}a(Xi,"toDebugString");class ii extends Error{constructor(v){super(v),this.name="EndpointError"}}a(ii,"EndpointError");const ns=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Fo=a(C=>ns.test(C)||C.startsWith("[")&&C.endsWith("]"),"isIpAddress"),is=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),co=a(function(C){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1))return is.test(C);const b=C.split(".");for(const I of b)if(!co(I))return!1;return!0},"isValidHostLabel"),Uo=a(function(C){if(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1){for(const b of C.split("."))if(!Uo(b))return!1;return!0}return!(!co(C)||C.length<3||C.length>63||C!==C.toLowerCase()||Fo(C))},"isVirtualHostableS3Bucket"),rs=a(C=>{const v=C.split(":");if(v.length<6)return null;const[b,I,D,x,j,...Q]=v;return b!=="arn"||I===""||D===""||Q[0]===""?null:{partition:I,service:D,region:x,accountId:j,resourceId:Q[0].includes("/")?Q[0].split("/"):Q}},"parseArn"),os=a((C,v)=>C===v,"booleanEquals"),ss=a(C=>{const v=C.split("."),b=[];for(const I of v){const D=I.indexOf("[");if(D!==-1){if(I.indexOf("]")!==I.length-1)throw new ii(`Path: '${C}' does not end with ']'`);const x=I.slice(D+1,-1);if(Number.isNaN(parseInt(x)))throw new ii(`Invalid array index: '${x}' in path: '${C}'`);D!==0&&b.push(I.slice(0,D)),b.push(x)}else b.push(I)}return b},"getAttrPathList"),Vo=a((C,v)=>ss(v).reduce((b,I)=>{if(typeof b!="object")throw new ii(`Index '${I}' in '${v}' not found in '${JSON.stringify(C)}'`);return Array.isArray(b)?b[parseInt(I)]:b[I]},C),"getAttr"),as=a(C=>C!=null,"isSet"),gr=a(C=>!C,"not");var Jn;(function(C){C.HEADER="header",C.QUERY="query"})(Jn||(Jn={}));var Lr;(function(C){C.AAAA="AAAA",C.A="A"})(Lr||(Lr={}));var Sr;(function(C){C.HTTP="http",C.HTTPS="https"})(Sr||(Sr={}));var Nr;(function(C){C.HTTP_0_9="http/0.9",C.HTTP_1_0="http/1.0",C.TDS_8_0="tds/8.0"})(Nr||(Nr={}));const uo={[Sr.HTTP]:80,[Sr.HTTPS]:443},ds=a(C=>{const v=(()=>{try{if(C instanceof URL)return C;if(typeof C=="object"&&"hostname"in C){const{hostname:Ve,port:rt,protocol:Ze="",path:Ye="",query:yt={}}=C,Yn=new URL(`${Ze}//${Ve}${rt?`:${rt}`:""}${Ye}`);return Yn.search=Object.entries(yt).map(kd=>{let[Yd,Pg]=kd;return`${Yd}=${Pg}`}).join("&"),Yn}return new URL(C)}catch{return null}})();if(!v)return console.error(`Unable to parse ${JSON.stringify(C)} as a whatwg URL.`),null;const b=v.href,{host:I,hostname:D,pathname:x,protocol:j,search:Q}=v;if(Q)return null;const $=j.slice(0,-1);if(!Object.values(Sr).includes($))return null;const ne=Fo(D),Y=b.includes(`${I}:${uo[$]}`)||typeof C=="string"&&C.includes(`${I}:${uo[$]}`),Ie=`${I}${Y?`:${uo[$]}`:""}`;return{scheme:$,authority:Ie,path:x,normalizedPath:x.endsWith("/")?x:`${x}/`,isIp:ne}},"parseURL"),ls=a((C,v)=>C===v,"stringEquals"),cs=a((C,v,b,I)=>v>=b||C.length<b?null:I?C.substring(C.length-b,C.length-v):C.substring(v,b),"substring"),vr=a(C=>encodeURIComponent(C).replace(/[!*'()]/g,v=>`%${v.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode"),Qi=a((C,v)=>{const b=[],I={...v.endpointParams,...v.referenceRecord};let D=0;for(;D<C.length;){const x=C.indexOf("{",D);if(x===-1){b.push(C.slice(D));break}b.push(C.slice(D,x));const j=C.indexOf("}",x);if(j===-1){b.push(C.slice(x));break}C[x+1]==="{"&&C[j+1]==="}"&&(b.push(C.slice(x+1,j)),D=j+2);const Q=C.substring(x+1,j);if(Q.includes("#")){const[$,ne]=Q.split("#");b.push(Vo(I[$],ne))}else b.push(I[Q]);D=j+1}return b.join("")},"evaluateTemplate"),us=a((C,v)=>{let{ref:b}=C;return{...v.endpointParams,...v.referenceRecord}[b]},"getReferenceValue"),Br=a((C,v,b)=>{if(typeof C=="string")return Qi(C,b);if(C.fn)return Ho(C,b);if(C.ref)return us(C,b);throw new ii(`'${v}': ${String(C)} is not a string, function or reference.`)},"evaluateExpression"),Ho=a((C,v)=>{let{fn:b,argv:I}=C;const D=I.map(x=>["boolean","number"].includes(typeof x)?x:Br(x,"arg",v));return b.split(".").reduce((x,j)=>x[j],p)(...D)},"callFunction"),fs=a((C,v)=>{let{assign:b,...I}=C;var D,x;if(b&&b in v.referenceRecord)throw new ii(`'${b}' is already defined in Reference Record.`);const j=Ho(I,v);return(D=v.logger)===null||D===void 0||(x=D.debug)===null||x===void 0||x.call(D,mr,`evaluateCondition: ${Xi(I)} = ${Xi(j)}`),{result:j===""?!0:!!j,...b!=null&&{toAssign:{name:b,value:j}}}},"evaluateCondition"),fo=a(function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],v=arguments.length>1?arguments[1]:void 0;const b={};for(const x of C){const{result:j,toAssign:Q}=fs(x,{...v,referenceRecord:{...v.referenceRecord,...b}});if(!j)return{result:j};if(Q){var I,D;b[Q.name]=Q.value,(I=v.logger)===null||I===void 0||(D=I.debug)===null||D===void 0||D.call(I,mr,`assign: ${Q.name} := ${Xi(Q.value)}`)}}return{result:!0,referenceRecord:b}},"evaluateConditions"),ho=a((C,v)=>Object.entries(C).reduce((b,I)=>{let[D,x]=I;return{...b,[D]:x.map(j=>{const Q=Br(j,"Header value entry",v);if(typeof Q!="string")throw new ii(`Header '${D}' value '${Q}' is not a string`);return Q})}},{}),"getEndpointHeaders"),jo=a((C,v)=>{if(Array.isArray(C))return C.map(b=>jo(b,v));switch(typeof C){case"string":return Qi(C,v);case"object":if(C===null)throw new ii(`Unexpected endpoint property: ${C}`);return Wo(C,v);case"boolean":return C;default:throw new ii(`Unexpected endpoint property type: ${typeof C}`)}},"getEndpointProperty"),Wo=a((C,v)=>Object.entries(C).reduce((b,I)=>{let[D,x]=I;return{...b,[D]:jo(x,v)}},{}),"getEndpointProperties"),Lt=a((C,v)=>{const b=Br(C,"Endpoint URL",v);if(typeof b=="string")try{return new URL(b)}catch(I){throw console.error(`Failed to construct URL with ${b}`,I),I}throw new ii(`Endpoint URL must be a string, got ${typeof b}`)},"getEndpointUrl"),hs=a((C,v)=>{var b,I;const{conditions:D,endpoint:x}=C,{result:j,referenceRecord:Q}=fo(D,v);if(!j)return;const $={...v,referenceRecord:{...v.referenceRecord,...Q}},{url:ne,properties:Y,headers:Ie}=x;return(b=v.logger)===null||b===void 0||(I=b.debug)===null||I===void 0||I.call(b,mr,`Resolving endpoint from template: ${Xi(x)}`),{...Ie!=null&&{headers:ho(Ie,$)},...Y!=null&&{properties:Wo(Y,$)},url:Lt(ne,$)}},"evaluateEndpointRule"),Ea=a((C,v)=>{const{conditions:b,error:I}=C,{result:D,referenceRecord:x}=fo(b,v);if(D)throw new ii(Br(I,"Error",{...v,referenceRecord:{...v.referenceRecord,...x}}))},"evaluateErrorRule"),Ta=a((C,v)=>{const{conditions:b,rules:I}=C,{result:D,referenceRecord:x}=fo(b,v);if(D)return Us(I,{...v,referenceRecord:{...v.referenceRecord,...x}})},"evaluateTreeRule"),Us=a((C,v)=>{for(const b of C)if(b.type==="endpoint"){const I=hs(b,v);if(I)return I}else if(b.type==="error")Ea(b,v);else if(b.type==="tree"){const I=Ta(b,v);if(I)return I}else throw new ii(`Unknown endpoint rule: ${b}`);throw new ii("Rules evaluation failed")},"evaluateRules"),cl=a((C,v)=>{var b,I,D,x,j;const{endpointParams:Q,logger:$}=v,{parameters:ne,rules:Y}=C;(b=v.logger)===null||b===void 0||(I=b.debug)===null||I===void 0||I.call(b,`${mr} Initial EndpointParams: ${Xi(Q)}`);const Ie=Object.entries(ne).filter(Ye=>{let[,yt]=Ye;return yt.default!=null}).map(Ye=>{let[yt,Yn]=Ye;return[yt,Yn.default]});if(Ie.length>0)for(const[Ye,yt]of Ie){var Ve;Q[Ye]=(Ve=Q[Ye])!==null&&Ve!==void 0?Ve:yt}const rt=Object.entries(ne).filter(Ye=>{let[,yt]=Ye;return yt.required}).map(Ye=>{let[yt]=Ye;return yt});for(const Ye of rt)if(Q[Ye]==null)throw new ii(`Missing required parameter: '${Ye}'`);const Ze=Us(Y,{endpointParams:Q,logger:$,referenceRecord:{}});if(!((D=v.endpointParams)===null||D===void 0)&&D.Endpoint)try{const Ye=new URL(v.endpointParams.Endpoint),{protocol:yt,port:Yn}=Ye;Ze.url.protocol=yt,Ze.url.port=Yn}catch{}return(x=v.logger)===null||x===void 0||(j=x.debug)===null||j===void 0||j.call(x,`${mr} Resolved endpoint: ${Xi(Ze)}`),Ze},"resolveEndpoint"),Vs="user-agent",po="x-amz-user-agent",Hs=" ",ps=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,ms=a(C=>(v,b)=>function(){var I=Object(l.coroutine)(function*(D){var x,j;const{request:Q}=D;if(!re.isInstance(Q))return v(D);const{headers:$}=Q,ne=(b==null||(x=b.userAgent)===null||x===void 0?void 0:x.map(mo))||[],Y=(yield C.defaultUserAgentProvider()).map(mo),Ie=(C==null||(j=C.customUserAgent)===null||j===void 0?void 0:j.map(mo))||[],Ve=xo(),rt=(Ve?[Ve]:[]).concat([...Y,...ne,...Ie]).join(Hs),Ze=[...Y.filter(Ye=>Ye.startsWith("aws-sdk-")),...Ie].join(Hs);return C.runtime!=="browser"?(Ze&&($[po]=$[po]?`${$[Vs]} ${Ze}`:Ze),$[Vs]=rt):$[po]=rt,v({...D,request:Q})});return function(D){return I.apply(this,arguments)}}(),"userAgentMiddleware"),mo=a(C=>{let[v,b]=C;const I=v.indexOf("/"),D=v.substring(0,I);let x=v.substring(I+1);return D==="api"&&(x=x.toLowerCase()),[D,x,b].filter(j=>j&&j.length>0).map(j=>j==null?void 0:j.replace(ps,"_")).join("/")},"escapeUserAgent"),gs={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Ca=a(C=>({applyToStack:v=>{v.add(ms(C),gs)}}),"getUserAgentPlugin");class zo{trace(){}debug(){}info(){}warn(){}error(){}}a(zo,"NoOpLogger");const Zi=a(()=>{let C=[],v=[];const b=new Set,I=a(Y=>Y.sort((Ie,Ve)=>xr[Ve.step]-xr[Ie.step]||js[Ve.priority||"normal"]-js[Ie.priority||"normal"]),"sort"),D=a(Y=>{let Ie=!1;const Ve=a(rt=>rt.name&&rt.name===Y?(Ie=!0,b.delete(Y),!1):!0,"filterCb");return C=C.filter(Ve),v=v.filter(Ve),Ie},"removeByName"),x=a(Y=>{let Ie=!1;const Ve=a(rt=>rt.middleware===Y?(Ie=!0,rt.name&&b.delete(rt.name),!1):!0,"filterCb");return C=C.filter(Ve),v=v.filter(Ve),Ie},"removeByReference"),j=a(Y=>(C.forEach(Ie=>{Y.add(Ie.middleware,{...Ie})}),v.forEach(Ie=>{Y.addRelativeTo(Ie.middleware,{...Ie})}),Y),"cloneTo"),Q=a(Y=>{const Ie=[];return Y.before.forEach(Ve=>{Ve.before.length===0&&Ve.after.length===0?Ie.push(Ve):Ie.push(...Q(Ve))}),Ie.push(Y),Y.after.reverse().forEach(Ve=>{Ve.before.length===0&&Ve.after.length===0?Ie.push(Ve):Ie.push(...Q(Ve))}),Ie},"expandRelativeMiddlewareList"),$=a(function(){let Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const Ie=[],Ve=[],rt={};return C.forEach(Ye=>{const yt={...Ye,before:[],after:[]};yt.name&&(rt[yt.name]=yt),Ie.push(yt)}),v.forEach(Ye=>{const yt={...Ye,before:[],after:[]};yt.name&&(rt[yt.name]=yt),Ve.push(yt)}),Ve.forEach(Ye=>{if(Ye.toMiddleware){const yt=rt[Ye.toMiddleware];if(yt===void 0){if(Y)return;throw new Error(`${Ye.toMiddleware} is not found when adding ${Ye.name||"anonymous"} middleware ${Ye.relation} ${Ye.toMiddleware}`)}Ye.relation==="after"&&yt.after.push(Ye),Ye.relation==="before"&&yt.before.push(Ye)}}),I(Ie).map(Q).reduce((Ye,yt)=>(Ye.push(...yt),Ye),[])},"getMiddlewareList"),ne={add:function(Y){let Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{name:Ve,override:rt}=Ie,Ze={step:"initialize",priority:"normal",middleware:Y,...Ie};if(Ve){if(b.has(Ve)){if(!rt)throw new Error(`Duplicate middleware name '${Ve}'`);const Ye=C.findIndex(Yn=>Yn.name===Ve),yt=C[Ye];if(yt.step!==Ze.step||yt.priority!==Ze.priority)throw new Error(`"${Ve}" middleware with ${yt.priority} priority in ${yt.step} step cannot be overridden by same-name middleware with ${Ze.priority} priority in ${Ze.step} step.`);C.splice(Ye,1)}b.add(Ve)}C.push(Ze)},addRelativeTo:(Y,Ie)=>{const{name:Ve,override:rt}=Ie,Ze={middleware:Y,...Ie};if(Ve){if(b.has(Ve)){if(!rt)throw new Error(`Duplicate middleware name '${Ve}'`);const Ye=v.findIndex(Yn=>Yn.name===Ve),yt=v[Ye];if(yt.toMiddleware!==Ze.toMiddleware||yt.relation!==Ze.relation)throw new Error(`"${Ve}" middleware ${yt.relation} "${yt.toMiddleware}" middleware cannot be overridden by same-name middleware ${Ze.relation} "${Ze.toMiddleware}" middleware.`);v.splice(Ye,1)}b.add(Ve)}v.push(Ze)},clone:()=>j(Zi()),use:Y=>{Y.applyToStack(ne)},remove:Y=>typeof Y=="string"?D(Y):x(Y),removeByTag:Y=>{let Ie=!1;const Ve=a(rt=>{const{tags:Ze,name:Ye}=rt;return Ze&&Ze.includes(Y)?(Ye&&b.delete(Ye),Ie=!0,!1):!0},"filterCb");return C=C.filter(Ve),v=v.filter(Ve),Ie},concat:Y=>{const Ie=j(Zi());return Ie.use(Y),Ie},applyToStack:j,identify:()=>$(!0).map(Y=>Y.name+": "+(Y.tags||[]).join(",")),resolve:(Y,Ie)=>{for(const Ve of $().map(rt=>rt.middleware).reverse())Y=Ve(Y,Ie);return Y}};return ne},"constructStack"),xr={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},js={high:3,normal:2,low:1};class go{send(v,b,I){const D=typeof b!="function"?b:void 0,x=typeof b=="function"?b:I,j=v.resolveMiddleware(this.middlewareStack,this.config,D);if(x)j(v).then(Q=>x(null,Q.output),Q=>x(Q)).catch(()=>{});else return j(v).then(Q=>Q.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}constructor(v){this.middlewareStack=Zi(),this.config=v}}a(go,"client_Client");class wt{constructor(){this.middlewareStack=Zi()}}a(wt,"command_Command");const ft="***SensitiveInformation***",Ia=a((C,v)=>{for(const b of Object.keys(C)){const I=C[b],D=function(){var j=Object(l.coroutine)(function*(Q,$,ne){const Y=new I(Q);if(typeof $=="function")this.send(Y,$);else if(typeof ne=="function"){if(typeof $!="object")throw new Error(`Expected http options but got ${typeof $}`);this.send(Y,$||{},ne)}else return this.send(Y,$)});return a(function($,ne,Y){return j.apply(this,arguments)},"methodImpl")}(),x=(b[0].toLowerCase()+b.slice(1)).replace(/Command$/,"");v.prototype[x]=D}},"createAggregatedClient"),Fd=a(C=>{switch(C){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${C}"`)}},"parseBoolean"),Ws=a(C=>{if(C!=null){if(typeof C=="number"){if((C===0||C===1)&&Yo.warn(Jo(`Expected boolean, got ${typeof C}: ${C}`)),C===0)return!1;if(C===1)return!0}if(typeof C=="string"){const v=C.toLowerCase();if((v==="false"||v==="true")&&Yo.warn(Jo(`Expected boolean, got ${typeof C}: ${C}`)),v==="false")return!1;if(v==="true")return!0}if(typeof C=="boolean")return C;throw new TypeError(`Expected boolean, got ${typeof C}: ${C}`)}},"expectBoolean"),Ln=a(C=>{if(C!=null){if(typeof C=="string"){const v=parseFloat(C);if(!Number.isNaN(v))return String(v)!==String(C)&&Yo.warn(Jo(`Expected number but observed string: ${C}`)),v}if(typeof C=="number")return C;throw new TypeError(`Expected number, got ${typeof C}: ${C}`)}},"expectNumber"),Oa=Math.ceil(2**127*(2-2**-23)),Ss=a(C=>{const v=Ln(C);if(v!==void 0&&!Number.isNaN(v)&&v!==1/0&&v!==-1/0&&Math.abs(v)>Oa)throw new TypeError(`Expected 32-bit float, got ${C}`);return v},"expectFloat32"),Go=a(C=>{if(C!=null){if(Number.isInteger(C)&&!Number.isNaN(C))return C;throw new TypeError(`Expected integer, got ${typeof C}: ${C}`)}},"expectLong"),Ud=Go,zs=a(C=>vs(C,32),"expectInt32"),Gs=a(C=>vs(C,16),"expectShort"),Ks=a(C=>vs(C,8),"expectByte"),vs=a((C,v)=>{const b=Go(C);if(b!==void 0&&qn(b,v)!==b)throw new TypeError(`Expected ${v}-bit integer, got ${C}`);return b},"expectSizedInt"),qn=a((C,v)=>{switch(v){case 32:return Int32Array.of(C)[0];case 16:return Int16Array.of(C)[0];case 8:return Int8Array.of(C)[0]}},"castInt"),ht=a((C,v)=>{if(C==null)throw v?new TypeError(`Expected a non-null value for ${v}`):new TypeError("Expected a non-null value");return C},"expectNonNull"),en=a(C=>{if(C==null)return;if(typeof C=="object"&&!Array.isArray(C))return C;const v=Array.isArray(C)?"array":typeof C;throw new TypeError(`Expected object, got ${v}: ${C}`)},"expectObject"),xe=a(C=>{if(C!=null){if(typeof C=="string")return C;if(["boolean","number","bigint"].includes(typeof C))return Yo.warn(Jo(`Expected string, got ${typeof C}: ${C}`)),String(C);throw new TypeError(`Expected string, got ${typeof C}: ${C}`)}},"expectString"),Vd=a(C=>{if(C==null)return;const v=en(C),b=Object.entries(v).filter(I=>{let[,D]=I;return D!=null}).map(I=>{let[D]=I;return D});if(b.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(b.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${b} were not null.`);return v},"expectUnion"),$s=a(C=>Ln(typeof C=="string"?Fr(C):C),"strictParseDouble"),qi=$s,So=a(C=>Ss(typeof C=="string"?Fr(C):C),"strictParseFloat32"),vo=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Fr=a(C=>{const v=C.match(vo);if(v===null||v[0].length!==C.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(C)},"parseNumber"),Ko=a(C=>typeof C=="string"?Js(C):Ln(C),"limitedParseDouble"),Hd=Ko,er=Ko,$o=a(C=>typeof C=="string"?Js(C):Ss(C),"limitedParseFloat32"),Js=a(C=>{switch(C){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${C}`)}},"parseFloatString"),Wd=a(C=>Go(typeof C=="string"?Fr(C):C),"strictParseLong"),zd=a(C=>zs(typeof C=="string"?Fr(C):C),"strictParseInt32"),yo=a(C=>Gs(typeof C=="string"?Fr(C):C),"strictParseShort"),wa=a(C=>Ks(typeof C=="string"?Fr(C):C),"strictParseByte"),Jo=a(C=>String(new TypeError(C).stack||C).split(`
`).slice(0,5).filter(v=>!v.includes("stackTraceWarning")).join(`
`),"stackTraceWarning"),Yo={warn:console.warn},Aa=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ys=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Gd(C){const v=C.getUTCFullYear(),b=C.getUTCMonth(),I=C.getUTCDay(),D=C.getUTCDate(),x=C.getUTCHours(),j=C.getUTCMinutes(),Q=C.getUTCSeconds(),$=D<10?`0${D}`:`${D}`,ne=x<10?`0${x}`:`${x}`,Y=j<10?`0${j}`:`${j}`,Ie=Q<10?`0${Q}`:`${Q}`;return`${Aa[I]}, ${$} ${ys[b]} ${v} ${ne}:${Y}:${Ie} GMT`}a(Gd,"dateToUtcString");const Pa=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Kd=a(C=>{if(C==null)return;if(typeof C!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const v=Pa.exec(C);if(!v)throw new TypeError("Invalid RFC-3339 date-time value");const[b,I,D,x,j,Q,$,ne]=v,Y=yo(ie(I)),Ie=z(D,"month",1,12),Ve=z(x,"day",1,31);return yr(Y,Ie,Ve,{hours:j,minutes:Q,seconds:$,fractionalMilliseconds:ne})},"parseRfc3339DateTime"),Ma=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),$d=a(C=>{if(C==null)return;if(typeof C!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const v=Ma.exec(C);if(!v)throw new TypeError("Invalid RFC-3339 date-time value");const[b,I,D,x,j,Q,$,ne,Y]=v,Ie=yo(ie(I)),Ve=z(D,"month",1,12),rt=z(x,"day",1,31),Ze=yr(Ie,Ve,rt,{hours:j,minutes:Q,seconds:$,fractionalMilliseconds:ne});return Y.toUpperCase()!="Z"&&Ze.setTime(Ze.getTime()-J(Y)),Ze},"parseRfc3339DateTimeWithOffset"),bs=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Es=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Ts=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Ys=a(C=>{if(C==null)return;if(typeof C!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let v=bs.exec(C);if(v){const[b,I,D,x,j,Q,$,ne]=v;return yr(yo(ie(x)),ws(D),z(I,"day",1,31),{hours:j,minutes:Q,seconds:$,fractionalMilliseconds:ne})}if(v=Es.exec(C),v){const[b,I,D,x,j,Q,$,ne]=v;return Os(yr(Cs(x),ws(D),z(I,"day",1,31),{hours:j,minutes:Q,seconds:$,fractionalMilliseconds:ne}))}if(v=Ts.exec(C),v){const[b,I,D,x,j,Q,$,ne]=v;return yr(yo(ie(ne)),ws(I),z(D.trimLeft(),"day",1,31),{hours:x,minutes:j,seconds:Q,fractionalMilliseconds:$})}throw new TypeError("Invalid RFC-7231 date-time value")},"parseRfc7231DateTime"),Fn=a(C=>{if(C==null)return;let v;if(typeof C=="number")v=C;else if(typeof C=="string")v=$s(C);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(v)||v===1/0||v===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(v*1e3))},"parseEpochTimestamp"),yr=a((C,v,b,I)=>{const D=v-1;return B(C,D,b),new Date(Date.UTC(C,D,b,z(I.hours,"hour",0,23),z(I.minutes,"minute",0,59),z(I.seconds,"seconds",0,60),V(I.fractionalMilliseconds)))},"buildDate"),Cs=a(C=>{const v=new Date().getUTCFullYear(),b=Math.floor(v/100)*100+yo(ie(C));return b<v?b+100:b},"parseTwoDigitYear"),Is=50*365*24*60*60*1e3,Os=a(C=>C.getTime()-new Date().getTime()>Is?new Date(Date.UTC(C.getUTCFullYear()-100,C.getUTCMonth(),C.getUTCDate(),C.getUTCHours(),C.getUTCMinutes(),C.getUTCSeconds(),C.getUTCMilliseconds())):C,"adjustRfc850Year"),ws=a(C=>{const v=ys.indexOf(C);if(v<0)throw new TypeError(`Invalid month: ${C}`);return v+1},"parseMonthByShortName"),E=[31,28,31,30,31,30,31,31,30,31,30,31],B=a((C,v,b)=>{let I=E[v];if(v===1&&w(C)&&(I=29),b>I)throw new TypeError(`Invalid day for ${ys[v]} in ${C}: ${b}`)},"validateDayOfMonth"),w=a(C=>C%4===0&&(C%100!==0||C%400===0),"isLeapYear"),z=a((C,v,b,I)=>{const D=wa(ie(C));if(D<b||D>I)throw new TypeError(`${v} must be between ${b} and ${I}, inclusive`);return D},"parseDateValue"),V=a(C=>C==null?0:So("0."+C)*1e3,"parseMilliseconds"),J=a(C=>{const v=C[0];let b=1;if(v=="+")b=1;else if(v=="-")b=-1;else throw new TypeError(`Offset direction, ${v}, must be "+" or "-"`);const I=Number(C.substring(1,3)),D=Number(C.substring(4,6));return b*(I*60+D)*60*1e3},"parseOffsetToMilliseconds"),ie=a(C=>{let v=0;for(;v<C.length-1&&C.charAt(v)==="0";)v++;return v===0?C:C.slice(v)},"stripLeadingZeroes");class te extends Error{constructor(v){super(v.message),Object.setPrototypeOf(this,te.prototype),this.name=v.name,this.$fault=v.$fault,this.$metadata=v.$metadata}}a(te,"ServiceException");const be=a(function(C){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Object.entries(v).filter(I=>{let[,D]=I;return D!==void 0}).forEach(I=>{let[D,x]=I;(C[D]==null||C[D]==="")&&(C[D]=x)});const b=C.message||C.Message||"UnknownError";return C.message=b,delete C.Message,C},"decorateServiceException"),q=a(C=>{let{output:v,parsedBody:b,exceptionCtor:I,errorCode:D}=C;const x=ue(v),j=x.httpStatusCode?x.httpStatusCode+"":void 0,Q=new I({name:(b==null?void 0:b.code)||(b==null?void 0:b.Code)||D||j||"UnknownError",$fault:"client",$metadata:x});throw be(Q,b)},"throwDefaultError"),se=a(C=>v=>{let{output:b,parsedBody:I,errorCode:D}=v;q({output:b,parsedBody:I,exceptionCtor:C,errorCode:D})},"withBaseException");var at,ye;const ue=a(C=>({httpStatusCode:C.statusCode,requestId:(ye=(at=C.headers["x-amzn-requestid"])!==null&&at!==void 0?at:C.headers["x-amzn-request-id"])!==null&&ye!==void 0?ye:C.headers["x-amz-request-id"],extendedRequestId:C.headers["x-amz-id-2"],cfId:C.headers["x-amz-cf-id"]}),"deserializeMetadata"),_e=a(C=>{switch(C){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode");let zt=!1;const st=a(C=>{C&&!zt&&parseInt(C.substring(1,C.indexOf(".")))<14&&(zt=!0)},"emitWarningIfUnsupportedVersion");function Ge(C){return encodeURIComponent(C).replace(/[!'()*]/g,function(v){return"%"+v.charCodeAt(0).toString(16).toUpperCase()})}a(Ge,"extendedEncodeURIComponent");const vt=a(C=>Array.isArray(C)?C:[C],"getArrayIfSingleItem"),tt=a(C=>{const v="#text";for(const b in C)C.hasOwnProperty(b)&&C[b][v]!==void 0?C[b]=C[b][v]:typeof C[b]=="object"&&C[b]!==null&&(C[b]=tt(C[b]));return C},"getValueFromTextNode"),Se=a(function(){const C=Object.getPrototypeOf(this).constructor,v=Function.bind.apply(String,[null,...arguments]),b=new v;return Object.setPrototypeOf(b,C.prototype),b},"StringWrapper");Se.prototype=Object.create(String.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Se,String);class dt extends Se{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(v){return v instanceof dt?v:v instanceof String||typeof v=="string"?new dt(v):new dt(JSON.stringify(v))}}a(dt,"LazyJsonString");function ge(C,v,b){let I,D,x;if(typeof v>"u"&&typeof b>"u")I={},x=C;else{if(I=C,typeof v=="function")return D=v,x=b,Tt(I,D,x);x=v}for(const j of Object.keys(x)){if(!Array.isArray(x[j])){I[j]=x[j];continue}Ke(I,null,x,j)}return I}a(ge,"map");const Le=a(C=>{const v={};for(const[b,I]of Object.entries(C||{}))v[b]=[,I];return v},"convertMap"),Ee=a((C,v)=>{const b={};for(const I in v)Ke(b,C,v,I);return b},"take"),Tt=a((C,v,b)=>ge(C,Object.entries(b).reduce((I,D)=>{let[x,j]=D;return Array.isArray(j)?I[x]=j:typeof j=="function"?I[x]=[v,j()]:I[x]=[v,j],I},{})),"mapWithFilter"),Ke=a((C,v,b,I)=>{if(v!==null){let j=b[I];typeof j=="function"&&(j=[,j]);const[Q=Je,$=Ii,ne=I]=j;(typeof Q=="function"&&Q(v[ne])||typeof Q!="function"&&Q)&&(C[I]=$(v[ne]));return}let[D,x]=b[I];if(typeof x=="function"){let j;const Q=D===void 0&&(j=x())!=null,$=typeof D=="function"&&!!D(void 0)||typeof D!="function"&&!!D;Q?C[I]=j:$&&(C[I]=x())}else{const j=D===void 0&&x!=null,Q=typeof D=="function"&&!!D(x)||typeof D!="function"&&!!D;(j||Q)&&(C[I]=x)}},"applyInstruction"),Je=a(C=>C!=null,"nonNullish"),Ii=a(C=>C,"pass"),St=a((C,v,b,I,D,x)=>{if(v!=null&&v[b]!==void 0){const j=I();if(j.length<=0)throw new Error("Empty value provided for input HTTP label: "+b+".");C=C.replace(D,x?j.split("/").map(Q=>Ge(Q)).join("/"):Ge(j))}else throw new Error("No value provided for input HTTP label: "+b+".");return C},"resolve_path_resolvedPath"),Xs=a(C=>{if(C!==C)return"NaN";switch(C){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return C}},"serializeFloat"),mt=a(C=>{if(C==null)return{};if(Array.isArray(C))return C.filter(v=>v!=null);if(typeof C=="object"){const v={};for(const b of Object.keys(C))C[b]!=null&&(v[b]=mt(C[b]));return v}return C},"_json");function Ur(C,v,b){if(b<=0||!Number.isInteger(b))throw new Error("Invalid number of delimiters ("+b+") for splitEvery.");const I=C.split(v);if(b===1)return I;const D=[];let x="";for(let j=0;j<I.length;j++)x===""?x=I[j]:x+=v+I[j],(j+1)%b===0&&(D.push(x),x="");return x!==""&&D.push(x),D}a(Ur,"splitEvery");const br=a(C=>{var v,b;return{...C,useDualstackEndpoint:(v=C.useDualstackEndpoint)!==null&&v!==void 0?v:!1,useFipsEndpoint:(b=C.useFipsEndpoint)!==null&&b!==void 0?b:!1,defaultSigningName:"chime"}},"resolveClientEndpointParameters");var mf=h("M2az"),gf=h("viNG");function Sf(C){const v=[];for(let b of Object.keys(C).sort()){const I=C[b];if(b=ki(b),Array.isArray(I))for(let D=0,x=I.length;D<x;D++)v.push(`${b}=${ki(I[D])}`);else{let D=b;(I||typeof I=="string")&&(D+=`=${ki(I)}`),v.push(D)}}return v.join("&")}a(Sf,"buildQueryString");function vf(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise((v,b)=>{C&&setTimeout(()=>{const I=new Error(`Request did not complete within ${C} ms`);I.name="TimeoutError",b(I)},C)})}a(vf,"requestTimeout");class sc{destroy(){}handle(v){let{abortSignal:b}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var I=this;return Object(l.coroutine)(function*(){I.config||(I.config=yield I.configProvider);const D=I.config.requestTimeout;if(b!=null&&b.aborted){const rt=new Error("Request aborted");return rt.name="AbortError",Promise.reject(rt)}let x=v.path;if(v.query){const rt=Sf(v.query);rt&&(x+=`?${rt}`)}const{port:j,method:Q}=v,$=`${v.protocol}//${v.hostname}${j?`:${j}`:""}${x}`,Y={body:Q==="GET"||Q==="HEAD"?void 0:v.body,headers:new Headers(v.headers),method:Q};typeof AbortController<"u"&&(Y.signal=b);const Ie=new Request($,Y),Ve=[fetch(Ie).then(rt=>{const Ze=rt.headers,Ye={};for(const Yn of Ze.entries())Ye[Yn[0]]=Yn[1];return rt.body!=null?{response:new Pe({headers:Ye,statusCode:rt.status,body:rt.body})}:rt.blob().then(Yn=>({response:new Pe({headers:Ye,statusCode:rt.status,body:Yn})}))}),vf(D)];return b&&Ve.push(new Promise((rt,Ze)=>{b.onabort=()=>{const Ye=new Error("Request aborted");Ye.name="AbortError",Ze(Ye)}})),Promise.race(Ve)})()}constructor(v){typeof v=="function"?this.configProvider=v().then(b=>b||{}):(this.config=v??{},this.configProvider=Promise.resolve(this.config))}}a(sc,"fetch_http_handler_FetchHttpHandler");const Xo={},Qs=new Array(64);for(let C=0,v="A".charCodeAt(0),b="Z".charCodeAt(0);C+v<=b;C++){const I=String.fromCharCode(C+v);Xo[I]=C,Qs[C]=I}for(let C=0,v="a".charCodeAt(0),b="z".charCodeAt(0);C+v<=b;C++){const I=String.fromCharCode(C+v),D=C+26;Xo[I]=D,Qs[D]=I}for(let C=0;C<10;C++){Xo[C.toString(10)]=C+52;const v=C.toString(10),b=C+52;Xo[v]=b,Qs[b]=v}Xo["+"]=62,Qs[62]="+",Xo["/"]=63,Qs[63]="/";const Zs=6,Ra=8,yf=63,ac=a(C=>{let v=C.length/4*3;C.slice(-2)==="=="?v-=2:C.slice(-1)==="="&&v--;const b=new ArrayBuffer(v),I=new DataView(b);for(let D=0;D<C.length;D+=4){let x=0,j=0;for(let ne=D,Y=D+3;ne<=Y;ne++)if(C[ne]!=="="){if(!(C[ne]in Xo))throw new TypeError(`Invalid character ${C[ne]} in base64 string.`);x|=Xo[C[ne]]<<(Y-ne)*Zs,j+=Zs}else x>>=Zs;const Q=D/4*3;x>>=j%Ra;const $=Math.floor(j/Ra);for(let ne=0;ne<$;ne++){const Y=($-ne-1)*Ra;I.setUint8(Q+ne,(x&255<<Y)>>Y)}}return new Uint8Array(b)},"fromBase64");function bf(C){let v="";for(let b=0;b<C.length;b+=3){let I=0,D=0;for(let j=b,Q=Math.min(b+3,C.length);j<Q;j++)I|=C[j]<<(Q-j-1)*Ra,D+=Ra;const x=Math.ceil(D/Zs);I<<=x*Zs-D;for(let j=1;j<=x;j++){const Q=(x-j)*Zs;v+=Qs[(I&yf<<Q)>>Q]}v+="==".slice(0,4-x)}return v}a(bf,"toBase64");const Ef=a(C=>typeof Blob=="function"&&C instanceof Blob?Tf(C):Cf(C),"streamCollector");function Tf(C){return ul.apply(this,arguments)}a(Tf,"collectBlob");function ul(){return ul=Object(l.coroutine)(function*(C){const v=yield If(C),b=ac(v);return new Uint8Array(b)}),ul.apply(this,arguments)}a(ul,"_collectBlob");function Cf(C){return fl.apply(this,arguments)}a(Cf,"collectStream");function fl(){return fl=Object(l.coroutine)(function*(C){let v=new Uint8Array(0);const b=C.getReader();let I=!1;for(;!I;){const{done:D,value:x}=yield b.read();if(x){const j=v;v=new Uint8Array(j.length+x.length),v.set(j),v.set(x,j.length)}I=D}return v}),fl.apply(this,arguments)}a(fl,"_collectStream");function If(C){return new Promise((v,b)=>{const I=new FileReader;I.onloadend=()=>{if(I.readyState!==2)return b(new Error("Reader aborted too early"));var D;const x=(D=I.result)!==null&&D!==void 0?D:"",j=x.indexOf(","),Q=j>-1?j+1:x.length;v(x.substring(Q))},I.onabort=()=>b(new Error("Read aborted")),I.onerror=()=>b(I.error),I.readAsDataURL(C)})}a(If,"readToBase64");const Rg=a(C=>()=>{throw new Error(C)},"invalidFunction"),Of=a(C=>()=>Promise.reject(C),"invalidProvider"),wf=a(C=>{if(typeof C=="string"){let v=C.length;for(let b=v-1;b>=0;b--){const I=C.charCodeAt(b);I>127&&I<=2047?v++:I>2047&&I<=65535&&(v+=2),I>=56320&&I<=57343&&b--}return v}else{if(typeof C.byteLength=="number")return C.byteLength;if(typeof C.size=="number")return C.size}throw new Error(`Body Length computation failed for ${C}`)},"calculateBodyLength");var Af=h("M39V"),dc=h.n(Af);const Pf=a(C=>{let{serviceId:v,clientVersion:b}=C;return Object(l.coroutine)(function*(){var I,D,x,j,Q;const $=typeof window<"u"&&(!(window==null||(I=window.navigator)===null||I===void 0)&&I.userAgent)?dc.a.parse(window.navigator.userAgent):void 0;var ne,Y;const Ie=[["aws-sdk-js",b],[`os/${($==null||(D=$.os)===null||D===void 0?void 0:D.name)||"other"}`,$==null||(x=$.os)===null||x===void 0?void 0:x.version],["lang/js"],["md/browser",`${(ne=$==null||(j=$.browser)===null||j===void 0?void 0:j.name)!==null&&ne!==void 0?ne:"unknown"}_${(Y=$==null||(Q=$.browser)===null||Q===void 0?void 0:Q.version)!==null&&Y!==void 0?Y:"unknown"}`]];return v&&Ie.push([`api/${v}`,b]),Ie})},"dist_es_defaultUserAgent"),lc="required",bo="fn",Eo="argv",qs="ref",cc="isSet",Ni="tree",ea="error",ka="endpoint",hl="PartitionResult",uc={[lc]:!1,type:"String"},fc={[lc]:!0,default:!1,type:"Boolean"},hc={[qs]:"Endpoint"},pc={[bo]:"booleanEquals",[Eo]:[{[qs]:"UseFIPS"},!0]},mc={[bo]:"booleanEquals",[Eo]:[{[qs]:"UseDualStack"},!0]},Vr={},gc={[bo]:"booleanEquals",[Eo]:[!0,{[bo]:"getAttr",[Eo]:[{[qs]:hl},"supportsFIPS"]}]},Sc={[bo]:"booleanEquals",[Eo]:[!0,{[bo]:"getAttr",[Eo]:[{[qs]:hl},"supportsDualStack"]}]},vc=[pc],yc=[mc],bc=[{[qs]:"Region"}],Mf={version:"1.0",parameters:{Region:uc,UseDualStack:fc,UseFIPS:fc,Endpoint:uc},rules:[{conditions:[{[bo]:cc,[Eo]:[hc]}],type:Ni,rules:[{conditions:vc,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ea},{type:Ni,rules:[{conditions:yc,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ea},{endpoint:{url:hc,properties:Vr,headers:Vr},type:ka}]}]},{type:Ni,rules:[{conditions:[{[bo]:cc,[Eo]:bc}],type:Ni,rules:[{conditions:[{[bo]:"aws.partition",[Eo]:bc,assign:hl}],type:Ni,rules:[{conditions:[pc,mc],type:Ni,rules:[{conditions:[gc,Sc],type:Ni,rules:[{type:Ni,rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Vr,headers:Vr},type:ka}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ea}]},{conditions:vc,type:Ni,rules:[{conditions:[gc],type:Ni,rules:[{type:Ni,rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Vr,headers:Vr},type:ka}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:ea}]},{conditions:yc,type:Ni,rules:[{conditions:[Sc],type:Ni,rules:[{type:Ni,rules:[{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Vr,headers:Vr},type:ka}]}]},{error:"DualStack is enabled but this partition does not support DualStack",type:ea}]},{type:Ni,rules:[{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dnsSuffix}",properties:Vr,headers:Vr},type:ka}]}]}]},{error:"Invalid Configuration: Missing Region",type:ea}]}]},Rf=a(function(C){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return cl(Mf,{endpointParams:C,logger:v.logger})},"defaultEndpointResolver");var pl,ml,gl,Sl,vl,yl,bl,El,Tl;const kf=a(C=>({apiVersion:"2021-05-15",base64Decoder:(pl=C==null?void 0:C.base64Decoder)!==null&&pl!==void 0?pl:ac,base64Encoder:(ml=C==null?void 0:C.base64Encoder)!==null&&ml!==void 0?ml:bf,disableHostPrefix:(gl=C==null?void 0:C.disableHostPrefix)!==null&&gl!==void 0?gl:!1,endpointProvider:(Sl=C==null?void 0:C.endpointProvider)!==null&&Sl!==void 0?Sl:Rf,logger:(vl=C==null?void 0:C.logger)!==null&&vl!==void 0?vl:new zo,serviceId:(yl=C==null?void 0:C.serviceId)!==null&&yl!==void 0?yl:"Chime SDK Messaging",urlParser:(bl=C==null?void 0:C.urlParser)!==null&&bl!==void 0?bl:Dn,utf8Decoder:(El=C==null?void 0:C.utf8Decoder)!==null&&El!==void 0?El:Wi,utf8Encoder:(Tl=C==null?void 0:C.utf8Encoder)!==null&&Tl!==void 0?Tl:ar}),"getRuntimeConfig"),Df=["in-region","cross-region","mobile","standard","legacy"],_f=a(function(){let{defaultsMode:C}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Pn(Object(l.coroutine)(function*(){const v=typeof C=="function"?yield C():C;switch(v==null?void 0:v.toLowerCase()){case"auto":return Promise.resolve(Lf()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(v==null?void 0:v.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Df.join(", ")}, got ${v}`)}}))},"resolveDefaultsModeConfig"),Lf=a(()=>{var C,v;const b=typeof window<"u"&&(!(window==null||(C=window.navigator)===null||C===void 0)&&C.userAgent)?dc.a.parse(window.navigator.userAgent):void 0,I=b==null||(v=b.platform)===null||v===void 0?void 0:v.type;return I==="tablet"||I==="mobile"},"isMobileBrowser"),Nf=a(C=>{const v=_f(C),b=a(()=>v().then(_e),"defaultConfigProvider"),I=kf(C);var D,x,j,Q,$,ne,Y,Ie,Ve,rt,Ze;return{...I,...C,runtime:"browser",defaultsMode:v,bodyLengthChecker:(D=C==null?void 0:C.bodyLengthChecker)!==null&&D!==void 0?D:wf,credentialDefaultProvider:(x=C==null?void 0:C.credentialDefaultProvider)!==null&&x!==void 0?x:Ye=>()=>Promise.reject(new Error("Credential is missing")),defaultUserAgentProvider:(j=C==null?void 0:C.defaultUserAgentProvider)!==null&&j!==void 0?j:Pf({serviceId:I.serviceId,clientVersion:mf.version}),maxAttempts:(Q=C==null?void 0:C.maxAttempts)!==null&&Q!==void 0?Q:Ce,region:($=C==null?void 0:C.region)!==null&&$!==void 0?$:Of("Region is missing"),requestHandler:(ne=C==null?void 0:C.requestHandler)!==null&&ne!==void 0?ne:new sc(b),retryMode:(Y=C==null?void 0:C.retryMode)!==null&&Y!==void 0?Y:Object(l.coroutine)(function*(){return(yield b()).retryMode||De}),sha256:(Ie=C==null?void 0:C.sha256)!==null&&Ie!==void 0?Ie:gf.Sha256,streamCollector:(Ve=C==null?void 0:C.streamCollector)!==null&&Ve!==void 0?Ve:Ef,useDualstackEndpoint:(rt=C==null?void 0:C.useDualstackEndpoint)!==null&&rt!==void 0?rt:()=>Promise.resolve(i),useFipsEndpoint:(Ze=C==null?void 0:C.useFipsEndpoint)!==null&&Ze!==void 0?Ze:()=>Promise.resolve(r)}},"runtimeConfig_browser_getRuntimeConfig");class Fi extends go{destroy(){super.destroy()}constructor(v){const b=Nf(v),I=br(b),D=L(I),x=Qt(D),j=yn(x),Q=j,$=pr(Q),ne=ts($);super(ne),this.config=ne,this.middlewareStack.use(Qn(this.config)),this.middlewareStack.use(lt(this.config)),this.middlewareStack.use(ni(this.config)),this.middlewareStack.use(Wn(this.config)),this.middlewareStack.use(Ue(this.config)),this.middlewareStack.use(Si(this.config)),this.middlewareStack.use(Ca(this.config))}}a(Fi,"ChimeSDKMessagingClient_ChimeSDKMessagingClient");var Cl;(function(C){C[C.HEADER=0]="HEADER",C[C.TRAILER=1]="TRAILER"})(Cl||(Cl={}));class Bf{constructor({name:v,kind:b=Cl.HEADER,values:I=[]}){this.name=v,this.kind=b,this.values=I}add(v){this.values.push(v)}set(v){this.values=v}remove(v){this.values=this.values.filter(b=>b!==v)}toString(){return this.values.map(v=>v.includes(",")||v.includes(" ")?`"${v}"`:v).join(", ")}get(){return this.values}}a(Bf,"dist_es_Field_Field");class xf{constructor({fields:v=[],encoding:b="utf-8"}){this.entries={},v.forEach(this.setField.bind(this)),this.encoding=b}setField(v){this.entries[v.name.toLowerCase()]=v}getField(v){return this.entries[v.toLowerCase()]}removeField(v){delete this.entries[v.toLowerCase()]}getByType(v){return Object.values(this.entries).filter(b=>b.kind===v)}}a(xf,"Fields_Fields");class Mt{constructor(v){this.method=v.method||"GET",this.hostname=v.hostname||"localhost",this.port=v.port,this.query=v.query||{},this.headers=v.headers||{},this.body=v.body,this.protocol=v.protocol?v.protocol.slice(-1)!==":"?`${v.protocol}:`:v.protocol:"https:",this.path=v.path?v.path.charAt(0)!=="/"?`/${v.path}`:v.path:"/"}static isInstance(v){if(!v)return!1;const b=v;return"method"in b&&"protocol"in b&&"hostname"in b&&"path"in b&&typeof b.query=="object"&&typeof b.headers=="object"}clone(){const v=new Mt({...this,headers:{...this.headers}});return v.query&&(v.query=Ff(v.query)),v}}a(Mt,"httpRequest_HttpRequest");function Ff(C){return Object.keys(C).reduce((v,b)=>{const I=C[b];return{...v,[b]:Array.isArray(I)?[...I]:I}},{})}a(Ff,"httpRequest_cloneQuery");class Uf{constructor(v){this.statusCode=v.statusCode,this.headers=v.headers||{},this.body=v.body}static isInstance(v){if(!v)return!1;const b=v;return typeof b.statusCode=="number"&&typeof b.headers=="object"}}a(Uf,"httpResponse_HttpResponse");function Dg(C){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(C)}a(Dg,"isValidHostname_isValidHostname");class Ui extends te{constructor(v){super(v),Object.setPrototypeOf(this,Ui.prototype)}}a(Ui,"ChimeSDKMessagingServiceException_ChimeSDKMessagingServiceException");const Vf={ALL:"ALL",FILTERED:"FILTERED",NONE:"NONE"},Hf={DEFAULT:"DEFAULT",HIDDEN:"HIDDEN"},jf={AccessDenied:"AccessDenied",BadRequest:"BadRequest",Conflict:"Conflict",Forbidden:"Forbidden",NotFound:"NotFound",PhoneNumberAssociationsExist:"PhoneNumberAssociationsExist",PreconditionFailed:"PreconditionFailed",ResourceLimitExceeded:"ResourceLimitExceeded",ServiceFailure:"ServiceFailure",ServiceUnavailable:"ServiceUnavailable",Throttled:"Throttled",Throttling:"Throttling",Unauthorized:"Unauthorized",Unprocessable:"Unprocessable",VoiceConnectorGroupAssociationsExist:"VoiceConnectorGroupAssociationsExist"};class Da extends Ui{constructor(v){super({name:"BadRequestException",$fault:"client",...v}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,Da.prototype),this.Code=v.Code,this.Message=v.Message}}a(Da,"models_0_BadRequestException");class _a extends Ui{constructor(v){super({name:"ConflictException",$fault:"client",...v}),this.name="ConflictException",this.$fault="client",Object.setPrototypeOf(this,_a.prototype),this.Code=v.Code,this.Message=v.Message}}a(_a,"models_0_ConflictException");class La extends Ui{constructor(v){super({name:"ForbiddenException",$fault:"client",...v}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,La.prototype),this.Code=v.Code,this.Message=v.Message}}a(La,"models_0_ForbiddenException");class Na extends Ui{constructor(v){super({name:"NotFoundException",$fault:"client",...v}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,Na.prototype),this.Code=v.Code,this.Message=v.Message}}a(Na,"models_0_NotFoundException");class Ba extends Ui{constructor(v){super({name:"ServiceFailureException",$fault:"server",...v}),this.name="ServiceFailureException",this.$fault="server",Object.setPrototypeOf(this,Ba.prototype),this.Code=v.Code,this.Message=v.Message}}a(Ba,"models_0_ServiceFailureException");class xa extends Ui{constructor(v){super({name:"ServiceUnavailableException",$fault:"server",...v}),this.name="ServiceUnavailableException",this.$fault="server",Object.setPrototypeOf(this,xa.prototype),this.Code=v.Code,this.Message=v.Message}}a(xa,"models_0_ServiceUnavailableException");class Fa extends Ui{constructor(v){super({name:"ThrottledClientException",$fault:"client",...v}),this.name="ThrottledClientException",this.$fault="client",Object.setPrototypeOf(this,Fa.prototype),this.Code=v.Code,this.Message=v.Message}}a(Fa,"models_0_ThrottledClientException");class Ua extends Ui{constructor(v){super({name:"UnauthorizedClientException",$fault:"client",...v}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Ua.prototype),this.Code=v.Code,this.Message=v.Message}}a(Ua,"models_0_UnauthorizedClientException");class Va extends Ui{constructor(v){super({name:"ResourceLimitExceededException",$fault:"client",...v}),this.name="ResourceLimitExceededException",this.$fault="client",Object.setPrototypeOf(this,Va.prototype),this.Code=v.Code,this.Message=v.Message}}a(Va,"models_0_ResourceLimitExceededException");const Wf={CREATED_TIMESTAMP:"CREATED_TIMESTAMP",LAST_MESSAGE_TIMESTAMP:"LAST_MESSAGE_TIMESTAMP"},zf={RESTRICTED:"RESTRICTED",UNRESTRICTED:"UNRESTRICTED"},Gf={PRIVATE:"PRIVATE",PUBLIC:"PUBLIC"},Kf={ASYNC:"ASYNC"},$f={ABORT:"ABORT",CONTINUE:"CONTINUE"},Jf={DEFAULT:"DEFAULT",VOIP:"VOIP"},Yf={NON_PERSISTENT:"NON_PERSISTENT",PERSISTENT:"PERSISTENT"},Xf={DENIED:"DENIED",FAILED:"FAILED",PENDING:"PENDING",SENT:"SENT"},Qf={CONTROL:"CONTROL",STANDARD:"STANDARD"},Zf={Channel:"Channel",ChannelMessage:"ChannelMessage"},qf={ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"},eh={MEMBERS:"MEMBERS"},th={EQUALS:"EQUALS",INCLUDES:"INCLUDES"},ri=a(C=>({...C,...C.Name&&{Name:ft}}),"IdentityFilterSensitiveLog"),Ec=a(C=>({...C,...C.InvitedBy&&{InvitedBy:ri(C.InvitedBy)},...C.Members&&{Members:C.Members.map(v=>ri(v))}}),"BatchChannelMembershipsFilterSensitiveLog"),Tc=a(C=>({...C,...C.BatchChannelMemberships&&{BatchChannelMemberships:Ec(C.BatchChannelMemberships)}}),"BatchCreateChannelMembershipResponseFilterSensitiveLog"),Cc=a(C=>({...C,...C.Name&&{Name:ft},...C.Metadata&&{Metadata:ft},...C.CreatedBy&&{CreatedBy:ri(C.CreatedBy)}}),"ChannelFilterSensitiveLog"),Ic=a(C=>({...C,...C.Name&&{Name:ft},...C.Metadata&&{Metadata:ft}}),"ChannelAssociatedWithFlowSummaryFilterSensitiveLog"),Oc=a(C=>({...C,...C.Member&&{Member:ri(C.Member)},...C.CreatedBy&&{CreatedBy:ri(C.CreatedBy)}}),"ChannelBanFilterSensitiveLog"),wc=a(C=>({...C,...C.Member&&{Member:ri(C.Member)}}),"ChannelBanSummaryFilterSensitiveLog"),Ha=a(C=>({...C,...C.Name&&{Name:ft}}),"ProcessorFilterSensitiveLog"),Ac=a(C=>({...C,...C.Processors&&{Processors:C.Processors.map(v=>Ha(v))},...C.Name&&{Name:ft}}),"ChannelFlowFilterSensitiveLog"),ja=a(C=>({...C,...C.StringValues&&{StringValues:ft}}),"MessageAttributeValueFilterSensitiveLog"),Il=a(C=>({...C,...C.Title&&{Title:ft},...C.Body&&{Body:ft}}),"PushNotificationConfigurationFilterSensitiveLog"),Pc=a(C=>({...C,...C.Content&&{Content:ft},...C.Metadata&&{Metadata:ft},...C.PushNotification&&{PushNotification:Il(C.PushNotification)},...C.MessageAttributes&&{MessageAttributes:Object.entries(C.MessageAttributes).reduce((v,b)=>{let[I,D]=b;return v[I]=ja(D),v},{})},...C.ContentType&&{ContentType:ft}}),"ChannelMessageCallbackFilterSensitiveLog"),Mc=a(C=>({...C,...C.ChannelMessage&&{ChannelMessage:Pc(C.ChannelMessage)}}),"ChannelFlowCallbackRequestFilterSensitiveLog"),Rc=a(C=>({...C,...C.Name&&{Name:ft},...C.Processors&&{Processors:C.Processors.map(v=>Ha(v))}}),"ChannelFlowSummaryFilterSensitiveLog"),kc=a(C=>({...C,...C.InvitedBy&&{InvitedBy:ri(C.InvitedBy)},...C.Member&&{Member:ri(C.Member)}}),"ChannelMembershipFilterSensitiveLog"),Wa=a(C=>({...C,...C.Name&&{Name:ft},...C.Metadata&&{Metadata:ft}}),"ChannelSummaryFilterSensitiveLog"),Ol=a(C=>({...C,...C.ChannelSummary&&{ChannelSummary:Wa(C.ChannelSummary)}}),"ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog"),Dc=a(C=>({...C,...C.FilterRule&&{FilterRule:ft}}),"PushNotificationPreferencesFilterSensitiveLog"),Jd=a(C=>({...C,...C.PushNotifications&&{PushNotifications:Dc(C.PushNotifications)}}),"ChannelMembershipPreferencesFilterSensitiveLog"),_c=a(C=>({...C,...C.Member&&{Member:ri(C.Member)}}),"ChannelMembershipSummaryFilterSensitiveLog"),Lc=a(C=>({...C,...C.Content&&{Content:ft},...C.Metadata&&{Metadata:ft},...C.Sender&&{Sender:ri(C.Sender)},...C.MessageAttributes&&{MessageAttributes:Object.entries(C.MessageAttributes).reduce((v,b)=>{let[I,D]=b;return v[I]=ja(D),v},{})},...C.ContentType&&{ContentType:ft}}),"ChannelMessageFilterSensitiveLog"),Nc=a(C=>({...C,...C.Content&&{Content:ft},...C.Metadata&&{Metadata:ft},...C.Sender&&{Sender:ri(C.Sender)},...C.MessageAttributes&&{MessageAttributes:Object.entries(C.MessageAttributes).reduce((v,b)=>{let[I,D]=b;return v[I]=ja(D),v},{})},...C.ContentType&&{ContentType:ft}}),"ChannelMessageSummaryFilterSensitiveLog"),wl=a(C=>({...C,...C.ChannelSummary&&{ChannelSummary:Wa(C.ChannelSummary)}}),"ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog"),Bc=a(C=>({...C,...C.Moderator&&{Moderator:ri(C.Moderator)},...C.CreatedBy&&{CreatedBy:ri(C.CreatedBy)}}),"ChannelModeratorFilterSensitiveLog"),xc=a(C=>({...C,...C.Moderator&&{Moderator:ri(C.Moderator)}}),"ChannelModeratorSummaryFilterSensitiveLog"),za=a(C=>({...C,...C.Key&&{Key:ft},...C.Value&&{Value:ft}}),"TagFilterSensitiveLog"),Fc=a(C=>({...C,...C.Name&&{Name:ft},...C.Metadata&&{Metadata:ft},...C.ClientRequestToken&&{ClientRequestToken:ft},...C.Tags&&{Tags:C.Tags.map(v=>za(v))},...C.ChannelId&&{ChannelId:ft}}),"CreateChannelRequestFilterSensitiveLog"),Uc=a(C=>({...C,...C.Member&&{Member:ri(C.Member)}}),"CreateChannelBanResponseFilterSensitiveLog"),Vc=a(C=>({...C,...C.Processors&&{Processors:C.Processors.map(v=>Ha(v))},...C.Name&&{Name:ft},...C.Tags&&{Tags:C.Tags.map(v=>za(v))},...C.ClientRequestToken&&{ClientRequestToken:ft}}),"CreateChannelFlowRequestFilterSensitiveLog"),Hc=a(C=>({...C,...C.Member&&{Member:ri(C.Member)}}),"CreateChannelMembershipResponseFilterSensitiveLog"),jc=a(C=>({...C,...C.ChannelModerator&&{ChannelModerator:ri(C.ChannelModerator)}}),"CreateChannelModeratorResponseFilterSensitiveLog"),Wc=a(C=>({...C,...C.Channel&&{Channel:Cc(C.Channel)}}),"DescribeChannelResponseFilterSensitiveLog"),zc=a(C=>({...C,...C.ChannelBan&&{ChannelBan:Oc(C.ChannelBan)}}),"DescribeChannelBanResponseFilterSensitiveLog"),Gc=a(C=>({...C,...C.ChannelFlow&&{ChannelFlow:Ac(C.ChannelFlow)}}),"DescribeChannelFlowResponseFilterSensitiveLog"),Kc=a(C=>({...C,...C.ChannelMembership&&{ChannelMembership:kc(C.ChannelMembership)}}),"DescribeChannelMembershipResponseFilterSensitiveLog"),$c=a(C=>({...C,...C.ChannelMembership&&{ChannelMembership:Ol(C.ChannelMembership)}}),"DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog"),Jc=a(C=>({...C,...C.Channel&&{Channel:wl(C.Channel)}}),"DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog"),Yc=a(C=>({...C,...C.ChannelModerator&&{ChannelModerator:Bc(C.ChannelModerator)}}),"DescribeChannelModeratorResponseFilterSensitiveLog"),Xc=a(C=>({...C,...C.Member&&{Member:ri(C.Member)},...C.Preferences&&{Preferences:Jd(C.Preferences)}}),"GetChannelMembershipPreferencesResponseFilterSensitiveLog"),Qc=a(C=>({...C,...C.ChannelMessage&&{ChannelMessage:Lc(C.ChannelMessage)}}),"GetChannelMessageResponseFilterSensitiveLog"),Zc=a(C=>({...C,...C.NextToken&&{NextToken:ft}}),"ListChannelBansRequestFilterSensitiveLog"),qc=a(C=>({...C,...C.NextToken&&{NextToken:ft},...C.ChannelBans&&{ChannelBans:C.ChannelBans.map(v=>wc(v))}}),"ListChannelBansResponseFilterSensitiveLog"),eu=a(C=>({...C,...C.NextToken&&{NextToken:ft}}),"ListChannelFlowsRequestFilterSensitiveLog"),tu=a(C=>({...C,...C.ChannelFlows&&{ChannelFlows:C.ChannelFlows.map(v=>Rc(v))},...C.NextToken&&{NextToken:ft}}),"ListChannelFlowsResponseFilterSensitiveLog"),nu=a(C=>({...C,...C.NextToken&&{NextToken:ft}}),"ListChannelMembershipsRequestFilterSensitiveLog"),iu=a(C=>({...C,...C.ChannelMemberships&&{ChannelMemberships:C.ChannelMemberships.map(v=>_c(v))},...C.NextToken&&{NextToken:ft}}),"ListChannelMembershipsResponseFilterSensitiveLog"),ru=a(C=>({...C,...C.NextToken&&{NextToken:ft}}),"ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog"),ou=a(C=>({...C,...C.ChannelMemberships&&{ChannelMemberships:C.ChannelMemberships.map(v=>Ol(v))},...C.NextToken&&{NextToken:ft}}),"ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog"),su=a(C=>({...C,...C.NextToken&&{NextToken:ft}}),"ListChannelMessagesRequestFilterSensitiveLog"),au=a(C=>({...C,...C.NextToken&&{NextToken:ft},...C.ChannelMessages&&{ChannelMessages:C.ChannelMessages.map(v=>Nc(v))}}),"ListChannelMessagesResponseFilterSensitiveLog"),du=a(C=>({...C,...C.NextToken&&{NextToken:ft}}),"ListChannelModeratorsRequestFilterSensitiveLog"),lu=a(C=>({...C,...C.NextToken&&{NextToken:ft},...C.ChannelModerators&&{ChannelModerators:C.ChannelModerators.map(v=>xc(v))}}),"ListChannelModeratorsResponseFilterSensitiveLog"),cu=a(C=>({...C,...C.NextToken&&{NextToken:ft}}),"ListChannelsRequestFilterSensitiveLog"),uu=a(C=>({...C,...C.Channels&&{Channels:C.Channels.map(v=>Wa(v))},...C.NextToken&&{NextToken:ft}}),"ListChannelsResponseFilterSensitiveLog"),fu=a(C=>({...C,...C.NextToken&&{NextToken:ft}}),"ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog"),hu=a(C=>({...C,...C.Channels&&{Channels:C.Channels.map(v=>Ic(v))},...C.NextToken&&{NextToken:ft}}),"ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog"),pu=a(C=>({...C,...C.NextToken&&{NextToken:ft}}),"ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog"),mu=a(C=>({...C,...C.Channels&&{Channels:C.Channels.map(v=>wl(v))},...C.NextToken&&{NextToken:ft}}),"ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog"),gu=a(C=>({...C,...C.NextToken&&{NextToken:ft}}),"ListSubChannelsRequestFilterSensitiveLog"),Su=a(C=>({...C,...C.NextToken&&{NextToken:ft}}),"ListSubChannelsResponseFilterSensitiveLog"),vu=a(C=>({...C,...C.Tags&&{Tags:C.Tags.map(v=>za(v))}}),"ListTagsForResourceResponseFilterSensitiveLog"),yu=a(C=>({...C,...C.Preferences&&{Preferences:Jd(C.Preferences)}}),"PutChannelMembershipPreferencesRequestFilterSensitiveLog"),bu=a(C=>({...C,...C.Member&&{Member:ri(C.Member)},...C.Preferences&&{Preferences:Jd(C.Preferences)}}),"PutChannelMembershipPreferencesResponseFilterSensitiveLog"),Eu=a(C=>({...C,...C.NextToken&&{NextToken:ft}}),"SearchChannelsRequestFilterSensitiveLog"),Tu=a(C=>({...C,...C.Channels&&{Channels:C.Channels.map(v=>Wa(v))},...C.NextToken&&{NextToken:ft}}),"SearchChannelsResponseFilterSensitiveLog"),Cu=a(C=>({...C,...C.Content&&{Content:ft},...C.Metadata&&{Metadata:ft},...C.ClientRequestToken&&{ClientRequestToken:ft},...C.PushNotification&&{PushNotification:Il(C.PushNotification)},...C.MessageAttributes&&{MessageAttributes:Object.entries(C.MessageAttributes).reduce((v,b)=>{let[I,D]=b;return v[I]=ja(D),v},{})},...C.ContentType&&{ContentType:ft}}),"SendChannelMessageRequestFilterSensitiveLog"),Iu=a(C=>({...C,...C.Tags&&{Tags:C.Tags.map(v=>za(v))}}),"TagResourceRequestFilterSensitiveLog"),Ou=a(C=>({...C,...C.TagKeys&&{TagKeys:ft}}),"UntagResourceRequestFilterSensitiveLog"),wu=a(C=>({...C,...C.Name&&{Name:ft},...C.Metadata&&{Metadata:ft}}),"UpdateChannelRequestFilterSensitiveLog"),Au=a(C=>({...C,...C.Processors&&{Processors:C.Processors.map(v=>Ha(v))},...C.Name&&{Name:ft}}),"UpdateChannelFlowRequestFilterSensitiveLog"),Pu=a(C=>({...C,...C.Content&&{Content:ft},...C.Metadata&&{Metadata:ft},...C.ContentType&&{ContentType:ft}}),"UpdateChannelMessageRequestFilterSensitiveLog"),nh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/channel-flow`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let ne;return ne=JSON.stringify(Ee(v,{ChannelFlowArn:[]})),new Mt({protocol:D,hostname:I,port:x,method:"PUT",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_AssociateChannelFlowCommand")}(),ih=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/memberships`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const ne=ge({operation:[,"batch-create"]});let Y;return Y=JSON.stringify(Ee(v,{MemberArns:Ie=>mt(Ie),SubChannelId:[],Type:[]})),new Mt({protocol:D,hostname:I,port:x,method:"POST",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_BatchCreateChannelMembershipCommand")}(),rh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q={"content-type":"application/json"};let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const ne=ge({operation:[,"channel-flow-callback"]});let Y;return Y=JSON.stringify(Ee(v,{CallbackId:[!0,Ie=>Ie??$e()],ChannelMessage:Ie=>mt(Ie),DeleteResource:[]})),new Mt({protocol:D,hostname:I,port:x,method:"POST",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_ChannelFlowCallbackCommand")}(),oh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer}),$=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels`;let ne;return ne=JSON.stringify(Ee(v,{AppInstanceArn:[],ChannelId:[],ClientRequestToken:[!0,Y=>Y??$e()],ElasticChannelConfiguration:Y=>mt(Y),ExpirationSettings:Y=>mt(Y),MemberArns:Y=>mt(Y),Metadata:[],Mode:[],ModeratorArns:Y=>mt(Y),Name:[],Privacy:[],Tags:Y=>mt(Y)})),new Mt({protocol:D,hostname:I,port:x,method:"POST",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_CreateChannelCommand")}(),sh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/bans`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let ne;return ne=JSON.stringify(Ee(v,{MemberArn:[]})),new Mt({protocol:D,hostname:I,port:x,method:"POST",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_CreateChannelBanCommand")}(),ah=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q={"content-type":"application/json"},$=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channel-flows`;let ne;return ne=JSON.stringify(Ee(v,{AppInstanceArn:[],ClientRequestToken:[!0,Y=>Y??$e()],Name:[],Processors:Y=>mt(Y),Tags:Y=>mt(Y)})),new Mt({protocol:D,hostname:I,port:x,method:"POST",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_CreateChannelFlowCommand")}(),dh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/memberships`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let ne;return ne=JSON.stringify(Ee(v,{MemberArn:[],SubChannelId:[],Type:[]})),new Mt({protocol:D,hostname:I,port:x,method:"POST",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_CreateChannelMembershipCommand")}(),lh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/moderators`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let ne;return ne=JSON.stringify(Ee(v,{ChannelModeratorArn:[]})),new Mt({protocol:D,hostname:I,port:x,method:"POST",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_CreateChannelModeratorCommand")}(),ch=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let ne;return new Mt({protocol:D,hostname:I,port:x,method:"DELETE",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_DeleteChannelCommand")}(),uh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/bans/{MemberArn}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),$=St($,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);let ne;return new Mt({protocol:D,hostname:I,port:x,method:"DELETE",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_DeleteChannelBanCommand")}(),fh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q={};let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channel-flows/{ChannelFlowArn}`;$=St($,v,"ChannelFlowArn",()=>v.ChannelFlowArn,"{ChannelFlowArn}",!1);let ne;return new Mt({protocol:D,hostname:I,port:x,method:"DELETE",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_DeleteChannelFlowCommand")}(),hh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/memberships/{MemberArn}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),$=St($,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);const ne=ge({"sub-channel-id":[,v.SubChannelId]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"DELETE",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_DeleteChannelMembershipCommand")}(),ph=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/messages/{MessageId}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),$=St($,v,"MessageId",()=>v.MessageId,"{MessageId}",!1);const ne=ge({"sub-channel-id":[,v.SubChannelId]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"DELETE",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_DeleteChannelMessageCommand")}(),mh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/moderators/{ChannelModeratorArn}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),$=St($,v,"ChannelModeratorArn",()=>v.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let ne;return new Mt({protocol:D,hostname:I,port:x,method:"DELETE",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_DeleteChannelModeratorCommand")}(),gh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q={};let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/app-instances/{AppInstanceArn}/streaming-configurations`;$=St($,v,"AppInstanceArn",()=>v.AppInstanceArn,"{AppInstanceArn}",!1);let ne;return new Mt({protocol:D,hostname:I,port:x,method:"DELETE",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_DeleteMessagingStreamingConfigurationsCommand")}(),Sh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let ne;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_DescribeChannelCommand")}(),vh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/bans/{MemberArn}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),$=St($,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);let ne;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_DescribeChannelBanCommand")}(),yh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q={};let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channel-flows/{ChannelFlowArn}`;$=St($,v,"ChannelFlowArn",()=>v.ChannelFlowArn,"{ChannelFlowArn}",!1);let ne;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_DescribeChannelFlowCommand")}(),bh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/memberships/{MemberArn}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),$=St($,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);const ne=ge({"sub-channel-id":[,v.SubChannelId]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_DescribeChannelMembershipCommand")}(),Eh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const ne=ge({scope:[,"app-instance-user-membership"],"app-instance-user-arn":[,ht(v.AppInstanceUserArn,"AppInstanceUserArn")]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_DescribeChannelMembershipForAppInstanceUserCommand")}(),Th=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const ne=ge({scope:[,"app-instance-user-moderated-channel"],"app-instance-user-arn":[,ht(v.AppInstanceUserArn,"AppInstanceUserArn")]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_DescribeChannelModeratedByAppInstanceUserCommand")}(),Ch=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/moderators/{ChannelModeratorArn}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),$=St($,v,"ChannelModeratorArn",()=>v.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let ne;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_DescribeChannelModeratorCommand")}(),Ih=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/channel-flow/{ChannelFlowArn}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),$=St($,v,"ChannelFlowArn",()=>v.ChannelFlowArn,"{ChannelFlowArn}",!1);let ne;return new Mt({protocol:D,hostname:I,port:x,method:"DELETE",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_DisassociateChannelFlowCommand")}(),Oh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/memberships/{MemberArn}/preferences`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),$=St($,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);let ne;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_GetChannelMembershipPreferencesCommand")}(),wh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/messages/{MessageId}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),$=St($,v,"MessageId",()=>v.MessageId,"{MessageId}",!1);const ne=ge({"sub-channel-id":[,v.SubChannelId]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_GetChannelMessageCommand")}(),Ah=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/messages/{MessageId}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),$=St($,v,"MessageId",()=>v.MessageId,"{MessageId}",!1);const ne=ge({scope:[,"message-status"],"sub-channel-id":[,v.SubChannelId]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_GetChannelMessageStatusCommand")}(),Ph=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q={"content-type":"application/json"},$=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/endpoints/messaging-session`;let ne;return ne="",new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_GetMessagingSessionEndpointCommand")}(),Mh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q={};let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/app-instances/{AppInstanceArn}/streaming-configurations`;$=St($,v,"AppInstanceArn",()=>v.AppInstanceArn,"{AppInstanceArn}",!1);let ne;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_GetMessagingStreamingConfigurationsCommand")}(),Rh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/bans`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const ne=ge({"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_ListChannelBansCommand")}(),kh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q={},$=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channel-flows`,ne=ge({"app-instance-arn":[,ht(v.AppInstanceArn,"AppInstanceArn")],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_ListChannelFlowsCommand")}(),Dh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/memberships`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const ne=ge({type:[,v.Type],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken],"sub-channel-id":[,v.SubChannelId]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_ListChannelMembershipsCommand")}(),_h=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer}),$=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels`,ne=ge({scope:[,"app-instance-user-memberships"],"app-instance-user-arn":[,v.AppInstanceUserArn],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_ListChannelMembershipsForAppInstanceUserCommand")}(),Lh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/messages`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const ne=ge({"sort-order":[,v.SortOrder],"not-before":[()=>v.NotBefore!==void 0,()=>(v.NotBefore.toISOString().split(".")[0]+"Z").toString()],"not-after":[()=>v.NotAfter!==void 0,()=>(v.NotAfter.toISOString().split(".")[0]+"Z").toString()],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken],"sub-channel-id":[,v.SubChannelId]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_ListChannelMessagesCommand")}(),Nh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/moderators`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const ne=ge({"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_ListChannelModeratorsCommand")}(),Bh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer}),$=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels`,ne=ge({"app-instance-arn":[,ht(v.AppInstanceArn,"AppInstanceArn")],privacy:[,v.Privacy],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_ListChannelsCommand")}(),xh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q={},$=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels`,ne=ge({scope:[,"channel-flow-associations"],"channel-flow-arn":[,ht(v.ChannelFlowArn,"ChannelFlowArn")],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_ListChannelsAssociatedWithChannelFlowCommand")}(),Fh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer}),$=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels`,ne=ge({scope:[,"app-instance-user-moderated-channels"],"app-instance-user-arn":[,v.AppInstanceUserArn],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_ListChannelsModeratedByAppInstanceUserCommand")}(),Uh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/subchannels`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const ne=ge({"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_ListSubChannelsCommand")}(),Vh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q={},$=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/tags`,ne=ge({arn:[,ht(v.ResourceARN,"ResourceARN")]});let Y;return new Mt({protocol:D,hostname:I,port:x,method:"GET",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_ListTagsForResourceCommand")}(),Hh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/expiration-settings`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let ne;return ne=JSON.stringify(Ee(v,{ExpirationSettings:Y=>mt(Y)})),new Mt({protocol:D,hostname:I,port:x,method:"PUT",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_PutChannelExpirationSettingsCommand")}(),jh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/memberships/{MemberArn}/preferences`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),$=St($,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);let ne;return ne=JSON.stringify(Ee(v,{Preferences:Y=>mt(Y)})),new Mt({protocol:D,hostname:I,port:x,method:"PUT",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_PutChannelMembershipPreferencesCommand")}(),Wh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q={"content-type":"application/json"};let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/app-instances/{AppInstanceArn}/streaming-configurations`;$=St($,v,"AppInstanceArn",()=>v.AppInstanceArn,"{AppInstanceArn}",!1);let ne;return ne=JSON.stringify(Ee(v,{StreamingConfigurations:Y=>mt(Y)})),new Mt({protocol:D,hostname:I,port:x,method:"PUT",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_PutMessagingStreamingConfigurationsCommand")}(),zh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/messages/{MessageId}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),$=St($,v,"MessageId",()=>v.MessageId,"{MessageId}",!1);const ne=ge({operation:[,"redact"]});let Y;return Y=JSON.stringify(Ee(v,{SubChannelId:[]})),new Mt({protocol:D,hostname:I,port:x,method:"POST",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_RedactChannelMessageCommand")}(),Gh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer}),$=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels`,ne=ge({operation:[,"search"],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let Y;return Y=JSON.stringify(Ee(v,{Fields:Ie=>mt(Ie)})),new Mt({protocol:D,hostname:I,port:x,method:"POST",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_SearchChannelsCommand")}(),Kh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/messages`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let ne;return ne=JSON.stringify(Ee(v,{ClientRequestToken:[!0,Y=>Y??$e()],Content:[],ContentType:[],MessageAttributes:Y=>mt(Y),Metadata:[],Persistence:[],PushNotification:Y=>mt(Y),SubChannelId:[],Type:[]})),new Mt({protocol:D,hostname:I,port:x,method:"POST",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_SendChannelMessageCommand")}(),$h=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q={"content-type":"application/json"},$=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/tags`,ne=ge({operation:[,"tag-resource"]});let Y;return Y=JSON.stringify(Ee(v,{ResourceARN:[],Tags:Ie=>mt(Ie)})),new Mt({protocol:D,hostname:I,port:x,method:"POST",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_TagResourceCommand")}(),Jh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q={"content-type":"application/json"},$=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/tags`,ne=ge({operation:[,"untag-resource"]});let Y;return Y=JSON.stringify(Ee(v,{ResourceARN:[],TagKeys:Ie=>mt(Ie)})),new Mt({protocol:D,hostname:I,port:x,method:"POST",headers:Q,path:$,query:ne,body:Y})});return a(function(b,I){return C.apply(this,arguments)},"se_UntagResourceCommand")}(),Yh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let ne;return ne=JSON.stringify(Ee(v,{Metadata:[],Mode:[],Name:[]})),new Mt({protocol:D,hostname:I,port:x,method:"PUT",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_UpdateChannelCommand")}(),Xh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q={"content-type":"application/json"};let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channel-flows/{ChannelFlowArn}`;$=St($,v,"ChannelFlowArn",()=>v.ChannelFlowArn,"{ChannelFlowArn}",!1);let ne;return ne=JSON.stringify(Ee(v,{Name:[],Processors:Y=>mt(Y)})),new Mt({protocol:D,hostname:I,port:x,method:"PUT",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_UpdateChannelFlowCommand")}(),Qh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/messages/{MessageId}`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),$=St($,v,"MessageId",()=>v.MessageId,"{MessageId}",!1);let ne;return ne=JSON.stringify(Ee(v,{Content:[],ContentType:[],Metadata:[],SubChannelId:[]})),new Mt({protocol:D,hostname:I,port:x,method:"PUT",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_UpdateChannelMessageCommand")}(),Zh=function(){var C=Object(l.coroutine)(function*(v,b){const{hostname:I,protocol:D="https",port:x,path:j}=yield b.endpoint(),Q=ge({},ln,{"x-amz-chime-bearer":v.ChimeBearer});let $=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/readMarker`;$=St($,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let ne;return new Mt({protocol:D,hostname:I,port:x,method:"PUT",headers:Q,path:$,body:ne})});return a(function(b,I){return C.apply(this,arguments)},"se_UpdateChannelReadMarkerCommand")}(),qh=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return ep(v,b);const I=ge({$metadata:Ct(v)});return yield tr(v.body,b),I});return a(function(b,I){return C.apply(this,arguments)},"de_AssociateChannelFlowCommand")}(),ep=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Hr(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_AssociateChannelFlowCommandError")}(),tp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return np(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{BatchChannelMemberships:mt,Errors:mt});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_BatchCreateChannelMembershipCommand")}(),np=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Hr(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield As(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_BatchCreateChannelMembershipCommandError")}(),ip=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return rp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{CallbackId:xe,ChannelArn:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_ChannelFlowCallbackCommand")}(),rp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_ChannelFlowCallbackCommandError")}(),op=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return sp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_CreateChannelCommand")}(),sp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield As(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_CreateChannelCommandError")}(),ap=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return dp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe,Member:mt});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_CreateChannelBanCommand")}(),dp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield As(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_CreateChannelBanCommandError")}(),lp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return cp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelFlowArn:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_CreateChannelFlowCommand")}(),cp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield As(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_CreateChannelFlowCommandError")}(),up=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return fp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe,Member:mt,SubChannelId:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_CreateChannelMembershipCommand")}(),fp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Hr(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield As(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_CreateChannelMembershipCommandError")}(),hp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return pp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe,ChannelModerator:mt});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_CreateChannelModeratorCommand")}(),pp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield As(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_CreateChannelModeratorCommandError")}(),mp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return gp(v,b);const I=ge({$metadata:Ct(v)});return yield tr(v.body,b),I});return a(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelCommand")}(),gp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelCommandError")}(),Sp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return vp(v,b);const I=ge({$metadata:Ct(v)});return yield tr(v.body,b),I});return a(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelBanCommand")}(),vp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelBanCommandError")}(),yp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return bp(v,b);const I=ge({$metadata:Ct(v)});return yield tr(v.body,b),I});return a(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelFlowCommand")}(),bp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelFlowCommandError")}(),Ep=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return Tp(v,b);const I=ge({$metadata:Ct(v)});return yield tr(v.body,b),I});return a(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelMembershipCommand")}(),Tp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelMembershipCommandError")}(),Cp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return Ip(v,b);const I=ge({$metadata:Ct(v)});return yield tr(v.body,b),I});return a(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelMessageCommand")}(),Ip=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelMessageCommandError")}(),Op=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return wp(v,b);const I=ge({$metadata:Ct(v)});return yield tr(v.body,b),I});return a(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelModeratorCommand")}(),wp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelModeratorCommandError")}(),Ap=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return Pp(v,b);const I=ge({$metadata:Ct(v)});return yield tr(v.body,b),I});return a(function(b,I){return C.apply(this,arguments)},"de_DeleteMessagingStreamingConfigurationsCommand")}(),Pp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_DeleteMessagingStreamingConfigurationsCommandError")}(),Mp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Rp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{Channel:j=>Jm(j,b)});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelCommand")}(),Rp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelCommandError")}(),kp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Dp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelBan:j=>Ym(j,b)});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelBanCommand")}(),Dp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Hr(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelBanCommandError")}(),_p=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Lp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelFlow:j=>Xm(j,b)});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelFlowCommand")}(),Lp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelFlowCommandError")}(),Np=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Bp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelMembership:j=>Qm(j,b)});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelMembershipCommand")}(),Bp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Hr(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelMembershipCommandError")}(),xp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Fp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelMembership:j=>Mu(j,b)});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelMembershipForAppInstanceUserCommand")}(),Fp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelMembershipForAppInstanceUserCommandError")}(),Up=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Vp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{Channel:j=>Ru(j,b)});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelModeratedByAppInstanceUserCommand")}(),Vp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelModeratedByAppInstanceUserCommandError")}(),Hp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return jp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelModerator:j=>ig(j,b)});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelModeratorCommand")}(),jp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Hr(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelModeratorCommandError")}(),Wp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return zp(v,b);const I=ge({$metadata:Ct(v)});return yield tr(v.body,b),I});return a(function(b,I){return C.apply(this,arguments)},"de_DisassociateChannelFlowCommand")}(),zp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Hr(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_DisassociateChannelFlowCommandError")}(),Gp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Kp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe,Member:mt,Preferences:mt});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_GetChannelMembershipPreferencesCommand")}(),Kp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_GetChannelMembershipPreferencesCommandError")}(),$p=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Jp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelMessage:j=>qm(j,b)});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_GetChannelMessageCommand")}(),Jp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Hr(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_GetChannelMessageCommandError")}(),Yp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Xp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{Status:mt});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_GetChannelMessageStatusCommand")}(),Xp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_GetChannelMessageStatusCommandError")}(),Qp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Zp(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{Endpoint:mt});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_GetMessagingSessionEndpointCommand")}(),Zp=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_GetMessagingSessionEndpointCommandError")}(),qp=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return em(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{StreamingConfigurations:mt});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_GetMessagingStreamingConfigurationsCommand")}(),em=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Hr(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_GetMessagingStreamingConfigurationsCommandError")}(),tm=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return nm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe,ChannelBans:mt,NextToken:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelBansCommand")}(),nm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelBansCommandError")}(),im=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return rm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelFlows:mt,NextToken:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelFlowsCommand")}(),rm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelFlowsCommandError")}(),om=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return sm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe,ChannelMemberships:mt,NextToken:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelMembershipsCommand")}(),sm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelMembershipsCommandError")}(),am=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return dm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelMemberships:j=>Zm(j,b),NextToken:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelMembershipsForAppInstanceUserCommand")}(),dm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelMembershipsForAppInstanceUserCommandError")}(),lm=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return cm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe,ChannelMessages:j=>tg(j,b),NextToken:xe,SubChannelId:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelMessagesCommand")}(),cm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelMessagesCommandError")}(),um=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return fm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe,ChannelModerators:mt,NextToken:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelModeratorsCommand")}(),fm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelModeratorsCommandError")}(),hm=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return pm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{Channels:j=>ku(j,b),NextToken:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelsCommand")}(),pm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelsCommandError")}(),mm=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return gm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{Channels:mt,NextToken:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelsAssociatedWithChannelFlowCommand")}(),gm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelsAssociatedWithChannelFlowCommandError")}(),Sm=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return vm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{Channels:j=>ng(j,b),NextToken:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelsModeratedByAppInstanceUserCommand")}(),vm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_ListChannelsModeratedByAppInstanceUserCommandError")}(),ym=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return bm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe,NextToken:xe,SubChannels:mt});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_ListSubChannelsCommand")}(),bm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_ListSubChannelsCommandError")}(),Em=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Tm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{Tags:mt});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_ListTagsForResourceCommand")}(),Tm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_ListTagsForResourceCommandError")}(),Cm=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Im(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe,ExpirationSettings:mt});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_PutChannelExpirationSettingsCommand")}(),Im=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_PutChannelExpirationSettingsCommandError")}(),Om=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return wm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe,Member:mt,Preferences:mt});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_PutChannelMembershipPreferencesCommand")}(),wm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_PutChannelMembershipPreferencesCommandError")}(),Am=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Pm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{StreamingConfigurations:mt});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_PutMessagingStreamingConfigurationsCommand")}(),Pm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Hr(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_PutMessagingStreamingConfigurationsCommandError")}(),Mm=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Rm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe,MessageId:xe,SubChannelId:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_RedactChannelMessageCommand")}(),Rm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_RedactChannelMessageCommandError")}(),km=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Dm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{Channels:j=>ku(j,b),NextToken:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_SearchChannelsCommand")}(),Dm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_SearchChannelsCommandError")}(),_m=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return Lm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe,MessageId:xe,Status:mt,SubChannelId:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_SendChannelMessageCommand")}(),Lm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_SendChannelMessageCommandError")}(),Nm=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return Bm(v,b);const I=ge({$metadata:Ct(v)});return yield tr(v.body,b),I});return a(function(b,I){return C.apply(this,arguments)},"de_TagResourceCommand")}(),Bm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield As(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_TagResourceCommandError")}(),xm=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return Fm(v,b);const I=ge({$metadata:Ct(v)});return yield tr(v.body,b),I});return a(function(b,I){return C.apply(this,arguments)},"de_UntagResourceCommand")}(),Fm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_UntagResourceCommandError")}(),Um=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Vm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelCommand")}(),Vm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelCommandError")}(),Hm=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return jm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelFlowArn:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelFlowCommand")}(),jm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelFlowCommandError")}(),Wm=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return zm(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe,MessageId:xe,Status:mt,SubChannelId:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelMessageCommand")}(),zm=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelMessageCommandError")}(),Gm=function(){var C=Object(l.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Km(v,b);const I=ge({$metadata:Ct(v)}),D=ht(en(yield dn(v.body,b)),"body"),x=Ee(D,{ChannelArn:xe});return Object.assign(I,x),I});return a(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelReadMarkerCommand")}(),Km=function(){var C=Object(l.coroutine)(function*(v,b){const I={...v,body:yield Ht(v.body,b)},D=jt(v,I.body);switch(D){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Gt(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield oi(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Bt(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield xt(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Ft(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Ut(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Vt(I,b);default:const x=I.body;return Nt({output:v,parsedBody:x,errorCode:D})}});return a(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelReadMarkerCommandError")}(),Nt=se(Ui),Gt=function(){var C=Object(l.coroutine)(function*(v,b){const I=ge({}),D=v.body,x=Ee(D,{Code:xe,Message:xe});Object.assign(I,x);const j=new Da({$metadata:Ct(v),...I});return be(j,v.body)});return a(function(b,I){return C.apply(this,arguments)},"de_BadRequestExceptionRes")}(),oi=function(){var C=Object(l.coroutine)(function*(v,b){const I=ge({}),D=v.body,x=Ee(D,{Code:xe,Message:xe});Object.assign(I,x);const j=new _a({$metadata:Ct(v),...I});return be(j,v.body)});return a(function(b,I){return C.apply(this,arguments)},"de_ConflictExceptionRes")}(),Bt=function(){var C=Object(l.coroutine)(function*(v,b){const I=ge({}),D=v.body,x=Ee(D,{Code:xe,Message:xe});Object.assign(I,x);const j=new La({$metadata:Ct(v),...I});return be(j,v.body)});return a(function(b,I){return C.apply(this,arguments)},"de_ForbiddenExceptionRes")}(),Hr=function(){var C=Object(l.coroutine)(function*(v,b){const I=ge({}),D=v.body,x=Ee(D,{Code:xe,Message:xe});Object.assign(I,x);const j=new Na({$metadata:Ct(v),...I});return be(j,v.body)});return a(function(b,I){return C.apply(this,arguments)},"de_NotFoundExceptionRes")}(),As=function(){var C=Object(l.coroutine)(function*(v,b){const I=ge({}),D=v.body,x=Ee(D,{Code:xe,Message:xe});Object.assign(I,x);const j=new Va({$metadata:Ct(v),...I});return be(j,v.body)});return a(function(b,I){return C.apply(this,arguments)},"de_ResourceLimitExceededExceptionRes")}(),xt=function(){var C=Object(l.coroutine)(function*(v,b){const I=ge({}),D=v.body,x=Ee(D,{Code:xe,Message:xe});Object.assign(I,x);const j=new Ba({$metadata:Ct(v),...I});return be(j,v.body)});return a(function(b,I){return C.apply(this,arguments)},"de_ServiceFailureExceptionRes")}(),Ft=function(){var C=Object(l.coroutine)(function*(v,b){const I=ge({}),D=v.body,x=Ee(D,{Code:xe,Message:xe});Object.assign(I,x);const j=new xa({$metadata:Ct(v),...I});return be(j,v.body)});return a(function(b,I){return C.apply(this,arguments)},"de_ServiceUnavailableExceptionRes")}(),Ut=function(){var C=Object(l.coroutine)(function*(v,b){const I=ge({}),D=v.body,x=Ee(D,{Code:xe,Message:xe});Object.assign(I,x);const j=new Fa({$metadata:Ct(v),...I});return be(j,v.body)});return a(function(b,I){return C.apply(this,arguments)},"de_ThrottledClientExceptionRes")}(),Vt=function(){var C=Object(l.coroutine)(function*(v,b){const I=ge({}),D=v.body,x=Ee(D,{Code:xe,Message:xe});Object.assign(I,x);const j=new Ua({$metadata:Ct(v),...I});return be(j,v.body)});return a(function(b,I){return C.apply(this,arguments)},"de_UnauthorizedClientExceptionRes")}(),$m=a((C,v)=>Ee(C,{ReadMarkerTimestamp:b=>ht(Fn(Ln(b))),SubChannelId:xe,Type:xe}),"de_AppInstanceUserMembershipSummary"),Jm=a((C,v)=>Ee(C,{ChannelArn:xe,ChannelFlowArn:xe,CreatedBy:mt,CreatedTimestamp:b=>ht(Fn(Ln(b))),ElasticChannelConfiguration:mt,ExpirationSettings:mt,LastMessageTimestamp:b=>ht(Fn(Ln(b))),LastUpdatedTimestamp:b=>ht(Fn(Ln(b))),Metadata:xe,Mode:xe,Name:xe,Privacy:xe}),"de_Channel"),Ym=a((C,v)=>Ee(C,{ChannelArn:xe,CreatedBy:mt,CreatedTimestamp:b=>ht(Fn(Ln(b))),Member:mt}),"de_ChannelBan"),Xm=a((C,v)=>Ee(C,{ChannelFlowArn:xe,CreatedTimestamp:b=>ht(Fn(Ln(b))),LastUpdatedTimestamp:b=>ht(Fn(Ln(b))),Name:xe,Processors:mt}),"de_ChannelFlow"),Qm=a((C,v)=>Ee(C,{ChannelArn:xe,CreatedTimestamp:b=>ht(Fn(Ln(b))),InvitedBy:mt,LastUpdatedTimestamp:b=>ht(Fn(Ln(b))),Member:mt,SubChannelId:xe,Type:xe}),"de_ChannelMembership"),Mu=a((C,v)=>Ee(C,{AppInstanceUserMembershipSummary:b=>$m(b,v),ChannelSummary:b=>Al(b,v)}),"de_ChannelMembershipForAppInstanceUserSummary"),Zm=a((C,v)=>(C||[]).filter(I=>I!=null).map(I=>Mu(I,v)),"de_ChannelMembershipForAppInstanceUserSummaryList"),qm=a((C,v)=>Ee(C,{ChannelArn:xe,Content:xe,ContentType:xe,CreatedTimestamp:b=>ht(Fn(Ln(b))),LastEditedTimestamp:b=>ht(Fn(Ln(b))),LastUpdatedTimestamp:b=>ht(Fn(Ln(b))),MessageAttributes:mt,MessageId:xe,Metadata:xe,Persistence:xe,Redacted:Ws,Sender:mt,Status:mt,SubChannelId:xe,Type:xe}),"de_ChannelMessage"),eg=a((C,v)=>Ee(C,{Content:xe,ContentType:xe,CreatedTimestamp:b=>ht(Fn(Ln(b))),LastEditedTimestamp:b=>ht(Fn(Ln(b))),LastUpdatedTimestamp:b=>ht(Fn(Ln(b))),MessageAttributes:mt,MessageId:xe,Metadata:xe,Redacted:Ws,Sender:mt,Status:mt,Type:xe}),"de_ChannelMessageSummary"),tg=a((C,v)=>(C||[]).filter(I=>I!=null).map(I=>eg(I,v)),"de_ChannelMessageSummaryList"),Ru=a((C,v)=>Ee(C,{ChannelSummary:b=>Al(b,v)}),"de_ChannelModeratedByAppInstanceUserSummary"),ng=a((C,v)=>(C||[]).filter(I=>I!=null).map(I=>Ru(I,v)),"de_ChannelModeratedByAppInstanceUserSummaryList"),ig=a((C,v)=>Ee(C,{ChannelArn:xe,CreatedBy:mt,CreatedTimestamp:b=>ht(Fn(Ln(b))),Moderator:mt}),"de_ChannelModerator"),Al=a((C,v)=>Ee(C,{ChannelArn:xe,LastMessageTimestamp:b=>ht(Fn(Ln(b))),Metadata:xe,Mode:xe,Name:xe,Privacy:xe}),"de_ChannelSummary"),ku=a((C,v)=>(C||[]).filter(I=>I!=null).map(I=>Al(I,v)),"de_ChannelSummaryList");var Pl,Ml;const Ct=a(C=>({httpStatusCode:C.statusCode,requestId:(Ml=(Pl=C.headers["x-amzn-requestid"])!==null&&Pl!==void 0?Pl:C.headers["x-amzn-request-id"])!==null&&Ml!==void 0?Ml:C.headers["x-amz-request-id"],extendedRequestId:C.headers["x-amz-id-2"],cfId:C.headers["x-amz-cf-id"]}),"Aws_restJson1_deserializeMetadata"),tr=a(function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Uint8Array,v=arguments.length>1?arguments[1]:void 0;return C instanceof Uint8Array?Promise.resolve(C):v.streamCollector(C)||Promise.resolve(new Uint8Array)},"collectBody"),rg=a((C,v)=>tr(C,v).then(b=>v.utf8Encoder(b)),"collectBodyString"),ln=a(C=>C!=null&&C!==""&&(!Object.getOwnPropertyNames(C).includes("length")||C.length!=0)&&(!Object.getOwnPropertyNames(C).includes("size")||C.size!=0),"isSerializableHeaderValue"),dn=a((C,v)=>rg(C,v).then(b=>b.length?JSON.parse(b):{}),"parseBody"),Ht=function(){var C=Object(l.coroutine)(function*(v,b){const I=yield dn(v,b);var D;return I.message=(D=I.message)!==null&&D!==void 0?D:I.Message,I});return a(function(b,I){return C.apply(this,arguments)},"parseErrorBody")}(),jt=a((C,v)=>{const b=a((x,j)=>Object.keys(x).find(Q=>Q.toLowerCase()===j.toLowerCase()),"findKey"),I=a(x=>{let j=x;return typeof j=="number"&&(j=j.toString()),j.indexOf(",")>=0&&(j=j.split(",")[0]),j.indexOf(":")>=0&&(j=j.split(":")[0]),j.indexOf("#")>=0&&(j=j.split("#")[1]),j},"sanitizeErrorCode"),D=b(C.headers,"x-amzn-errortype");if(D!==void 0)return I(C.headers[D]);if(v.code!==void 0)return I(v.code);if(v.__type!==void 0)return I(v.__type)},"loadRestJsonErrorCode");class Ga extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Ga.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"AssociateChannelFlowCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return nh(v,b)}deserialize(v,b){return qh(v,b)}constructor(v){super(),this.input=v}}a(Ga,"AssociateChannelFlowCommand_AssociateChannelFlowCommand");class Ka extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Ka.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"BatchCreateChannelMembershipCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Tc},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return ih(v,b)}deserialize(v,b){return tp(v,b)}constructor(v){super(),this.input=v}}a(Ka,"BatchCreateChannelMembershipCommand_BatchCreateChannelMembershipCommand");class $a extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,$a.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"ChannelFlowCallbackCommand",inputFilterSensitiveLog:Mc,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return rh(v,b)}deserialize(v,b){return ip(v,b)}constructor(v){super(),this.input=v}}a($a,"ChannelFlowCallbackCommand_ChannelFlowCallbackCommand");class Ja extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Ja.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelBanCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Uc},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return sh(v,b)}deserialize(v,b){return ap(v,b)}constructor(v){super(),this.input=v}}a(Ja,"CreateChannelBanCommand_CreateChannelBanCommand");class Ya extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Ya.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelCommand",inputFilterSensitiveLog:Fc,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return oh(v,b)}deserialize(v,b){return op(v,b)}constructor(v){super(),this.input=v}}a(Ya,"CreateChannelCommand_CreateChannelCommand");class Xa extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Xa.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelFlowCommand",inputFilterSensitiveLog:Vc,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return ah(v,b)}deserialize(v,b){return lp(v,b)}constructor(v){super(),this.input=v}}a(Xa,"CreateChannelFlowCommand_CreateChannelFlowCommand");class Qa extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Qa.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelMembershipCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Hc},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return dh(v,b)}deserialize(v,b){return up(v,b)}constructor(v){super(),this.input=v}}a(Qa,"CreateChannelMembershipCommand_CreateChannelMembershipCommand");class Za extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Za.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelModeratorCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:jc},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return lh(v,b)}deserialize(v,b){return hp(v,b)}constructor(v){super(),this.input=v}}a(Za,"CreateChannelModeratorCommand_CreateChannelModeratorCommand");class qa extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,qa.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelBanCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return uh(v,b)}deserialize(v,b){return Sp(v,b)}constructor(v){super(),this.input=v}}a(qa,"DeleteChannelBanCommand_DeleteChannelBanCommand");class ed extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,ed.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return ch(v,b)}deserialize(v,b){return mp(v,b)}constructor(v){super(),this.input=v}}a(ed,"DeleteChannelCommand_DeleteChannelCommand");class td extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,td.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelFlowCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return fh(v,b)}deserialize(v,b){return yp(v,b)}constructor(v){super(),this.input=v}}a(td,"DeleteChannelFlowCommand_DeleteChannelFlowCommand");class nd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,nd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelMembershipCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return hh(v,b)}deserialize(v,b){return Ep(v,b)}constructor(v){super(),this.input=v}}a(nd,"DeleteChannelMembershipCommand_DeleteChannelMembershipCommand");class id extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,id.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelMessageCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return ph(v,b)}deserialize(v,b){return Cp(v,b)}constructor(v){super(),this.input=v}}a(id,"DeleteChannelMessageCommand_DeleteChannelMessageCommand");class rd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,rd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelModeratorCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return mh(v,b)}deserialize(v,b){return Op(v,b)}constructor(v){super(),this.input=v}}a(rd,"DeleteChannelModeratorCommand_DeleteChannelModeratorCommand");class od extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,od.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"DeleteMessagingStreamingConfigurationsCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return gh(v,b)}deserialize(v,b){return Ap(v,b)}constructor(v){super(),this.input=v}}a(od,"DeleteMessagingStreamingConfigurationsCommand_DeleteMessagingStreamingConfigurationsCommand");class sd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,sd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelBanCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:zc},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return vh(v,b)}deserialize(v,b){return kp(v,b)}constructor(v){super(),this.input=v}}a(sd,"DescribeChannelBanCommand_DescribeChannelBanCommand");class ad extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,ad.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Wc},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Sh(v,b)}deserialize(v,b){return Mp(v,b)}constructor(v){super(),this.input=v}}a(ad,"DescribeChannelCommand_DescribeChannelCommand");class dd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,dd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelFlowCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Gc},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return yh(v,b)}deserialize(v,b){return _p(v,b)}constructor(v){super(),this.input=v}}a(dd,"DescribeChannelFlowCommand_DescribeChannelFlowCommand");class ld extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,ld.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelMembershipCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Kc},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return bh(v,b)}deserialize(v,b){return Np(v,b)}constructor(v){super(),this.input=v}}a(ld,"DescribeChannelMembershipCommand_DescribeChannelMembershipCommand");class cd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,cd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelMembershipForAppInstanceUserCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:$c},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Eh(v,b)}deserialize(v,b){return xp(v,b)}constructor(v){super(),this.input=v}}a(cd,"DescribeChannelMembershipForAppInstanceUserCommand_DescribeChannelMembershipForAppInstanceUserCommand");class ud extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,ud.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelModeratedByAppInstanceUserCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Jc},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Th(v,b)}deserialize(v,b){return Up(v,b)}constructor(v){super(),this.input=v}}a(ud,"DescribeChannelModeratedByAppInstanceUserCommand_DescribeChannelModeratedByAppInstanceUserCommand");class fd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,fd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelModeratorCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Yc},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Ch(v,b)}deserialize(v,b){return Hp(v,b)}constructor(v){super(),this.input=v}}a(fd,"DescribeChannelModeratorCommand_DescribeChannelModeratorCommand");class hd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,hd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"DisassociateChannelFlowCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Ih(v,b)}deserialize(v,b){return Wp(v,b)}constructor(v){super(),this.input=v}}a(hd,"DisassociateChannelFlowCommand_DisassociateChannelFlowCommand");class pd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,pd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"GetChannelMembershipPreferencesCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Xc},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Oh(v,b)}deserialize(v,b){return Gp(v,b)}constructor(v){super(),this.input=v}}a(pd,"GetChannelMembershipPreferencesCommand_GetChannelMembershipPreferencesCommand");class md extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,md.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"GetChannelMessageCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Qc},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return wh(v,b)}deserialize(v,b){return $p(v,b)}constructor(v){super(),this.input=v}}a(md,"GetChannelMessageCommand_GetChannelMessageCommand");class gd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,gd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"GetChannelMessageStatusCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Ah(v,b)}deserialize(v,b){return Yp(v,b)}constructor(v){super(),this.input=v}}a(gd,"GetChannelMessageStatusCommand_GetChannelMessageStatusCommand");class Sd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Sd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"GetMessagingSessionEndpointCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Ph(v,b)}deserialize(v,b){return Qp(v,b)}constructor(v){super(),this.input=v}}a(Sd,"GetMessagingSessionEndpointCommand_GetMessagingSessionEndpointCommand");class vd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,vd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"GetMessagingStreamingConfigurationsCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Mh(v,b)}deserialize(v,b){return qp(v,b)}constructor(v){super(),this.input=v}}a(vd,"GetMessagingStreamingConfigurationsCommand_GetMessagingStreamingConfigurationsCommand");class ta extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,ta.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelBansCommand",inputFilterSensitiveLog:Zc,outputFilterSensitiveLog:qc},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Rh(v,b)}deserialize(v,b){return tm(v,b)}constructor(v){super(),this.input=v}}a(ta,"ListChannelBansCommand_ListChannelBansCommand");class na extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,na.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelFlowsCommand",inputFilterSensitiveLog:eu,outputFilterSensitiveLog:tu},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return kh(v,b)}deserialize(v,b){return im(v,b)}constructor(v){super(),this.input=v}}a(na,"ListChannelFlowsCommand_ListChannelFlowsCommand");class ia extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,ia.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelMembershipsCommand",inputFilterSensitiveLog:nu,outputFilterSensitiveLog:iu},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Dh(v,b)}deserialize(v,b){return om(v,b)}constructor(v){super(),this.input=v}}a(ia,"ListChannelMembershipsCommand_ListChannelMembershipsCommand");class ra extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,ra.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelMembershipsForAppInstanceUserCommand",inputFilterSensitiveLog:ru,outputFilterSensitiveLog:ou},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return _h(v,b)}deserialize(v,b){return am(v,b)}constructor(v){super(),this.input=v}}a(ra,"ListChannelMembershipsForAppInstanceUserCommand_ListChannelMembershipsForAppInstanceUserCommand");class oa extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,oa.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelMessagesCommand",inputFilterSensitiveLog:su,outputFilterSensitiveLog:au},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Lh(v,b)}deserialize(v,b){return lm(v,b)}constructor(v){super(),this.input=v}}a(oa,"ListChannelMessagesCommand_ListChannelMessagesCommand");class sa extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,sa.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelModeratorsCommand",inputFilterSensitiveLog:du,outputFilterSensitiveLog:lu},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Nh(v,b)}deserialize(v,b){return um(v,b)}constructor(v){super(),this.input=v}}a(sa,"ListChannelModeratorsCommand_ListChannelModeratorsCommand");class aa extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,aa.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelsAssociatedWithChannelFlowCommand",inputFilterSensitiveLog:fu,outputFilterSensitiveLog:hu},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return xh(v,b)}deserialize(v,b){return mm(v,b)}constructor(v){super(),this.input=v}}a(aa,"ListChannelsAssociatedWithChannelFlowCommand_ListChannelsAssociatedWithChannelFlowCommand");class da extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,da.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelsCommand",inputFilterSensitiveLog:cu,outputFilterSensitiveLog:uu},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Bh(v,b)}deserialize(v,b){return hm(v,b)}constructor(v){super(),this.input=v}}a(da,"ListChannelsCommand_ListChannelsCommand");class la extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,la.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelsModeratedByAppInstanceUserCommand",inputFilterSensitiveLog:pu,outputFilterSensitiveLog:mu},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Fh(v,b)}deserialize(v,b){return Sm(v,b)}constructor(v){super(),this.input=v}}a(la,"ListChannelsModeratedByAppInstanceUserCommand_ListChannelsModeratedByAppInstanceUserCommand");class ca extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,ca.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"ListSubChannelsCommand",inputFilterSensitiveLog:gu,outputFilterSensitiveLog:Su},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Uh(v,b)}deserialize(v,b){return ym(v,b)}constructor(v){super(),this.input=v}}a(ca,"ListSubChannelsCommand_ListSubChannelsCommand");class yd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,yd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"ListTagsForResourceCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:vu},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Vh(v,b)}deserialize(v,b){return Em(v,b)}constructor(v){super(),this.input=v}}a(yd,"ListTagsForResourceCommand_ListTagsForResourceCommand");class bd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,bd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"PutChannelExpirationSettingsCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Hh(v,b)}deserialize(v,b){return Cm(v,b)}constructor(v){super(),this.input=v}}a(bd,"PutChannelExpirationSettingsCommand_PutChannelExpirationSettingsCommand");class Ed extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Ed.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"PutChannelMembershipPreferencesCommand",inputFilterSensitiveLog:yu,outputFilterSensitiveLog:bu},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return jh(v,b)}deserialize(v,b){return Om(v,b)}constructor(v){super(),this.input=v}}a(Ed,"PutChannelMembershipPreferencesCommand_PutChannelMembershipPreferencesCommand");class Td extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Td.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"PutMessagingStreamingConfigurationsCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Wh(v,b)}deserialize(v,b){return Am(v,b)}constructor(v){super(),this.input=v}}a(Td,"PutMessagingStreamingConfigurationsCommand_PutMessagingStreamingConfigurationsCommand");class Cd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Cd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"RedactChannelMessageCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return zh(v,b)}deserialize(v,b){return Mm(v,b)}constructor(v){super(),this.input=v}}a(Cd,"RedactChannelMessageCommand_RedactChannelMessageCommand");class ua extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,ua.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"SearchChannelsCommand",inputFilterSensitiveLog:Eu,outputFilterSensitiveLog:Tu},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Gh(v,b)}deserialize(v,b){return km(v,b)}constructor(v){super(),this.input=v}}a(ua,"SearchChannelsCommand_SearchChannelsCommand");class Id extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Id.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"SendChannelMessageCommand",inputFilterSensitiveLog:Cu,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Kh(v,b)}deserialize(v,b){return _m(v,b)}constructor(v){super(),this.input=v}}a(Id,"SendChannelMessageCommand_SendChannelMessageCommand");class Od extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Od.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"TagResourceCommand",inputFilterSensitiveLog:Iu,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return $h(v,b)}deserialize(v,b){return Nm(v,b)}constructor(v){super(),this.input=v}}a(Od,"TagResourceCommand_TagResourceCommand");class wd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,wd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"UntagResourceCommand",inputFilterSensitiveLog:Ou,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Jh(v,b)}deserialize(v,b){return xm(v,b)}constructor(v){super(),this.input=v}}a(wd,"UntagResourceCommand_UntagResourceCommand");class Ad extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Ad.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelCommand",inputFilterSensitiveLog:wu,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Yh(v,b)}deserialize(v,b){return Um(v,b)}constructor(v){super(),this.input=v}}a(Ad,"UpdateChannelCommand_UpdateChannelCommand");class Pd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Pd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelFlowCommand",inputFilterSensitiveLog:Au,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Xh(v,b)}deserialize(v,b){return Hm(v,b)}constructor(v){super(),this.input=v}}a(Pd,"UpdateChannelFlowCommand_UpdateChannelFlowCommand");class Md extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Md.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelMessageCommand",inputFilterSensitiveLog:Pu,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Qh(v,b)}deserialize(v,b){return Wm(v,b)}constructor(v){super(),this.input=v}}a(Md,"UpdateChannelMessageCommand_UpdateChannelMessageCommand");class Rd extends wt{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Fe(b,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(b,Rd.getEndpointParameterInstructions()));const D=v.concat(this.middlewareStack),{logger:x}=b,$={logger:x,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelReadMarkerCommand",inputFilterSensitiveLog:Y=>Y,outputFilterSensitiveLog:Y=>Y},{requestHandler:ne}=b;return D.resolve(Y=>ne.handle(Y.request,I||{}),$)}serialize(v,b){return Zh(v,b)}deserialize(v,b){return Gm(v,b)}constructor(v){super(),this.input=v}}a(Rd,"UpdateChannelReadMarkerCommand_UpdateChannelReadMarkerCommand");const og={AssociateChannelFlowCommand:Ga,BatchCreateChannelMembershipCommand:Ka,ChannelFlowCallbackCommand:$a,CreateChannelCommand:Ya,CreateChannelBanCommand:Ja,CreateChannelFlowCommand:Xa,CreateChannelMembershipCommand:Qa,CreateChannelModeratorCommand:Za,DeleteChannelCommand:ed,DeleteChannelBanCommand:qa,DeleteChannelFlowCommand:td,DeleteChannelMembershipCommand:nd,DeleteChannelMessageCommand:id,DeleteChannelModeratorCommand:rd,DeleteMessagingStreamingConfigurationsCommand:od,DescribeChannelCommand:ad,DescribeChannelBanCommand:sd,DescribeChannelFlowCommand:dd,DescribeChannelMembershipCommand:ld,DescribeChannelMembershipForAppInstanceUserCommand:cd,DescribeChannelModeratedByAppInstanceUserCommand:ud,DescribeChannelModeratorCommand:fd,DisassociateChannelFlowCommand:hd,GetChannelMembershipPreferencesCommand:pd,GetChannelMessageCommand:md,GetChannelMessageStatusCommand:gd,GetMessagingSessionEndpointCommand:Sd,GetMessagingStreamingConfigurationsCommand:vd,ListChannelBansCommand:ta,ListChannelFlowsCommand:na,ListChannelMembershipsCommand:ia,ListChannelMembershipsForAppInstanceUserCommand:ra,ListChannelMessagesCommand:oa,ListChannelModeratorsCommand:sa,ListChannelsCommand:da,ListChannelsAssociatedWithChannelFlowCommand:aa,ListChannelsModeratedByAppInstanceUserCommand:la,ListSubChannelsCommand:ca,ListTagsForResourceCommand:yd,PutChannelExpirationSettingsCommand:bd,PutChannelMembershipPreferencesCommand:Ed,PutMessagingStreamingConfigurationsCommand:Td,RedactChannelMessageCommand:Cd,SearchChannelsCommand:ua,SendChannelMessageCommand:Id,TagResourceCommand:Od,UntagResourceCommand:wd,UpdateChannelCommand:Ad,UpdateChannelFlowCommand:Pd,UpdateChannelMessageCommand:Md,UpdateChannelReadMarkerCommand:Rd};class Rl extends Fi{}a(Rl,"ChimeSDKMessaging_ChimeSDKMessaging"),Ia(og,Rl);const sg=function(){var C=Object(l.coroutine)(function*(v,b){for(var I=arguments.length,D=new Array(I>2?I-2:0),x=2;x<I;x++)D[x-2]=arguments[x];return yield v.send(new ta(b),...D)});return a(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function ag(C,v){return kl.apply(this,arguments)}a(ag,"paginateListChannelBans");function kl(){return kl=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),D=2;D<b;D++)I[D-2]=arguments[D];let x=C.startingToken||void 0,j=!0,Q;for(;j;){if(v.NextToken=x,v.MaxResults=C.pageSize,C.client instanceof Fi)Q=yield _awaitAsyncGenerator(sg(C.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Q;const $=x;x=Q.NextToken,j=!!(x&&(!C.stopOnSameToken||x!==$))}}),kl.apply(this,arguments)}a(kl,"_paginateListChannelBans");const dg=function(){var C=Object(l.coroutine)(function*(v,b){for(var I=arguments.length,D=new Array(I>2?I-2:0),x=2;x<I;x++)D[x-2]=arguments[x];return yield v.send(new na(b),...D)});return a(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function lg(C,v){return Dl.apply(this,arguments)}a(lg,"paginateListChannelFlows");function Dl(){return Dl=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),D=2;D<b;D++)I[D-2]=arguments[D];let x=C.startingToken||void 0,j=!0,Q;for(;j;){if(v.NextToken=x,v.MaxResults=C.pageSize,C.client instanceof Fi)Q=yield _awaitAsyncGenerator(dg(C.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Q;const $=x;x=Q.NextToken,j=!!(x&&(!C.stopOnSameToken||x!==$))}}),Dl.apply(this,arguments)}a(Dl,"_paginateListChannelFlows");const cg=function(){var C=Object(l.coroutine)(function*(v,b){for(var I=arguments.length,D=new Array(I>2?I-2:0),x=2;x<I;x++)D[x-2]=arguments[x];return yield v.send(new ra(b),...D)});return a(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function ug(C,v){return _l.apply(this,arguments)}a(ug,"paginateListChannelMembershipsForAppInstanceUser");function _l(){return _l=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),D=2;D<b;D++)I[D-2]=arguments[D];let x=C.startingToken||void 0,j=!0,Q;for(;j;){if(v.NextToken=x,v.MaxResults=C.pageSize,C.client instanceof Fi)Q=yield _awaitAsyncGenerator(cg(C.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Q;const $=x;x=Q.NextToken,j=!!(x&&(!C.stopOnSameToken||x!==$))}}),_l.apply(this,arguments)}a(_l,"_paginateListChannelMembershipsForAppInstanceUser");const fg=function(){var C=Object(l.coroutine)(function*(v,b){for(var I=arguments.length,D=new Array(I>2?I-2:0),x=2;x<I;x++)D[x-2]=arguments[x];return yield v.send(new ia(b),...D)});return a(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function hg(C,v){return Ll.apply(this,arguments)}a(hg,"paginateListChannelMemberships");function Ll(){return Ll=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),D=2;D<b;D++)I[D-2]=arguments[D];let x=C.startingToken||void 0,j=!0,Q;for(;j;){if(v.NextToken=x,v.MaxResults=C.pageSize,C.client instanceof Fi)Q=yield _awaitAsyncGenerator(fg(C.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Q;const $=x;x=Q.NextToken,j=!!(x&&(!C.stopOnSameToken||x!==$))}}),Ll.apply(this,arguments)}a(Ll,"_paginateListChannelMemberships");const pg=function(){var C=Object(l.coroutine)(function*(v,b){for(var I=arguments.length,D=new Array(I>2?I-2:0),x=2;x<I;x++)D[x-2]=arguments[x];return yield v.send(new oa(b),...D)});return a(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function mg(C,v){return Nl.apply(this,arguments)}a(mg,"paginateListChannelMessages");function Nl(){return Nl=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),D=2;D<b;D++)I[D-2]=arguments[D];let x=C.startingToken||void 0,j=!0,Q;for(;j;){if(v.NextToken=x,v.MaxResults=C.pageSize,C.client instanceof Fi)Q=yield _awaitAsyncGenerator(pg(C.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Q;const $=x;x=Q.NextToken,j=!!(x&&(!C.stopOnSameToken||x!==$))}}),Nl.apply(this,arguments)}a(Nl,"_paginateListChannelMessages");const gg=function(){var C=Object(l.coroutine)(function*(v,b){for(var I=arguments.length,D=new Array(I>2?I-2:0),x=2;x<I;x++)D[x-2]=arguments[x];return yield v.send(new sa(b),...D)});return a(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function Sg(C,v){return Bl.apply(this,arguments)}a(Sg,"paginateListChannelModerators");function Bl(){return Bl=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),D=2;D<b;D++)I[D-2]=arguments[D];let x=C.startingToken||void 0,j=!0,Q;for(;j;){if(v.NextToken=x,v.MaxResults=C.pageSize,C.client instanceof Fi)Q=yield _awaitAsyncGenerator(gg(C.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Q;const $=x;x=Q.NextToken,j=!!(x&&(!C.stopOnSameToken||x!==$))}}),Bl.apply(this,arguments)}a(Bl,"_paginateListChannelModerators");const vg=function(){var C=Object(l.coroutine)(function*(v,b){for(var I=arguments.length,D=new Array(I>2?I-2:0),x=2;x<I;x++)D[x-2]=arguments[x];return yield v.send(new aa(b),...D)});return a(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function yg(C,v){return xl.apply(this,arguments)}a(yg,"paginateListChannelsAssociatedWithChannelFlow");function xl(){return xl=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),D=2;D<b;D++)I[D-2]=arguments[D];let x=C.startingToken||void 0,j=!0,Q;for(;j;){if(v.NextToken=x,v.MaxResults=C.pageSize,C.client instanceof Fi)Q=yield _awaitAsyncGenerator(vg(C.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Q;const $=x;x=Q.NextToken,j=!!(x&&(!C.stopOnSameToken||x!==$))}}),xl.apply(this,arguments)}a(xl,"_paginateListChannelsAssociatedWithChannelFlow");const bg=function(){var C=Object(l.coroutine)(function*(v,b){for(var I=arguments.length,D=new Array(I>2?I-2:0),x=2;x<I;x++)D[x-2]=arguments[x];return yield v.send(new la(b),...D)});return a(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function Eg(C,v){return Fl.apply(this,arguments)}a(Eg,"paginateListChannelsModeratedByAppInstanceUser");function Fl(){return Fl=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),D=2;D<b;D++)I[D-2]=arguments[D];let x=C.startingToken||void 0,j=!0,Q;for(;j;){if(v.NextToken=x,v.MaxResults=C.pageSize,C.client instanceof Fi)Q=yield _awaitAsyncGenerator(bg(C.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Q;const $=x;x=Q.NextToken,j=!!(x&&(!C.stopOnSameToken||x!==$))}}),Fl.apply(this,arguments)}a(Fl,"_paginateListChannelsModeratedByAppInstanceUser");const Tg=function(){var C=Object(l.coroutine)(function*(v,b){for(var I=arguments.length,D=new Array(I>2?I-2:0),x=2;x<I;x++)D[x-2]=arguments[x];return yield v.send(new da(b),...D)});return a(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function Cg(C,v){return Ul.apply(this,arguments)}a(Cg,"paginateListChannels");function Ul(){return Ul=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),D=2;D<b;D++)I[D-2]=arguments[D];let x=C.startingToken||void 0,j=!0,Q;for(;j;){if(v.NextToken=x,v.MaxResults=C.pageSize,C.client instanceof Fi)Q=yield _awaitAsyncGenerator(Tg(C.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Q;const $=x;x=Q.NextToken,j=!!(x&&(!C.stopOnSameToken||x!==$))}}),Ul.apply(this,arguments)}a(Ul,"_paginateListChannels");const Ig=function(){var C=Object(l.coroutine)(function*(v,b){for(var I=arguments.length,D=new Array(I>2?I-2:0),x=2;x<I;x++)D[x-2]=arguments[x];return yield v.send(new ca(b),...D)});return a(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function Og(C,v){return Vl.apply(this,arguments)}a(Og,"paginateListSubChannels");function Vl(){return Vl=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),D=2;D<b;D++)I[D-2]=arguments[D];let x=C.startingToken||void 0,j=!0,Q;for(;j;){if(v.NextToken=x,v.MaxResults=C.pageSize,C.client instanceof Fi)Q=yield _awaitAsyncGenerator(Ig(C.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Q;const $=x;x=Q.NextToken,j=!!(x&&(!C.stopOnSameToken||x!==$))}}),Vl.apply(this,arguments)}a(Vl,"_paginateListSubChannels");const wg=function(){var C=Object(l.coroutine)(function*(v,b){for(var I=arguments.length,D=new Array(I>2?I-2:0),x=2;x<I;x++)D[x-2]=arguments[x];return yield v.send(new ua(b),...D)});return a(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function Ag(C,v){return Hl.apply(this,arguments)}a(Ag,"paginateSearchChannels");function Hl(){return Hl=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),D=2;D<b;D++)I[D-2]=arguments[D];let x=C.startingToken||void 0,j=!0,Q;for(;j;){if(v.NextToken=x,v.MaxResults=C.pageSize,C.client instanceof Fi)Q=yield _awaitAsyncGenerator(wg(C.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Q;const $=x;x=Q.NextToken,j=!!(x&&(!C.stopOnSameToken||x!==$))}}),Hl.apply(this,arguments)}a(Hl,"_paginateSearchChannels")},Zkgh:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class ec{add(u){this.ids.add(u)}array(){return Array.from(this.ids.values()).sort((m,s)=>m-s)}contain(u){return this.ids.has(u)}forEach(u){this.ids.forEach(u)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(u){if(!u)return this.ids.size===0;const m=this.array(),s=u.array();if(m.length!==s.length)return!1;for(let o=0;o<m.length;o++)if(m[o]!==s[o])return!1;return!0}clone(){return new ec(this.array())}remove(u){this.ids.delete(u)}toJSON(){return this.array()}truncate(u){const m=this.array();return new ec(m.splice(0,u))}constructor(u){this.ids=new Set(u)}},"DefaultVideoStreamIdSet");d.default=g},ZnGd:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("mlaT")),u=g(h("F7zz"));let m=a(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const o of this.dependencies)o.cancel();this.logger.info(`Canceling ${this.name()}`),u.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&u.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>p.default.INFO||!this.dependencies)return;const o=this.dependencies.filter(i=>i).map(i=>i.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${o}`)}run(){if(this.promise)return this.promise;const o=this.dependencies?Promise.all(this.dependencies.map(i=>i==null?void 0:i.run())):Promise.resolve();return this.logDependencies(),this.ongoing=o.then(()=>this.task.run()),this.promise=new Promise((i,e)=>{this.cancelPromise=e,this.ongoing.then(i).catch(e)})}setParent(o){this.task.setParent(o)}constructor(o,i,e){this.logger=o,this.task=i,this.dependencies=e,this.canceled=!1}},"OnceTask");d.default=m},ZsEg:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(_,P,L,A){function M(k){return k instanceof L?k:new L(function(G){G(k)})}return a(M,"adopt"),new(L||(L=Promise))(function(k,G){function K(oe){try{X(A.next(oe))}catch(le){G(le)}}a(K,"fulfilled");function H(oe){try{X(A.throw(oe))}catch(le){G(le)}}a(H,"rejected");function X(oe){oe.done?k(oe.value):M(oe.value).then(K,H)}a(X,"step"),X((A=A.apply(_,P||[])).next())})},p=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("U9CR")),m=p(h("Gs2/")),s=p(h("F7zz")),o=p(h("FMuk")),i=h("Aplu"),e=p(h("7TH8")),t=p(h("Z/hr")),n=h("6k+I"),r=p(h("6DYs")),c=p(h("KJDN")),f=p(h("QUzi")),S=p(h("u3ud")),l=p(h("wJ81")),y=p(h("wkYg")),T=p(h("sf8V")),O=p(h("my46")),R=h("0OOd");let F=a(class En{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var P;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(P=this.mediaDeviceWrapper)===null||P===void 0||P.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var P;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(P=this.mediaDeviceWrapper)===null||P===void 0||P.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return g(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return g(this,void 0,void 0,function*(){const L=yield this.listDevicesOfKind("audioinput",P);return this.trace("listAudioInputDevices",P,L),L})}listVideoInputDevices(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return g(this,void 0,void 0,function*(){const L=yield this.listDevicesOfKind("videoinput",P);return this.trace("listVideoInputDevices",P,L),L})}listAudioOutputDevices(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return g(this,void 0,void 0,function*(){const L=yield this.listDevicesOfKind("audiooutput",P);return this.trace("listAudioOutputDevices",P,L),L})}pushAudioMeetingStateForPermissions(P){var L;(L=this.eventController)===null||L===void 0||L.publishEvent(P===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(P){var L;(L=this.eventController)===null||L===void 0||L.publishEvent(P===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(P){return g(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(P))})}startAudioInputTask(P){var L;return g(this,void 0,void 0,function*(){if(P===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return n.isAudioTransformDevice(P)?(this.logger.info(`Choosing transform input device ${P}`),yield this.chooseAudioTransformInputDevice(P)):(this.logger.info(`Choosing intrinsic audio input device ${P}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",P)),this.trace("startAudioInputDevice",P,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(L=this.transform)===null||L===void 0?void 0:L.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(A){throw A}})}stopAudioInput(){return g(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return g(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(P){var L;return g(this,void 0,void 0,function*(){if(((L=this.transform)===null||L===void 0?void 0:L.device)===P)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const A=En.getAudioContext();if(!(A instanceof OfflineAudioContext))switch(A.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield A.resume()}let M;try{M=yield P.createAudioNode(A)}catch(G){throw this.logger.error(`Unable to create transform device node: ${G}.`),G}const k=yield P.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",k),this.logger.debug(`Got inner stream: ${k}.`),this.setTransform(P,M)})}chooseVideoTransformInputDevice(P){var L;return g(this,void 0,void 0,function*(){if(this.eventController&&P instanceof e.default&&P.passEventControllerToProcessors(this.eventController),P===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const A=this.chosenVideoTransformDevice;A&&this.logger.info("Switched from previous VideoTransformDevice");const M=!!A,k=yield P.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((L=this.activeDevices.video)===null||L===void 0?void 0:L.stream,k)){this.logger.info("video transform device needs new intrinsic device"),M&&A.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=P,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",k),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=P,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield P.transformStream(this.activeDevices.video.stream)})}startVideoInput(P){return g(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(P))})}startVideoInputTask(P){return g(this,void 0,void 0,function*(){if(!P){this.logger.error("Invalid video input device");return}try{return R.isVideoTransformDevice(P)?(this.logger.info(`Choosing video transform device ${P}`),yield this.chooseVideoTransformInputDevice(P),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",P),this.trace("startVideoInputDevice",P),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(L){throw L}})}stopVideoInput(){return g(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return g(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(P){return g(this,void 0,void 0,function*(){this.audioOutputDeviceId=P,this.watchForDeviceChangesIfNecessary();const L=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(L),this.trace("chooseAudioOutput",P,null)})}addDeviceChangeObserver(P){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(P),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(P){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(P),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var P,L;if(!this.activeDevices.audio)return null;const A=(L=(P=this.transform)===null||P===void 0?void 0:P.nodes)===null||L===void 0?void 0:L.end;if(A){const M=A.context.createAnalyser();return M.removeOriginalInputs=()=>{try{A.disconnect(M)}catch{}},A.connect(M),M}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(P){const L=En.getAudioContext(),A=L.createAnalyser(),M=L.createMediaStreamSource(P);return M.connect(A),this.trace("createAnalyserNodeForAudioInput"),A.removeOriginalInputs=()=>{try{M.disconnect(A)}catch{}},A}startVideoPreviewForVideoInput(P){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",P.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,P,!0),this.trace("startVideoPreviewForVideoInput",P.id)}stopVideoPreviewForVideoInput(P){t.default.disconnectVideoStreamFromVideoElement(P,!1),this.trace("stopVideoPreviewForVideoInput",P.id)}setDeviceLabelTrigger(P){if(this.deviceInfoCache){for(const L of this.deviceInfoCache)if(!L.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=P,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(P){let L=null;return this.useWebAudio?(L=En.getAudioContext().createMediaStreamSource(P),L.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",P.id),L}chooseVideoInputQuality(P,L,A){const M=this.browserBehavior.requiresResolutionAlignment(P,L);this.videoInputQualitySettings=new O.default(M[0],M[1],A)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return g(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return g(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(P){return g(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(P){const L=this.activeDevices[P];if(!L)return;const A=L.endedCallback,M=L.trackMuteCallback,k=L.trackUnmuteCallback;for(const G of L.stream.getTracks())G.stop(),A&&G.removeEventListener("ended",A),M&&G.removeEventListener("mute",M),k&&G.removeEventListener("unmute",k),delete L.endedCallback,delete L.trackMuteCallback,delete L.trackUnmuteCallback,delete this.activeDevices[P]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(P){var L;let A=this.activeDevices.audio;if(this.useWebAudio&&(A=this.getMediaStreamDestinationNode()),!!A){for(const M of A.stream.getTracks())M.enabled!==P&&(M.enabled=P);this.muted!==!P&&(this.muted=!P,(L=this.transform)===null||L===void 0||L.device.mute(this.muted))}}static getIntrinsicDeviceId(P){if(!P)return;if(typeof P=="string")return P;if(P.id)return P.id;const A=P.deviceId;if(!A)return;if(typeof A=="string"||Array.isArray(A))return A;const M=A;if(typeof M.exact=="string"||Array.isArray(M.exact))return M.exact}static createEmptyAudioDevice(){return En.synthesizeAudioDevice(0)}static synthesizeAudioDevice(P){const L=En.getAudioContext(),A=L.createMediaStreamDestination();if(P){const M=L.createGain();M.gain.value=.1,M.connect(A);const k=L.createOscillator();k.frequency.value=P,k.connect(M),k.start()}else{const M=L.createBufferSource();try{M.buffer=L.createBuffer(1,L.sampleRate*5,L.sampleRate)}catch(k){if(k&&k.name==="NotSupportedError")M.buffer=L.createBuffer(1,En.defaultSampleRate*5,En.defaultSampleRate);else throw k}M.buffer.getChannelData(0)[0]=3e-4,M.loop=!0,M.connect(A),M.start()}return A.stream}listDevicesOfKind(P,L){return g(this,void 0,void 0,function*(){return(L||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(P)})}updateDeviceInfoCacheFromBrowser(){var P;return g(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let A=yield navigator.mediaDevices.enumerateDevices(),M=!0;for(const k of A)if(!k.label){M=!1;break}if(!M)try{this.logger.info("attempting to trigger media device labels since they are hidden");const k=yield this.deviceLabelTrigger();A=yield navigator.mediaDevices.enumerateDevices();for(const G of k.getTracks())G.stop()}catch(k){this.logger.info("unable to get media device labels"),(P=this.eventController)===null||P===void 0||P.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(k)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(A)}`),this.deviceInfoCache=A})}listCachedDevicesOfKind(P){const L=[];if(this.deviceInfoCache)for(const A of this.deviceInfoCache)A.kind===P&&L.push(A);return L}handleDeviceChange(){return g(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){s.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const P=this.listCachedDevicesOfKind("audioinput"),L=this.listCachedDevicesOfKind("videoinput"),A=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const M=this.listCachedDevicesOfKind("audioinput"),k=this.listCachedDevicesOfKind("videoinput"),G=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(K=>{this.areDeviceListsEqual(P,M)||i.Maybe.of(K.audioInputsChanged).map(H=>H.bind(K)(M)),this.areDeviceListsEqual(L,k)||i.Maybe.of(K.videoInputsChanged).map(H=>H.bind(K)(k)),this.areDeviceListsEqual(A,G)||i.Maybe.of(K.audioOutputsChanged).map(H=>H.bind(K)(G))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(P,L){return g(this,void 0,void 0,function*(){try{P==="audio"?(this.logger.warn("Audio input device which was active is no longer available, resetting to null device"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}P==="audio"?this.forEachObserver(A=>{i.Maybe.of(A.audioInputStreamEnded).map(M=>M.bind(A)(L))}):this.forEachObserver(A=>{i.Maybe.of(A.videoInputStreamEnded).map(M=>M.bind(A)(L))})})}forEachObserver(P){for(const L of this.deviceChangeObservers)s.default.nextTick(()=>{this.deviceChangeObservers.has(L)&&P(L)})}forEachMediaStreamBrokerObserver(P){for(const L of this.mediaStreamBrokerObservers)s.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(L)&&P(L)})}areDeviceListsEqual(P,L){return JSON.stringify(P.map(A=>JSON.stringify(A)).sort())===JSON.stringify(L.map(A=>JSON.stringify(A)).sort())}intrinsicDeviceAsMediaStream(P){return P&&P.id?P:null}hasSameMediaStreamId(P,L,A){var M,k,G,K;let H;return P==="audio"?(H=A==null?void 0:A.audio.streamId,!!H&&H===((k=(M=L.constraints)===null||M===void 0?void 0:M.audio)===null||k===void 0?void 0:k.streamId)):(H=A==null?void 0:A.video.streamId,!!H&&H===((K=(G=L==null?void 0:L.constraints)===null||G===void 0?void 0:G.video)===null||K===void 0?void 0:K.streamId))}hasSameGroupId(P,L,A){if(P==="")return!0;const M=En.getIntrinsicDeviceId(A);return this.logger.debug(`Checking deviceIds ${M} of type ${typeof M} with groupId ${P}`),typeof M=="string"&&P===this.getGroupIdFromDeviceId(L,M)}getGroupIdFromDeviceId(P,L){if(this.deviceInfoCache!==null){const A=this.listCachedDevicesOfKind(`${P}input`).find(M=>M.deviceId===L);if(A&&A.groupId)return this.logger.debug(`GroupId of deviceId ${L} found in cache is ${A.groupId}`),A.groupId}return this.logger.debug(`GroupId of deviceId ${L} found in cache is empty`),""}handleGetUserMediaError(P,L){if(!P)throw new c.default(P);switch(P.name){case"NotReadableError":case"TrackStartError":throw new S.default(P);case"NotFoundError":case"DevicesNotFoundError":throw new f.default(P);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw L&&L<En.permissionDeniedOriginDetectionThresholdMs?new y.default(P,"Permission denied by browser"):new y.default(P,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new l.default(P);case"TypeError":throw new T.default(P);case"AbortError":default:throw new c.default(P)}}matchesDeviceSelection(P,L,A,M){return A&&A.stream.active&&(this.hasSameMediaStreamId(P,A,M)||A.groupId!==null&&this.hasSameGroupId(A.groupId,P,L))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(A.constraints)} to proposed constraints ${JSON.stringify(M)}`),A.matchesConstraints(M)):!1}chooseInputIntrinsicDevice(P,L){var A,M;return g(this,void 0,void 0,function*(){const k=this.getMediaStreamConstraints(P,L);if(this.matchesDeviceSelection(P,L,this.activeDevices[P],k)){this.logger.info(`reusing existing ${P} input device`);return}this.activeDevices[P]&&this.activeDevices[P].stream&&this.stopTracksAndRemoveCallbacks(P);const G=Date.now(),K=new r.default;try{this.logger.info(`requesting new ${P} device with constraint ${JSON.stringify(k)}`);const H=this.intrinsicDeviceAsMediaStream(L);P==="audio"&&L===null?(K.stream=En.createEmptyAudioDevice(),K.constraints=null):H?(this.logger.info(`using media stream ${H.id} for ${P} device`),K.stream=H,K.constraints=k):(K.stream=yield navigator.mediaDevices.getUserMedia(k),K.constraints=k),yield this.handleNewInputDevice(P,K)}catch(H){const X=this.getErrorMessage(H);P==="audio"?(A=this.eventController)===null||A===void 0||A.publishEvent("audioInputFailed",{audioInputErrorMessage:X}):(M=this.eventController)===null||M===void 0||M.publishEvent("videoInputFailed",{videoInputErrorMessage:X}),this.logger.error(`failed to get ${P} device for constraints ${JSON.stringify(k)}: ${X}`);let oe=!0;if(H&&"constraint"in H&&(this.logger.error(`Over-constrained by constraint: ${H.constraint}`),this.useMediaConstraintsFallback)){const le=this.getMediaStreamConstraints(P,L,!0),re=JSON.stringify(le);if(re!==JSON.stringify(k)){this.logger.info(`retry requesting new ${P} device with minimal constraint ${re}`);try{K.stream=yield navigator.mediaDevices.getUserMedia(le),K.constraints=le,yield this.handleNewInputDevice(P,K),oe=!1}catch(he){this.logger.error(`failed to get ${P} device for constraints ${re}: ${this.getErrorMessage(he)}`)}}}if(oe){if(P==="audio"){this.logger.info(`choosing null ${P} device instead`);try{K.stream=En.createEmptyAudioDevice(),K.constraints=null,yield this.handleNewInputDevice(P,K)}catch(le){this.logger.error(`failed to choose null ${P} device. ${le.name}: ${le.message}`)}}this.handleGetUserMediaError(H,Date.now()-G)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(P){return P?P.name&&P.message?`${P.name}: ${P.message}`:P.name?P.name:P.message?P.message:"UnknownError":"UnknownError"}handleNewInputDevice(P,L){var A;return g(this,void 0,void 0,function*(){this.logger.info(`got ${P} device for constraints ${JSON.stringify(L.constraints)}`);const M=(A=this.getMediaTrackSettings(L.stream))===null||A===void 0?void 0:A.deviceId;L.groupId=M?this.getGroupIdFromDeviceId(P,M):"",this.activeDevices[P]=L,this.logger.debug(`Set activeDevice to ${JSON.stringify(L)}`),this.watchForDeviceChangesIfNecessary();const k=L.stream.getTracks()[0];if(k&&(L.endedCallback=()=>{this.activeDevices[P]&&this.activeDevices[P].stream===L.stream&&(this.handleDeviceStreamEnded(P,M),delete L.endedCallback)},k.addEventListener("ended",L.endedCallback,{once:!0})),P==="audio"){const G=L.stream.getAudioTracks()[0];if(G){const K=G.getSettings().deviceId||L.stream;L.trackMuteCallback=()=>{this.mediaStreamMuteObserver(K,!0)},L.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(K,!1)},G.addEventListener("mute",L.trackMuteCallback,{once:!1}),G.addEventListener("unmute",L.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),G.muted?L.trackMuteCallback():L.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(P,L,A,M){if(M&&this.listCachedDevicesOfKind(`${P}input`).length===1)return!0;const k={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?k.deviceId=L:k.deviceId={exact:L},A&&(k.groupId=A),M?k:P==="video"?(k.width={ideal:this.videoInputQualitySettings.videoWidth},k.height={ideal:this.videoInputQualitySettings.videoHeight},k.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},k):(this.supportSampleRateConstraint()&&(k.sampleRate={ideal:En.defaultSampleRate}),this.supportSampleSizeConstraint()&&(k.sampleSize={ideal:En.defaultSampleSize}),this.supportChannelCountConstraint()&&(k.channelCount={ideal:En.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},k))}getMediaStreamConstraintsFromTrackConstraints(P,L){return P==="audio"?{audio:L}:{video:L}}getMediaStreamConstraints(P,L){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,M={};if(!L)return null;const k=this.intrinsicDeviceAsMediaStream(L);if(k)return M.streamId=k.id,this.getMediaStreamConstraintsFromTrackConstraints(P,M);if(typeof L=="string"){let G="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?G=this.getGroupIdFromDeviceId(P,L):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),M=this.calculateMediaStreamConstraints(P,L,G,A),this.getMediaStreamConstraintsFromTrackConstraints(P,M)}return U(L)?(M=this.calculateMediaStreamConstraints(P,L.deviceId,L.groupId,A),this.getMediaStreamConstraintsFromTrackConstraints(P,M)):(M=L,this.getMediaStreamConstraintsFromTrackConstraints(P,M))}deviceInfoFromDeviceId(P,L){if(this.deviceInfoCache===null)return null;for(const A of this.deviceInfoCache)if(A.kind===P&&A.deviceId===L)return A;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(P,L){if(!P||!P.active||!L)return!1;if(L.id)return P.id===L.id;const A=this.getMediaTrackSettings(P);if(!A.deviceId)return!1;const M=En.getIntrinsicDeviceId(L);return typeof M=="string"?A.deviceId===M:!1}getMediaTrackSettings(P){var L;return(L=P.getTracks()[0])===null||L===void 0?void 0:L.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const P=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(P)}setTransform(P,L){var A,M;(M=(A=this.transform)===null||A===void 0?void 0:A.nodes)===null||M===void 0||M.end.disconnect(),this.transform={nodes:L,device:P};const k=L==null?void 0:L.end,G=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${k} to destination ${G}.`),k==null||k.connect(G),this.reconnectAudioInputs()}removeTransform(){var P;const L=this.transform;if(L)return(P=this.transform.nodes)===null||P===void 0||P.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),L}attachAudioInputStreamToAudioContext(P){var L;(L=this.audioInputSourceNode)===null||L===void 0||L.disconnect(),this.audioInputSourceNode=En.getAudioContext().createMediaStreamSource(P);const A=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(A)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=En.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var P,L;return((L=(P=this.transform)===null||P===void 0?void 0:P.nodes)===null||L===void 0?void 0:L.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(P){En.defaultLatencyHint=P}static getAudioContext(){if(!En.audioContext){const P={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(P.sampleRate=En.defaultSampleRate),new u.default().requiresPlaybackLatencyHintForAudioContext()&&(P.latencyHint="playback"),En.defaultLatencyHint&&(P.latencyHint=En.defaultLatencyHint),En.audioContext=new(window.AudioContext||window.webkitAudioContext)(P)}return En.audioContext}static closeAudioContext(){if(En.audioContext)try{En.audioContext.close()}catch{}En.audioContext=null}addMediaStreamBrokerObserver(P){this.mediaStreamBrokerObservers.add(P)}removeMediaStreamBrokerObserver(P){this.mediaStreamBrokerObservers.delete(P)}publishVideoInputDidChangeEvent(P){this.forEachMediaStreamBrokerObserver(L=>{L.videoInputDidChange&&L.videoInputDidChange(P)}),this.pushVideoMeetingStateForPermissions(P)}publishAudioInputDidChangeEvent(P){this.forEachMediaStreamBrokerObserver(L=>{L.audioInputDidChange&&L.audioInputDidChange(P)}),this.pushAudioMeetingStateForPermissions(P)}publishAudioOutputDidChangeEvent(P){this.forEachMediaStreamBrokerObserver(L=>{L.audioOutputDidChange&&L.audioOutputDidChange(P)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(P,L,A){let M=`API/DefaultDeviceController/${P}`;typeof L<"u"&&(M+=` ${JSON.stringify(L)}`),typeof A<"u"&&(M+=` -> ${JSON.stringify(A)}`),this.logger.info(M)}constructor(P,L,A=new u.default,M){this.logger=P,this.browserBehavior=A,this.eventController=M,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new o.default,this.videoInputTaskQueue=new o.default,this.muted=!1,this.mediaStreamMuteObserver=(H,X)=>{for(const oe of this.deviceChangeObservers)s.default.nextTick(()=>{this.deviceChangeObservers.has(oe)&&oe.audioInputMuteStateChanged&&oe.audioInputMuteStateChanged(H,X)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:k=!1,useMediaConstraintsFallback:G=!0}=L||{};this.useWebAudio=k,this.useMediaConstraintsFallback=G,this.videoInputQualitySettings=new O.default(En.defaultVideoWidth,En.defaultVideoHeight,En.defaultVideoFrameRate);const K=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=K[0],this.videoInputQualitySettings.videoHeight=K[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new m.default().create();const H=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(H)}`)}catch(H){P.error(H.message)}}},"DefaultDeviceController");d.default=F,F.permissionDeniedOriginDetectionThresholdMs=500,F.defaultVideoWidth=960,F.defaultVideoHeight=540,F.defaultVideoFrameRate=15,F.defaultSampleRate=48e3,F.defaultSampleSize=16,F.defaultChannelCount=1,F.audioContext=null;function U(_){return typeof _=="object"&&"deviceId"in _&&"groupId"in _&&"kind"in _&&"label"in _}a(U,"isMediaDeviceInfo")},ZzQ1:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.uint32ArrayFrom=void 0;function g(p){if(!Uint32Array.from){for(var u=new Uint32Array(p.length),m=0;m<p.length;)u[m]=p[m],m+=1;return u}return Uint32Array.from(p)}a(g,"uint32ArrayFrom"),d.uint32ArrayFrom=g},"a16/":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");d.default=g},a6MJ:function(W,d,h){"use strict";var g=this&&this.__createBinding||(Object.create?function(bt,ee,ae,fe){fe===void 0&&(fe=ae),Object.defineProperty(bt,fe,{enumerable:!0,get:function(){return ee[ae]}})}:function(bt,ee,ae,fe){fe===void 0&&(fe=ae),bt[fe]=ee[ae]}),p=this&&this.__setModuleDefault||(Object.create?function(bt,ee){Object.defineProperty(bt,"default",{enumerable:!0,value:ee})}:function(bt,ee){bt.default=ee}),u=this&&this.__importStar||function(bt){if(bt&&bt.__esModule)return bt;var ee={};if(bt!=null)for(var ae in bt)ae!=="default"&&Object.prototype.hasOwnProperty.call(bt,ae)&&g(ee,bt,ae);return p(ee,bt),ee},m=this&&this.__awaiter||function(bt,ee,ae,fe){function Ue(we){return we instanceof ae?we:new ae(function(Ce){Ce(we)})}return a(Ue,"adopt"),new(ae||(ae=Promise))(function(we,Ce){function De(ct){try{gt(fe.next(ct))}catch(_t){Ce(_t)}}a(De,"fulfilled");function pt(ct){try{gt(fe.throw(ct))}catch(_t){Ce(_t)}}a(pt,"rejected");function gt(ct){ct.done?we(ct.value):Ue(ct.value).then(De,pt)}a(gt,"step"),gt((fe=fe.apply(bt,ee||[])).next())})},s=this&&this.__importDefault||function(bt){return bt&&bt.__esModule?bt:{default:bt}};Object.defineProperty(d,"__esModule",{value:!0});const o=s(h("HAqy")),i=s(h("kUL9")),e=s(h("f3u9")),t=s(h("U9CR")),n=s(h("rhlI")),r=s(h("da6e")),c=s(h("my46")),f=s(h("aZba")),S=s(h("papz")),l=s(h("ZS2b")),y=s(h("ppUg")),T=s(h("igcJ")),O=s(h("iRMv")),R=s(h("F7zz")),F=s(h("on9F")),U=s(h("K5tc")),_=s(h("AXyi")),P=s(h("Q2ix")),L=s(h("HG8V")),A=u(h("/AJg")),M=s(h("HbHZ")),k=s(h("bQ+R")),G=h("XCDq"),K=s(h("YbMW")),H=s(h("nDuE")),X=s(h("7EAL")),oe=s(h("wjYw")),le=s(h("7UVU")),re=s(h("lFzH")),he=s(h("tMH2")),Pe=s(h("Wdtm")),pe=s(h("2vi8")),Me=s(h("3taG")),We=s(h("Hi4k")),Ae=s(h("uB5g")),lt=s(h("W+eo")),Ne=s(h("hspq")),Xe=s(h("rkwE")),je=s(h("5Y0c")),Te=s(h("fxRI")),At=s(h("rw3l")),sn=s(h("D7wJ")),Dt=s(h("K+bq")),tn=s(h("XzFx")),Yt=s(h("fZkv")),Tn=s(h("ZISg")),Xt=s(h("iQPr")),Cn=s(h("xeHQ")),Dn=s(h("ZdbB")),cn=s(h("wQGL")),Mn=s(h("VYs+")),_n=s(h("XJKy")),nt=h("Aplu"),$t=s(h("Biyp")),It=s(h("uTAD")),Fe=s(h("rCkh")),Rt=h("T44/"),Qe=s(h("MpTp")),Qt=s(h("0LIx")),Nn=s(h("LIUS")),Zt=s(h("yS4C")),mn=s(h("Wnnr")),ni=s(h("BGMr")),fi=s(h("P7Xm")),di=s(h("kabN")),Wn=s(h("1uai"));let Rn=a(class rl{destroy(){return m(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new o.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(ee){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(ee):null}setAudioProfile(ee){this._audioProfile=ee}addObserver(ee){this.logger.info("adding meeting observer"),this.observerQueue.add(ee)}removeObserver(ee){this.logger.info("removing meeting observer"),this.observerQueue.delete(ee)}forEachObserver(ee){for(const ae of this.observerQueue)R.default.nextTick(()=>{this.observerQueue.has(ae)&&ee(ae)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new Wn.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new L.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const ee=a(()=>m(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(ae){ae.type===M.default.WebSocketClosed&&ee()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(ee=>{this.logger.error(`Signaling task pre-start failed: ${ee}`),this.signalingTask=void 0})}start(ee){this.startReturningPromise(ee).then(()=>{this.logger.info("start completed")}).catch(ae=>{this.logger.error(`start failed: ${ae}`)})}startReturningPromise(ee){return(ee==null?void 0:ee.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((ae,fe)=>{this.sessionStateController.perform(U.default.Connect,()=>{this.actionConnect(!1).then(ae).catch(fe)})}))}connectWithPromises(ee){const ae=this.meetingSessionContext,fe=a((li,Gn)=>new Xt.default(this.logger,Gn,li),"timeout");this.monitorTask=new We.default(ae,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const Ue=this.monitorTask.once(),we=new Xe.default(ae).once();this.receiveIndexTask=new At.default(ae),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const Ce=new Dt.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new Me.default(ae),new sn.default(ae),new Pe.default(ae),this.receiveIndexTask]).once(),De=new le.default(ae).once(Ce),pt=new H.default(ae).once(De,we),gt=new re.default(ae).once(pt),ct=new tn.default(ae).once(gt),_t=new he.default(ae).once(ct),zn=new Tn.default(ae).once(_t),vn=new je.default(ae).once(zn);return new Dt.default(this.logger,this.wrapTaskName("AudioVideoStart"),[Ue,fe(this.configuration.connectionTimeoutMs,new Dt.default(this.logger,"Peer",[zn,vn,ee?new Xt.default(this.logger,new lt.default(this.logger,"FinalizeConnection",[new Cn.default(ae),new Yt.default(ae)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new Yt.default(ae)]))])}actionConnect(ee){var ae;return m(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const fe=!!this.configuration.urls.audioHostURL;if(fe?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new cn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new Mn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new Dn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new _n.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new di.default(this.logger,this._realtimeController,rl.MIN_VOLUME_DECIBELS,rl.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let Ce=this.meetingSessionContext.videoUplinkBandwidthPolicy;Ce||(Ce=new ni.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=Ce),Ce.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Fe.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new Nn.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new Qt.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new fi.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new It.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)){const Ce=this.configuration.meetingFeatures.contentMaxResolution===c.default.VideoResolutionUHD;Ce&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Ce)}else{const Ce=this.configuration.meetingFeatures.videoMaxResolution===c.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Ce)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new l.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new $t.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new Qe.default,this.meetingSessionContext.videosPaused=new Qe.default,this.meetingSessionContext.statsCollector=new K.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new r.default(this,this._realtimeController,this.connectionHealthData,new T.default(this.meetingSessionContext.signalingClient,rl.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},ee||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(Ce=>{nt.Maybe.of(Ce.audioVideoDidStartConnecting).map(De=>De.bind(Ce)(!1))}),(ae=this.eventController)===null||ae===void 0||ae.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const Ue=fe&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+Ue);const we=this.connectWithPromises(Ue);try{yield we.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(U.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(Ce){this.signalingTask=void 0;const De=new f.default(this.getMeetingStatusCode(Ce)||S.default.TaskFailed);if(this.logger.info(`Start failed: ${De} due to error ${Ce}.`),this.sessionStateController.state()===_.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(U.default.Fail,()=>m(this,void 0,void 0,function*(){yield this.actionDisconnect(De,!0,Ce),this.handleMeetingSessionStatus(De,Ce)||this.notifyStop(De,Ce)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new Xt.default(this.logger,new Ae.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=G.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.forEachObserver(ee=>{nt.Maybe.of(ee.audioVideoDidStart).map(ae=>ae.bind(ee)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var ee;return this.sessionStateController.state()===_.default.NotConnected?((ee=this.meetingSessionContext.signalingClient)===null||ee===void 0||ee.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((ae,fe)=>{this.sessionStateController.perform(U.default.Disconnect,()=>{this._reconnectController.disableReconnect(),this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new f.default(S.default.Left),!1,null).then(ae).catch(fe)})})}stop(){this.stopReturningPromise()}actionDisconnect(ee,ae,fe){return m(this,void 0,void 0,function*(){try{yield new Dt.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new Xt.default(this.logger,new pe.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const Ue=[new Xt.default(this.logger,new oe.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new Dt.default(this.logger,this.wrapTaskName("AudioVideoClean"),Ue).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(U.default.FinishDisconnecting,()=>{ae||this.notifyStop(ee,fe)})})}update(){let ae=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(ae||(ae=this.meetingSessionContext.peer===void 0),ae||(ae=!this.updateRemoteVideosFromPolicy()),ae||(ae=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!ae)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const fe=this.sessionStateController.perform(U.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return fe===P.default.Transitioned||fe===P.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!A.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===A.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const ee=this.detectChangesInVideosToReceive();if(ee===void 0)return!1;const ae=ee.added,fe=ee.simulcastStreamUpdates,Ue=ee.removed,we=this.meetingSessionContext,Ce=[];for(const[De,pt]of fe.entries()){const gt=new k.default;if(gt.streamId=pt,gt.attendeeId=we.videoStreamIndex.attendeeIdForStreamId(pt),gt.mid=we.transceiverController.getMidForStreamId(De),gt.mid===void 0)return this.logger.info(`No MID found for stream ID ${De}, cannot update stream without renegotiation`),!1;if(Ce.push(gt),we.transceiverController.setStreamIdForMid(gt.mid,pt),we.videoStreamIndex.overrideStreamIdMappings(De,pt),we.videoTileController.haveVideoTileForAttendeeId(gt.attendeeId)){const ct=we.videoTileController.getVideoTileForAttendeeId(gt.attendeeId);if(!ct.setStreamId)return!1;ct.setStreamId(pt)}}return Ce.length!==0&&we.signalingClient.remoteVideoUpdate(Ce,[]),ae.length!==0||Ue.length!==0?!1:(we.videoStreamIndex.subscribeFrameSent(),!0)}detectChangesInVideosToReceive(){const ee=this.meetingSessionContext;if(ee.videosToReceive===null||!ee.transceiverController||!ee.transceiverController.getMidForStreamId||!ee.transceiverController.setStreamIdForMid||!ee.videosToReceive.forEach||!ee.signalingClient.remoteVideoUpdate||!ee.videoStreamIndex.overrideStreamIdMappings)return;let ae=[];const fe=new Map;let Ue=[];if(ee.lastVideosToReceive===null)ae=ee.videosToReceive.array();else{const we=ee.videoStreamIndex;ee.videosToReceive.forEach(Ce=>{if(ee.lastVideosToReceive.contain(Ce))return;let De=!1;ee.lastVideosToReceive.forEach(pt=>{De||we.StreamIdsInSameGroup(pt,Ce)&&(fe.set(pt,Ce),De=!0)}),De||ae.push(Ce)}),Ue=ee.lastVideosToReceive.array().filter(Ce=>{const De=ee.videosToReceive.contain(Ce),pt=fe.has(Ce);return!De&&!pt})}return this.logger.info(`Request to update remote videos with added: ${ae}, updated: ${[...fe.entries()]}, removed: ${Ue}`),{added:ae,removed:Ue,simulcastStreamUpdates:fe}}isNotAddingOrRemovingStreams(){const ee=this.detectChangesInVideosToReceive();if(ee===void 0)return!1;const ae=ee.added,fe=ee.removed;return!(ae.length!==0||fe.length!==0)}sendRemoteVideoUpdate(){const ee=this.meetingSessionContext;if(ee.videosToReceive===null)return!1;const ae=ee.videosToReceive.array().map(De=>ee.videoStreamIndex.groupIdForStreamId(De)),fe=Rt.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(ee,ae,ee.videoDownlinkBandwidthPolicy.getVideoPreferences()),Ue=new Map,we=[];for(const De of fe){let pt=!1;if(!ee.lastVideoSubscriptionConfiguration.has(De.groupId))pt=!0;else{const gt=ee.lastVideoSubscriptionConfiguration.get(De.groupId);De.equals(gt)||(this.logger.debug(`${JSON.stringify(De)} does not equal ${JSON.stringify(gt)}, sending update`),pt=!0)}Ue.set(De.groupId,De),pt&&we.push(De)}ee.lastVideoSubscriptionConfiguration=Ue;const Ce=[];if(ee.lastVideosToReceive!==null){const De=new Set(ae);for(const pt of ee.lastVideosToReceive.array()){const gt=ee.videoStreamIndex.groupIdForStreamId(pt);if(!De.has(gt)){const ct=ee.transceiverController.getMidForGroupId(gt);if(ct===void 0){ee.logger.warn(`Could not find MID for group ID to remove: ${gt}`);continue}Ce.push(ct)}}}return(we.length!==0||Ce.length!==0)&&ee.signalingClient.remoteVideoUpdate(we,Ce),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const ee=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(ee)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const ee=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!ee||!ee.headerExtensions?!1:ee.headerExtensions.some(ae=>ae.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(ee){const ae=a(()=>m(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),ee()}),"restartVideo"),fe=this.sessionStateController.perform(U.default.Update,()=>{ae()});return fe===P.default.Transitioned||fe===P.default.DeferredTransition}replaceLocalVideo(ee){return m(this,void 0,void 0,function*(){if(!ee||ee.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const ae=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(ae){const fe=ae.state(),Ue=ee.getVideoTracks()[0].getSettings();ae.bindVideoStream(fe.boundAttendeeId,!0,ee,Ue.width,Ue.height,fe.streamId,fe.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(ee.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=ee,this.logger.info("Local video input is updated")})}replaceLocalAudio(ee){return m(this,void 0,void 0,function*(){if(!ee||ee.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(ee.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=ee,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(ee){return m(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new Dt.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new Te.default(this.meetingSessionContext),new Xt.default(this.logger,new Dt.default(this.logger,"UpdateSession",[new H.default(this.meetingSessionContext),new re.default(this.meetingSessionContext),new tn.default(this.meetingSessionContext),new he.default(this.meetingSessionContext),new Tn.default(this.meetingSessionContext),new Yt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),ee&&this.sessionStateController.perform(U.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(ae){this.sessionStateController.perform(U.default.FinishUpdating,()=>{const fe=new f.default(this.getMeetingStatusCode(ae)||S.default.TaskFailed);fe.statusCode()!==S.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(fe,ae)})}})}notifyStop(ee,ae){var fe;if(this.forEachObserver(Ue=>{nt.Maybe.of(Ue.audioVideoDidStop).map(we=>we.bind(Ue)(ee))}),this.promotedToPrimaryMeeting&&ae&&this.forEachObserver(Ue=>{this.promotedToPrimaryMeeting=!1,nt.Maybe.of(Ue.audioVideoWasDemotedFromPrimaryMeeting).map(we=>we.bind(Ue)(new f.default(S.default.SignalingInternalServerError)))}),this.eventController){const{signalingOpenDurationMs:Ue,poorConnectionCount:we,startTimeMs:Ce,iceGatheringDurationMs:De,attendeePresenceDurationMs:pt,meetingStartDurationMs:gt}=this.meetingSessionContext,ct={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Ce===null?0:Math.round(Date.now()-Ce),meetingStatus:S.default[ee.statusCode()],signalingOpenDurationMs:Ue,iceGatheringDurationMs:De,attendeePresenceDurationMs:pt,poorConnectionCount:we,meetingStartDurationMs:gt,retryCount:this.totalRetryCount},_t=ae&&ae.message||((fe=ee.toString)===null||fe===void 0?void 0:fe.call(ee))||"";ct.meetingDurationMs===0?(ct.meetingErrorMessage=_t,delete ct.meetingDurationMs,delete ct.attendeePresenceDurationMs,delete ct.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",ct)):ee.isFailure()||ee.isAudioConnectionFailure()?(ct.meetingErrorMessage=_t,this.eventController.publishEvent("meetingFailed",ct)):this.eventController.publishEvent("meetingEnded",ct)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const ee=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(ee)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(ee,ae){const fe=this._reconnectController.retryWithBackoff(()=>m(this,void 0,void 0,function*(){this.sessionStateController.state()===_.default.NotConnected?this.sessionStateController.perform(U.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(U.default.Reconnect,()=>{this.actionReconnect(ee)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return fe||this.sessionStateController.perform(U.default.Fail,()=>{this.actionDisconnect(ee,!1,ae)}),fe}actionReconnect(ee){return m(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(ae=>{nt.Maybe.of(ae.audioVideoDidStartConnecting).map(fe=>fe.bind(ae)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset();try{yield new Dt.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new Xt.default(this.logger,new Dt.default(this.logger,"Media",[new X.default(this.meetingSessionContext),new Dt.default(this.logger,"Signaling",[new Ae.default(this.meetingSessionContext),new Pe.default(this.meetingSessionContext)]),new le.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new Te.default(this.meetingSessionContext),new Xt.default(this.logger,new Dt.default(this.logger,"UpdateSession",[new H.default(this.meetingSessionContext),new re.default(this.meetingSessionContext),new tn.default(this.meetingSessionContext),new he.default(this.meetingSessionContext),new Tn.default(this.meetingSessionContext),new Yt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(U.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:ae,poorConnectionCount:fe,startTimeMs:Ue,iceGatheringDurationMs:we,attendeePresenceDurationMs:Ce,meetingStartDurationMs:De}=this.meetingSessionContext,pt={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-Ue),meetingStatus:S.default[ee.statusCode()],signalingOpenDurationMs:ae,iceGatheringDurationMs:we,attendeePresenceDurationMs:Ce,poorConnectionCount:fe,meetingStartDurationMs:De,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",pt)}this.actionFinishConnecting()})}catch(ae){this.sessionStateController.perform(U.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const fe=new f.default(this.getMeetingStatusCode(ae)||S.default.TaskFailed);this.handleMeetingSessionStatus(fe,ae)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(ee){return`${ee}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(ee){const ae=/the meeting status code: (\d+)/.exec(ee&&ee.message);return ae&&ae.length>1?Number.parseInt(ae[1],10):null}enforceBandwidthLimitationForSender(ee){return m(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(ee)})}handleMeetingSessionStatus(ee,ae){if(this.logger.info(`handling status: ${S.default[ee.statusCode()]}`),ee.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(ee),ee.statusCode()===S.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(ee.statusCode()===S.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(fe=>{nt.Maybe.of(fe.videoSendDidBecomeUnavailable).map(Ue=>Ue.bind(fe)())}),!1;if(ee.statusCode()===S.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(fe=>{nt.Maybe.of(fe.audioVideoWasDemotedFromPrimaryMeeting).map(Ue=>Ue.bind(fe)(ee))}),!1;if(ee.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(ee.isFailure()||ee.isTerminal())&&this.meetingSessionContext.reconnectController){const fe=this.reconnect(ee,ae);return fe?this.logger.warn(`will retry due to status code ${S.default[ee.statusCode()]}${ae?` and error: ${ae.message}`:""}`):this.logger.error(`failed with status code ${S.default[ee.statusCode()]}${ae?` and error: ${ae.message}`:""}`),fe}return!1}setVideoMaxBandwidthKbps(ee){if(ee<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${ee} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(ee)),this.maxUplinkBandwidthKbps=ee}handleHasBandwidthPriority(ee){return m(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(ee),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const ae=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(ee);const fe=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();ae!==fe&&(this.logger.info(`video send bandwidth priority ${ee} max has changed from ${ae} kbps to ${fe} kbps`),yield this.enforceBandwidthLimitationForSender(fe))}})}pauseReceivingStream(ee){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([ee])}resumeReceivingStream(ee){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([ee])}setVideoCodecSendPreferences(ee){this.videoSendCodecPreferences=ee,this.meetingSessionContext.videoSendCodecPreferences=ee,this.sessionStateController.state()!==_.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:ee}=this.meetingSessionContext;if(!ee)return this.logger.info("meeting has not started"),[];const ae=this.configuration.credentials.attendeeId;return ee.allVideoSendingSourcesExcludingSelf(ae)}encodingSimulcastLayersDidChange(ee){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(ae=>{nt.Maybe.of(ae.encodingSimulcastLayersDidChange).map(fe=>fe.bind(ae)(ee))})}promoteToPrimaryMeeting(ee){return this.actionPromoteToPrimaryMeeting(ee)}actionPromoteToPrimaryMeeting(ee){return m(this,void 0,void 0,function*(){let ae=new f.default(S.default.SignalingRequestFailed);return yield new Dt.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new Xt.default(this.logger,new Ne.default(this.meetingSessionContext,ee,fe=>{ae=fe}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=ae.statusCode()===S.default.OK,ae})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(ee=>{nt.Maybe.of(ee.audioVideoWasDemotedFromPrimaryMeeting).map(ae=>ae.bind(ee)(new f.default(S.default.OK)))})}videoInputDidChange(ee){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(ee?yield this.replaceLocalVideo(ee):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(ee){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!ee)try{ee=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(ee)})}constructor(ee,ae,fe,Ue,we,Ce){this._audioProfile=new e.default,this.connectionHealthData=new n.default,this.observerQueue=new Set,this.meetingSessionContext=new Wn.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.destroyed=!1,this._logger=ae,this.sessionStateController=new F.default(this._logger),this._configuration=ee,this._webSocketAdapter=fe,this._realtimeController=new O.default(Ue),this._realtimeController.realtimeSetLocalAttendeeId(ee.credentials.attendeeId,ee.credentials.externalUserId),this._mediaStreamBroker=Ue,this._reconnectController=we,this._videoTileController=new Zt.default(new mn.default,this,this._logger),this._audioMixController=new i.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=Ce}},"DefaultAudioVideoController");d.default=Rn,Rn.MIN_VOLUME_DECIBELS=-42,Rn.MAX_VOLUME_DECIBELS=-14,Rn.PING_PONG_INTERVAL_MS=1e4},aApz:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g;(function(p){p.Unread="unread",p.LastMessageTimestamp="last-message-timestamp"})(g||(g={})),d.default=g},aCJD:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.VideoQualityAdaptationPreference=void 0;var g;(function(p){p[p.Balanced=0]="Balanced",p[p.MaintainFramerate=1]="MaintainFramerate",p[p.MaintainResolution=2]="MaintainResolution"})(g=d.VideoQualityAdaptationPreference||(d.VideoQualityAdaptationPreference={})),d.default=g},aMTh:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("U9CR"));let m=a(class qu{getInnerDevice(){return this.device}mute(i){return g(this,void 0,void 0,function*(){this.node&&(i?yield this.node.disable():yield this.node.enable())})}stop(){return g(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(i){return g(this,void 0,void 0,function*(){return this.device===i&&!s(i)?this:new qu(i,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return g(this,void 0,void 0,function*(){if(this.failed)return this.device;const i=this.nodeOptions.es,e={echoCancellation:!i,googEchoCancellation:!i,googEchoCancellation2:!i,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(i){var e,t;return g(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===i)return{start:this.node,end:this.node};const r=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(i,r),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(i,{channelCount:1,channelCountMode:"explicit"});for(const S of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(S);this.createMixSourceNode()}const c=this.node,f=this.node;return{start:c,end:f}}catch(c){throw this.failed=!0,this.delegate.onFallback(this,c),c}})}observeMeetingAudio(i){return g(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.addAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(i){return g(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.removeAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}addFarEndStream(i){return g(this,void 0,void 0,function*(){!this.nodeOptions.es||!i||this.farEndStreamToAudioSourceNode.has(i)||(this.node?this.assignFarEndStreamToAudioSourceNode(i):this.farEndStreamToAudioSourceNode.set(i,null))})}removeFarendStream(i){var e;return g(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(i))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(i)})}meetingAudioStreamBecameActive(i){return g(this,void 0,void 0,function*(){this.addFarEndStream(i)})}meetingAudioStreamBecameInactive(i){return g(this,void 0,void 0,function*(){this.removeFarendStream(i)})}assignFarEndStreamToAudioSourceNode(i){const e=this.node.context.createMediaStreamSource(i);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(i,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(i,e,t,n,r=!1,c=void 0,f=new u.default,S=new Map,l=void 0,y=void 0){this.device=i,this.voiceFocus=e,this.delegate=t,this.nodeOptions=n,this.failed=r,this.node=c,this.browserBehavior=f,this.farEndStreamToAudioSourceNode=S,this.mixDestNode=l,this.mixSourceNode=y}},"VoiceFocusTransformDevice");function s(o){return o==="default"?!0:!o||typeof o!="object"?!1:"deviceId"in o&&o.deviceId==="default"||"id"in o&&o.id==="default"}a(s,"isDefaultDevice"),d.default=m},aNtF:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class rr{static initializeWorker(){rr.log("Initializing RedundantAudioEncoder");const u=new rr;self.RTCRtpScriptTransformer&&(self.onrtctransform=m=>{m.transformer.options.type==="SenderTransform"?u.setupSenderTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="ReceiverTransform"?u.setupReceiverTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="PassthroughTransform"&&u.setupPassthroughTransform(m.transformer.readable,m.transformer.writable)}),self.onmessage=m=>{m.data.msgType==="StartRedWorker"?(u.setupSenderTransform(m.data.send.readable,m.data.send.writable),u.setupReceiverTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="PassthroughTransform"?(u.setupPassthroughTransform(m.data.send.readable,m.data.send.writable),u.setupPassthroughTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="RedPayloadType"?u.setRedPayloadType(m.data.payloadType):m.data.msgType==="OpusPayloadType"?u.setOpusPayloadType(m.data.payloadType):m.data.msgType==="UpdateNumRedundantEncodings"?u.setNumRedundantEncodings(m.data.numRedundantEncodings):m.data.msgType==="Enable"?u.setRedundancyEnabled(!0):m.data.msgType==="Disable"&&u.setRedundancyEnabled(!1)}}static log(u){rr.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${u}`})}static getNumRedundantEncodingsForPacketLoss(u){let m=0,s=!1;return u<=8?m=0:u<=18?m=1:u<=75?m=2:(m=0,s=!0),[m,s]}setupPassthroughTransform(u,m){rr.log("Setting up passthrough transform"),u.pipeTo(m)}setupSenderTransform(u,m){rr.log("Setting up sender RED transform");const s=new TransformStream({transform:this.senderTransform.bind(this)});u.pipeThrough(s).pipeTo(m)}setupReceiverTransform(u,m){rr.log("Setting up receiver RED transform");const s=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});u.pipeThrough(s).pipeTo(m)}setRedPayloadType(u){this.redPayloadType=u,rr.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(u){this.opusPayloadType=u,rr.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(u){this.numRedundantEncodings=u,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),rr.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(u){this.redundancyEnabled=u,rr.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(u,m){u.data.byteLength>this.maxAudioPayloadSizeBytes||m.enqueue(u)}senderTransform(u,m){if(u.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}const o=this.getPrimaryPayload(u.timestamp,u.data);if(!o){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}const i=this.encode(u.timestamp,o);if(!i){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}u.data=i,this.enqueueAudioFrameIfPayloadSizeIsValid(u,m)}getPrimaryPayload(u,m){const s=this.splitEncodings(u,m);return!s||s.length<1?null:s[s.length-1].payload}splitEncodings(u,m){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const i=new DataView(m);let e=i.byteLength,t=0,n=0,r=0,c=0,f=!1;const S=new Array,l=new Array,y=new Array;for(;e>0;)if(f=(i.getUint8(c)&128)===0,f){if((i.getUint8(c)&127)!==this.opusPayloadType||(t+=this.redLastHeaderSizeBytes,n+=this.redLastHeaderSizeBytes,t>=i.byteLength))return null;r=i.byteLength-t;break}else{if(e<this.redHeaderSizeBytes)return null;const _=((i.getUint8(c+2)&3)<<8)+i.getUint8(c+3);l.push(_);const P=i.getUint16(c+1)>>2,L=u-P;y.push(L),t+=_+this.redHeaderSizeBytes,n+=this.redHeaderSizeBytes,c+=this.redHeaderSizeBytes,e-=this.redHeaderSizeBytes}if(!f)return null;let T=n;for(let _=0;_<y.length;_++){const P=new ArrayBuffer(l[_]);new Uint8Array(P).set(new Uint8Array(i.buffer,T,l[_]),0);const A={timestamp:y[_],payload:P,isRedundant:!0};s&&(A.hasFec=this.opusPacketHasFec(new DataView(P),P.byteLength)),S.push(A),T+=l[_]}const O=i.byteLength-r,R=new ArrayBuffer(r);new Uint8Array(R).set(new Uint8Array(i.buffer,O,r),0);const U={timestamp:u,payload:R,isRedundant:!1,seq:o};return s&&(U.hasFec=this.opusPacketHasFec(new DataView(R),R.byteLength)),S.push(U),S}encode(u,m){const s=m.byteLength;if(s===0||s>=this.maxRedPacketSizeBytes||s>=this.maxAudioPayloadSizeBytes)return null;const o=this.numRedundantEncodings;let i=this.redLastHeaderSizeBytes,e=s,t=this.maxAudioPayloadSizeBytes-s-i;const n=new Array,r=new Array;if(this.redundancyEnabled){let y=this.uint32WrapAround(u-this.redPacketizationTime*this.redPacketDistance);for(let T=0;T<o&&!(this.uint32WrapAround(u-y)>=this.maxRedTimestampOffset);T++){let O=y,R=this.encodingHistory.find(F=>F.timestamp===O);if(R||(O=this.uint32WrapAround(y-this.redPacketizationTime),R=this.encodingHistory.find(F=>F.timestamp===O)),R){const F=R.payload.byteLength;if(t<this.redHeaderSizeBytes+F)break;t-=this.redHeaderSizeBytes+F,i+=this.redHeaderSizeBytes,e+=F,n.unshift(R.timestamp),r.unshift(R.payload)}y-=this.redPacketizationTime*this.redPacketDistance,y=this.uint32WrapAround(y)}}const c=new ArrayBuffer(i+e),f=new DataView(c);let S=0;for(let y=0;y<n.length;y++){const T=u-n[y];f.setUint8(S,this.opusPayloadType|128),f.setUint16(S+1,T<<2|r[y].byteLength>>8),f.setUint8(S+3,r[y].byteLength&255),S+=this.redHeaderSizeBytes}f.setUint8(S,this.opusPayloadType),S+=this.redLastHeaderSizeBytes;const l=new Uint8Array(c);for(let y=0;y<r.length;y++)l.set(new Uint8Array(r[y]),S),S+=r[y].byteLength;return l.set(new Uint8Array(m),S),S+=m.byteLength,S!==i+e?null:(this.updateEncodingHistory(u,m),c)}updateEncodingHistory(u,m){for(const o of this.encodingHistory){const i=this.redPacketizationTime*this.redMaxRecoveryDistance;if(u-o.timestamp>=i)this.encodingHistory.shift();else break}const s=new DataView(m);(this.opusPacketIsCeltOnly(s)||this.opusPacketHasVoiceActivity(s,s.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:u,payload:m}))}initializePacketLogs(){const u=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(u),index:0,windowSize:u},this.redRecoveryLog={window:new Array(u),index:0,windowSize:u},this.fecRecoveryLog={window:new Array(u),index:0,windowSize:u},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(u,m){const s=u.getMetadata();if(s.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}const o=this.splitEncodings(u.timestamp,u.data,!0,s.sequenceNumber);if(!o){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}for(let i=o.length-1;i>=0;i--)this.updateLossStats(o[i])&&(this.updateRedStats(o[i]),this.updateFecStats(o[i]));this.maybeReportLossStats(o[o.length-1].timestamp,s.synchronizationSource),this.enqueueAudioFrameIfPayloadSizeIsValid(u,m)}updateLossStats(u){if(u.isRedundant)return!0;const m=u.timestamp,s=u.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=s,this.addTimestamp(this.primaryPacketLog,m),!0;const o=this.int16(s-this.newestSequenceNumber);return o<-this.maxOutOfOrderPacketDistance?!1:(o<0?this.hasTimestamp(this.primaryPacketLog,m)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,m),this.removeFromRecoveryWindows(m)):o>1&&(this.totalAudioPacketsLost+=o-1),o>0&&(this.totalAudioPacketsExpected+=o,this.newestSequenceNumber=u.seq,this.addTimestamp(this.primaryPacketLog,m)),!0)}updateRedStats(u){if(!u.isRedundant||this.totalAudioPacketsLost===0)return;const m=u.timestamp;this.hasTimestamp(this.primaryPacketLog,m)||(this.hasTimestamp(this.redRecoveryLog,m)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,m)),this.removeTimestamp(this.fecRecoveryLog,m)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(u){if(!u.hasFec||this.totalAudioPacketsLost===0)return;const m=u.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,m)||this.hasTimestamp(this.redRecoveryLog,m)||this.hasTimestamp(this.fecRecoveryLog,m)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,m))}maybeReportLossStats(u,m){u-this.lastLossReportTimestamp<this.lossReportInterval||(rr.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:m,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=u)}addTimestamp(u,m){u.window[u.index]=m,u.index=(u.index+1)%u.windowSize}hasTimestamp(u,m){return!!u.window.find(o=>o===m)}removeTimestamp(u,m){const s=u.window.indexOf(m);return s>=0?(u.window[s]=void 0,!0):!1}removeFromRecoveryWindows(u){let m=this.removeTimestamp(this.redRecoveryLog,u);m&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,m=this.removeTimestamp(this.fecRecoveryLog,u),m&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(u){let s=u;return u>=4294967296?s=u-4294967296:u<0&&(s=4294967296+u),s}int16(u){return u<<16>>16}opusPacketIsCeltOnly(u){return!!(u.getUint8(0)&128)}opusPacketGetSamplesPerFrame(u,m){m=Math.round(m),m=Math.min(Math.max(m,-Math.pow(2,32)),Math.pow(2,32)-1);let s,o;return this.opusPacketIsCeltOnly(u)?(o=u.getUint8(0)>>3&3,s=(m<<o)/400):(u.getUint8(0)&96)===96?s=u.getUint8(0)&8?m/50:m/100:(o=u.getUint8(0)>>3&3,o===3?s=m*60/1e3:s=(m<<o)/100),s}opusNumSilkFrames(u){let m=this.opusPacketGetSamplesPerFrame(u,48e3)/48;switch(m<10&&(m=10),m){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(u){return u.getUint8(0)&4?2:1}opusParseSize(u,m,s,o){return s<1?(o[0]=-1,-1):u.getUint8(m)<252?(o[0]=u.getUint8(m),1):s<2?(o[0]=-1,-1):(o[0]=4*u.getUint8(m+1)+u.getUint8(m),2)}opusPacketParseImpl(u,m,s,o,i,e,t,n){if(!e||m<0)return this.OPUS_BAD_ARG;if(m===0)return this.OPUS_INVALID_PACKET;let r,c,f=0,S=!1;const l=u.getUint8(0);o&&(o[0]=l);let y=m-1,T=1,O=y;switch(l&3){case 0:r=1;break;case 1:if(r=2,S=!0,!s){if(y&1)return this.OPUS_INVALID_PACKET;O=y/2,e[0][0]=O}break;case 2:if(r=2,c=this.opusParseSize(u,T,y,e[0]),y-=c,e[0][0]<0||e[0][0]>y)return this.OPUS_INVALID_PACKET;T+=c,O=y-e[0][0];break;default:if(y<1)return this.OPUS_INVALID_PACKET;const R=u.getUint8(T++);if(--y,r=R&63,r<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(u,48e3)*r>5760)return this.OPUS_INVALID_PACKET;if(R&64){let U,_;do{if(y<=0)return this.OPUS_INVALID_PACKET;U=u.getUint8(T++),--y,_=U===255?254:U,y-=_,f+=_}while(U===255)}if(y<0)return this.OPUS_INVALID_PACKET;if(S=!(R&128),S){if(!s){if(O=Math.trunc(y/r),O*r!==y)return this.OPUS_INVALID_PACKET;for(let U=0;U<r-1;++U)e[U][0]=O}}else{O=y;for(let U=0;U<r-1;++U){if(c=this.opusParseSize(u,T,y,e[U]),y-=c,e[U][0]<0||e[U][0]>y)return this.OPUS_INVALID_PACKET;T+=c,O-=c+e[U][0]}if(O<0)return this.OPUS_INVALID_PACKET}}if(s){if(c=this.opusParseSize(u,T,y,e[r-1]),y-=c,e[r-1][0]<0||e[r-1][0]>y)return this.OPUS_INVALID_PACKET;if(T+=c,S){if(e[r-1][0]*r>y)return this.OPUS_INVALID_PACKET;for(let R=0;R<r-1;++R)e[R][0]=e[r-1][0]}else if(!(c+e[r-1][0]<=O))return this.OPUS_INVALID_PACKET}else{if(O>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;e[r-1][0]=O}t&&(t[0]=T);for(let R=0;R<r;++R)i&&(i[R][0]=T),T+=e[R][0];return n&&(n[0]=T+f),r}opusPacketParse(u,m,s,o,i,e){return this.opusPacketParseImpl(u,m,!1,s,o,i,e,null)}opusPacketHasVoiceActivity(u,m){if(!u||m<=0)return 0;if(this.opusPacketIsCeltOnly(u))return-1;const s=this.opusNumSilkFrames(u);if(s===0)return-1;const o=new Array(this.OPUS_MAX_OPUS_FRAMES),i=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)o[t]=[void 0],i[t]=[void 0];const e=this.opusPacketParse(u,m,null,o,i,null);if(e<0)return-1;for(let t=0;t<e;++t){if(i[t][0]<1)continue;if(u.getUint8(o[t][0])>>8-s||this.opusPacketGetNumChannels(u)===2&&u.getUint8(o[t][0])<<s+1>>8-s)return 1}return 0}opusPacketHasFec(u,m){if(!u||m<=0||this.opusPacketIsCeltOnly(u))return!1;const s=new Array(this.OPUS_MAX_OPUS_FRAMES),o=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let n=0;n<this.OPUS_MAX_OPUS_FRAMES;++n)s[n]=[void 0],o[n]=[void 0];if(this.opusPacketParse(u,m,null,s,o,null)<0||o[0][0]<=1)return!1;const e=this.opusNumSilkFrames(u);if(e===0)return!1;const t=this.opusPacketGetNumChannels(u);if(t!==1&&t!==2)return!1;for(let n=0;n<t;n++)if(u.getUint8(s[0][0])&128>>(n+1)*(e+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");d.default=g,g.shouldLog=!1,g.shouldReportStats=!1},aSsB:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckNetworkTCPConnectivityFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",p[p.ConnectionFailed=2]="ConnectionFailed",p[p.ICENegotiationFailed=3]="ICENegotiationFailed"})(g=d.CheckNetworkTCPConnectivityFeedback||(d.CheckNetworkTCPConnectivityFeedback={})),d.default=g},aTUL:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=h("mYvd");let p=a(class ol{compress(m,s){if(s.length>0){const e=Math.min(s.length,ol.MAX_DICTIONARY_SIZE);s=s.slice(0,e)}const o={memLevel:ol.Z_MEM_LEVEL,dictionary:s};return g.deflateRaw(m,o)}decompress(m,s){if(s.length>0){const e=Math.min(s.length,ol.MAX_DICTIONARY_SIZE);s=s.slice(0,e)}const o={to:"string",dictionary:s,chunkSize:4096};let i="";try{i=g.inflateRaw(m,o)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return i}constructor(m){this.logger=m}},"ZLIBTextCompressor");d.default=p,p.Z_MEM_LEVEL=9,p.MAX_DICTIONARY_SIZE=31744},aVV0:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("V3UW")),m=p(h("Sl5A"));let s=a(class{once(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return new u.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(i){this.parentTask=i}getStatus(){return this.status}logAndThrow(i){throw this.logger.info(i),new Error(i)}baseRun(i){return g(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case m.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case m.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case m.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=m.default.RUNNING,yield i.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==m.default.CANCELED&&(this.status=m.default.FINISHED)}})}baseCancel(i){if(this.status===m.default.CANCELED||this.status===m.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=m.default.CANCELED,i.call(this)}constructor(i){this.logger=i,this.taskName="BaseTask",this.parentTask=null,this.status=m.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");d.default=s},aZJ3:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("mlaT"));let u=a(class{info(s){}warn(s){}error(s){}debug(s){p.default.DEBUG<this.level||typeof s!="string"&&s()}setLogLevel(s){this.level=s}getLogLevel(){return this.level}constructor(s=p.default.OFF){this.level=s}},"NoOpLogger");d.default=u},aZba:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=h("XCDq"),u=g(h("papz"));let m=a(class jn{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case u.default.AudioAuthenticationRejected:case u.default.AudioCallAtCapacity:case u.default.AudioInternalServerError:case u.default.AudioServiceUnavailable:case u.default.AudioDisconnected:case u.default.VideoCallAtSourceCapacity:case u.default.SignalingBadRequest:case u.default.SignalingInternalServerError:case u.default.SignalingRequestFailed:case u.default.ICEGatheringTimeoutWorkaround:case u.default.ConnectionHealthReconnect:case u.default.RealtimeApiFailed:case u.default.TaskFailed:case u.default.NoAttendeePresent:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case u.default.Left:case u.default.AudioJoinedFromAnotherDevice:case u.default.AudioAuthenticationRejected:case u.default.AudioCallAtCapacity:case u.default.MeetingEnded:case u.default.AudioDisconnected:case u.default.TURNCredentialsForbidden:case u.default.SignalingBadRequest:case u.default.SignalingRequestFailed:case u.default.VideoCallAtSourceCapacity:case u.default.RealtimeApiFailed:case u.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case u.default.AudioAuthenticationRejected:case u.default.AudioInternalServerError:case u.default.AudioServiceUnavailable:case u.default.ICEGatheringTimeoutWorkaround:case u.default.SignalingBadRequest:case u.default.SignalingInternalServerError:case u.default.SignalingRequestFailed:case u.default.RealtimeApiFailed:case u.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case u.default.OK:return"Everything is OK so far.";case u.default.Left:return"The attendee left the meeting.";case u.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case u.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case u.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case u.default.MeetingEnded:return"The meeting ended.";case u.default.AudioInternalServerError:case u.default.AudioServiceUnavailable:case u.default.AudioDisconnected:return"The audio connection failed.";case u.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case u.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case u.default.SignalingBadRequest:case u.default.SignalingInternalServerError:case u.default.SignalingRequestFailed:return"The signaling connection failed.";case u.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case u.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case u.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case u.default.TaskFailed:return"The connection failed. See the error message for more details.";case u.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case u.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case u.default.NoAttendeePresent:return"The attendee was not present.";case u.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case u.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case u.default.AudioDisconnectAudio:return"The audio connection failed.";default:{const o=this._statusCode;throw new Error(`Unhandled case: ${o}`)}}}static fromSignalFrame(o){return o.error&&o.error.status?this.fromSignalingStatus(o.error.status):o.type===p.SdkSignalFrame.Type.AUDIO_STATUS?o.audioStatus?this.fromAudioStatus(o.audioStatus.audioStatus):new jn(u.default.SignalingRequestFailed):o.type===p.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new jn(u.default.AudioVideoWasRemovedFromPrimaryMeeting):new jn(u.default.OK)}static fromAudioStatus(o){switch(o){case 200:return new jn(u.default.OK);case 301:return new jn(u.default.AudioJoinedFromAnotherDevice);case 302:return new jn(u.default.AudioDisconnectAudio);case 403:return new jn(u.default.AudioAuthenticationRejected);case 409:return new jn(u.default.AudioCallAtCapacity);case 410:return new jn(u.default.MeetingEnded);case 411:return new jn(u.default.AudioAttendeeRemoved);case 500:return new jn(u.default.AudioInternalServerError);case 503:return new jn(u.default.AudioServiceUnavailable);default:switch(Math.floor(o/100)){case 2:return new jn(u.default.OK);default:return new jn(u.default.AudioDisconnected)}}}static fromSignalingStatus(o){switch(o){case 206:return new jn(u.default.VideoCallSwitchToViewOnly);case 509:return new jn(u.default.VideoCallAtSourceCapacity);case 403:return new jn(u.default.AudioAuthenticationRejected);case 409:return new jn(u.default.AudioCallAtCapacity);default:switch(Math.floor(o/100)){case 2:return new jn(u.default.OK);case 4:return new jn(u.default.SignalingBadRequest);case 5:return new jn(u.default.SignalingInternalServerError);default:return new jn(u.default.SignalingRequestFailed)}}}constructor(o){this._statusCode=o}},"MeetingSessionStatus");d.default=m},ac3q:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("U9CR")),u=g(h("DJNY"));let m=a(class Bd{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return u.default.semverString}static get sdkVersionSemVer(){var o,i,e,t;const n=u.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(o=n==null?void 0:n.groups)===null||o===void 0?void 0:o.major,minor:(i=n==null?void 0:n.groups)===null||i===void 0?void 0:i.minor,patch:(e=n==null?void 0:n.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=n==null?void 0:n.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return u.default.hash.substr(1)}static get sdkUserAgentLowResolution(){const o=new p.default;return`${o.name()}-${o.majorVersion()}`}static urlWithVersion(o){const i=new URL(o);return i.searchParams.append(Bd.X_AMZN_VERSION,Bd.sdkVersion),i.searchParams.append(Bd.X_AMZN_USER_AGENT,Bd.sdkUserAgentLowResolution),i.toString()}},"Versioning");d.default=m,m.X_AMZN_VERSION="X-Amzn-Version",m.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},aqWb:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"VideoSource");d.default=g},b4Ml:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.Sha256=void 0;var g=h("pU0T"),p=h("p72H"),u=h("Yugg"),m=function(){function s(o){this.toHash=new Uint8Array(0),this.secret=o,this.reset()}return a(s,"Sha256"),s.prototype.update=function(o){if(!(0,g.isEmptyData)(o)){var i=(0,g.convertToBuffer)(o),e=new Uint8Array(this.toHash.byteLength+i.byteLength);e.set(this.toHash,0),e.set(i,this.toHash.byteLength),this.toHash=e}},s.prototype.digest=function(){var o=this;return this.key?this.key.then(function(i){return(0,u.locateWindow)().crypto.subtle.sign(p.SHA_256_HMAC_ALGO,i,o.toHash).then(function(e){return new Uint8Array(e)})}):(0,g.isEmptyData)(this.toHash)?Promise.resolve(p.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,u.locateWindow)().crypto.subtle.digest(p.SHA_256_HASH,o.toHash)}).then(function(i){return Promise.resolve(new Uint8Array(i))})},s.prototype.reset=function(){var o=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(i,e){(0,u.locateWindow)().crypto.subtle.importKey("raw",(0,g.convertToBuffer)(o.secret),p.SHA_256_HMAC_ALGO,!1,["sign"]).then(i,e)}),this.key.catch(function(){}))},s}();d.Sha256=m},"bQ+R":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{equals(u){return u!==void 0&&this.mid===u.mid&&this.attendeeId===u.attendeeId&&this.streamId===u.streamId&&this.groupId===u.groupId&&this.priority===u.priority&&this.targetBitrateKbps===u.targetBitrateKbps&&this.qualityAdaptationPreference===u.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");d.default=g},bTau:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("34ho"));let u=a(class Ds{id(){return this._id}base(){return this._id?this._id.split(Ds.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const s=this._id.split(Ds.MODALITY_SEPARATOR);return s.length===2?s[1]:""}hasModality(s){return s!==""&&this.modality()===s}withModality(s){const o=new Ds(this.base()+Ds.MODALITY_SEPARATOR+s);return s===""||this.base()===""||new Ds(o._id).modality()!==s?new Ds(this.base()):o}constructor(s){this._id=s}},"DefaultModality");d.default=u,u.MODALITY_SEPARATOR=p.default.Modality[0],u.MODALITY_CONTENT=p.default.Modality.substr(1)},bVud:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g=h("4vb1");g.__exportStar(h("ntEb"),d)},beBF:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"Attendee");d.default=g},bjg3:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.ClientMetricReportDirection=void 0;var g;(function(p){p[p.UPSTREAM=0]="UPSTREAM",p[p.DOWNSTREAM=1]="DOWNSTREAM"})(g=d.ClientMetricReportDirection||(d.ClientMetricReportDirection={})),d.default=g},c41J:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={ChannelNotFound:"channel_not_found",GlobalRatelimited:"global_ratelimited",Ratelimited:"ratelimited",InternalError:"internal_error"},t=Object(s.a)("megaphone.notifications.list generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"megaphone.notifications.list",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to megaphone.notifications.list
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchermegaphoneNotificationsListFetcher",description:"megaphone.notifications.list generated fetcher"}},cKqT:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const u=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,u}constructor(u,m,s){this.fixedWaitMs=u,this.shortBackoffMs=m,this.longBackoffMs=s,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");d.default=g},cYl2:function(W,d,h){"use strict";h.r(d),h.d(d,"Deflate",function(){return bs}),h.d(d,"Inflate",function(){return Fn}),h.d(d,"constants",function(){return Os}),h.d(d,"default",function(){return ws}),h.d(d,"deflate",function(){return Es}),h.d(d,"deflateRaw",function(){return Ts}),h.d(d,"gzip",function(){return Ys}),h.d(d,"inflate",function(){return yr}),h.d(d,"inflateRaw",function(){return Cs}),h.d(d,"ungzip",function(){return Is});/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */const g=4,p=0,u=1,m=2;function s(E){let B=E.length;for(;--B>=0;)E[B]=0}a(s,"zero$1");const o=0,i=1,e=2,t=3,n=258,r=29,c=256,f=c+1+r,S=30,l=19,y=2*f+1,T=15,O=16,R=7,F=256,U=16,_=17,P=18,L=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),A=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),k=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),G=512,K=new Array((f+2)*2);s(K);const H=new Array(S*2);s(H);const X=new Array(G);s(X);const oe=new Array(n-t+1);s(oe);const le=new Array(r);s(le);const re=new Array(S);s(re);function he(E,B,w,z,V){this.static_tree=E,this.extra_bits=B,this.extra_base=w,this.elems=z,this.max_length=V,this.has_stree=E&&E.length}a(he,"StaticTreeDesc");let Pe,pe,Me;function We(E,B){this.dyn_tree=E,this.max_code=0,this.stat_desc=B}a(We,"TreeDesc");const Ae=a(E=>E<256?X[E]:X[256+(E>>>7)],"d_code"),lt=a((E,B)=>{E.pending_buf[E.pending++]=B&255,E.pending_buf[E.pending++]=B>>>8&255},"put_short"),Ne=a((E,B,w)=>{E.bi_valid>O-w?(E.bi_buf|=B<<E.bi_valid&65535,lt(E,E.bi_buf),E.bi_buf=B>>O-E.bi_valid,E.bi_valid+=w-O):(E.bi_buf|=B<<E.bi_valid&65535,E.bi_valid+=w)},"send_bits"),Xe=a((E,B,w)=>{Ne(E,w[B*2],w[B*2+1])},"send_code"),je=a((E,B)=>{let w=0;do w|=E&1,E>>>=1,w<<=1;while(--B>0);return w>>>1},"bi_reverse"),Te=a(E=>{E.bi_valid===16?(lt(E,E.bi_buf),E.bi_buf=0,E.bi_valid=0):E.bi_valid>=8&&(E.pending_buf[E.pending++]=E.bi_buf&255,E.bi_buf>>=8,E.bi_valid-=8)},"bi_flush"),At=a((E,B)=>{const w=B.dyn_tree,z=B.max_code,V=B.stat_desc.static_tree,J=B.stat_desc.has_stree,ie=B.stat_desc.extra_bits,te=B.stat_desc.extra_base,be=B.stat_desc.max_length;let q,se,at,ye,ue,_e,zt=0;for(ye=0;ye<=T;ye++)E.bl_count[ye]=0;for(w[E.heap[E.heap_max]*2+1]=0,q=E.heap_max+1;q<y;q++)se=E.heap[q],ye=w[w[se*2+1]*2+1]+1,ye>be&&(ye=be,zt++),w[se*2+1]=ye,!(se>z)&&(E.bl_count[ye]++,ue=0,se>=te&&(ue=ie[se-te]),_e=w[se*2],E.opt_len+=_e*(ye+ue),J&&(E.static_len+=_e*(V[se*2+1]+ue)));if(zt!==0){do{for(ye=be-1;E.bl_count[ye]===0;)ye--;E.bl_count[ye]--,E.bl_count[ye+1]+=2,E.bl_count[be]--,zt-=2}while(zt>0);for(ye=be;ye!==0;ye--)for(se=E.bl_count[ye];se!==0;)at=E.heap[--q],!(at>z)&&(w[at*2+1]!==ye&&(E.opt_len+=(ye-w[at*2+1])*w[at*2],w[at*2+1]=ye),se--)}},"gen_bitlen"),sn=a((E,B,w)=>{const z=new Array(T+1);let V=0,J,ie;for(J=1;J<=T;J++)z[J]=V=V+w[J-1]<<1;for(ie=0;ie<=B;ie++){let te=E[ie*2+1];te!==0&&(E[ie*2]=je(z[te]++,te))}},"gen_codes"),Dt=a(()=>{let E,B,w,z,V;const J=new Array(T+1);for(w=0,z=0;z<r-1;z++)for(le[z]=w,E=0;E<1<<L[z];E++)oe[w++]=z;for(oe[w-1]=z,V=0,z=0;z<16;z++)for(re[z]=V,E=0;E<1<<A[z];E++)X[V++]=z;for(V>>=7;z<S;z++)for(re[z]=V<<7,E=0;E<1<<A[z]-7;E++)X[256+V++]=z;for(B=0;B<=T;B++)J[B]=0;for(E=0;E<=143;)K[E*2+1]=8,E++,J[8]++;for(;E<=255;)K[E*2+1]=9,E++,J[9]++;for(;E<=279;)K[E*2+1]=7,E++,J[7]++;for(;E<=287;)K[E*2+1]=8,E++,J[8]++;for(sn(K,f+1,J),E=0;E<S;E++)H[E*2+1]=5,H[E*2]=je(E,5);Pe=new he(K,L,c+1,f,T),pe=new he(H,A,0,S,T),Me=new he(new Array(0),M,0,l,R)},"tr_static_init"),tn=a(E=>{let B;for(B=0;B<f;B++)E.dyn_ltree[B*2]=0;for(B=0;B<S;B++)E.dyn_dtree[B*2]=0;for(B=0;B<l;B++)E.bl_tree[B*2]=0;E.dyn_ltree[F*2]=1,E.opt_len=E.static_len=0,E.last_lit=E.matches=0},"init_block"),Yt=a(E=>{E.bi_valid>8?lt(E,E.bi_buf):E.bi_valid>0&&(E.pending_buf[E.pending++]=E.bi_buf),E.bi_buf=0,E.bi_valid=0},"bi_windup"),Tn=a((E,B,w,z)=>{Yt(E),z&&(lt(E,w),lt(E,~w)),E.pending_buf.set(E.window.subarray(B,B+w),E.pending),E.pending+=w},"copy_block"),Xt=a((E,B,w,z)=>{const V=B*2,J=w*2;return E[V]<E[J]||E[V]===E[J]&&z[B]<=z[w]},"smaller"),Cn=a((E,B,w)=>{const z=E.heap[w];let V=w<<1;for(;V<=E.heap_len&&(V<E.heap_len&&Xt(B,E.heap[V+1],E.heap[V],E.depth)&&V++,!Xt(B,z,E.heap[V],E.depth));)E.heap[w]=E.heap[V],w=V,V<<=1;E.heap[w]=z},"pqdownheap"),Dn=a((E,B,w)=>{let z,V,J=0,ie,te;if(E.last_lit!==0)do z=E.pending_buf[E.d_buf+J*2]<<8|E.pending_buf[E.d_buf+J*2+1],V=E.pending_buf[E.l_buf+J],J++,z===0?Xe(E,V,B):(ie=oe[V],Xe(E,ie+c+1,B),te=L[ie],te!==0&&(V-=le[ie],Ne(E,V,te)),z--,ie=Ae(z),Xe(E,ie,w),te=A[ie],te!==0&&(z-=re[ie],Ne(E,z,te)));while(J<E.last_lit);Xe(E,F,B)},"compress_block"),cn=a((E,B)=>{const w=B.dyn_tree,z=B.stat_desc.static_tree,V=B.stat_desc.has_stree,J=B.stat_desc.elems;let ie,te,be=-1,q;for(E.heap_len=0,E.heap_max=y,ie=0;ie<J;ie++)w[ie*2]!==0?(E.heap[++E.heap_len]=be=ie,E.depth[ie]=0):w[ie*2+1]=0;for(;E.heap_len<2;)q=E.heap[++E.heap_len]=be<2?++be:0,w[q*2]=1,E.depth[q]=0,E.opt_len--,V&&(E.static_len-=z[q*2+1]);for(B.max_code=be,ie=E.heap_len>>1;ie>=1;ie--)Cn(E,w,ie);q=J;do ie=E.heap[1],E.heap[1]=E.heap[E.heap_len--],Cn(E,w,1),te=E.heap[1],E.heap[--E.heap_max]=ie,E.heap[--E.heap_max]=te,w[q*2]=w[ie*2]+w[te*2],E.depth[q]=(E.depth[ie]>=E.depth[te]?E.depth[ie]:E.depth[te])+1,w[ie*2+1]=w[te*2+1]=q,E.heap[1]=q++,Cn(E,w,1);while(E.heap_len>=2);E.heap[--E.heap_max]=E.heap[1],At(E,B),sn(w,be,E.bl_count)},"build_tree"),Mn=a((E,B,w)=>{let z,V=-1,J,ie=B[0*2+1],te=0,be=7,q=4;for(ie===0&&(be=138,q=3),B[(w+1)*2+1]=65535,z=0;z<=w;z++)J=ie,ie=B[(z+1)*2+1],!(++te<be&&J===ie)&&(te<q?E.bl_tree[J*2]+=te:J!==0?(J!==V&&E.bl_tree[J*2]++,E.bl_tree[U*2]++):te<=10?E.bl_tree[_*2]++:E.bl_tree[P*2]++,te=0,V=J,ie===0?(be=138,q=3):J===ie?(be=6,q=3):(be=7,q=4))},"scan_tree"),_n=a((E,B,w)=>{let z,V=-1,J,ie=B[0*2+1],te=0,be=7,q=4;for(ie===0&&(be=138,q=3),z=0;z<=w;z++)if(J=ie,ie=B[(z+1)*2+1],!(++te<be&&J===ie)){if(te<q)do Xe(E,J,E.bl_tree);while(--te!==0);else J!==0?(J!==V&&(Xe(E,J,E.bl_tree),te--),Xe(E,U,E.bl_tree),Ne(E,te-3,2)):te<=10?(Xe(E,_,E.bl_tree),Ne(E,te-3,3)):(Xe(E,P,E.bl_tree),Ne(E,te-11,7));te=0,V=J,ie===0?(be=138,q=3):J===ie?(be=6,q=3):(be=7,q=4)}},"send_tree"),nt=a(E=>{let B;for(Mn(E,E.dyn_ltree,E.l_desc.max_code),Mn(E,E.dyn_dtree,E.d_desc.max_code),cn(E,E.bl_desc),B=l-1;B>=3&&E.bl_tree[k[B]*2+1]===0;B--);return E.opt_len+=3*(B+1)+5+5+4,B},"build_bl_tree"),$t=a((E,B,w,z)=>{let V;for(Ne(E,B-257,5),Ne(E,w-1,5),Ne(E,z-4,4),V=0;V<z;V++)Ne(E,E.bl_tree[k[V]*2+1],3);_n(E,E.dyn_ltree,B-1),_n(E,E.dyn_dtree,w-1)},"send_all_trees"),It=a(E=>{let B=4093624447,w;for(w=0;w<=31;w++,B>>>=1)if(B&1&&E.dyn_ltree[w*2]!==0)return p;if(E.dyn_ltree[9*2]!==0||E.dyn_ltree[10*2]!==0||E.dyn_ltree[13*2]!==0)return u;for(w=32;w<c;w++)if(E.dyn_ltree[w*2]!==0)return u;return p},"detect_data_type");let Fe=!1;const Rt=a(E=>{Fe||(Dt(),Fe=!0),E.l_desc=new We(E.dyn_ltree,Pe),E.d_desc=new We(E.dyn_dtree,pe),E.bl_desc=new We(E.bl_tree,Me),E.bi_buf=0,E.bi_valid=0,tn(E)},"_tr_init$1"),Qe=a((E,B,w,z)=>{Ne(E,(o<<1)+(z?1:0),3),Tn(E,B,w,!0)},"_tr_stored_block$1"),Qt=a(E=>{Ne(E,i<<1,3),Xe(E,F,K),Te(E)},"_tr_align$1"),Nn=a((E,B,w,z)=>{let V,J,ie=0;E.level>0?(E.strm.data_type===m&&(E.strm.data_type=It(E)),cn(E,E.l_desc),cn(E,E.d_desc),ie=nt(E),V=E.opt_len+3+7>>>3,J=E.static_len+3+7>>>3,J<=V&&(V=J)):V=J=w+5,w+4<=V&&B!==-1?Qe(E,B,w,z):E.strategy===g||J===V?(Ne(E,(i<<1)+(z?1:0),3),Dn(E,K,H)):(Ne(E,(e<<1)+(z?1:0),3),$t(E,E.l_desc.max_code+1,E.d_desc.max_code+1,ie+1),Dn(E,E.dyn_ltree,E.dyn_dtree)),tn(E),z&&Yt(E)},"_tr_flush_block$1"),Zt=a((E,B,w)=>(E.pending_buf[E.d_buf+E.last_lit*2]=B>>>8&255,E.pending_buf[E.d_buf+E.last_lit*2+1]=B&255,E.pending_buf[E.l_buf+E.last_lit]=w&255,E.last_lit++,B===0?E.dyn_ltree[w*2]++:(E.matches++,B--,E.dyn_ltree[(oe[w]+c+1)*2]++,E.dyn_dtree[Ae(B)*2]++),E.last_lit===E.lit_bufsize-1),"_tr_tally$1");var mn=Rt,ni=Qe,fi=Nn,di=Zt,Wn=Qt,Rn={_tr_init:mn,_tr_stored_block:ni,_tr_flush_block:fi,_tr_tally:di,_tr_align:Wn},ee=a((E,B,w,z)=>{let V=E&65535|0,J=E>>>16&65535|0,ie=0;for(;w!==0;){ie=w>2e3?2e3:w,w-=ie;do V=V+B[z++]|0,J=J+V|0;while(--ie);V%=65521,J%=65521}return V|J<<16|0},"adler32");const ae=a(()=>{let E,B=[];for(var w=0;w<256;w++){E=w;for(var z=0;z<8;z++)E=E&1?3988292384^E>>>1:E>>>1;B[w]=E}return B},"makeTable"),fe=new Uint32Array(ae());var we=a((E,B,w,z)=>{const V=fe,J=z+w;E^=-1;for(let ie=z;ie<J;ie++)E=E>>>8^V[(E^B[ie])&255];return E^-1},"crc32"),Ce={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},De={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:pt,_tr_stored_block:gt,_tr_flush_block:ct,_tr_tally:_t,_tr_align:zn}=Rn,{Z_NO_FLUSH:vn,Z_PARTIAL_FLUSH:li,Z_FULL_FLUSH:Gn,Z_FINISH:gn,Z_BLOCK:yi,Z_OK:un,Z_STREAM_END:Xn,Z_STREAM_ERROR:an,Z_DATA_ERROR:hi,Z_BUF_ERROR:xn,Z_DEFAULT_COMPRESSION:bi,Z_FILTERED:Ei,Z_HUFFMAN_ONLY:Kn,Z_RLE:Oi,Z_FIXED:Re,Z_DEFAULT_STRATEGY:Oe,Z_UNKNOWN:Et,Z_DEFLATED:it}=De,Pt=9,qt=15,Jt=8,kt=29,N=256+1+kt,Z=30,de=19,ce=2*N+1,ve=15,me=3,He=258,ke=He+me+1,$e=32,Be=42,ot=69,Kt=73,Wt=91,fn=103,on=113,hn=666,Ot=1,wn=2,Sn=3,yn=4,pi=3,In=a((E,B)=>(E.msg=Ce[B],B),"err"),ci=a(E=>(E<<1)-(E>4?9:0),"rank"),pn=a(E=>{let B=E.length;for(;--B>=0;)E[B]=0},"zero");let On=a((E,B,w)=>(B<<E.hash_shift^w)&E.hash_mask,"HASH_ZLIB");const rn=a(E=>{const B=E.state;let w=B.pending;w>E.avail_out&&(w=E.avail_out),w!==0&&(E.output.set(B.pending_buf.subarray(B.pending_out,B.pending_out+w),E.next_out),E.next_out+=w,B.pending_out+=w,E.total_out+=w,E.avail_out-=w,B.pending-=w,B.pending===0&&(B.pending_out=0))},"flush_pending"),ut=a((E,B)=>{ct(E,E.block_start>=0?E.block_start:-1,E.strstart-E.block_start,B),E.block_start=E.strstart,rn(E.strm)},"flush_block_only"),ze=a((E,B)=>{E.pending_buf[E.pending++]=B},"put_byte"),Bn=a((E,B)=>{E.pending_buf[E.pending++]=B>>>8&255,E.pending_buf[E.pending++]=B&255},"putShortMSB"),Bi=a((E,B,w,z)=>{let V=E.avail_in;return V>z&&(V=z),V===0?0:(E.avail_in-=V,B.set(E.input.subarray(E.next_in,E.next_in+V),w),E.state.wrap===1?E.adler=ee(E.adler,B,V,w):E.state.wrap===2&&(E.adler=we(E.adler,B,V,w)),E.next_in+=V,E.total_in+=V,V)},"read_buf"),Qn=a((E,B)=>{let w=E.max_chain_length,z=E.strstart,V,J,ie=E.prev_length,te=E.nice_match;const be=E.strstart>E.w_size-ke?E.strstart-(E.w_size-ke):0,q=E.window,se=E.w_mask,at=E.prev,ye=E.strstart+He;let ue=q[z+ie-1],_e=q[z+ie];E.prev_length>=E.good_match&&(w>>=2),te>E.lookahead&&(te=E.lookahead);do if(V=B,!(q[V+ie]!==_e||q[V+ie-1]!==ue||q[V]!==q[z]||q[++V]!==q[z+1])){z+=2,V++;do;while(q[++z]===q[++V]&&q[++z]===q[++V]&&q[++z]===q[++V]&&q[++z]===q[++V]&&q[++z]===q[++V]&&q[++z]===q[++V]&&q[++z]===q[++V]&&q[++z]===q[++V]&&z<ye);if(J=He-(ye-z),z=ye-He,J>ie){if(E.match_start=B,ie=J,J>=te)break;ue=q[z+ie-1],_e=q[z+ie]}}while((B=at[B&se])>be&&--w!==0);return ie<=E.lookahead?ie:E.lookahead},"longest_match"),An=a(E=>{const B=E.w_size;let w,z,V,J,ie;do{if(J=E.window_size-E.lookahead-E.strstart,E.strstart>=B+(B-ke)){E.window.set(E.window.subarray(B,B+B),0),E.match_start-=B,E.strstart-=B,E.block_start-=B,z=E.hash_size,w=z;do V=E.head[--w],E.head[w]=V>=B?V-B:0;while(--z);z=B,w=z;do V=E.prev[--w],E.prev[w]=V>=B?V-B:0;while(--z);J+=B}if(E.strm.avail_in===0)break;if(z=Bi(E.strm,E.window,E.strstart+E.lookahead,J),E.lookahead+=z,E.lookahead+E.insert>=me)for(ie=E.strstart-E.insert,E.ins_h=E.window[ie],E.ins_h=On(E,E.ins_h,E.window[ie+1]);E.insert&&(E.ins_h=On(E,E.ins_h,E.window[ie+me-1]),E.prev[ie&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=ie,ie++,E.insert--,!(E.lookahead+E.insert<me)););}while(E.lookahead<ke&&E.strm.avail_in!==0)},"fill_window"),xi=a((E,B)=>{let w=65535;for(w>E.pending_buf_size-5&&(w=E.pending_buf_size-5);;){if(E.lookahead<=1){if(An(E),E.lookahead===0&&B===vn)return Ot;if(E.lookahead===0)break}E.strstart+=E.lookahead,E.lookahead=0;const z=E.block_start+w;if((E.strstart===0||E.strstart>=z)&&(E.lookahead=E.strstart-z,E.strstart=z,ut(E,!1),E.strm.avail_out===0)||E.strstart-E.block_start>=E.w_size-ke&&(ut(E,!1),E.strm.avail_out===0))return Ot}return E.insert=0,B===gn?(ut(E,!0),E.strm.avail_out===0?Sn:yn):(E.strstart>E.block_start&&(ut(E,!1),E.strm.avail_out===0),Ot)},"deflate_stored"),Di=a((E,B)=>{let w,z;for(;;){if(E.lookahead<ke){if(An(E),E.lookahead<ke&&B===vn)return Ot;if(E.lookahead===0)break}if(w=0,E.lookahead>=me&&(E.ins_h=On(E,E.ins_h,E.window[E.strstart+me-1]),w=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),w!==0&&E.strstart-w<=E.w_size-ke&&(E.match_length=Qn(E,w)),E.match_length>=me)if(z=_t(E,E.strstart-E.match_start,E.match_length-me),E.lookahead-=E.match_length,E.match_length<=E.max_lazy_match&&E.lookahead>=me){E.match_length--;do E.strstart++,E.ins_h=On(E,E.ins_h,E.window[E.strstart+me-1]),w=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart;while(--E.match_length!==0);E.strstart++}else E.strstart+=E.match_length,E.match_length=0,E.ins_h=E.window[E.strstart],E.ins_h=On(E,E.ins_h,E.window[E.strstart+1]);else z=_t(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++;if(z&&(ut(E,!1),E.strm.avail_out===0))return Ot}return E.insert=E.strstart<me-1?E.strstart:me-1,B===gn?(ut(E,!0),E.strm.avail_out===0?Sn:yn):E.last_lit&&(ut(E,!1),E.strm.avail_out===0)?Ot:wn},"deflate_fast"),Zn=a((E,B)=>{let w,z,V;for(;;){if(E.lookahead<ke){if(An(E),E.lookahead<ke&&B===vn)return Ot;if(E.lookahead===0)break}if(w=0,E.lookahead>=me&&(E.ins_h=On(E,E.ins_h,E.window[E.strstart+me-1]),w=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),E.prev_length=E.match_length,E.prev_match=E.match_start,E.match_length=me-1,w!==0&&E.prev_length<E.max_lazy_match&&E.strstart-w<=E.w_size-ke&&(E.match_length=Qn(E,w),E.match_length<=5&&(E.strategy===Ei||E.match_length===me&&E.strstart-E.match_start>4096)&&(E.match_length=me-1)),E.prev_length>=me&&E.match_length<=E.prev_length){V=E.strstart+E.lookahead-me,z=_t(E,E.strstart-1-E.prev_match,E.prev_length-me),E.lookahead-=E.prev_length-1,E.prev_length-=2;do++E.strstart<=V&&(E.ins_h=On(E,E.ins_h,E.window[E.strstart+me-1]),w=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart);while(--E.prev_length!==0);if(E.match_available=0,E.match_length=me-1,E.strstart++,z&&(ut(E,!1),E.strm.avail_out===0))return Ot}else if(E.match_available){if(z=_t(E,0,E.window[E.strstart-1]),z&&ut(E,!1),E.strstart++,E.lookahead--,E.strm.avail_out===0)return Ot}else E.match_available=1,E.strstart++,E.lookahead--}return E.match_available&&(z=_t(E,0,E.window[E.strstart-1]),E.match_available=0),E.insert=E.strstart<me-1?E.strstart:me-1,B===gn?(ut(E,!0),E.strm.avail_out===0?Sn:yn):E.last_lit&&(ut(E,!1),E.strm.avail_out===0)?Ot:wn},"deflate_slow"),wo=a((E,B)=>{let w,z,V,J;const ie=E.window;for(;;){if(E.lookahead<=He){if(An(E),E.lookahead<=He&&B===vn)return Ot;if(E.lookahead===0)break}if(E.match_length=0,E.lookahead>=me&&E.strstart>0&&(V=E.strstart-1,z=ie[V],z===ie[++V]&&z===ie[++V]&&z===ie[++V])){J=E.strstart+He;do;while(z===ie[++V]&&z===ie[++V]&&z===ie[++V]&&z===ie[++V]&&z===ie[++V]&&z===ie[++V]&&z===ie[++V]&&z===ie[++V]&&V<J);E.match_length=He-(J-V),E.match_length>E.lookahead&&(E.match_length=E.lookahead)}if(E.match_length>=me?(w=_t(E,1,E.match_length-me),E.lookahead-=E.match_length,E.strstart+=E.match_length,E.match_length=0):(w=_t(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++),w&&(ut(E,!1),E.strm.avail_out===0))return Ot}return E.insert=0,B===gn?(ut(E,!0),E.strm.avail_out===0?Sn:yn):E.last_lit&&(ut(E,!1),E.strm.avail_out===0)?Ot:wn},"deflate_rle"),Ao=a((E,B)=>{let w;for(;;){if(E.lookahead===0&&(An(E),E.lookahead===0)){if(B===vn)return Ot;break}if(E.match_length=0,w=_t(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++,w&&(ut(E,!1),E.strm.avail_out===0))return Ot}return E.insert=0,B===gn?(ut(E,!0),E.strm.avail_out===0?Sn:yn):E.last_lit&&(ut(E,!1),E.strm.avail_out===0)?Ot:wn},"deflate_huff");function Pn(E,B,w,z,V){this.good_length=E,this.max_lazy=B,this.nice_length=w,this.max_chain=z,this.func=V}a(Pn,"Config");const mi=[new Pn(0,0,0,0,xi),new Pn(4,4,8,4,Di),new Pn(4,5,16,8,Di),new Pn(4,6,32,32,Di),new Pn(4,4,16,16,Zn),new Pn(8,16,32,32,Zn),new Pn(8,16,128,128,Zn),new Pn(8,32,128,256,Zn),new Pn(32,128,258,1024,Zn),new Pn(32,258,258,4096,Zn)],sr=a(E=>{E.window_size=2*E.w_size,pn(E.head),E.max_lazy_match=mi[E.level].max_lazy,E.good_match=mi[E.level].good_length,E.nice_match=mi[E.level].nice_length,E.max_chain_length=mi[E.level].max_chain,E.strstart=0,E.block_start=0,E.lookahead=0,E.insert=0,E.match_length=E.prev_length=me-1,E.match_available=0,E.ins_h=0},"lm_init");function Po(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=it,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(ce*2),this.dyn_dtree=new Uint16Array((2*Z+1)*2),this.bl_tree=new Uint16Array((2*de+1)*2),pn(this.dyn_ltree),pn(this.dyn_dtree),pn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ve+1),this.heap=new Uint16Array(2*N+1),pn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*N+1),pn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}a(Po,"DeflateState");const Ai=a(E=>{if(!E||!E.state)return In(E,an);E.total_in=E.total_out=0,E.data_type=Et;const B=E.state;return B.pending=0,B.pending_out=0,B.wrap<0&&(B.wrap=-B.wrap),B.status=B.wrap?Be:on,E.adler=B.wrap===2?0:1,B.last_flush=vn,pt(B),un},"deflateResetKeep"),Wi=a(E=>{const B=Ai(E);return B===un&&sr(E.state),B},"deflateReset"),Vi=a((E,B)=>!E||!E.state||E.state.wrap!==2?an:(E.state.gzhead=B,un),"deflateSetHeader"),ar=a((E,B,w,z,V,J)=>{if(!E)return an;let ie=1;if(B===bi&&(B=6),z<0?(ie=0,z=-z):z>15&&(ie=2,z-=16),V<1||V>Pt||w!==it||z<8||z>15||B<0||B>9||J<0||J>Re)return In(E,an);z===8&&(z=9);const te=new Po;return E.state=te,te.strm=E,te.wrap=ie,te.gzhead=null,te.w_bits=z,te.w_size=1<<te.w_bits,te.w_mask=te.w_size-1,te.hash_bits=V+7,te.hash_size=1<<te.hash_bits,te.hash_mask=te.hash_size-1,te.hash_shift=~~((te.hash_bits+me-1)/me),te.window=new Uint8Array(te.w_size*2),te.head=new Uint16Array(te.hash_size),te.prev=new Uint16Array(te.w_size),te.lit_bufsize=1<<V+6,te.pending_buf_size=te.lit_bufsize*4,te.pending_buf=new Uint8Array(te.pending_buf_size),te.d_buf=1*te.lit_bufsize,te.l_buf=(1+2)*te.lit_bufsize,te.level=B,te.strategy=J,te.method=w,Wi(E)},"deflateInit2"),zr=a((E,B)=>ar(E,B,it,qt,Jt,Oe),"deflateInit"),Gr=a((E,B)=>{let w,z;if(!E||!E.state||B>yi||B<0)return E?In(E,an):an;const V=E.state;if(!E.output||!E.input&&E.avail_in!==0||V.status===hn&&B!==gn)return In(E,E.avail_out===0?xn:an);V.strm=E;const J=V.last_flush;if(V.last_flush=B,V.status===Be)if(V.wrap===2)E.adler=0,ze(V,31),ze(V,139),ze(V,8),V.gzhead?(ze(V,(V.gzhead.text?1:0)+(V.gzhead.hcrc?2:0)+(V.gzhead.extra?4:0)+(V.gzhead.name?8:0)+(V.gzhead.comment?16:0)),ze(V,V.gzhead.time&255),ze(V,V.gzhead.time>>8&255),ze(V,V.gzhead.time>>16&255),ze(V,V.gzhead.time>>24&255),ze(V,V.level===9?2:V.strategy>=Kn||V.level<2?4:0),ze(V,V.gzhead.os&255),V.gzhead.extra&&V.gzhead.extra.length&&(ze(V,V.gzhead.extra.length&255),ze(V,V.gzhead.extra.length>>8&255)),V.gzhead.hcrc&&(E.adler=we(E.adler,V.pending_buf,V.pending,0)),V.gzindex=0,V.status=ot):(ze(V,0),ze(V,0),ze(V,0),ze(V,0),ze(V,0),ze(V,V.level===9?2:V.strategy>=Kn||V.level<2?4:0),ze(V,pi),V.status=on);else{let ie=it+(V.w_bits-8<<4)<<8,te=-1;V.strategy>=Kn||V.level<2?te=0:V.level<6?te=1:V.level===6?te=2:te=3,ie|=te<<6,V.strstart!==0&&(ie|=$e),ie+=31-ie%31,V.status=on,Bn(V,ie),V.strstart!==0&&(Bn(V,E.adler>>>16),Bn(V,E.adler&65535)),E.adler=1}if(V.status===ot)if(V.gzhead.extra){for(w=V.pending;V.gzindex<(V.gzhead.extra.length&65535)&&!(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>w&&(E.adler=we(E.adler,V.pending_buf,V.pending-w,w)),rn(E),w=V.pending,V.pending===V.pending_buf_size));)ze(V,V.gzhead.extra[V.gzindex]&255),V.gzindex++;V.gzhead.hcrc&&V.pending>w&&(E.adler=we(E.adler,V.pending_buf,V.pending-w,w)),V.gzindex===V.gzhead.extra.length&&(V.gzindex=0,V.status=Kt)}else V.status=Kt;if(V.status===Kt)if(V.gzhead.name){w=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>w&&(E.adler=we(E.adler,V.pending_buf,V.pending-w,w)),rn(E),w=V.pending,V.pending===V.pending_buf_size)){z=1;break}V.gzindex<V.gzhead.name.length?z=V.gzhead.name.charCodeAt(V.gzindex++)&255:z=0,ze(V,z)}while(z!==0);V.gzhead.hcrc&&V.pending>w&&(E.adler=we(E.adler,V.pending_buf,V.pending-w,w)),z===0&&(V.gzindex=0,V.status=Wt)}else V.status=Wt;if(V.status===Wt)if(V.gzhead.comment){w=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>w&&(E.adler=we(E.adler,V.pending_buf,V.pending-w,w)),rn(E),w=V.pending,V.pending===V.pending_buf_size)){z=1;break}V.gzindex<V.gzhead.comment.length?z=V.gzhead.comment.charCodeAt(V.gzindex++)&255:z=0,ze(V,z)}while(z!==0);V.gzhead.hcrc&&V.pending>w&&(E.adler=we(E.adler,V.pending_buf,V.pending-w,w)),z===0&&(V.status=fn)}else V.status=fn;if(V.status===fn&&(V.gzhead.hcrc?(V.pending+2>V.pending_buf_size&&rn(E),V.pending+2<=V.pending_buf_size&&(ze(V,E.adler&255),ze(V,E.adler>>8&255),E.adler=0,V.status=on)):V.status=on),V.pending!==0){if(rn(E),E.avail_out===0)return V.last_flush=-1,un}else if(E.avail_in===0&&ci(B)<=ci(J)&&B!==gn)return In(E,xn);if(V.status===hn&&E.avail_in!==0)return In(E,xn);if(E.avail_in!==0||V.lookahead!==0||B!==vn&&V.status!==hn){let ie=V.strategy===Kn?Ao(V,B):V.strategy===Oi?wo(V,B):mi[V.level].func(V,B);if((ie===Sn||ie===yn)&&(V.status=hn),ie===Ot||ie===Sn)return E.avail_out===0&&(V.last_flush=-1),un;if(ie===wn&&(B===li?zn(V):B!==yi&&(gt(V,0,0,!1),B===Gn&&(pn(V.head),V.lookahead===0&&(V.strstart=0,V.block_start=0,V.insert=0))),rn(E),E.avail_out===0))return V.last_flush=-1,un}return B!==gn?un:V.wrap<=0?Xn:(V.wrap===2?(ze(V,E.adler&255),ze(V,E.adler>>8&255),ze(V,E.adler>>16&255),ze(V,E.adler>>24&255),ze(V,E.total_in&255),ze(V,E.total_in>>8&255),ze(V,E.total_in>>16&255),ze(V,E.total_in>>24&255)):(Bn(V,E.adler>>>16),Bn(V,E.adler&65535)),rn(E),V.wrap>0&&(V.wrap=-V.wrap),V.pending!==0?un:Xn)},"deflate$2"),Cr=a(E=>{if(!E||!E.state)return an;const B=E.state.status;return B!==Be&&B!==ot&&B!==Kt&&B!==Wt&&B!==fn&&B!==on&&B!==hn?In(E,an):(E.state=null,B===on?In(E,hi):un)},"deflateEnd"),Kr=a((E,B)=>{let w=B.length;if(!E||!E.state)return an;const z=E.state,V=z.wrap;if(V===2||V===1&&z.status!==Be||z.lookahead)return an;if(V===1&&(E.adler=ee(E.adler,B,w,0)),z.wrap=0,w>=z.w_size){V===0&&(pn(z.head),z.strstart=0,z.block_start=0,z.insert=0);let be=new Uint8Array(z.w_size);be.set(B.subarray(w-z.w_size,w),0),B=be,w=z.w_size}const J=E.avail_in,ie=E.next_in,te=E.input;for(E.avail_in=w,E.next_in=0,E.input=B,An(z);z.lookahead>=me;){let be=z.strstart,q=z.lookahead-(me-1);do z.ins_h=On(z,z.ins_h,z.window[be+me-1]),z.prev[be&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=be,be++;while(--q);z.strstart=be,z.lookahead=me-1,An(z)}return z.strstart+=z.lookahead,z.block_start=z.strstart,z.insert=z.lookahead,z.lookahead=0,z.match_length=z.prev_length=me-1,z.match_available=0,E.next_in=ie,E.input=te,E.avail_in=J,z.wrap=V,un},"deflateSetDictionary");var $r=zr,Ir=ar,Or=Wi,Mo=Ai,wr=Vi,Ar=Gr,Ro=Cr,Jr=Kr,Yr="pako deflate (from Nodeca project)",ui={deflateInit:$r,deflateInit2:Ir,deflateReset:Or,deflateResetKeep:Mo,deflateSetHeader:wr,deflate:Ar,deflateEnd:Ro,deflateSetDictionary:Jr,deflateInfo:Yr};const Xr=a((E,B)=>Object.prototype.hasOwnProperty.call(E,B),"_has");var ko=a(function(E){const B=Array.prototype.slice.call(arguments,1);for(;B.length;){const w=B.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(const z in w)Xr(w,z)&&(E[z]=w[z])}}return E},"assign"),Qr=a(E=>{let B=0;for(let z=0,V=E.length;z<V;z++)B+=E[z].length;const w=new Uint8Array(B);for(let z=0,V=0,J=E.length;z<J;z++){let ie=E[z];w.set(ie,V),V+=ie.length}return w},"flattenChunks"),_i={assign:ko,flattenChunks:Qr};let dr=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{dr=!1}const Pi=new Uint8Array(256);for(let E=0;E<256;E++)Pi[E]=E>=252?6:E>=248?5:E>=240?4:E>=224?3:E>=192?2:1;Pi[254]=Pi[254]=1;var lr=a(E=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(E);let B,w,z,V,J,ie=E.length,te=0;for(V=0;V<ie;V++)w=E.charCodeAt(V),(w&64512)===55296&&V+1<ie&&(z=E.charCodeAt(V+1),(z&64512)===56320&&(w=65536+(w-55296<<10)+(z-56320),V++)),te+=w<128?1:w<2048?2:w<65536?3:4;for(B=new Uint8Array(te),J=0,V=0;J<te;V++)w=E.charCodeAt(V),(w&64512)===55296&&V+1<ie&&(z=E.charCodeAt(V+1),(z&64512)===56320&&(w=65536+(w-55296<<10)+(z-56320),V++)),w<128?B[J++]=w:w<2048?(B[J++]=192|w>>>6,B[J++]=128|w&63):w<65536?(B[J++]=224|w>>>12,B[J++]=128|w>>>6&63,B[J++]=128|w&63):(B[J++]=240|w>>>18,B[J++]=128|w>>>12&63,B[J++]=128|w>>>6&63,B[J++]=128|w&63);return B},"string2buf");const Do=a((E,B)=>{if(B<65534&&E.subarray&&dr)return String.fromCharCode.apply(null,E.length===B?E:E.subarray(0,B));let w="";for(let z=0;z<B;z++)w+=String.fromCharCode(E[z]);return w},"buf2binstring");var Zr=a((E,B)=>{const w=B||E.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(E.subarray(0,B));let z,V;const J=new Array(w*2);for(V=0,z=0;z<w;){let ie=E[z++];if(ie<128){J[V++]=ie;continue}let te=Pi[ie];if(te>4){J[V++]=65533,z+=te-1;continue}for(ie&=te===2?31:te===3?15:7;te>1&&z<w;)ie=ie<<6|E[z++]&63,te--;if(te>1){J[V++]=65533;continue}ie<65536?J[V++]=ie:(ie-=65536,J[V++]=55296|ie>>10&1023,J[V++]=56320|ie&1023)}return Do(J,V)},"buf2string"),qr=a((E,B)=>{B=B||E.length,B>E.length&&(B=E.length);let w=B-1;for(;w>=0&&(E[w]&192)===128;)w--;return w<0||w===0?B:w+Pi[E[w]]>B?w:B},"utf8border"),Ti={string2buf:lr,buf2string:Zr,utf8border:qr};function Pr(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}a(Pr,"ZStream");var cr=Pr;const Mi=Object.prototype.toString,{Z_NO_FLUSH:zi,Z_SYNC_FLUSH:ur,Z_FULL_FLUSH:eo,Z_FINISH:_o,Z_OK:Ri,Z_STREAM_END:Mr,Z_DEFAULT_COMPRESSION:ki,Z_DEFAULT_STRATEGY:to,Z_DEFLATED:Lo}=De;function Ci(E){this.options=_i.assign({level:ki,method:Lo,chunkSize:16384,windowBits:15,memLevel:8,strategy:to},E||{});let B=this.options;B.raw&&B.windowBits>0?B.windowBits=-B.windowBits:B.gzip&&B.windowBits>0&&B.windowBits<16&&(B.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cr,this.strm.avail_out=0;let w=ui.deflateInit2(this.strm,B.level,B.method,B.windowBits,B.memLevel,B.strategy);if(w!==Ri)throw new Error(Ce[w]);if(B.header&&ui.deflateSetHeader(this.strm,B.header),B.dictionary){let z;if(typeof B.dictionary=="string"?z=Ti.string2buf(B.dictionary):Mi.call(B.dictionary)==="[object ArrayBuffer]"?z=new Uint8Array(B.dictionary):z=B.dictionary,w=ui.deflateSetDictionary(this.strm,z),w!==Ri)throw new Error(Ce[w]);this._dict_set=!0}}a(Ci,"Deflate$1"),Ci.prototype.push=function(E,B){const w=this.strm,z=this.options.chunkSize;let V,J;if(this.ended)return!1;for(B===~~B?J=B:J=B===!0?_o:zi,typeof E=="string"?w.input=Ti.string2buf(E):Mi.call(E)==="[object ArrayBuffer]"?w.input=new Uint8Array(E):w.input=E,w.next_in=0,w.avail_in=w.input.length;;){if(w.avail_out===0&&(w.output=new Uint8Array(z),w.next_out=0,w.avail_out=z),(J===ur||J===eo)&&w.avail_out<=6){this.onData(w.output.subarray(0,w.next_out)),w.avail_out=0;continue}if(V=ui.deflate(w,J),V===Mr)return w.next_out>0&&this.onData(w.output.subarray(0,w.next_out)),V=ui.deflateEnd(this.strm),this.onEnd(V),this.ended=!0,V===Ri;if(w.avail_out===0){this.onData(w.output);continue}if(J>0&&w.next_out>0){this.onData(w.output.subarray(0,w.next_out)),w.avail_out=0;continue}if(w.avail_in===0)break}return!0},Ci.prototype.onData=function(E){this.chunks.push(E)},Ci.prototype.onEnd=function(E){E===Ri&&(this.result=_i.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg};function Hi(E,B){const w=new Ci(B);if(w.push(E,!0),w.err)throw w.msg||Ce[w.err];return w.result}a(Hi,"deflate$1");function fr(E,B){return B=B||{},B.raw=!0,Hi(E,B)}a(fr,"deflateRaw$1");function no(E,B){return B=B||{},B.gzip=!0,Hi(E,B)}a(no,"gzip$1");var No=Ci,Bo=Hi,Rr=fr,io=no,ro=De,kr={Deflate:No,deflate:Bo,deflateRaw:Rr,gzip:io,constants:ro};const Li=30,oo=12;var Gi=a(function(B,w){let z,V,J,ie,te,be,q,se,at,ye,ue,_e,zt,st,Ge,vt,tt,Se,dt,ge,Le,Ee,Tt,Ke;const Je=B.state;z=B.next_in,Tt=B.input,V=z+(B.avail_in-5),J=B.next_out,Ke=B.output,ie=J-(w-B.avail_out),te=J+(B.avail_out-257),be=Je.dmax,q=Je.wsize,se=Je.whave,at=Je.wnext,ye=Je.window,ue=Je.hold,_e=Je.bits,zt=Je.lencode,st=Je.distcode,Ge=(1<<Je.lenbits)-1,vt=(1<<Je.distbits)-1;e:do{_e<15&&(ue+=Tt[z++]<<_e,_e+=8,ue+=Tt[z++]<<_e,_e+=8),tt=zt[ue&Ge];t:for(;;){if(Se=tt>>>24,ue>>>=Se,_e-=Se,Se=tt>>>16&255,Se===0)Ke[J++]=tt&65535;else if(Se&16){dt=tt&65535,Se&=15,Se&&(_e<Se&&(ue+=Tt[z++]<<_e,_e+=8),dt+=ue&(1<<Se)-1,ue>>>=Se,_e-=Se),_e<15&&(ue+=Tt[z++]<<_e,_e+=8,ue+=Tt[z++]<<_e,_e+=8),tt=st[ue&vt];n:for(;;){if(Se=tt>>>24,ue>>>=Se,_e-=Se,Se=tt>>>16&255,Se&16){if(ge=tt&65535,Se&=15,_e<Se&&(ue+=Tt[z++]<<_e,_e+=8,_e<Se&&(ue+=Tt[z++]<<_e,_e+=8)),ge+=ue&(1<<Se)-1,ge>be){B.msg="invalid distance too far back",Je.mode=Li;break e}if(ue>>>=Se,_e-=Se,Se=J-ie,ge>Se){if(Se=ge-Se,Se>se&&Je.sane){B.msg="invalid distance too far back",Je.mode=Li;break e}if(Le=0,Ee=ye,at===0){if(Le+=q-Se,Se<dt){dt-=Se;do Ke[J++]=ye[Le++];while(--Se);Le=J-ge,Ee=Ke}}else if(at<Se){if(Le+=q+at-Se,Se-=at,Se<dt){dt-=Se;do Ke[J++]=ye[Le++];while(--Se);if(Le=0,at<dt){Se=at,dt-=Se;do Ke[J++]=ye[Le++];while(--Se);Le=J-ge,Ee=Ke}}}else if(Le+=at-Se,Se<dt){dt-=Se;do Ke[J++]=ye[Le++];while(--Se);Le=J-ge,Ee=Ke}for(;dt>2;)Ke[J++]=Ee[Le++],Ke[J++]=Ee[Le++],Ke[J++]=Ee[Le++],dt-=3;dt&&(Ke[J++]=Ee[Le++],dt>1&&(Ke[J++]=Ee[Le++]))}else{Le=J-ge;do Ke[J++]=Ke[Le++],Ke[J++]=Ke[Le++],Ke[J++]=Ke[Le++],dt-=3;while(dt>2);dt&&(Ke[J++]=Ke[Le++],dt>1&&(Ke[J++]=Ke[Le++]))}}else if(Se&64){B.msg="invalid distance code",Je.mode=Li;break e}else{tt=st[(tt&65535)+(ue&(1<<Se)-1)];continue n}break}}else if(Se&64)if(Se&32){Je.mode=oo;break e}else{B.msg="invalid literal/length code",Je.mode=Li;break e}else{tt=zt[(tt&65535)+(ue&(1<<Se)-1)];continue t}break}}while(z<V&&J<te);dt=_e>>3,z-=dt,_e-=dt<<3,ue&=(1<<_e)-1,B.next_in=z,B.next_out=J,B.avail_in=z<V?5+(V-z):5-(z-V),B.avail_out=J<te?257+(te-J):257-(J-te),Je.hold=ue,Je.bits=_e},"inflate_fast");const $n=15,Ki=852,hr=592,pr=0,$i=1,Ji=2,Dr=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),so=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),_r=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ji=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var gi=a((E,B,w,z,V,J,ie,te)=>{const be=te.bits;let q=0,se=0,at=0,ye=0,ue=0,_e=0,zt=0,st=0,Ge=0,vt=0,tt,Se,dt,ge,Le,Ee=null,Tt=0,Ke;const Je=new Uint16Array($n+1),Ii=new Uint16Array($n+1);let St=null,Xs=0,mt,Ur,br;for(q=0;q<=$n;q++)Je[q]=0;for(se=0;se<z;se++)Je[B[w+se]]++;for(ue=be,ye=$n;ye>=1&&Je[ye]===0;ye--);if(ue>ye&&(ue=ye),ye===0)return V[J++]=1<<24|64<<16|0,V[J++]=1<<24|64<<16|0,te.bits=1,0;for(at=1;at<ye&&Je[at]===0;at++);for(ue<at&&(ue=at),st=1,q=1;q<=$n;q++)if(st<<=1,st-=Je[q],st<0)return-1;if(st>0&&(E===pr||ye!==1))return-1;for(Ii[1]=0,q=1;q<$n;q++)Ii[q+1]=Ii[q]+Je[q];for(se=0;se<z;se++)B[w+se]!==0&&(ie[Ii[B[w+se]]++]=se);if(E===pr?(Ee=St=ie,Ke=19):E===$i?(Ee=Dr,Tt-=257,St=so,Xs-=257,Ke=256):(Ee=_r,St=ji,Ke=-1),vt=0,se=0,q=at,Le=J,_e=ue,zt=0,dt=-1,Ge=1<<ue,ge=Ge-1,E===$i&&Ge>Ki||E===Ji&&Ge>hr)return 1;for(;;){mt=q-zt,ie[se]<Ke?(Ur=0,br=ie[se]):ie[se]>Ke?(Ur=St[Xs+ie[se]],br=Ee[Tt+ie[se]]):(Ur=32+64,br=0),tt=1<<q-zt,Se=1<<_e,at=Se;do Se-=tt,V[Le+(vt>>zt)+Se]=mt<<24|Ur<<16|br|0;while(Se!==0);for(tt=1<<q-1;vt&tt;)tt>>=1;if(tt!==0?(vt&=tt-1,vt+=tt):vt=0,se++,--Je[q]===0){if(q===ye)break;q=B[w+ie[se]]}if(q>ue&&(vt&ge)!==dt){for(zt===0&&(zt=ue),Le+=at,_e=q-zt,st=1<<_e;_e+zt<ye&&(st-=Je[_e+zt],!(st<=0));)_e++,st<<=1;if(Ge+=1<<_e,E===$i&&Ge>Ki||E===Ji&&Ge>hr)return 1;dt=vt&ge,V[dt]=ue<<24|_e<<16|Le-J|0}}return vt!==0&&(V[Le+vt]=q-zt<<24|64<<16|0),te.bits=ue,0},"inflate_table");const lo=0,Si=1,Bs=2,{Z_FINISH:ts,Z_BLOCK:xs,Z_TREES:Yi,Z_OK:vi,Z_STREAM_END:ba,Z_NEED_DICT:Fs,Z_STREAM_ERROR:kn,Z_DATA_ERROR:xo,Z_MEM_ERROR:mr,Z_BUF_ERROR:Xi,Z_DEFLATED:ii}=De,ns=1,Fo=2,is=3,co=4,Uo=5,rs=6,os=7,ss=8,Vo=9,as=10,gr=11,Jn=12,Lr=13,Sr=14,Nr=15,uo=16,ds=17,ls=18,cs=19,vr=20,Qi=21,us=22,Br=23,Ho=24,fs=25,fo=26,ho=27,jo=28,Wo=29,Lt=30,hs=31,Ea=32,Ta=852,Us=592,Vs=15,po=a(E=>(E>>>24&255)+(E>>>8&65280)+((E&65280)<<8)+((E&255)<<24),"zswap32");function Hs(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}a(Hs,"InflateState");const ps=a(E=>{if(!E||!E.state)return kn;const B=E.state;return E.total_in=E.total_out=B.total=0,E.msg="",B.wrap&&(E.adler=B.wrap&1),B.mode=ns,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new Int32Array(Ta),B.distcode=B.distdyn=new Int32Array(Us),B.sane=1,B.back=-1,vi},"inflateResetKeep"),ms=a(E=>{if(!E||!E.state)return kn;const B=E.state;return B.wsize=0,B.whave=0,B.wnext=0,ps(E)},"inflateReset"),mo=a((E,B)=>{let w;if(!E||!E.state)return kn;const z=E.state;return B<0?(w=0,B=-B):(w=(B>>4)+1,B<48&&(B&=15)),B&&(B<8||B>15)?kn:(z.window!==null&&z.wbits!==B&&(z.window=null),z.wrap=w,z.wbits=B,ms(E))},"inflateReset2"),gs=a((E,B)=>{if(!E)return kn;const w=new Hs;E.state=w,w.window=null;const z=mo(E,B);return z!==vi&&(E.state=null),z},"inflateInit2"),Ca=a(E=>gs(E,Vs),"inflateInit");let zo=!0,Zi,xr;const js=a(E=>{if(zo){Zi=new Int32Array(512),xr=new Int32Array(32);let B=0;for(;B<144;)E.lens[B++]=8;for(;B<256;)E.lens[B++]=9;for(;B<280;)E.lens[B++]=7;for(;B<288;)E.lens[B++]=8;for(gi(Si,E.lens,0,288,Zi,0,E.work,{bits:9}),B=0;B<32;)E.lens[B++]=5;gi(Bs,E.lens,0,32,xr,0,E.work,{bits:5}),zo=!1}E.lencode=Zi,E.lenbits=9,E.distcode=xr,E.distbits=5},"fixedtables"),go=a((E,B,w,z)=>{let V;const J=E.state;return J.window===null&&(J.wsize=1<<J.wbits,J.wnext=0,J.whave=0,J.window=new Uint8Array(J.wsize)),z>=J.wsize?(J.window.set(B.subarray(w-J.wsize,w),0),J.wnext=0,J.whave=J.wsize):(V=J.wsize-J.wnext,V>z&&(V=z),J.window.set(B.subarray(w-z,w-z+V),J.wnext),z-=V,z?(J.window.set(B.subarray(w-z,w),0),J.wnext=z,J.whave=J.wsize):(J.wnext+=V,J.wnext===J.wsize&&(J.wnext=0),J.whave<J.wsize&&(J.whave+=V))),0},"updatewindow"),wt=a((E,B)=>{let w,z,V,J,ie,te,be,q,se,at,ye,ue,_e,zt,st=0,Ge,vt,tt,Se,dt,ge,Le,Ee;const Tt=new Uint8Array(4);let Ke,Je;const Ii=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return kn;w=E.state,w.mode===Jn&&(w.mode=Lr),ie=E.next_out,V=E.output,be=E.avail_out,J=E.next_in,z=E.input,te=E.avail_in,q=w.hold,se=w.bits,at=te,ye=be,Ee=vi;e:for(;;)switch(w.mode){case ns:if(w.wrap===0){w.mode=Lr;break}for(;se<16;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(w.wrap&2&&q===35615){w.check=0,Tt[0]=q&255,Tt[1]=q>>>8&255,w.check=we(w.check,Tt,2,0),q=0,se=0,w.mode=Fo;break}if(w.flags=0,w.head&&(w.head.done=!1),!(w.wrap&1)||(((q&255)<<8)+(q>>8))%31){E.msg="incorrect header check",w.mode=Lt;break}if((q&15)!==ii){E.msg="unknown compression method",w.mode=Lt;break}if(q>>>=4,se-=4,Le=(q&15)+8,w.wbits===0)w.wbits=Le;else if(Le>w.wbits){E.msg="invalid window size",w.mode=Lt;break}w.dmax=1<<w.wbits,E.adler=w.check=1,w.mode=q&512?as:Jn,q=0,se=0;break;case Fo:for(;se<16;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(w.flags=q,(w.flags&255)!==ii){E.msg="unknown compression method",w.mode=Lt;break}if(w.flags&57344){E.msg="unknown header flags set",w.mode=Lt;break}w.head&&(w.head.text=q>>8&1),w.flags&512&&(Tt[0]=q&255,Tt[1]=q>>>8&255,w.check=we(w.check,Tt,2,0)),q=0,se=0,w.mode=is;case is:for(;se<32;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}w.head&&(w.head.time=q),w.flags&512&&(Tt[0]=q&255,Tt[1]=q>>>8&255,Tt[2]=q>>>16&255,Tt[3]=q>>>24&255,w.check=we(w.check,Tt,4,0)),q=0,se=0,w.mode=co;case co:for(;se<16;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}w.head&&(w.head.xflags=q&255,w.head.os=q>>8),w.flags&512&&(Tt[0]=q&255,Tt[1]=q>>>8&255,w.check=we(w.check,Tt,2,0)),q=0,se=0,w.mode=Uo;case Uo:if(w.flags&1024){for(;se<16;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}w.length=q,w.head&&(w.head.extra_len=q),w.flags&512&&(Tt[0]=q&255,Tt[1]=q>>>8&255,w.check=we(w.check,Tt,2,0)),q=0,se=0}else w.head&&(w.head.extra=null);w.mode=rs;case rs:if(w.flags&1024&&(ue=w.length,ue>te&&(ue=te),ue&&(w.head&&(Le=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Uint8Array(w.head.extra_len)),w.head.extra.set(z.subarray(J,J+ue),Le)),w.flags&512&&(w.check=we(w.check,z,ue,J)),te-=ue,J+=ue,w.length-=ue),w.length))break e;w.length=0,w.mode=os;case os:if(w.flags&2048){if(te===0)break e;ue=0;do Le=z[J+ue++],w.head&&Le&&w.length<65536&&(w.head.name+=String.fromCharCode(Le));while(Le&&ue<te);if(w.flags&512&&(w.check=we(w.check,z,ue,J)),te-=ue,J+=ue,Le)break e}else w.head&&(w.head.name=null);w.length=0,w.mode=ss;case ss:if(w.flags&4096){if(te===0)break e;ue=0;do Le=z[J+ue++],w.head&&Le&&w.length<65536&&(w.head.comment+=String.fromCharCode(Le));while(Le&&ue<te);if(w.flags&512&&(w.check=we(w.check,z,ue,J)),te-=ue,J+=ue,Le)break e}else w.head&&(w.head.comment=null);w.mode=Vo;case Vo:if(w.flags&512){for(;se<16;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(q!==(w.check&65535)){E.msg="header crc mismatch",w.mode=Lt;break}q=0,se=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),E.adler=w.check=0,w.mode=Jn;break;case as:for(;se<32;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}E.adler=w.check=po(q),q=0,se=0,w.mode=gr;case gr:if(w.havedict===0)return E.next_out=ie,E.avail_out=be,E.next_in=J,E.avail_in=te,w.hold=q,w.bits=se,Fs;E.adler=w.check=1,w.mode=Jn;case Jn:if(B===xs||B===Yi)break e;case Lr:if(w.last){q>>>=se&7,se-=se&7,w.mode=ho;break}for(;se<3;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}switch(w.last=q&1,q>>>=1,se-=1,q&3){case 0:w.mode=Sr;break;case 1:if(js(w),w.mode=vr,B===Yi){q>>>=2,se-=2;break e}break;case 2:w.mode=ds;break;case 3:E.msg="invalid block type",w.mode=Lt}q>>>=2,se-=2;break;case Sr:for(q>>>=se&7,se-=se&7;se<32;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if((q&65535)!==(q>>>16^65535)){E.msg="invalid stored block lengths",w.mode=Lt;break}if(w.length=q&65535,q=0,se=0,w.mode=Nr,B===Yi)break e;case Nr:w.mode=uo;case uo:if(ue=w.length,ue){if(ue>te&&(ue=te),ue>be&&(ue=be),ue===0)break e;V.set(z.subarray(J,J+ue),ie),te-=ue,J+=ue,be-=ue,ie+=ue,w.length-=ue;break}w.mode=Jn;break;case ds:for(;se<14;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(w.nlen=(q&31)+257,q>>>=5,se-=5,w.ndist=(q&31)+1,q>>>=5,se-=5,w.ncode=(q&15)+4,q>>>=4,se-=4,w.nlen>286||w.ndist>30){E.msg="too many length or distance symbols",w.mode=Lt;break}w.have=0,w.mode=ls;case ls:for(;w.have<w.ncode;){for(;se<3;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}w.lens[Ii[w.have++]]=q&7,q>>>=3,se-=3}for(;w.have<19;)w.lens[Ii[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,Ke={bits:w.lenbits},Ee=gi(lo,w.lens,0,19,w.lencode,0,w.work,Ke),w.lenbits=Ke.bits,Ee){E.msg="invalid code lengths set",w.mode=Lt;break}w.have=0,w.mode=cs;case cs:for(;w.have<w.nlen+w.ndist;){for(;st=w.lencode[q&(1<<w.lenbits)-1],Ge=st>>>24,vt=st>>>16&255,tt=st&65535,!(Ge<=se);){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(tt<16)q>>>=Ge,se-=Ge,w.lens[w.have++]=tt;else{if(tt===16){for(Je=Ge+2;se<Je;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(q>>>=Ge,se-=Ge,w.have===0){E.msg="invalid bit length repeat",w.mode=Lt;break}Le=w.lens[w.have-1],ue=3+(q&3),q>>>=2,se-=2}else if(tt===17){for(Je=Ge+3;se<Je;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}q>>>=Ge,se-=Ge,Le=0,ue=3+(q&7),q>>>=3,se-=3}else{for(Je=Ge+7;se<Je;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}q>>>=Ge,se-=Ge,Le=0,ue=11+(q&127),q>>>=7,se-=7}if(w.have+ue>w.nlen+w.ndist){E.msg="invalid bit length repeat",w.mode=Lt;break}for(;ue--;)w.lens[w.have++]=Le}}if(w.mode===Lt)break;if(w.lens[256]===0){E.msg="invalid code -- missing end-of-block",w.mode=Lt;break}if(w.lenbits=9,Ke={bits:w.lenbits},Ee=gi(Si,w.lens,0,w.nlen,w.lencode,0,w.work,Ke),w.lenbits=Ke.bits,Ee){E.msg="invalid literal/lengths set",w.mode=Lt;break}if(w.distbits=6,w.distcode=w.distdyn,Ke={bits:w.distbits},Ee=gi(Bs,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,Ke),w.distbits=Ke.bits,Ee){E.msg="invalid distances set",w.mode=Lt;break}if(w.mode=vr,B===Yi)break e;case vr:w.mode=Qi;case Qi:if(te>=6&&be>=258){E.next_out=ie,E.avail_out=be,E.next_in=J,E.avail_in=te,w.hold=q,w.bits=se,Gi(E,ye),ie=E.next_out,V=E.output,be=E.avail_out,J=E.next_in,z=E.input,te=E.avail_in,q=w.hold,se=w.bits,w.mode===Jn&&(w.back=-1);break}for(w.back=0;st=w.lencode[q&(1<<w.lenbits)-1],Ge=st>>>24,vt=st>>>16&255,tt=st&65535,!(Ge<=se);){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(vt&&!(vt&240)){for(Se=Ge,dt=vt,ge=tt;st=w.lencode[ge+((q&(1<<Se+dt)-1)>>Se)],Ge=st>>>24,vt=st>>>16&255,tt=st&65535,!(Se+Ge<=se);){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}q>>>=Se,se-=Se,w.back+=Se}if(q>>>=Ge,se-=Ge,w.back+=Ge,w.length=tt,vt===0){w.mode=fo;break}if(vt&32){w.back=-1,w.mode=Jn;break}if(vt&64){E.msg="invalid literal/length code",w.mode=Lt;break}w.extra=vt&15,w.mode=us;case us:if(w.extra){for(Je=w.extra;se<Je;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}w.length+=q&(1<<w.extra)-1,q>>>=w.extra,se-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=Br;case Br:for(;st=w.distcode[q&(1<<w.distbits)-1],Ge=st>>>24,vt=st>>>16&255,tt=st&65535,!(Ge<=se);){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(!(vt&240)){for(Se=Ge,dt=vt,ge=tt;st=w.distcode[ge+((q&(1<<Se+dt)-1)>>Se)],Ge=st>>>24,vt=st>>>16&255,tt=st&65535,!(Se+Ge<=se);){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}q>>>=Se,se-=Se,w.back+=Se}if(q>>>=Ge,se-=Ge,w.back+=Ge,vt&64){E.msg="invalid distance code",w.mode=Lt;break}w.offset=tt,w.extra=vt&15,w.mode=Ho;case Ho:if(w.extra){for(Je=w.extra;se<Je;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}w.offset+=q&(1<<w.extra)-1,q>>>=w.extra,se-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){E.msg="invalid distance too far back",w.mode=Lt;break}w.mode=fs;case fs:if(be===0)break e;if(ue=ye-be,w.offset>ue){if(ue=w.offset-ue,ue>w.whave&&w.sane){E.msg="invalid distance too far back",w.mode=Lt;break}ue>w.wnext?(ue-=w.wnext,_e=w.wsize-ue):_e=w.wnext-ue,ue>w.length&&(ue=w.length),zt=w.window}else zt=V,_e=ie-w.offset,ue=w.length;ue>be&&(ue=be),be-=ue,w.length-=ue;do V[ie++]=zt[_e++];while(--ue);w.length===0&&(w.mode=Qi);break;case fo:if(be===0)break e;V[ie++]=w.length,be--,w.mode=Qi;break;case ho:if(w.wrap){for(;se<32;){if(te===0)break e;te--,q|=z[J++]<<se,se+=8}if(ye-=be,E.total_out+=ye,w.total+=ye,ye&&(E.adler=w.check=w.flags?we(w.check,V,ye,ie-ye):ee(w.check,V,ye,ie-ye)),ye=be,(w.flags?q:po(q))!==w.check){E.msg="incorrect data check",w.mode=Lt;break}q=0,se=0}w.mode=jo;case jo:if(w.wrap&&w.flags){for(;se<32;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(q!==(w.total&4294967295)){E.msg="incorrect length check",w.mode=Lt;break}q=0,se=0}w.mode=Wo;case Wo:Ee=ba;break e;case Lt:Ee=xo;break e;case hs:return mr;case Ea:default:return kn}return E.next_out=ie,E.avail_out=be,E.next_in=J,E.avail_in=te,w.hold=q,w.bits=se,(w.wsize||ye!==E.avail_out&&w.mode<Lt&&(w.mode<ho||B!==ts))&&go(E,E.output,E.next_out,ye-E.avail_out),at-=E.avail_in,ye-=E.avail_out,E.total_in+=at,E.total_out+=ye,w.total+=ye,w.wrap&&ye&&(E.adler=w.check=w.flags?we(w.check,V,ye,E.next_out-ye):ee(w.check,V,ye,E.next_out-ye)),E.data_type=w.bits+(w.last?64:0)+(w.mode===Jn?128:0)+(w.mode===vr||w.mode===Nr?256:0),(at===0&&ye===0||B===ts)&&Ee===vi&&(Ee=Xi),Ee},"inflate$2"),ft=a(E=>{if(!E||!E.state)return kn;let B=E.state;return B.window&&(B.window=null),E.state=null,vi},"inflateEnd"),Ia=a((E,B)=>{if(!E||!E.state)return kn;const w=E.state;return w.wrap&2?(w.head=B,B.done=!1,vi):kn},"inflateGetHeader"),Fd=a((E,B)=>{const w=B.length;let z,V,J;return!E||!E.state||(z=E.state,z.wrap!==0&&z.mode!==gr)?kn:z.mode===gr&&(V=1,V=ee(V,B,w,0),V!==z.check)?xo:(J=go(E,B,w,w),J?(z.mode=hs,mr):(z.havedict=1,vi))},"inflateSetDictionary");var Ws=ms,Ln=mo,Oa=ps,Ss=Ca,Go=gs,Ud=wt,zs=ft,Gs=Ia,Ks=Fd,vs="pako inflate (from Nodeca project)",qn={inflateReset:Ws,inflateReset2:Ln,inflateResetKeep:Oa,inflateInit:Ss,inflateInit2:Go,inflate:Ud,inflateEnd:zs,inflateGetHeader:Gs,inflateSetDictionary:Ks,inflateInfo:vs};function ht(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}a(ht,"GZheader");var en=ht;const xe=Object.prototype.toString,{Z_NO_FLUSH:Vd,Z_FINISH:$s,Z_OK:qi,Z_STREAM_END:So,Z_NEED_DICT:vo,Z_STREAM_ERROR:Fr,Z_DATA_ERROR:Ko,Z_MEM_ERROR:Hd}=De;function er(E){this.options=_i.assign({chunkSize:1024*64,windowBits:15,to:""},E||{});const B=this.options;B.raw&&B.windowBits>=0&&B.windowBits<16&&(B.windowBits=-B.windowBits,B.windowBits===0&&(B.windowBits=-15)),B.windowBits>=0&&B.windowBits<16&&!(E&&E.windowBits)&&(B.windowBits+=32),B.windowBits>15&&B.windowBits<48&&(B.windowBits&15||(B.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cr,this.strm.avail_out=0;let w=qn.inflateInit2(this.strm,B.windowBits);if(w!==qi)throw new Error(Ce[w]);if(this.header=new en,qn.inflateGetHeader(this.strm,this.header),B.dictionary&&(typeof B.dictionary=="string"?B.dictionary=Ti.string2buf(B.dictionary):xe.call(B.dictionary)==="[object ArrayBuffer]"&&(B.dictionary=new Uint8Array(B.dictionary)),B.raw&&(w=qn.inflateSetDictionary(this.strm,B.dictionary),w!==qi)))throw new Error(Ce[w])}a(er,"Inflate$1"),er.prototype.push=function(E,B){const w=this.strm,z=this.options.chunkSize,V=this.options.dictionary;let J,ie,te;if(this.ended)return!1;for(B===~~B?ie=B:ie=B===!0?$s:Vd,xe.call(E)==="[object ArrayBuffer]"?w.input=new Uint8Array(E):w.input=E,w.next_in=0,w.avail_in=w.input.length;;){for(w.avail_out===0&&(w.output=new Uint8Array(z),w.next_out=0,w.avail_out=z),J=qn.inflate(w,ie),J===vo&&V&&(J=qn.inflateSetDictionary(w,V),J===qi?J=qn.inflate(w,ie):J===Ko&&(J=vo));w.avail_in>0&&J===So&&w.state.wrap>0&&E[w.next_in]!==0;)qn.inflateReset(w),J=qn.inflate(w,ie);switch(J){case Fr:case Ko:case vo:case Hd:return this.onEnd(J),this.ended=!0,!1}if(te=w.avail_out,w.next_out&&(w.avail_out===0||J===So))if(this.options.to==="string"){let be=Ti.utf8border(w.output,w.next_out),q=w.next_out-be,se=Ti.buf2string(w.output,be);w.next_out=q,w.avail_out=z-q,q&&w.output.set(w.output.subarray(be,be+q),0),this.onData(se)}else this.onData(w.output.length===w.next_out?w.output:w.output.subarray(0,w.next_out));if(!(J===qi&&te===0)){if(J===So)return J=qn.inflateEnd(this.strm),this.onEnd(J),this.ended=!0,!0;if(w.avail_in===0)break}}return!0},er.prototype.onData=function(E){this.chunks.push(E)},er.prototype.onEnd=function(E){E===qi&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=_i.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg};function $o(E,B){const w=new er(B);if(w.push(E),w.err)throw w.msg||Ce[w.err];return w.result}a($o,"inflate$1");function Js(E,B){return B=B||{},B.raw=!0,$o(E,B)}a(Js,"inflateRaw$1");var jd=er,Wd=$o,zd=Js,yo=$o,wa=De,Jo={Inflate:jd,inflate:Wd,inflateRaw:zd,ungzip:yo,constants:wa};const{Deflate:Yo,deflate:Aa,deflateRaw:ys,gzip:Gd}=kr,{Inflate:Pa,inflate:Kd,inflateRaw:Ma,ungzip:$d}=Jo;var bs=Yo,Es=Aa,Ts=ys,Ys=Gd,Fn=Pa,yr=Kd,Cs=Ma,Is=$d,Os=De,ws={Deflate:bs,deflate:Es,deflateRaw:Ts,gzip:Ys,Inflate:Fn,inflate:yr,inflateRaw:Cs,ungzip:Is,constants:Os}},cZ61:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.RawSha256=void 0;var g=h("vdHl"),p=function(){function u(){this.state=Int32Array.from(g.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return a(u,"RawSha256"),u.prototype.update=function(m){if(this.finished)throw new Error("Attempted to update an already finished hash.");var s=0,o=m.byteLength;if(this.bytesHashed+=o,this.bytesHashed*8>g.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=m[s++],o--,this.bufferLength===g.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},u.prototype.digest=function(){if(!this.finished){var m=this.bytesHashed*8,s=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(s.setUint8(this.bufferLength++,128),o%g.BLOCK_SIZE>=g.BLOCK_SIZE-8){for(var i=this.bufferLength;i<g.BLOCK_SIZE;i++)s.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<g.BLOCK_SIZE-8;i++)s.setUint8(i,0);s.setUint32(g.BLOCK_SIZE-8,Math.floor(m/4294967296),!0),s.setUint32(g.BLOCK_SIZE-4,m),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(g.DIGEST_LENGTH),i=0;i<8;i++)e[i*4]=this.state[i]>>>24&255,e[i*4+1]=this.state[i]>>>16&255,e[i*4+2]=this.state[i]>>>8&255,e[i*4+3]=this.state[i]>>>0&255;return e},u.prototype.hashBuffer=function(){for(var m=this,s=m.buffer,o=m.state,i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],c=o[5],f=o[6],S=o[7],l=0;l<g.BLOCK_SIZE;l++){if(l<16)this.temp[l]=(s[l*4]&255)<<24|(s[l*4+1]&255)<<16|(s[l*4+2]&255)<<8|s[l*4+3]&255;else{var y=this.temp[l-2],T=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10;y=this.temp[l-15];var O=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;this.temp[l]=(T+this.temp[l-7]|0)+(O+this.temp[l-16]|0)}var R=(((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(r&c^~r&f)|0)+(S+(g.KEY[l]+this.temp[l]|0)|0)|0,F=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&e^i&t^e&t)|0;S=f,f=c,c=r,r=n+R|0,n=t,t=e,e=i,i=R+F|0}o[0]+=i,o[1]+=e,o[2]+=t,o[3]+=n,o[4]+=r,o[5]+=c,o[6]+=f,o[7]+=S},u}();d.RawSha256=p},cm7I:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied"},t=Object(s.a)("rooms.startTranscription generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"rooms.startTranscription",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to rooms.startTranscription
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsStartTranscriptionFetcher",description:"rooms.startTranscription generated fetcher"}},crgu:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.isDestroyable=void 0;function g(p){return p&&"destroy"in p}a(g,"isDestroyable"),d.isDestroyable=g},curu:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("hEYi")),m=h("f2XL"),s=p(h("aVV0"));let o=a(class extends s.default{run(){return g(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===u.default.ReceivedSignalFrame){if(e.message.type===m.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===m.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");d.default=o},"d/Q8":function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={TeamIneligible:"team_ineligible",TeamOnPaidPlan:"team_on_paid_plan",InvalidCampaign:"invalid_campaign",InsufficientPermissions:"insufficient_permissions",CodeTypeRedeemed:"code_type_redeemed",CodeSubtypeRedeemed:"code_subtype_redeemed",NotInExperiment:"not_in_experiment",TeamDoesntSatisfyDaysAfterReachedMessageLimitCriteria:"team_doesnt_satisfy_days_after_reached_message_limit_criteria"},t=Object(s.a)("promo.campaigns.redeem generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"promo.campaigns.redeem",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to promo.campaigns.redeem
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherpromoCampaignsRedeemFetcher",description:"promo.campaigns.redeem generated fetcher"}},dFEU:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.Sha256=void 0;var g=h("kQNw"),p=h("p72H"),u=h("f/KM"),m=h("Yugg"),s=function(){function e(t){this.secret=t,this.reset()}return a(e,"Sha256"),e.prototype.update=function(t){var n=this;(0,g.isEmptyData)(t)||(this.operation=this.operation.then(function(r){return r.onerror=function(){n.operation=Promise.reject(new Error("Error encountered updating hash"))},r.process(i(t)),r}),this.operation.catch(function(){}))},e.prototype.digest=function(){return this.operation.then(function(t){return new Promise(function(n,r){t.onerror=function(){r(new Error("Error encountered finalizing hash"))},t.oncomplete=function(){t.result&&n(new Uint8Array(t.result)),r(new Error("Error encountered finalizing hash"))},t.finish()})})},e.prototype.reset=function(){this.secret?(this.operation=o(this.secret).then(function(t){return(0,m.locateWindow)().msCrypto.subtle.sign(p.SHA_256_HMAC_ALGO,t)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,m.locateWindow)().msCrypto.subtle.digest("SHA-256"))},e}();d.Sha256=s;function o(e){return new Promise(function(t,n){var r=(0,m.locateWindow)().msCrypto.subtle.importKey("raw",i(e),p.SHA_256_HMAC_ALGO,!1,["sign"]);r.oncomplete=function(){r.result&&t(r.result),n(new Error("ImportKey completed without importing key."))},r.onerror=function(){n(new Error("ImportKey failed to import key."))}})}a(o,"getKeyPromise");function i(e){return typeof e=="string"?(0,u.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}a(i,"toArrayBufferView")},dJwD:function(W,d,h){"use strict";h.r(d),h.d(d,"__extends",function(){return p}),h.d(d,"__assign",function(){return u}),h.d(d,"__rest",function(){return m}),h.d(d,"__decorate",function(){return s}),h.d(d,"__param",function(){return o}),h.d(d,"__metadata",function(){return i}),h.d(d,"__awaiter",function(){return e}),h.d(d,"__generator",function(){return t}),h.d(d,"__createBinding",function(){return n}),h.d(d,"__exportStar",function(){return r}),h.d(d,"__values",function(){return c}),h.d(d,"__read",function(){return f}),h.d(d,"__spread",function(){return S}),h.d(d,"__spreadArrays",function(){return l}),h.d(d,"__await",function(){return y}),h.d(d,"__asyncGenerator",function(){return T}),h.d(d,"__asyncDelegator",function(){return O}),h.d(d,"__asyncValues",function(){return R}),h.d(d,"__makeTemplateObject",function(){return F}),h.d(d,"__importStar",function(){return U}),h.d(d,"__importDefault",function(){return _}),h.d(d,"__classPrivateFieldGet",function(){return P}),h.d(d,"__classPrivateFieldSet",function(){return L});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var g=a(function(A,M){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,G){k.__proto__=G}||function(k,G){for(var K in G)G.hasOwnProperty(K)&&(k[K]=G[K])},g(A,M)},"extendStatics");function p(A,M){g(A,M);function k(){this.constructor=A}a(k,"__"),A.prototype=M===null?Object.create(M):(k.prototype=M.prototype,new k)}a(p,"__extends");var u=a(function(){return u=Object.assign||a(function(M){for(var k,G=1,K=arguments.length;G<K;G++){k=arguments[G];for(var H in k)Object.prototype.hasOwnProperty.call(k,H)&&(M[H]=k[H])}return M},"__assign"),u.apply(this,arguments)},"__assign");function m(A,M){var k={};for(var G in A)Object.prototype.hasOwnProperty.call(A,G)&&M.indexOf(G)<0&&(k[G]=A[G]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,G=Object.getOwnPropertySymbols(A);K<G.length;K++)M.indexOf(G[K])<0&&Object.prototype.propertyIsEnumerable.call(A,G[K])&&(k[G[K]]=A[G[K]]);return k}a(m,"__rest");function s(A,M,k,G){var K=arguments.length,H=K<3?M:G===null?G=Object.getOwnPropertyDescriptor(M,k):G,X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(A,M,k,G);else for(var oe=A.length-1;oe>=0;oe--)(X=A[oe])&&(H=(K<3?X(H):K>3?X(M,k,H):X(M,k))||H);return K>3&&H&&Object.defineProperty(M,k,H),H}a(s,"__decorate");function o(A,M){return function(k,G){M(k,G,A)}}a(o,"__param");function i(A,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(A,M)}a(i,"__metadata");function e(A,M,k,G){function K(H){return H instanceof k?H:new k(function(X){X(H)})}return a(K,"adopt"),new(k||(k=Promise))(function(H,X){function oe(he){try{re(G.next(he))}catch(Pe){X(Pe)}}a(oe,"fulfilled");function le(he){try{re(G.throw(he))}catch(Pe){X(Pe)}}a(le,"rejected");function re(he){he.done?H(he.value):K(he.value).then(oe,le)}a(re,"step"),re((G=G.apply(A,M||[])).next())})}a(e,"__awaiter");function t(A,M){var k={label:0,sent:function(){if(H[0]&1)throw H[1];return H[1]},trys:[],ops:[]},G,K,H,X;return X={next:oe(0),throw:oe(1),return:oe(2)},typeof Symbol=="function"&&(X[Symbol.iterator]=function(){return this}),X;function oe(re){return function(he){return le([re,he])}}function le(re){if(G)throw new TypeError("Generator is already executing.");for(;k;)try{if(G=1,K&&(H=re[0]&2?K.return:re[0]?K.throw||((H=K.return)&&H.call(K),0):K.next)&&!(H=H.call(K,re[1])).done)return H;switch(K=0,H&&(re=[re[0]&2,H.value]),re[0]){case 0:case 1:H=re;break;case 4:return k.label++,{value:re[1],done:!1};case 5:k.label++,K=re[1],re=[0];continue;case 7:re=k.ops.pop(),k.trys.pop();continue;default:if(H=k.trys,!(H=H.length>0&&H[H.length-1])&&(re[0]===6||re[0]===2)){k=0;continue}if(re[0]===3&&(!H||re[1]>H[0]&&re[1]<H[3])){k.label=re[1];break}if(re[0]===6&&k.label<H[1]){k.label=H[1],H=re;break}if(H&&k.label<H[2]){k.label=H[2],k.ops.push(re);break}H[2]&&k.ops.pop(),k.trys.pop();continue}re=M.call(A,k)}catch(he){re=[6,he],K=0}finally{G=H=0}if(re[0]&5)throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}}a(t,"__generator");function n(A,M,k,G){G===void 0&&(G=k),A[G]=M[k]}a(n,"__createBinding");function r(A,M){for(var k in A)k!=="default"&&!M.hasOwnProperty(k)&&(M[k]=A[k])}a(r,"__exportStar");function c(A){var M=typeof Symbol=="function"&&Symbol.iterator,k=M&&A[M],G=0;if(k)return k.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&G>=A.length&&(A=void 0),{value:A&&A[G++],done:!A}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}a(c,"__values");function f(A,M){var k=typeof Symbol=="function"&&A[Symbol.iterator];if(!k)return A;var G=k.call(A),K,H=[],X;try{for(;(M===void 0||M-- >0)&&!(K=G.next()).done;)H.push(K.value)}catch(oe){X={error:oe}}finally{try{K&&!K.done&&(k=G.return)&&k.call(G)}finally{if(X)throw X.error}}return H}a(f,"__read");function S(){for(var A=[],M=0;M<arguments.length;M++)A=A.concat(f(arguments[M]));return A}a(S,"__spread");function l(){for(var A=0,M=0,k=arguments.length;M<k;M++)A+=arguments[M].length;for(var G=Array(A),K=0,M=0;M<k;M++)for(var H=arguments[M],X=0,oe=H.length;X<oe;X++,K++)G[K]=H[X];return G}a(l,"__spreadArrays");function y(A){return this instanceof y?(this.v=A,this):new y(A)}a(y,"__await");function T(A,M,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=k.apply(A,M||[]),K,H=[];return K={},X("next"),X("throw"),X("return"),K[Symbol.asyncIterator]=function(){return this},K;function X(pe){G[pe]&&(K[pe]=function(Me){return new Promise(function(We,Ae){H.push([pe,Me,We,Ae])>1||oe(pe,Me)})})}function oe(pe,Me){try{le(G[pe](Me))}catch(We){Pe(H[0][3],We)}}function le(pe){pe.value instanceof y?Promise.resolve(pe.value.v).then(re,he):Pe(H[0][2],pe)}function re(pe){oe("next",pe)}function he(pe){oe("throw",pe)}function Pe(pe,Me){pe(Me),H.shift(),H.length&&oe(H[0][0],H[0][1])}}a(T,"__asyncGenerator");function O(A){var M,k;return M={},G("next"),G("throw",function(K){throw K}),G("return"),M[Symbol.iterator]=function(){return this},M;function G(K,H){M[K]=A[K]?function(X){return(k=!k)?{value:y(A[K](X)),done:K==="return"}:H?H(X):X}:H}}a(O,"__asyncDelegator");function R(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=A[Symbol.asyncIterator],k;return M?M.call(A):(A=typeof c=="function"?c(A):A[Symbol.iterator](),k={},G("next"),G("throw"),G("return"),k[Symbol.asyncIterator]=function(){return this},k);function G(H){k[H]=A[H]&&function(X){return new Promise(function(oe,le){X=A[H](X),K(oe,le,X.done,X.value)})}}function K(H,X,oe,le){Promise.resolve(le).then(function(re){H({value:re,done:oe})},X)}}a(R,"__asyncValues");function F(A,M){return Object.defineProperty?Object.defineProperty(A,"raw",{value:M}):A.raw=M,A}a(F,"__makeTemplateObject");function U(A){if(A&&A.__esModule)return A;var M={};if(A!=null)for(var k in A)Object.hasOwnProperty.call(A,k)&&(M[k]=A[k]);return M.default=A,M}a(U,"__importStar");function _(A){return A&&A.__esModule?A:{default:A}}a(_,"__importDefault");function P(A,M){if(!M.has(A))throw new TypeError("attempted to get private field on non-instance");return M.get(A)}a(P,"__classPrivateFieldGet");function L(A,M,k){if(!M.has(A))throw new TypeError("attempted to set private field on non-instance");return M.set(A,k),k}a(L,"__classPrivateFieldSet")},dPBs:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.MeetingSessionLifecycleEventCondition=void 0;var g;(function(p){p[p.ConnectingNew=0]="ConnectingNew",p[p.ReconnectingExisting=1]="ReconnectingExisting",p[p.StartedNew=2]="StartedNew",p[p.StartedExisting=3]="StartedExisting",p[p.StartedAfterReconnect=4]="StartedAfterReconnect",p[p.StoppedCleanly=5]="StoppedCleanly",p[p.StoppedWithFailure=6]="StoppedWithFailure"})(g=d.MeetingSessionLifecycleEventCondition||(d.MeetingSessionLifecycleEventCondition={})),d.default=g},dPyZ:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=h("E6e8"),m=h("EX/T"),s=p(h("ac3q"));let o=a(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const n=new u.Sha256(t);return n.update(e),n.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,n,r){return g(this,void 0,void 0,function*(){const c=yield this.hmac(t,"AWS4"+e),f=yield this.hmac(n,c),S=yield this.hmac(r,f);return yield this.hmac("aws4_request",S)})}signURL(e,t,n,r,c,f,S){return g(this,void 0,void 0,function*(){const l=this.getDateTimeString(),y=this.getDateString(l),T="AWS4-HMAC-SHA256";let O="";this.chimeClient.config.region instanceof Function?O=yield this.chimeClient.config.region():O=this.chimeClient.config.region;const R="host",F="host:"+r.toLowerCase()+`
`,U=y+"/"+O+"/"+n+"/aws4_request";let _;this.chimeClient.config.credentials instanceof Function?_=yield this.chimeClient.config.credentials():_=this.chimeClient.config.credentials;let P=new Map;P.set("X-Amz-Algorithm",[T]),P.set("X-Amz-Credential",[encodeURIComponent(_.accessKeyId+"/"+U)]),P.set("X-Amz-Date",[l]),P.set("X-Amz-Expires",["10"]),P.set("X-Amz-SignedHeaders",["host"]),_.sessionToken&&P.set("X-Amz-Security-Token",[encodeURIComponent(_.sessionToken)]),P.set(s.default.X_AMZN_VERSION,[encodeURIComponent(s.default.sdkVersion)]),P.set(s.default.X_AMZN_USER_AGENT,[encodeURIComponent(s.default.sdkUserAgentLowResolution)]),S==null||S.forEach((X,oe)=>{const le=encodeURIComponent(oe);X.sort().forEach(re=>{P.has(le)||P.set(le,[]),P.get(le).push(encodeURIComponent(re))})});let L="";P=new Map([...P.entries()].sort()),P.forEach((X,oe)=>{X.forEach(le=>{L.length&&(L+="&"),L+=oe+"="+le})});const A=e+`
`+c+`
`+L+`
`+F+`
`+R+`
`+m.toHex(yield this.hmac(f)),M=m.toHex(yield this.hmac(A)),k=`AWS4-HMAC-SHA256
`+l+`
`+y+"/"+O+"/"+n+`/aws4_request
`+M,G=yield this.getSignatureKey(_.secretAccessKey,y,O,n),K=m.toHex(yield this.hmac(k,G)),H=L+"&X-Amz-Signature="+K;return t+"://"+r+c+"?"+H})}constructor(e){this.chimeClient=e}},"DefaultSigV4");d.default=o},"dWP+":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.isVideoTransformDevice=void 0;function g(p){return!!p&&typeof p=="object"&&"transformStream"in p&&"stop"in p&&"intrinsicDevice"in p}a(g,"isVideoTransformDevice"),d.isVideoTransformDevice=g},dWQL:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{equals(u){return this.videoWidth===u.videoWidth&&this.videoHeight===u.videoHeight&&this.videoFrameRate===u.videoFrameRate}constructor(u,m,s){this.videoWidth=u,this.videoHeight=m,this.videoFrameRate=s}},"VideoQualitySettings");d.default=g,g.VideoDisabled=new g(0,0,0),g.VideoResolutionHD=new g(1280,720,30),g.VideoResolutionFHD=new g(1920,1080,30),g.VideoResolutionUHD=new g(3840,2160,30)},da6e:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=h("Aplu");let p=a(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(m){m===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):m<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(m,s,o){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",s),this.statsCollector.logLatency("ping_pong_clock_skew",o),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(m){let s=0,o=0;const i=m.getObservableMetrics(),e=i.audioPacketsReceived,t=i.audioPacketsReceivedFractionLoss,n=i.audioSpeakerDelayMs;typeof n=="number"&&!isNaN(n)&&this.connectionHealthData.setAudioSpeakerDelayMs(n);const r=m.getRTCStatsReport();let c=0;r.forEach(S=>{S.type==="candidate-pair"&&S.packetsReceived&&(c+=S.packetsReceived)});const f=c-this.lastTotalPacketsReceived;if(this.lastTotalPacketsReceived=c,typeof e=="number"&&typeof t=="number"){if(s=e,o=t,s<0||o<0||f<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,s),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,o),f>0?(this.hasSeenValidPacketMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidPacketMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(s===0||o>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof i.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(i.audioPacketsSent),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(m){m>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}addToMinuteWindow(m,s){m.unshift(s),m.length>60&&m.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(m=>{g.Maybe.of(m.connectionHealthDidChange).map(s=>s.bind(m)(this.connectionHealthData.clone()))})}constructor(m,s,o,i,e){this.audioVideoController=m,this.realtimeController=s,this.connectionHealthData=o,this.pingPong=i,this.statsCollector=e,this.isActive=!1,this.hasSeenValidPacketMetricsBefore=!1,this.lastTotalPacketsReceived=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");d.default=p},dazq:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");d.default=g},dhcM:function(W,d,h){"use strict";var g=h("FLqD"),p=h("kt0j"),u=Object(p.a)(function(m,s,o,i){Object(g.a)(m,s,o,i)});d.a=u},dmnA:function(W,d,h){"use strict";W.exports=h("fCza")},duQQ:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.isMsWindow=void 0;var g=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function p(m){return"MSInputMethodContext"in m&&"msCrypto"in m}a(p,"quacksLikeAnMsWindow");function u(m){if(p(m)&&m.msCrypto.subtle!==void 0){var s=m.msCrypto,o=s.getRandomValues,i=s.subtle;return g.map(function(e){return i[e]}).concat(o).every(function(e){return typeof e=="function"})}return!1}a(u,"isMsWindow"),d.isMsWindow=u},"e/M0":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("j+uH"));let u=a(class extends p.default{run(){return this.fn().then(()=>{})}constructor(s,o,i="RunnableTask"){super(s),this.fn=o,this.taskName=i}},"RunnableTask");d.default=u},"e/ca":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("uctb"));let u=a(class{info(s){this.log(p.default.INFO,s)}warn(s){this.log(p.default.WARN,s)}error(s){this.log(p.default.ERROR,s)}debug(s){p.default.DEBUG<this.level||(typeof s=="string"?this.log(p.default.DEBUG,s):s?this.log(p.default.DEBUG,s()):this.log(p.default.DEBUG,""+s))}setLogLevel(s){this.level=s}getLogLevel(){return this.level}log(s,o){if(s<this.level)return;const e=`${new Date().toISOString()} [${p.default[s]}] ${this.name} - ${o}`;switch(s){case p.default.ERROR:console.error(e);break;case p.default.WARN:console.warn(e);break;case p.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case p.default.INFO:console.info(e);break}}constructor(s,o=p.default.WARN){this.name=s,this.level=o}},"ConsoleLogger");d.default=u},"e/nb":function(W,d,h){"use strict";h.r(d),h.d(d,"__extends",function(){return p}),h.d(d,"__assign",function(){return u}),h.d(d,"__rest",function(){return m}),h.d(d,"__decorate",function(){return s}),h.d(d,"__param",function(){return o}),h.d(d,"__metadata",function(){return i}),h.d(d,"__awaiter",function(){return e}),h.d(d,"__generator",function(){return t}),h.d(d,"__createBinding",function(){return n}),h.d(d,"__exportStar",function(){return r}),h.d(d,"__values",function(){return c}),h.d(d,"__read",function(){return f}),h.d(d,"__spread",function(){return S}),h.d(d,"__spreadArrays",function(){return l}),h.d(d,"__await",function(){return y}),h.d(d,"__asyncGenerator",function(){return T}),h.d(d,"__asyncDelegator",function(){return O}),h.d(d,"__asyncValues",function(){return R}),h.d(d,"__makeTemplateObject",function(){return F}),h.d(d,"__importStar",function(){return U}),h.d(d,"__importDefault",function(){return _}),h.d(d,"__classPrivateFieldGet",function(){return P}),h.d(d,"__classPrivateFieldSet",function(){return L});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var g=a(function(A,M){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,G){k.__proto__=G}||function(k,G){for(var K in G)G.hasOwnProperty(K)&&(k[K]=G[K])},g(A,M)},"extendStatics");function p(A,M){g(A,M);function k(){this.constructor=A}a(k,"__"),A.prototype=M===null?Object.create(M):(k.prototype=M.prototype,new k)}a(p,"__extends");var u=a(function(){return u=Object.assign||a(function(M){for(var k,G=1,K=arguments.length;G<K;G++){k=arguments[G];for(var H in k)Object.prototype.hasOwnProperty.call(k,H)&&(M[H]=k[H])}return M},"__assign"),u.apply(this,arguments)},"__assign");function m(A,M){var k={};for(var G in A)Object.prototype.hasOwnProperty.call(A,G)&&M.indexOf(G)<0&&(k[G]=A[G]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,G=Object.getOwnPropertySymbols(A);K<G.length;K++)M.indexOf(G[K])<0&&Object.prototype.propertyIsEnumerable.call(A,G[K])&&(k[G[K]]=A[G[K]]);return k}a(m,"__rest");function s(A,M,k,G){var K=arguments.length,H=K<3?M:G===null?G=Object.getOwnPropertyDescriptor(M,k):G,X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(A,M,k,G);else for(var oe=A.length-1;oe>=0;oe--)(X=A[oe])&&(H=(K<3?X(H):K>3?X(M,k,H):X(M,k))||H);return K>3&&H&&Object.defineProperty(M,k,H),H}a(s,"__decorate");function o(A,M){return function(k,G){M(k,G,A)}}a(o,"__param");function i(A,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(A,M)}a(i,"__metadata");function e(A,M,k,G){function K(H){return H instanceof k?H:new k(function(X){X(H)})}return a(K,"adopt"),new(k||(k=Promise))(function(H,X){function oe(he){try{re(G.next(he))}catch(Pe){X(Pe)}}a(oe,"fulfilled");function le(he){try{re(G.throw(he))}catch(Pe){X(Pe)}}a(le,"rejected");function re(he){he.done?H(he.value):K(he.value).then(oe,le)}a(re,"step"),re((G=G.apply(A,M||[])).next())})}a(e,"__awaiter");function t(A,M){var k={label:0,sent:function(){if(H[0]&1)throw H[1];return H[1]},trys:[],ops:[]},G,K,H,X;return X={next:oe(0),throw:oe(1),return:oe(2)},typeof Symbol=="function"&&(X[Symbol.iterator]=function(){return this}),X;function oe(re){return function(he){return le([re,he])}}function le(re){if(G)throw new TypeError("Generator is already executing.");for(;k;)try{if(G=1,K&&(H=re[0]&2?K.return:re[0]?K.throw||((H=K.return)&&H.call(K),0):K.next)&&!(H=H.call(K,re[1])).done)return H;switch(K=0,H&&(re=[re[0]&2,H.value]),re[0]){case 0:case 1:H=re;break;case 4:return k.label++,{value:re[1],done:!1};case 5:k.label++,K=re[1],re=[0];continue;case 7:re=k.ops.pop(),k.trys.pop();continue;default:if(H=k.trys,!(H=H.length>0&&H[H.length-1])&&(re[0]===6||re[0]===2)){k=0;continue}if(re[0]===3&&(!H||re[1]>H[0]&&re[1]<H[3])){k.label=re[1];break}if(re[0]===6&&k.label<H[1]){k.label=H[1],H=re;break}if(H&&k.label<H[2]){k.label=H[2],k.ops.push(re);break}H[2]&&k.ops.pop(),k.trys.pop();continue}re=M.call(A,k)}catch(he){re=[6,he],K=0}finally{G=H=0}if(re[0]&5)throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}}a(t,"__generator");function n(A,M,k,G){G===void 0&&(G=k),A[G]=M[k]}a(n,"__createBinding");function r(A,M){for(var k in A)k!=="default"&&!M.hasOwnProperty(k)&&(M[k]=A[k])}a(r,"__exportStar");function c(A){var M=typeof Symbol=="function"&&Symbol.iterator,k=M&&A[M],G=0;if(k)return k.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&G>=A.length&&(A=void 0),{value:A&&A[G++],done:!A}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}a(c,"__values");function f(A,M){var k=typeof Symbol=="function"&&A[Symbol.iterator];if(!k)return A;var G=k.call(A),K,H=[],X;try{for(;(M===void 0||M-- >0)&&!(K=G.next()).done;)H.push(K.value)}catch(oe){X={error:oe}}finally{try{K&&!K.done&&(k=G.return)&&k.call(G)}finally{if(X)throw X.error}}return H}a(f,"__read");function S(){for(var A=[],M=0;M<arguments.length;M++)A=A.concat(f(arguments[M]));return A}a(S,"__spread");function l(){for(var A=0,M=0,k=arguments.length;M<k;M++)A+=arguments[M].length;for(var G=Array(A),K=0,M=0;M<k;M++)for(var H=arguments[M],X=0,oe=H.length;X<oe;X++,K++)G[K]=H[X];return G}a(l,"__spreadArrays");function y(A){return this instanceof y?(this.v=A,this):new y(A)}a(y,"__await");function T(A,M,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=k.apply(A,M||[]),K,H=[];return K={},X("next"),X("throw"),X("return"),K[Symbol.asyncIterator]=function(){return this},K;function X(pe){G[pe]&&(K[pe]=function(Me){return new Promise(function(We,Ae){H.push([pe,Me,We,Ae])>1||oe(pe,Me)})})}function oe(pe,Me){try{le(G[pe](Me))}catch(We){Pe(H[0][3],We)}}function le(pe){pe.value instanceof y?Promise.resolve(pe.value.v).then(re,he):Pe(H[0][2],pe)}function re(pe){oe("next",pe)}function he(pe){oe("throw",pe)}function Pe(pe,Me){pe(Me),H.shift(),H.length&&oe(H[0][0],H[0][1])}}a(T,"__asyncGenerator");function O(A){var M,k;return M={},G("next"),G("throw",function(K){throw K}),G("return"),M[Symbol.iterator]=function(){return this},M;function G(K,H){M[K]=A[K]?function(X){return(k=!k)?{value:y(A[K](X)),done:K==="return"}:H?H(X):X}:H}}a(O,"__asyncDelegator");function R(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=A[Symbol.asyncIterator],k;return M?M.call(A):(A=typeof c=="function"?c(A):A[Symbol.iterator](),k={},G("next"),G("throw"),G("return"),k[Symbol.asyncIterator]=function(){return this},k);function G(H){k[H]=A[H]&&function(X){return new Promise(function(oe,le){X=A[H](X),K(oe,le,X.done,X.value)})}}function K(H,X,oe,le){Promise.resolve(le).then(function(re){H({value:re,done:oe})},X)}}a(R,"__asyncValues");function F(A,M){return Object.defineProperty?Object.defineProperty(A,"raw",{value:M}):A.raw=M,A}a(F,"__makeTemplateObject");function U(A){if(A&&A.__esModule)return A;var M={};if(A!=null)for(var k in A)Object.hasOwnProperty.call(A,k)&&(M[k]=A[k]);return M.default=A,M}a(U,"__importStar");function _(A){return A&&A.__esModule?A:{default:A}}a(_,"__importDefault");function P(A,M){if(!M.has(A))throw new TypeError("attempted to get private field on non-instance");return M.get(A)}a(P,"__classPrivateFieldGet");function L(A,M,k){if(!M.has(A))throw new TypeError("attempted to set private field on non-instance");return M.set(A,k),k}a(L,"__classPrivateFieldSet")},e0ae:function(W,d,h){"use strict";h.r(d),function(g){h.d(d,"BrowserInfo",function(){return u}),h.d(d,"NodeInfo",function(){return m}),h.d(d,"SearchBotDeviceInfo",function(){return s}),h.d(d,"BotInfo",function(){return o}),h.d(d,"ReactNativeInfo",function(){return i}),h.d(d,"detect",function(){return f}),h.d(d,"browserName",function(){return l}),h.d(d,"parseUserAgent",function(){return y}),h.d(d,"detectOS",function(){return T}),h.d(d,"getNodeVersion",function(){return O});var p=function(F,U,_){if(_||arguments.length===2)for(var P=0,L=U.length,A;P<L;P++)(A||!(P in U))&&(A||(A=Array.prototype.slice.call(U,0,P)),A[P]=U[P]);return F.concat(A||Array.prototype.slice.call(U))},u=function(){function F(U,_,P){this.name=U,this.version=_,this.os=P,this.type="browser"}return a(F,"BrowserInfo"),F}(),m=function(){function F(U){this.version=U,this.type="node",this.name="node",this.os=g.platform}return a(F,"NodeInfo"),F}(),s=function(){function F(U,_,P,L){this.name=U,this.version=_,this.os=P,this.bot=L,this.type="bot-device"}return a(F,"SearchBotDeviceInfo"),F}(),o=function(){function F(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return a(F,"BotInfo"),F}(),i=function(){function F(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return a(F,"ReactNativeInfo"),F}(),e=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,t=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,n=3,r=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",e]],c=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function f(F){return F?y(F):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new i:typeof navigator<"u"?y(navigator.userAgent):O()}a(f,"detect");function S(F){return F!==""&&r.reduce(function(U,_){var P=_[0],L=_[1];if(U)return U;var A=L.exec(F);return!!A&&[P,A]},!1)}a(S,"matchUserAgent");function l(F){var U=S(F);return U?U[0]:null}a(l,"browserName");function y(F){var U=S(F);if(!U)return null;var _=U[0],P=U[1];if(_==="searchbot")return new o;var L=P[1]&&P[1].split(".").join("_").split("_").slice(0,3);L?L.length<n&&(L=p(p([],L,!0),R(n-L.length),!0)):L=[];var A=L.join("."),M=T(F),k=t.exec(F);return k&&k[1]?new s(_,A,M,k[1]):new u(_,A,M)}a(y,"parseUserAgent");function T(F){for(var U=0,_=c.length;U<_;U++){var P=c[U],L=P[0],A=P[1],M=A.exec(F);if(M)return L}return null}a(T,"detectOS");function O(){var F=typeof g<"u"&&g.version;return F?new m(g.version.slice(1)):null}a(O,"getNodeVersion");function R(F){for(var U=[],_=0;_<F;_++)U.push("0");return U}a(R,"createVersionParts")}.call(this,h("8oxB"))},e2MG:function(W,d,h){"use strict";(function(g){var p=this&&this.__awaiter||function(e,t,n,r){function c(f){return f instanceof n?f:new n(function(S){S(f)})}return a(c,"adopt"),new(n||(n=Promise))(function(f,S){function l(O){try{T(r.next(O))}catch(R){S(R)}}a(l,"fulfilled");function y(O){try{T(r.throw(O))}catch(R){S(R)}}a(y,"rejected");function T(O){O.done?f(O.value):c(O.value).then(l,y)}a(T,"step"),T((r=r.apply(e,t||[])).next())})},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0});const m=u(h("8wPz")),s=u(h("91j7")),o=u(h("uctb"));let i=a(class tc{addEventListener(){!this.eventListener||!("window"in g)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in g)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(t){o.default.DEBUG<this.logLevel||(typeof t=="string"?this.log(o.default.DEBUG,t):t?this.log(o.default.DEBUG,t()):this.log(o.default.DEBUG,""+t))}info(t){this.log(o.default.INFO,t)}warn(t){this.log(o.default.WARN,t)}error(t){this.log(o.default.ERROR,t)}setLogLevel(t){this.logLevel=t}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new m.default(this.intervalMs),this.intervalScheduler.start(()=>p(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const t=this.logCapture.slice(0,this.batchSize),n=this.makeRequestBody(t);try{(yield fetch(this.url,Object.assign({method:"POST",body:n},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(t.length))}catch(r){console.warn("[POSTLogger] "+r.message)}finally{this.lock=!1}}))}stop(){var t;(t=this.intervalScheduler)===null||t===void 0||t.stop(),this.intervalScheduler=void 0,this.removeEventListener();const n=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,n)}destroy(){return p(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(t){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:t}))}log(t,n){if(t<this.logLevel)return;const r=Date.now();this.logCapture.push(new s.default(this.sequenceNumber,n,r,o.default[t])),this.sequenceNumber+=1}constructor(t){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:n,batchSize:r=tc.BATCH_SIZE,intervalMs:c=tc.INTERVAL_MS,logLevel:f=o.default.WARN,metadata:S,headers:l}=t;this.url=n,this.batchSize=r,this.intervalMs=c,this.logLevel=f,this.metadata=S,this.headers=l,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");d.default=i,i.BATCH_SIZE=85,i.INTERVAL_MS=2e3}).call(this,h("yLpj"))},eFki:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("Xv43")),m=p(h("h8NR")),s=15;let o=a(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?s:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return g(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return g(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const n=new u.default(this.canvasInput);this.sourceBuffers.push(n),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,n=new m.default){this.logger=e,this.stages=t,this.fr=s,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=r=>g(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const c=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let f=[];f.push(this.sourceBuffers[0]);try{for(const F of this.processors)f=yield F.process(f)}catch{this.forEachObserver(U=>{U.processingDidFailToStart&&U.processingDidFailToStart()});return}this.destBuffers=f;let S;try{S=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(U=>{U.processingDidFailToStart&&U.processingDidFailToStart()}));return}const l=S.width,y=S.height;l!==0&&y!==0&&(this.canvasOutput.width!==l&&this.canvasOutput.height!==y&&(this.canvasOutput.width=l,this.canvasOutput.height=y),this.outputCtx.drawImage(S,0,0,l,y,0,0,l,y),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(F=>{F.processingDidStart&&F.processingDidStart()})));const T=performance.now()-c,O=1e3*2/this.framerate-T,R=Math.max(0,1e3/this.framerate-T);O<=0&&this.forEachObserver(F=>{F.processingLatencyTooHigh&&F.processingLatencyTooHigh(T)}),yield this.timer.start(R,this.process.bind(this))}),this.timer=n}},"DefaultVideoFrameProcessorPipeline");d.default=o},eP7z:function(W,d,h){"use strict";function g(p,u){return p<u}a(g,"baseLt"),d.a=g},eWGP:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(n,r,c,f){function S(l){return l instanceof c?l:new c(function(y){y(l)})}return a(S,"adopt"),new(c||(c=Promise))(function(l,y){function T(F){try{R(f.next(F))}catch(U){y(U)}}a(T,"fulfilled");function O(F){try{R(f.throw(F))}catch(U){y(U)}}a(O,"rejected");function R(F){F.done?l(F.value):S(F.value).then(T,O)}a(R,"step"),R((f=f.apply(n,r||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(d,"__esModule",{value:!0}),d.VoiceFocusDeviceTransformer=void 0;const u=h("sudc"),m=h("VCUZ"),s=p(h("ac3q")),o=p(h("725M")),i=p(h("aMTh")),e=p(h("1ZHK"));let t=a(class Io{static isSupported(r,c){var f,S;const l=Io.defaultFetchBehavior(),y=c!=null&&c.logger?new o.default(c.logger):void 0,T={fetchBehavior:l,logger:y};if(m.isIFramed()){if((c==null?void 0:c.allowIFrame)===!1)return(f=c==null?void 0:c.logger)===null||f===void 0||f.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(S=c==null?void 0:c.logger)===null||S===void 0||S.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return u.VoiceFocus.isSupported(Io.augmentSpec(r),T)}static create(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;var y,T,O;return g(this,void 0,void 0,function*(){S&&S.Meeting.Meeting&&(S=S.Meeting);const R=((O=(T=(y=S==null?void 0:S.Meeting)===null||y===void 0?void 0:y.MeetingFeatures)===null||T===void 0?void 0:T.Audio)===null||O===void 0?void 0:O.EchoReduction)==="AVAILABLE",F=f&&f.supported===!0&&f.model.name==="ns_es"&&!R,U=r.name==="ns_es"&&!R;if(F||U)throw new Error("Echo Reduction requested but not enabled.");const _=new Io(r,c,f);return yield _.init(),_})}static configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return g(this,void 0,void 0,function*(){return new Io(r,c,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(r,c){return g(this,void 0,void 0,function*(){if(this.supported)try{const[S,l]=yield this.allocateVoiceFocus(!0),y=Object.assign(Object.assign({},c),{es:this.spec.name==="ns_es"});return new i.default(r,S,l,y)}catch{return}})}static destroyVoiceFocus(r){var c;return g(this,void 0,void 0,function*(){(c=r==null?void 0:r.vf)===null||c===void 0||c.destroy()})}static augmentSpec(r){return!r||!r.assetGroup&&!r.revisionID?Object.assign(Object.assign({},r),{assetGroup:Io.currentSDKAssetGroup()}):r}configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return g(this,void 0,void 0,function*(){const c={fetchBehavior:this.fetchBehavior,preResolve:r,logger:this.vfLogger};return u.VoiceFocus.configure(this.spec,c)})}init(){var r;return g(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const c=yield this.configuration;if(!c.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(c,this.preload);try{yield this.pendingVoiceFocus}catch(f){(r=this.logger)===null||r===void 0||r.error(`Unable to initialize Amazon Voice Focus: ${f}`),this.supported=!1}})}createVoiceFocus(r,c){return g(this,void 0,void 0,function*(){const f=new e.default;return this.vf=yield u.VoiceFocus.init(r,{delegate:f,preload:c,logger:this.vfLogger}),[this.vf,f]})}allocateVoiceFocus(r){return g(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const c=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,c}return this.createVoiceFocus(yield this.configuration,r)})}static majorVersion(){return s.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return s.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const r=this.majorVersion();return r?`sdk-${r}`:"stable-v1"}static defaultFetchBehavior(){const r=Io.majorMinorVersion()||"unknown",c=s.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(r)}&ua=${encodeURIComponent(c)}`}}constructor(r,{preload:c=!0,logger:f,fetchBehavior:S=Io.defaultFetchBehavior()},l){this.spec=r,this.supported=!0,this.logger=f,this.vfLogger=f?new o.default(f):void 0,this.preload=c,this.fetchBehavior=S,this.spec=Io.augmentSpec(this.spec),l&&(this.configuration=Promise.resolve(l))}},"VoiceFocusDeviceTransformer");d.VoiceFocusDeviceTransformer=t,d.default=t},eeAN:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.uint32ArrayFrom=void 0;function g(p){if(!Uint32Array.from){for(var u=new Uint32Array(p.length),m=0;m<p.length;)u[m]=p[m],m+=1;return u}return Uint32Array.from(p)}a(g,"uint32ArrayFrom"),d.uint32ArrayFrom=g},eeYi:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(c,f,S,l){function y(T){return T instanceof S?T:new S(function(O){O(T)})}return a(y,"adopt"),new(S||(S=Promise))(function(T,O){function R(_){try{U(l.next(_))}catch(P){O(P)}}a(R,"fulfilled");function F(_){try{U(l.throw(_))}catch(P){O(P)}}a(F,"rejected");function U(_){_.done?T(_.value):y(_.value).then(R,F)}a(U,"step"),U((l=l.apply(c,f||[])).next())})},p=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(d,"__esModule",{value:!0});const u=h("K4CH"),m=h("rwhO"),s=p(h("Y2s1")),o=p(h("MFJ1")),i=p(h("hAj8")),e=p(h("6/h7")),t=p(h("59sL")),n=p(h("7H4U"));let r=a(class _s{addObserver(f){this.observerSet.add(f)}removeObserver(f){this.observerSet.delete(f)}forEachObserver(f){for(const S of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(S)&&f(S)})}publishEvent(f,S){return g(this,void 0,void 0,function*(){const l=Date.now();this.meetingHistoryStates.push({name:f,timestampMs:l});const y=Object.freeze(Object.assign(this.getAttributes(l),S));this.forEachObserver(T=>{T.eventDidReceive(f,y)}),this.reportEvent(f,l,S)})}reportEvent(f,S,l){var y;return g(this,void 0,void 0,function*(){let T;try{l&&(T=n.default(l)),yield(y=this.eventReporter)===null||y===void 0?void 0:y.reportEvent(S,f,T)}catch(O){this.logger.error(`Error reporting event ${O}`)}})}setupEventReporter(f,S,l){if(l)this._eventReporter=l;else if(f.urls){const y=f.urls.eventIngestionURL;if(y){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:T,credentials:{attendeeId:O,joinToken:R}}=f,F=new i.default(T,O,R),U=new s.default(F,y);this._eventReporter=new o.default(U,S)}}}getAttributes(f){var S,l;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((S=this.parserResult)===null||S===void 0?void 0:S.os.name)||_s.UNAVAILABLE,osVersion:((l=this.parserResult)===null||l===void 0?void 0:l.os.version)||_s.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:f}}get eventReporter(){return this._eventReporter}destroy(){return g(this,void 0,void 0,function*(){m.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(f,S,l){var y,T,O,R,F,U,_;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=S,this.configuration=f,this.setupEventReporter(f,S,l);try{this.parserResult=navigator&&navigator.userAgent?new u.UAParser(navigator.userAgent).getResult():null}catch(P){this.logger.error(P.message)}this.browserMajorVersion=((O=(T=(y=this.parserResult)===null||y===void 0?void 0:y.browser)===null||T===void 0?void 0:T.version)===null||O===void 0?void 0:O.split(".")[0])||_s.UNAVAILABLE,this.browserName=((R=this.parserResult)===null||R===void 0?void 0:R.browser.name)||_s.UNAVAILABLE,this.browserVersion=((F=this.parserResult)===null||F===void 0?void 0:F.browser.version)||_s.UNAVAILABLE,this.deviceName=[((U=this.parserResult)===null||U===void 0?void 0:U.device.vendor)||"",((_=this.parserResult)===null||_===void 0?void 0:_.device.model)||""].join(" ").trim()||_s.UNAVAILABLE}},"DefaultEventController");d.default=r,r.UNAVAILABLE="Unavailable"},egzF:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(c,f,S,l){function y(T){return T instanceof S?T:new S(function(O){O(T)})}return a(y,"adopt"),new(S||(S=Promise))(function(T,O){function R(_){try{U(l.next(_))}catch(P){O(P)}}a(R,"fulfilled");function F(_){try{U(l.throw(_))}catch(P){O(P)}}a(F,"rejected");function U(_){_.done?T(_.value):y(_.value).then(R,F)}a(U,"step"),U((l=l.apply(c,f||[])).next())})},p=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("my46")),m=p(h("94P3")),s=p(h("/N6y")),o=p(h("ppUg")),i=p(h("F7zz")),e=h("Aplu"),t=p(h("VgUL")),n=p(h("r3TB"));let r=a(class{static createContentShareMeetingSessionConfigure(f){const S=new m.default;return S.meetingId=f.meetingId,S.externalMeetingId=f.externalMeetingId,S.urls=f.urls,S.disablePeriodicKeyframeRequestOnContentSender=f.disablePeriodicKeyframeRequestOnContentSender,S.credentials=new s.default,S.credentials.attendeeId=f.credentials.attendeeId+n.default.Modality,S.credentials.externalUserId=f.credentials.externalUserId,S.credentials.joinToken=f.credentials.joinToken+n.default.Modality,S.meetingFeatures=f.meetingFeatures.clone(),S}setContentAudioProfile(f){this.contentAudioVideo.setAudioProfile(f)}enableSimulcastForContentShare(f,S){f?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new t.default(this.contentAudioVideo.logger,S)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(f){f?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(f){return g(this,void 0,void 0,function*(){if(f){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===u.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=f;for(let S=0;S<this.mediaStreamBroker.mediaStream.getTracks().length;S++)this.mediaStreamBroker.mediaStream.getTracks()[S].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(f,S){return g(this,void 0,void 0,function*(){const l=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(f,S);return yield this.startContentShare(l),l})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(f=>{e.Maybe.of(f.contentShareDidPause).map(S=>S.call(f))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(f=>{e.Maybe.of(f.contentShareDidUnpause).map(S=>S.call(f))})}setContentShareVideoCodecPreferences(f){this.contentAudioVideo.setVideoCodecSendPreferences(f)}destroy(){return g(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(f){this.observerQueue.add(f)}removeContentShareObserver(f){this.observerQueue.delete(f)}forEachContentShareObserver(f){for(const S of this.observerQueue)i.default.nextTick(()=>{this.observerQueue.has(S)&&f(S)})}audioVideoDidStart(){var f;((f=this.mediaStreamBroker.mediaStream)===null||f===void 0?void 0:f.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(f){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidStop).map(l=>l.call(S))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((f,S,l,y)=>{const T=new o.default(f).hasModality(o.default.MODALITY_CONTENT),O=new o.default(f).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!T||!O||!S||this.contentShareTile)return;const R=this.mediaStreamBroker.mediaStream;if(R!=null&&R.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const F=R.getVideoTracks()[0];let U,_;if(F.getSettings){const P=F.getSettings();U=P.width,_=P.height}else{const P=F.getCapabilities();U=P.width,_=P.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,R,U,_,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(F=>{e.Maybe.of(F.contentShareDidStart).map(U=>U.call(F))})})}constructor(f,S,l){this.mediaStreamBroker=f,this.contentAudioVideo=S,this.attendeeAudioVideo=l,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");d.default=r},epkm:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"TranscriptItem");d.default=g},evlv:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(u,m,s){this.type=u,this.headers=m,this.payload=s}},"Message");d.default=g},ezoW:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.SimulcastLayers=void 0;var g;(function(p){p[p.Low=0]="Low",p[p.LowAndMedium=1]="LowAndMedium",p[p.LowAndHigh=2]="LowAndHigh",p[p.Medium=3]="Medium",p[p.MediumAndHigh=4]="MediumAndHigh",p[p.High=5]="High"})(g=d.SimulcastLayers||(d.SimulcastLayers={})),d.default=g},"f/KM":function(W,d,h){"use strict";h.r(d),h.d(d,"fromUtf8",function(){return s}),h.d(d,"toUtf8",function(){return o});const g=a(i=>{const e=[];for(let t=0,n=i.length;t<n;t++){const r=i.charCodeAt(t);if(r<128)e.push(r);else if(r<2048)e.push(r>>6|192,r&63|128);else if(t+1<i.length&&(r&64512)===55296&&(i.charCodeAt(t+1)&64512)===56320){const c=65536+((r&1023)<<10)+(i.charCodeAt(++t)&1023);e.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else e.push(r>>12|224,r>>6&63|128,r&63|128)}return Uint8Array.from(e)},"fromUtf8"),p=a(i=>{let e="";for(let t=0,n=i.length;t<n;t++){const r=i[t];if(r<128)e+=String.fromCharCode(r);else if(192<=r&&r<224){const c=i[++t];e+=String.fromCharCode((r&31)<<6|c&63)}else if(240<=r&&r<365){const f="%"+[r,i[++t],i[++t],i[++t]].map(S=>S.toString(16)).join("%");e+=decodeURIComponent(f)}else e+=String.fromCharCode((r&15)<<12|(i[++t]&63)<<6|i[++t]&63)}return e},"toUtf8");function u(i){return new TextEncoder().encode(i)}a(u,"whatwgEncodingApi_fromUtf8");function m(i){return new TextDecoder("utf-8").decode(i)}a(m,"whatwgEncodingApi_toUtf8");const s=a(i=>typeof TextEncoder=="function"?u(i):g(i),"dist_es_fromUtf8"),o=a(i=>typeof TextDecoder=="function"?m(i):p(i),"dist_es_toUtf8")},f2XL:function(W,d,h){"use strict";var g=h("dmnA"),p=g.Reader,u=g.Writer,m=g.util,s=g.roots.default||(g.roots.default={});s.SdkSignalFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkSignalFrame"),o.prototype.timestampMs=m.Long?m.Long.fromBits(0,0,!0):0,o.prototype.type=1,o.prototype.error=null,o.prototype.join=null,o.prototype.joinack=null,o.prototype.sub=null,o.prototype.suback=null,o.prototype.index=null,o.prototype.pause=null,o.prototype.leave=null,o.prototype.leaveAck=null,o.prototype.bitrates=null,o.prototype.audioControl=null,o.prototype.audioMetadata=null,o.prototype.audioStreamIdInfo=null,o.prototype.pingPong=null,o.prototype.audioStatus=null,o.prototype.clientMetric=null,o.prototype.dataMessage=null,o.prototype.remoteVideoUpdate=null,o.prototype.primaryMeetingJoin=null,o.prototype.primaryMeetingJoinAck=null,o.prototype.primaryMeetingLeave=null,o.prototype.notification=null,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&s.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&s.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&s.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&s.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&s.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&s.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&s.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&s.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&s.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&s.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&s.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&s.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&s.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&s.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&s.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&s.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&s.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&s.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&s.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&s.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&s.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&s.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkSignalFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.timestampMs=e.uint64();break}case 2:{r.type=e.int32();break}case 3:{r.error=s.SdkErrorFrame.decode(e,e.uint32());break}case 4:{r.join=s.SdkJoinFrame.decode(e,e.uint32());break}case 5:{r.joinack=s.SdkJoinAckFrame.decode(e,e.uint32());break}case 6:{r.sub=s.SdkSubscribeFrame.decode(e,e.uint32());break}case 7:{r.suback=s.SdkSubscribeAckFrame.decode(e,e.uint32());break}case 8:{r.index=s.SdkIndexFrame.decode(e,e.uint32());break}case 10:{r.pause=s.SdkPauseResumeFrame.decode(e,e.uint32());break}case 11:{r.leave=s.SdkLeaveFrame.decode(e,e.uint32());break}case 12:{r.leaveAck=s.SdkLeaveAckFrame.decode(e,e.uint32());break}case 14:{r.bitrates=s.SdkBitrateFrame.decode(e,e.uint32());break}case 17:{r.audioControl=s.SdkAudioControlFrame.decode(e,e.uint32());break}case 18:{r.audioMetadata=s.SdkAudioMetadataFrame.decode(e,e.uint32());break}case 19:{r.audioStreamIdInfo=s.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break}case 20:{r.pingPong=s.SdkPingPongFrame.decode(e,e.uint32());break}case 21:{r.audioStatus=s.SdkAudioStatusFrame.decode(e,e.uint32());break}case 22:{r.clientMetric=s.SdkClientMetricFrame.decode(e,e.uint32());break}case 23:{r.dataMessage=s.SdkDataMessageFrame.decode(e,e.uint32());break}case 25:{r.remoteVideoUpdate=s.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break}case 26:{r.primaryMeetingJoin=s.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break}case 27:{r.primaryMeetingJoinAck=s.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break}case 28:{r.primaryMeetingLeave=s.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break}case 35:{r.notification=s.SdkNotificationFrame.decode(e,e.uint32());break}default:e.skipType(c&7);break}}if(!r.hasOwnProperty("timestampMs"))throw m.ProtocolError("missing required 'timestampMs'",{instance:r});if(!r.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:r});return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isInteger(e.timestampMs)&&!(e.timestampMs&&m.isInteger(e.timestampMs.low)&&m.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=s.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=s.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=s.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=s.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=s.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=s.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=s.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=s.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=s.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=s.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=s.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=s.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=s.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=s.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=s.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=s.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=s.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=s.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=s.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=s.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=s.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=s.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkSignalFrame)return e;var t=new s.SdkSignalFrame;switch(e.timestampMs!=null&&(m.Long?(t.timestampMs=m.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=s.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=s.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=s.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=s.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=s.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=s.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=s.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=s.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=s.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=s.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=s.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=s.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=s.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=s.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=s.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=s.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=s.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=s.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=s.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=s.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=s.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=s.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if(t.defaults){if(m.Long){var r=new m.Long(0,0,!0);n.timestampMs=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.timestampMs=t.longs===String?"0":0;n.type=t.enums===String?"JOIN":1,n.error=null,n.join=null,n.joinack=null,n.sub=null,n.suback=null,n.index=null,n.pause=null,n.leave=null,n.leaveAck=null,n.bitrates=null,n.audioControl=null,n.audioMetadata=null,n.audioStreamIdInfo=null,n.pingPong=null,n.audioStatus=null,n.clientMetric=null,n.dataMessage=null,n.remoteVideoUpdate=null,n.primaryMeetingJoin=null,n.primaryMeetingJoinAck=null,n.primaryMeetingLeave=null,n.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?n.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:n.timestampMs=t.longs===String?m.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?s.SdkSignalFrame.Type[e.type]===void 0?e.type:s.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(n.error=s.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(n.join=s.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(n.joinack=s.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(n.sub=s.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(n.suback=s.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(n.index=s.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(n.pause=s.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(n.leave=s.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(n.leaveAck=s.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(n.bitrates=s.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(n.audioControl=s.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(n.audioMetadata=s.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(n.audioStreamIdInfo=s.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(n.pingPong=s.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(n.audioStatus=s.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(n.clientMetric=s.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(n.dataMessage=s.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(n.remoteVideoUpdate=s.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(n.primaryMeetingJoin=s.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(n.primaryMeetingJoinAck=s.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(n.primaryMeetingLeave=s.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(n.notification=s.SdkNotificationFrame.toObject(e.notification,t)),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSignalFrame"},"getTypeUrl"),o.Type=function(){var i={},e=Object.create(i);return e[i[1]="JOIN"]=1,e[i[2]="JOIN_ACK"]=2,e[i[3]="SUBSCRIBE"]=3,e[i[4]="SUBSCRIBE_ACK"]=4,e[i[5]="INDEX"]=5,e[i[7]="PAUSE"]=7,e[i[8]="RESUME"]=8,e[i[9]="LEAVE"]=9,e[i[10]="LEAVE_ACK"]=10,e[i[13]="BITRATES"]=13,e[i[16]="AUDIO_CONTROL"]=16,e[i[17]="AUDIO_METADATA"]=17,e[i[18]="AUDIO_STREAM_ID_INFO"]=18,e[i[19]="PING_PONG"]=19,e[i[20]="AUDIO_STATUS"]=20,e[i[21]="CLIENT_METRIC"]=21,e[i[22]="DATA_MESSAGE"]=22,e[i[24]="REMOTE_VIDEO_UPDATE"]=24,e[i[25]="PRIMARY_MEETING_JOIN"]=25,e[i[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[i[27]="PRIMARY_MEETING_LEAVE"]=27,e[i[34]="NOTIFICATION"]=34,e}(),o}(),s.SdkErrorFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkErrorFrame"),o.prototype.status=0,o.prototype.description="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkErrorFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.status=e.uint32();break}case 2:{r.description=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!m.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!m.isString(e.description)?"description: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkErrorFrame)return e;var t=new s.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.status=0,n.description=""),e.status!=null&&e.hasOwnProperty("status")&&(n.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(n.description=e.description),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkErrorFrame"},"getTypeUrl"),o}(),s.SdkJoinFlags=function(){var o={},i=Object.create(o);return i[o[2]="HAS_STREAM_UPDATE"]=2,i[o[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,i[o[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,i}(),s.SdkClientDetails=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkClientDetails"),o.prototype.appName="",o.prototype.appVersion="",o.prototype.deviceModel="",o.prototype.deviceMake="",o.prototype.platformName="",o.prototype.platformVersion="",o.prototype.clientSource="",o.prototype.chimeSdkVersion="",o.prototype.clientUtcOffset="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkClientDetails;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.appName=e.string();break}case 2:{r.appVersion=e.string();break}case 3:{r.deviceModel=e.string();break}case 4:{r.deviceMake=e.string();break}case 5:{r.platformName=e.string();break}case 6:{r.platformVersion=e.string();break}case 7:{r.clientSource=e.string();break}case 8:{r.chimeSdkVersion=e.string();break}case 9:{r.clientUtcOffset=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!m.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!m.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!m.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!m.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!m.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!m.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!m.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!m.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!m.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkClientDetails)return e;var t=new s.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.appName="",n.appVersion="",n.deviceModel="",n.deviceMake="",n.platformName="",n.platformVersion="",n.clientSource="",n.chimeSdkVersion="",n.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(n.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(n.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(n.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(n.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(n.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(n.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(n.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(n.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(n.clientUtcOffset=e.clientUtcOffset),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientDetails"},"getTypeUrl"),o}(),s.SdkServerSideNetworkAdaption=function(){var o={},i=Object.create(o);return i[o[1]="DEFAULT"]=1,i[o[2]="NONE"]=2,i[o[3]="BANDWIDTH_PROBING"]=3,i[o[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,i}(),s.SdkJoinFrame=function(){function o(i){if(this.supportedServerSideNetworkAdaptions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkJoinFrame"),o.prototype.protocolVersion=2,o.prototype.maxNumOfVideos=0,o.prototype.flags=0,o.prototype.clientDetails=null,o.prototype.audioSessionId=m.Long?m.Long.fromBits(0,0,!0):0,o.prototype.wantsCompressedSdp=!1,o.prototype.serverSideNetworkAdaption=1,o.prototype.supportedServerSideNetworkAdaptions=m.emptyArray,o.prototype.wantsAllTemporalLayersInIndex=!1,o.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&s.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[n]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkJoinFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.protocolVersion=e.uint32();break}case 2:{r.maxNumOfVideos=e.uint32();break}case 3:{r.flags=e.uint32();break}case 4:{r.clientDetails=s.SdkClientDetails.decode(e,e.uint32());break}case 6:{r.audioSessionId=e.uint64();break}case 7:{r.wantsCompressedSdp=e.bool();break}case 10:{r.serverSideNetworkAdaption=e.int32();break}case 11:{if(r.supportedServerSideNetworkAdaptions&&r.supportedServerSideNetworkAdaptions.length||(r.supportedServerSideNetworkAdaptions=[]),(c&7)===2)for(var f=e.uint32()+e.pos;e.pos<f;)r.supportedServerSideNetworkAdaptions.push(e.int32());else r.supportedServerSideNetworkAdaptions.push(e.int32());break}case 12:{r.wantsAllTemporalLayersInIndex=e.bool();break}case 13:{r.disablePeriodicKeyframeRequestOnContentSender=e.bool();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!m.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!m.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!m.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=s.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!m.isInteger(e.audioSessionId)&&!(e.audioSessionId&&m.isInteger(e.audioSessionId.low)&&m.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)switch(e.supportedServerSideNetworkAdaptions[n]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean"?"wantsAllTemporalLayersInIndex: boolean expected":e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkJoinFrame)return e;var t=new s.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=s.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(m.Long?(t.audioSessionId=m.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){default:if(typeof e.serverSideNetworkAdaption=="number"){t.serverSideNetworkAdaption=e.serverSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)switch(e.supportedServerSideNetworkAdaptions[n]){default:if(typeof e.supportedServerSideNetworkAdaptions[n]=="number"){t.supportedServerSideNetworkAdaptions[n]=e.supportedServerSideNetworkAdaptions[n];break}case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[n]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[n]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[n]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[n]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.supportedServerSideNetworkAdaptions=[]),t.defaults){if(n.protocolVersion=2,n.maxNumOfVideos=0,n.flags=0,n.clientDetails=null,m.Long){var r=new m.Long(0,0,!0);n.audioSessionId=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.audioSessionId=t.longs===String?"0":0;n.wantsCompressedSdp=!1,n.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,n.wantsAllTemporalLayersInIndex=!1,n.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(n.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(n.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(n.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(n.clientDetails=s.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?n.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:n.audioSessionId=t.longs===String?m.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(n.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(n.serverSideNetworkAdaption=t.enums===String?s.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]===void 0?e.serverSideNetworkAdaption:s.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){n.supportedServerSideNetworkAdaptions=[];for(var c=0;c<e.supportedServerSideNetworkAdaptions.length;++c)n.supportedServerSideNetworkAdaptions[c]=t.enums===String?s.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[c]]===void 0?e.supportedServerSideNetworkAdaptions[c]:s.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[c]]:e.supportedServerSideNetworkAdaptions[c]}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&(n.wantsAllTemporalLayersInIndex=e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(n.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinFrame"},"getTypeUrl"),o}(),s.SdkJoinAckFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkJoinAckFrame"),o.prototype.turnCredentials=null,o.prototype.videoSubscriptionLimit=0,o.prototype.wantsCompressedSdp=!1,o.prototype.defaultServerSideNetworkAdaption=1,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&s.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkJoinAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.turnCredentials=s.SdkTurnCredentials.decode(e,e.uint32());break}case 2:{r.videoSubscriptionLimit=e.uint32();break}case 3:{r.wantsCompressedSdp=e.bool();break}case 4:{r.defaultServerSideNetworkAdaption=e.int32();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=s.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!m.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkJoinAckFrame)return e;var t=new s.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=s.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){default:if(typeof e.defaultServerSideNetworkAdaption=="number"){t.defaultServerSideNetworkAdaption=e.defaultServerSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.turnCredentials=null,n.videoSubscriptionLimit=0,n.wantsCompressedSdp=!1,n.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(n.turnCredentials=s.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(n.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(n.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(n.defaultServerSideNetworkAdaption=t.enums===String?s.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]===void 0?e.defaultServerSideNetworkAdaption:s.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinAckFrame"},"getTypeUrl"),o}(),s.SdkLeaveFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkLeaveFrame"),o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkLeaveFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),o.fromObject=a(function(e){return e instanceof s.SdkLeaveFrame?e:new s.SdkLeaveFrame},"fromObject"),o.toObject=a(function(){return{}},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveFrame"},"getTypeUrl"),o}(),s.SdkLeaveAckFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkLeaveAckFrame"),o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkLeaveAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),o.fromObject=a(function(e){return e instanceof s.SdkLeaveAckFrame?e:new s.SdkLeaveAckFrame},"fromObject"),o.toObject=a(function(){return{}},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveAckFrame"},"getTypeUrl"),o}(),s.SdkStreamServiceType=function(){var o={},i=Object.create(o);return i[o[1]="RX"]=1,i[o[2]="TX"]=2,i[o[3]="DUPLEX"]=3,i}(),s.SdkStreamMediaType=function(){var o={},i=Object.create(o);return i[o[1]="AUDIO"]=1,i[o[2]="VIDEO"]=2,i}(),s.SdkSubscribeFrame=function(){function o(i){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkSubscribeFrame"),o.prototype.duplex=1,o.prototype.sendStreams=m.emptyArray,o.prototype.receiveStreamIds=m.emptyArray,o.prototype.sdpOffer="",o.prototype.audioHost="",o.prototype.audioCheckin=!1,o.prototype.audioMuted=!1,o.prototype.compressedSdpOffer=m.newBuffer([]),o.prototype.videoSubscriptionConfiguration=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var n=0;n<e.sendStreams.length;++n)s.SdkStreamDescriptor.encode(e.sendStreams[n],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var n=0;n<e.receiveStreamIds.length;++n)t.uint32(24).uint32(e.receiveStreamIds[n]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var n=0;n<e.videoSubscriptionConfiguration.length;++n)s.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[n],t.uint32(74).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkSubscribeFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.duplex=e.int32();break}case 2:{r.sendStreams&&r.sendStreams.length||(r.sendStreams=[]),r.sendStreams.push(s.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(r.receiveStreamIds&&r.receiveStreamIds.length||(r.receiveStreamIds=[]),(c&7)===2)for(var f=e.uint32()+e.pos;e.pos<f;)r.receiveStreamIds.push(e.uint32());else r.receiveStreamIds.push(e.uint32());break}case 4:{r.sdpOffer=e.string();break}case 5:{r.audioHost=e.string();break}case 6:{r.audioCheckin=e.bool();break}case 7:{r.audioMuted=e.bool();break}case 8:{r.compressedSdpOffer=e.bytes();break}case 9:{r.videoSubscriptionConfiguration&&r.videoSubscriptionConfiguration.length||(r.videoSubscriptionConfiguration=[]),r.videoSubscriptionConfiguration.push(s.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var n=s.SdkStreamDescriptor.verify(e.sendStreams[t]);if(n)return"sendStreams."+n}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!m.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!m.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!m.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||m.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var n=s.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(n)return"videoSubscriptionConfiguration."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkSubscribeFrame)return e;var t=new s.SdkSubscribeFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var n=0;n<e.sendStreams.length;++n){if(typeof e.sendStreams[n]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[n]=s.SdkStreamDescriptor.fromObject(e.sendStreams[n])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var n=0;n<e.receiveStreamIds.length;++n)t.receiveStreamIds[n]=e.receiveStreamIds[n]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?m.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=m.newBuffer(m.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length>=0&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var n=0;n<e.videoSubscriptionConfiguration.length;++n){if(typeof e.videoSubscriptionConfiguration[n]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[n]=s.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sendStreams=[],n.receiveStreamIds=[],n.videoSubscriptionConfiguration=[]),t.defaults&&(n.duplex=t.enums===String?"RX":1,n.sdpOffer="",n.audioHost="",n.audioCheckin=!1,n.audioMuted=!1,t.bytes===String?n.compressedSdpOffer="":(n.compressedSdpOffer=[],t.bytes!==Array&&(n.compressedSdpOffer=m.newBuffer(n.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(n.duplex=t.enums===String?s.SdkStreamServiceType[e.duplex]===void 0?e.duplex:s.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){n.sendStreams=[];for(var r=0;r<e.sendStreams.length;++r)n.sendStreams[r]=s.SdkStreamDescriptor.toObject(e.sendStreams[r],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){n.receiveStreamIds=[];for(var r=0;r<e.receiveStreamIds.length;++r)n.receiveStreamIds[r]=e.receiveStreamIds[r]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(n.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(n.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(n.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(n.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(n.compressedSdpOffer=t.bytes===String?m.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){n.videoSubscriptionConfiguration=[];for(var r=0;r<e.videoSubscriptionConfiguration.length;++r)n.videoSubscriptionConfiguration[r]=s.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeFrame"},"getTypeUrl"),o}(),s.SdkSubscribeAckFrame=function(){function o(i){if(this.allocations=[],this.tracks=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkSubscribeAckFrame"),o.prototype.duplex=1,o.prototype.allocations=m.emptyArray,o.prototype.sdpAnswer="",o.prototype.tracks=m.emptyArray,o.prototype.compressedSdpAnswer=m.newBuffer([]),o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var n=0;n<e.allocations.length;++n)s.SdkStreamAllocation.encode(e.allocations[n],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var n=0;n<e.tracks.length;++n)s.SdkTrackMapping.encode(e.tracks[n],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkSubscribeAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.duplex=e.int32();break}case 2:{r.allocations&&r.allocations.length||(r.allocations=[]),r.allocations.push(s.SdkStreamAllocation.decode(e,e.uint32()));break}case 3:{r.sdpAnswer=e.string();break}case 4:{r.tracks&&r.tracks.length||(r.tracks=[]),r.tracks.push(s.SdkTrackMapping.decode(e,e.uint32()));break}case 5:{r.compressedSdpAnswer=e.bytes();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var n=s.SdkStreamAllocation.verify(e.allocations[t]);if(n)return"allocations."+n}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!m.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var n=s.SdkTrackMapping.verify(e.tracks[t]);if(n)return"tracks."+n}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||m.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkSubscribeAckFrame)return e;var t=new s.SdkSubscribeAckFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var n=0;n<e.allocations.length;++n){if(typeof e.allocations[n]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[n]=s.SdkStreamAllocation.fromObject(e.allocations[n])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var n=0;n<e.tracks.length;++n){if(typeof e.tracks[n]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[n]=s.SdkTrackMapping.fromObject(e.tracks[n])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?m.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=m.newBuffer(m.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length>=0&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.allocations=[],n.tracks=[]),t.defaults&&(n.duplex=t.enums===String?"RX":1,n.sdpAnswer="",t.bytes===String?n.compressedSdpAnswer="":(n.compressedSdpAnswer=[],t.bytes!==Array&&(n.compressedSdpAnswer=m.newBuffer(n.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(n.duplex=t.enums===String?s.SdkStreamServiceType[e.duplex]===void 0?e.duplex:s.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){n.allocations=[];for(var r=0;r<e.allocations.length;++r)n.allocations[r]=s.SdkStreamAllocation.toObject(e.allocations[r],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(n.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){n.tracks=[];for(var r=0;r<e.tracks.length;++r)n.tracks[r]=s.SdkTrackMapping.toObject(e.tracks[r],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(n.compressedSdpAnswer=t.bytes===String?m.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeAckFrame"},"getTypeUrl"),o}(),s.SdkIndexFrame=function(){function o(i){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkIndexFrame"),o.prototype.atCapacity=!1,o.prototype.sources=m.emptyArray,o.prototype.pausedAtSourceIds=m.emptyArray,o.prototype.numParticipants=0,o.prototype.supportedReceiveCodecIntersection=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var n=0;n<e.sources.length;++n)s.SdkStreamDescriptor.encode(e.sources[n],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var n=0;n<e.pausedAtSourceIds.length;++n)t.uint32(24).uint32(e.pausedAtSourceIds[n]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var n=0;n<e.supportedReceiveCodecIntersection.length;++n)t.uint32(40).int32(e.supportedReceiveCodecIntersection[n]);return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkIndexFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.atCapacity=e.bool();break}case 2:{r.sources&&r.sources.length||(r.sources=[]),r.sources.push(s.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(r.pausedAtSourceIds&&r.pausedAtSourceIds.length||(r.pausedAtSourceIds=[]),(c&7)===2)for(var f=e.uint32()+e.pos;e.pos<f;)r.pausedAtSourceIds.push(e.uint32());else r.pausedAtSourceIds.push(e.uint32());break}case 4:{r.numParticipants=e.uint32();break}case 5:{if(r.supportedReceiveCodecIntersection&&r.supportedReceiveCodecIntersection.length||(r.supportedReceiveCodecIntersection=[]),(c&7)===2)for(var f=e.uint32()+e.pos;e.pos<f;)r.supportedReceiveCodecIntersection.push(e.int32());else r.supportedReceiveCodecIntersection.push(e.int32());break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var n=s.SdkStreamDescriptor.verify(e.sources[t]);if(n)return"sources."+n}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!m.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!m.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 11:break}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkIndexFrame)return e;var t=new s.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var n=0;n<e.sources.length;++n){if(typeof e.sources[n]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[n]=s.SdkStreamDescriptor.fromObject(e.sources[n])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var n=0;n<e.pausedAtSourceIds.length;++n)t.pausedAtSourceIds[n]=e.pausedAtSourceIds[n]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var n=0;n<e.supportedReceiveCodecIntersection.length;++n)switch(e.supportedReceiveCodecIntersection[n]){default:if(typeof e.supportedReceiveCodecIntersection[n]=="number"){t.supportedReceiveCodecIntersection[n]=e.supportedReceiveCodecIntersection[n];break}case"VP8":case 1:t.supportedReceiveCodecIntersection[n]=1;break;case"H264_BASELINE_PROFILE":case 2:t.supportedReceiveCodecIntersection[n]=2;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[n]=3;break;case"H264_MAIN_PROFILE":case 4:t.supportedReceiveCodecIntersection[n]=4;break;case"H264_HIGH_PROFILE":case 5:t.supportedReceiveCodecIntersection[n]=5;break;case"H264_CONSTRAINED_HIGH_PROFILE":case 6:t.supportedReceiveCodecIntersection[n]=6;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[n]=8;break;case"AV1_MAIN_PROFILE":case 11:t.supportedReceiveCodecIntersection[n]=11;break}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sources=[],n.pausedAtSourceIds=[],n.supportedReceiveCodecIntersection=[]),t.defaults&&(n.atCapacity=!1,n.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(n.atCapacity=e.atCapacity),e.sources&&e.sources.length){n.sources=[];for(var r=0;r<e.sources.length;++r)n.sources[r]=s.SdkStreamDescriptor.toObject(e.sources[r],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){n.pausedAtSourceIds=[];for(var r=0;r<e.pausedAtSourceIds.length;++r)n.pausedAtSourceIds[r]=e.pausedAtSourceIds[r]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(n.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){n.supportedReceiveCodecIntersection=[];for(var r=0;r<e.supportedReceiveCodecIntersection.length;++r)n.supportedReceiveCodecIntersection[r]=t.enums===String?s.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[r]]===void 0?e.supportedReceiveCodecIntersection[r]:s.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[r]]:e.supportedReceiveCodecIntersection[r]}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkIndexFrame"},"getTypeUrl"),o}(),s.SdkPauseResumeFrame=function(){function o(i){if(this.streamIds=[],this.groupIds=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkPauseResumeFrame"),o.prototype.streamIds=m.emptyArray,o.prototype.groupIds=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.streamIds!=null&&e.streamIds.length)for(var n=0;n<e.streamIds.length;++n)t.uint32(8).uint32(e.streamIds[n]);if(e.groupIds!=null&&e.groupIds.length)for(var n=0;n<e.groupIds.length;++n)t.uint32(16).uint32(e.groupIds[n]);return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkPauseResumeFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{if(r.streamIds&&r.streamIds.length||(r.streamIds=[]),(c&7)===2)for(var f=e.uint32()+e.pos;e.pos<f;)r.streamIds.push(e.uint32());else r.streamIds.push(e.uint32());break}case 2:{if(r.groupIds&&r.groupIds.length||(r.groupIds=[]),(c&7)===2)for(var f=e.uint32()+e.pos;e.pos<f;)r.groupIds.push(e.uint32());else r.groupIds.push(e.uint32());break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!m.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!m.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkPauseResumeFrame)return e;var t=new s.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var n=0;n<e.streamIds.length;++n)t.streamIds[n]=e.streamIds[n]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var n=0;n<e.groupIds.length;++n)t.groupIds[n]=e.groupIds[n]>>>0}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.streamIds=[],n.groupIds=[]),e.streamIds&&e.streamIds.length){n.streamIds=[];for(var r=0;r<e.streamIds.length;++r)n.streamIds[r]=e.streamIds[r]}if(e.groupIds&&e.groupIds.length){n.groupIds=[];for(var r=0;r<e.groupIds.length;++r)n.groupIds[r]=e.groupIds[r]}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPauseResumeFrame"},"getTypeUrl"),o}(),s.SdkBitrateFrame=function(){function o(i){if(this.bitrates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkBitrateFrame"),o.prototype.bitrates=m.emptyArray,o.prototype.serverAvailableOutgoingBitrate=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.bitrates!=null&&e.bitrates.length)for(var n=0;n<e.bitrates.length;++n)s.SdkBitrate.encode(e.bitrates[n],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkBitrateFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.bitrates&&r.bitrates.length||(r.bitrates=[]),r.bitrates.push(s.SdkBitrate.decode(e,e.uint32()));break}case 2:{r.serverAvailableOutgoingBitrate=e.uint32();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var n=s.SdkBitrate.verify(e.bitrates[t]);if(n)return"bitrates."+n}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!m.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkBitrateFrame)return e;var t=new s.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var n=0;n<e.bitrates.length;++n){if(typeof e.bitrates[n]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[n]=s.SdkBitrate.fromObject(e.bitrates[n])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.bitrates=[]),t.defaults&&(n.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){n.bitrates=[];for(var r=0;r<e.bitrates.length;++r)n.bitrates[r]=s.SdkBitrate.toObject(e.bitrates[r],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(n.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrateFrame"},"getTypeUrl"),o}(),s.SdkStreamDescriptor=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkStreamDescriptor"),o.prototype.streamId=0,o.prototype.framerate=0,o.prototype.maxBitrateKbps=0,o.prototype.trackLabel="",o.prototype.groupId=0,o.prototype.avgBitrateBps=0,o.prototype.attendeeId="",o.prototype.mediaType=1,o.prototype.externalUserId="",o.prototype.width=0,o.prototype.height=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkStreamDescriptor;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.streamId=e.uint32();break}case 2:{r.framerate=e.uint32();break}case 3:{r.maxBitrateKbps=e.uint32();break}case 4:{r.trackLabel=e.string();break}case 6:{r.groupId=e.uint32();break}case 7:{r.avgBitrateBps=e.uint32();break}case 8:{r.attendeeId=e.string();break}case 9:{r.mediaType=e.int32();break}case 10:{r.externalUserId=e.string();break}case 11:{r.width=e.uint32();break}case 12:{r.height=e.uint32();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!m.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!m.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!m.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!m.isInteger(e.height)?"height: integer expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkStreamDescriptor)return e;var t=new s.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.streamId=0,n.framerate=0,n.maxBitrateKbps=0,n.trackLabel="",n.groupId=0,n.avgBitrateBps=0,n.attendeeId="",n.mediaType=t.enums===String?"AUDIO":1,n.externalUserId="",n.width=0,n.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(n.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(n.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(n.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(n.mediaType=t.enums===String?s.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:s.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(n.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(n.height=e.height),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDescriptor"},"getTypeUrl"),o}(),s.SdkStreamAllocation=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkStreamAllocation"),o.prototype.trackLabel="",o.prototype.streamId=0,o.prototype.groupId=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkStreamAllocation;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.trackLabel=e.string();break}case 2:{r.streamId=e.uint32();break}case 3:{r.groupId=e.uint32();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkStreamAllocation)return e;var t=new s.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.trackLabel="",n.streamId=0,n.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamAllocation"},"getTypeUrl"),o}(),s.SdkTrackMapping=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTrackMapping"),o.prototype.streamId=0,o.prototype.ssrc=0,o.prototype.trackLabel="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTrackMapping;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.streamId=e.uint32();break}case 2:{r.ssrc=e.uint32();break}case 3:{r.trackLabel=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!m.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTrackMapping)return e;var t=new s.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.streamId=0,n.ssrc=0,n.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(n.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTrackMapping"},"getTypeUrl"),o}(),s.SdkBitrate=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkBitrate"),o.prototype.sourceStreamId=0,o.prototype.avgBitrateBps=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkBitrate;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.sourceStreamId=e.uint32();break}case 2:{r.avgBitrateBps=e.uint32();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!m.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkBitrate)return e;var t=new s.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.sourceStreamId=0,n.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(n.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(n.avgBitrateBps=e.avgBitrateBps),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrate"},"getTypeUrl"),o}(),s.SdkAudioControlFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkAudioControlFrame"),o.prototype.muted=!1,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkAudioControlFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.muted=e.bool();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkAudioControlFrame)return e;var t=new s.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioControlFrame"},"getTypeUrl"),o}(),s.SdkAudioMetadataFrame=function(){function o(i){if(this.attendeeStates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkAudioMetadataFrame"),o.prototype.attendeeStates=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var n=0;n<e.attendeeStates.length;++n)s.SdkAudioAttendeeState.encode(e.attendeeStates[n],t.uint32(10).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkAudioMetadataFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.attendeeStates&&r.attendeeStates.length||(r.attendeeStates=[]),r.attendeeStates.push(s.SdkAudioAttendeeState.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var n=s.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(n)return"attendeeStates."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkAudioMetadataFrame)return e;var t=new s.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var n=0;n<e.attendeeStates.length;++n){if(typeof e.attendeeStates[n]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[n]=s.SdkAudioAttendeeState.fromObject(e.attendeeStates[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){n.attendeeStates=[];for(var r=0;r<e.attendeeStates.length;++r)n.attendeeStates[r]=s.SdkAudioAttendeeState.toObject(e.attendeeStates[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioMetadataFrame"},"getTypeUrl"),o}(),s.SdkAudioAttendeeState=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkAudioAttendeeState"),o.prototype.audioStreamId=0,o.prototype.volume=0,o.prototype.muted=!1,o.prototype.signalStrength=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkAudioAttendeeState;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.audioStreamId=e.uint32();break}case 2:{r.volume=e.uint32();break}case 3:{r.muted=e.bool();break}case 4:{r.signalStrength=e.uint32();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!m.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!m.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkAudioAttendeeState)return e;var t=new s.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStreamId=0,n.volume=0,n.muted=!1,n.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(n.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(n.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(n.signalStrength=e.signalStrength),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioAttendeeState"},"getTypeUrl"),o}(),s.SdkAudioStreamIdInfoFrame=function(){function o(i){if(this.streams=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkAudioStreamIdInfoFrame"),o.prototype.streams=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.streams!=null&&e.streams.length)for(var n=0;n<e.streams.length;++n)s.SdkAudioStreamIdInfo.encode(e.streams[n],t.uint32(10).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkAudioStreamIdInfoFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.streams&&r.streams.length||(r.streams=[]),r.streams.push(s.SdkAudioStreamIdInfo.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var n=s.SdkAudioStreamIdInfo.verify(e.streams[t]);if(n)return"streams."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkAudioStreamIdInfoFrame)return e;var t=new s.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var n=0;n<e.streams.length;++n){if(typeof e.streams[n]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[n]=s.SdkAudioStreamIdInfo.fromObject(e.streams[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.streams=[]),e.streams&&e.streams.length){n.streams=[];for(var r=0;r<e.streams.length;++r)n.streams[r]=s.SdkAudioStreamIdInfo.toObject(e.streams[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfoFrame"},"getTypeUrl"),o}(),s.SdkAudioStreamIdInfo=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkAudioStreamIdInfo"),o.prototype.audioStreamId=0,o.prototype.attendeeId="",o.prototype.muted=!1,o.prototype.externalUserId="",o.prototype.dropped=!1,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkAudioStreamIdInfo;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.audioStreamId=e.uint32();break}case 2:{r.attendeeId=e.string();break}case 3:{r.muted=e.bool();break}case 4:{r.externalUserId=e.string();break}case 5:{r.dropped=e.bool();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkAudioStreamIdInfo)return e;var t=new s.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStreamId=0,n.attendeeId="",n.muted=!1,n.externalUserId="",n.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(n.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(n.dropped=e.dropped),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfo"},"getTypeUrl"),o}(),s.SdkPingPongType=function(){var o={},i=Object.create(o);return i[o[1]="PING"]=1,i[o[2]="PONG"]=2,i}(),s.SdkPingPongFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkPingPongFrame"),o.prototype.type=1,o.prototype.pingId=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkPingPongFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.type=e.int32();break}case 2:{r.pingId=e.uint32();break}default:e.skipType(c&7);break}}if(!r.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:r});if(!r.hasOwnProperty("pingId"))throw m.ProtocolError("missing required 'pingId'",{instance:r});return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return m.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkPingPongFrame)return e;var t=new s.SdkPingPongFrame;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"PING":1,n.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?s.SdkPingPongType[e.type]===void 0?e.type:s.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(n.pingId=e.pingId),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPingPongFrame"},"getTypeUrl"),o}(),s.SdkAudioStatusFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkAudioStatusFrame"),o.prototype.audioStatus=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkAudioStatusFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.audioStatus=e.uint32();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!m.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkAudioStatusFrame)return e;var t=new s.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(n.audioStatus=e.audioStatus),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStatusFrame"},"getTypeUrl"),o}(),s.SdkMetric=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkMetric"),o.prototype.type=1,o.prototype.value=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkMetric;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.type=e.int32();break}case 2:{r.value=e.double();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkMetric)return e;var t=new s.SdkMetric;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_COUNT":case 90:t.type=90;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,n.value=0),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?s.SdkMetric.Type[e.type]===void 0?e.type:s.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(n.value=t.json&&!isFinite(e.value)?String(e.value):e.value),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMetric"},"getTypeUrl"),o.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[i[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[i[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[i[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[i[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[i[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[i[7]="STUN_RTT_MS"]=7,e[i[8]="SOCKET_DISCARDED_PPS"]=8,e[i[9]="RTC_MIC_JITTER_MS"]=9,e[i[10]="RTC_MIC_PPS"]=10,e[i[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[i[12]="RTC_MIC_BITRATE"]=12,e[i[13]="RTC_MIC_RTT_MS"]=13,e[i[14]="RTC_SPK_PPS"]=14,e[i[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[i[16]="RTC_SPK_JITTER_MS"]=16,e[i[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[i[18]="RTC_SPK_BITRATE"]=18,e[i[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[i[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[i[21]="VIDEO_SENT_RTT_MS"]=21,e[i[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[i[23]="VIDEO_NACKS_RECEIVED"]=23,e[i[24]="VIDEO_PLIS_RECEIVED"]=24,e[i[25]="VIDEO_ENCODE_MS"]=25,e[i[26]="VIDEO_INPUT_FPS"]=26,e[i[27]="VIDEO_ENCODE_FPS"]=27,e[i[28]="VIDEO_SENT_FPS"]=28,e[i[29]="VIDEO_FIRS_RECEIVED"]=29,e[i[30]="VIDEO_SENT_PPS"]=30,e[i[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[i[32]="VIDEO_SENT_BITRATE"]=32,e[i[33]="VIDEO_DROPPED_FPS"]=33,e[i[34]="VIDEO_TARGET_DELAY_MS"]=34,e[i[35]="VIDEO_DECODE_MS"]=35,e[i[36]="VIDEO_OUTPUT_FPS"]=36,e[i[37]="VIDEO_RECEIVED_PPS"]=37,e[i[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[i[39]="VIDEO_RENDER_DELAY_MS"]=39,e[i[40]="VIDEO_RECEIVED_FPS"]=40,e[i[41]="VIDEO_DECODE_FPS"]=41,e[i[42]="VIDEO_NACKS_SENT"]=42,e[i[43]="VIDEO_FIRS_SENT"]=43,e[i[44]="VIDEO_RECEIVED_BITRATE"]=44,e[i[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[i[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[i[47]="VIDEO_DISCARDED_PPS"]=47,e[i[48]="VIDEO_PLIS_SENT"]=48,e[i[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[i[64]="VIDEO_ENCODE_HEIGHT"]=64,e[i[66]="VIDEO_SENT_QP_SUM"]=66,e[i[69]="VIDEO_DECODE_HEIGHT"]=69,e[i[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[i[86]="VIDEO_ENCODE_WIDTH"]=86,e[i[87]="VIDEO_DECODE_WIDTH"]=87,e[i[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[i[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[i[90]="VIDEO_FREEZE_COUNT"]=90,e[i[91]="VIDEO_FREEZE_DURATION"]=91,e[i[92]="VIDEO_PAUSE_COUNT"]=92,e[i[93]="VIDEO_PAUSE_DURATION"]=93,e[i[94]="VIDEO_QUALITY_REASON"]=94,e[i[95]="VIDEO_PROCESSING_TIME"]=95,e[i[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[i[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[i[98]="RTC_SPK_TOTAL_LOST"]=98,e[i[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[i[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[i[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[i[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e}(),o}(),s.SdkStreamMetricFrame=function(){function o(i){if(this.metrics=[],this.dimensions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkStreamMetricFrame"),o.prototype.streamId=0,o.prototype.groupId=0,o.prototype.metrics=m.emptyArray,o.prototype.dimensions=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var n=0;n<e.metrics.length;++n)s.SdkMetric.encode(e.metrics[n],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var n=0;n<e.dimensions.length;++n)s.SdkStreamDimension.encode(e.dimensions[n],t.uint32(50).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkStreamMetricFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 3:{r.streamId=e.uint32();break}case 4:{r.groupId=e.uint32();break}case 5:{r.metrics&&r.metrics.length||(r.metrics=[]),r.metrics.push(s.SdkMetric.decode(e,e.uint32()));break}case 6:{r.dimensions&&r.dimensions.length||(r.dimensions=[]),r.dimensions.push(s.SdkStreamDimension.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var n=s.SdkMetric.verify(e.metrics[t]);if(n)return"metrics."+n}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var n=s.SdkStreamDimension.verify(e.dimensions[t]);if(n)return"dimensions."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkStreamMetricFrame)return e;var t=new s.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var n=0;n<e.metrics.length;++n){if(typeof e.metrics[n]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[n]=s.SdkMetric.fromObject(e.metrics[n])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var n=0;n<e.dimensions.length;++n){if(typeof e.dimensions[n]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[n]=s.SdkStreamDimension.fromObject(e.dimensions[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.metrics=[],n.dimensions=[]),t.defaults&&(n.streamId=0,n.groupId=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.metrics&&e.metrics.length){n.metrics=[];for(var r=0;r<e.metrics.length;++r)n.metrics[r]=s.SdkMetric.toObject(e.metrics[r],t)}if(e.dimensions&&e.dimensions.length){n.dimensions=[];for(var r=0;r<e.dimensions.length;++r)n.dimensions[r]=s.SdkStreamDimension.toObject(e.dimensions[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamMetricFrame"},"getTypeUrl"),o}(),s.SdkClientMetricFrame=function(){function o(i){if(this.globalMetrics=[],this.streamMetricFrames=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkClientMetricFrame"),o.prototype.globalMetrics=m.emptyArray,o.prototype.streamMetricFrames=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var n=0;n<e.globalMetrics.length;++n)s.SdkMetric.encode(e.globalMetrics[n],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var n=0;n<e.streamMetricFrames.length;++n)s.SdkStreamMetricFrame.encode(e.streamMetricFrames[n],t.uint32(18).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkClientMetricFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.globalMetrics&&r.globalMetrics.length||(r.globalMetrics=[]),r.globalMetrics.push(s.SdkMetric.decode(e,e.uint32()));break}case 2:{r.streamMetricFrames&&r.streamMetricFrames.length||(r.streamMetricFrames=[]),r.streamMetricFrames.push(s.SdkStreamMetricFrame.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var n=s.SdkMetric.verify(e.globalMetrics[t]);if(n)return"globalMetrics."+n}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var n=s.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(n)return"streamMetricFrames."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkClientMetricFrame)return e;var t=new s.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var n=0;n<e.globalMetrics.length;++n){if(typeof e.globalMetrics[n]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[n]=s.SdkMetric.fromObject(e.globalMetrics[n])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var n=0;n<e.streamMetricFrames.length;++n){if(typeof e.streamMetricFrames[n]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[n]=s.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.globalMetrics=[],n.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){n.globalMetrics=[];for(var r=0;r<e.globalMetrics.length;++r)n.globalMetrics[r]=s.SdkMetric.toObject(e.globalMetrics[r],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){n.streamMetricFrames=[];for(var r=0;r<e.streamMetricFrames.length;++r)n.streamMetricFrames[r]=s.SdkStreamMetricFrame.toObject(e.streamMetricFrames[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientMetricFrame"},"getTypeUrl"),o}(),s.SdkStreamDimension=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkStreamDimension"),o.prototype.type=1,o.prototype.value=null,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&s.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkStreamDimension;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.type=e.int32();break}case 2:{r.value=s.SdkDimensionValue.decode(e,e.uint32());break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=s.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkStreamDimension)return e;var t=new s.SdkStreamDimension;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=s.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"VIDEO_ENCODER_NAME":1,n.value=null),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?s.SdkStreamDimension.Type[e.type]===void 0?e.type:s.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(n.value=s.SdkDimensionValue.toObject(e.value,t)),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDimension"},"getTypeUrl"),o.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ENCODER_NAME"]=1,e[i[2]="VIDEO_DECODER_NAME"]=2,e}(),o}(),s.SdkDimensionValue=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkDimensionValue"),o.prototype.stringValue="",o.prototype.boolValue=!1,o.prototype.uintValue=m.Long?m.Long.fromBits(0,0,!0):0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkDimensionValue;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.stringValue=e.string();break}case 2:{r.boolValue=e.bool();break}case 3:{r.uintValue=e.uint64();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!m.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!m.isInteger(e.uintValue)&&!(e.uintValue&&m.isInteger(e.uintValue.low)&&m.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkDimensionValue)return e;var t=new s.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(m.Long?(t.uintValue=m.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if(t.defaults)if(n.stringValue="",n.boolValue=!1,m.Long){var r=new m.Long(0,0,!0);n.uintValue=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(n.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(n.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?n.uintValue=t.longs===String?String(e.uintValue):e.uintValue:n.uintValue=t.longs===String?m.Long.prototype.toString.call(e.uintValue):t.longs===Number?new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDimensionValue"},"getTypeUrl"),o}(),s.SdkDataMessageFrame=function(){function o(i){if(this.messages=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkDataMessageFrame"),o.prototype.messages=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.messages!=null&&e.messages.length)for(var n=0;n<e.messages.length;++n)s.SdkDataMessagePayload.encode(e.messages[n],t.uint32(10).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkDataMessageFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.messages&&r.messages.length||(r.messages=[]),r.messages.push(s.SdkDataMessagePayload.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var n=s.SdkDataMessagePayload.verify(e.messages[t]);if(n)return"messages."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkDataMessageFrame)return e;var t=new s.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var n=0;n<e.messages.length;++n){if(typeof e.messages[n]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[n]=s.SdkDataMessagePayload.fromObject(e.messages[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.messages=[]),e.messages&&e.messages.length){n.messages=[];for(var r=0;r<e.messages.length;++r)n.messages[r]=s.SdkDataMessagePayload.toObject(e.messages[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessageFrame"},"getTypeUrl"),o}(),s.SdkDataMessagePayload=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkDataMessagePayload"),o.prototype.topic="",o.prototype.data=m.newBuffer([]),o.prototype.lifetimeMs=0,o.prototype.senderAttendeeId="",o.prototype.ingestTimeNs=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.senderExternalUserId="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkDataMessagePayload;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.topic=e.string();break}case 2:{r.data=e.bytes();break}case 3:{r.lifetimeMs=e.uint32();break}case 4:{r.senderAttendeeId=e.string();break}case 5:{r.ingestTimeNs=e.int64();break}case 6:{r.senderExternalUserId=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!m.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||m.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!m.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!m.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!m.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&m.isInteger(e.ingestTimeNs.low)&&m.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!m.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkDataMessagePayload)return e;var t=new s.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?m.base64.decode(e.data,t.data=m.newBuffer(m.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(m.Long?(t.ingestTimeNs=m.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if(t.defaults){if(n.topic="",t.bytes===String?n.data="":(n.data=[],t.bytes!==Array&&(n.data=m.newBuffer(n.data))),n.lifetimeMs=0,n.senderAttendeeId="",m.Long){var r=new m.Long(0,0,!1);n.ingestTimeNs=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.ingestTimeNs=t.longs===String?"0":0;n.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(n.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?m.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(n.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(n.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?n.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:n.ingestTimeNs=t.longs===String?m.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(n.senderExternalUserId=e.senderExternalUserId),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessagePayload"},"getTypeUrl"),o}(),s.SdkTurnCredentials=function(){function o(i){if(this.uris=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTurnCredentials"),o.prototype.username="",o.prototype.password="",o.prototype.ttl=0,o.prototype.uris=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var n=0;n<e.uris.length;++n)t.uint32(34).string(e.uris[n]);return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTurnCredentials;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.username=e.string();break}case 2:{r.password=e.string();break}case 3:{r.ttl=e.uint32();break}case 4:{r.uris&&r.uris.length||(r.uris=[]),r.uris.push(e.string());break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!m.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!m.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!m.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!m.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTurnCredentials)return e;var t=new s.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var n=0;n<e.uris.length;++n)t.uris[n]=String(e.uris[n])}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.uris=[]),t.defaults&&(n.username="",n.password="",n.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(n.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(n.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(n.ttl=e.ttl),e.uris&&e.uris.length){n.uris=[];for(var r=0;r<e.uris.length;++r)n.uris[r]=e.uris[r]}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTurnCredentials"},"getTypeUrl"),o}(),s.SdkTranscriptItem=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscriptItem"),o.prototype.content="",o.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.speakerAttendeeId="",o.prototype.speakerExternalUserId="",o.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.type=1,o.prototype.vocabularyFilterMatch=!1,o.prototype.confidence=0,o.prototype.stable=!1,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscriptItem;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.content=e.string();break}case 2:{r.endTime=e.int64();break}case 3:{r.speakerAttendeeId=e.string();break}case 4:{r.speakerExternalUserId=e.string();break}case 5:{r.startTime=e.int64();break}case 6:{r.type=e.int32();break}case 7:{r.vocabularyFilterMatch=e.bool();break}case 8:{r.confidence=e.double();break}case 9:{r.stable=e.bool();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!m.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!m.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscriptItem)return e;var t=new s.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if(t.defaults){if(n.content="",m.Long){var r=new m.Long(0,0,!1);n.endTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.endTime=t.longs===String?"0":0;if(n.speakerAttendeeId="",n.speakerExternalUserId="",m.Long){var r=new m.Long(0,0,!1);n.startTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.startTime=t.longs===String?"0":0;n.type=t.enums===String?"PRONUNCIATION":1,n.vocabularyFilterMatch=!1,n.confidence=0,n.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(n.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(n.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(n.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?s.SdkTranscriptItem.Type[e.type]===void 0?e.type:s.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(n.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(n.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(n.stable=e.stable),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptItem"},"getTypeUrl"),o.Type=function(){var i={},e=Object.create(i);return e[i[1]="PRONUNCIATION"]=1,e[i[2]="PUNCTUATION"]=2,e}(),o}(),s.SdkTranscriptEntity=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscriptEntity"),o.prototype.category="",o.prototype.confidence=0,o.prototype.content="",o.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.type="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscriptEntity;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.category=e.string();break}case 2:{r.confidence=e.double();break}case 3:{r.content=e.string();break}case 4:{r.endTime=e.int64();break}case 5:{r.startTime=e.int64();break}case 6:{r.type=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!m.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!m.isString(e.type)?"type: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscriptEntity)return e;var t=new s.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if(t.defaults){if(n.category="",n.confidence=0,n.content="",m.Long){var r=new m.Long(0,0,!1);n.endTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.endTime=t.longs===String?"0":0;if(m.Long){var r=new m.Long(0,0,!1);n.startTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.startTime=t.longs===String?"0":0;n.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(n.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(n.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(n.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(n.type=e.type),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptEntity"},"getTypeUrl"),o}(),s.SdkTranscriptAlternative=function(){function o(i){if(this.items=[],this.entities=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscriptAlternative"),o.prototype.items=m.emptyArray,o.prototype.transcript="",o.prototype.entities=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.items!=null&&e.items.length)for(var n=0;n<e.items.length;++n)s.SdkTranscriptItem.encode(e.items[n],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var n=0;n<e.entities.length;++n)s.SdkTranscriptEntity.encode(e.entities[n],t.uint32(26).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscriptAlternative;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.items&&r.items.length||(r.items=[]),r.items.push(s.SdkTranscriptItem.decode(e,e.uint32()));break}case 2:{r.transcript=e.string();break}case 3:{r.entities&&r.entities.length||(r.entities=[]),r.entities.push(s.SdkTranscriptEntity.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var n=s.SdkTranscriptItem.verify(e.items[t]);if(n)return"items."+n}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!m.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var n=s.SdkTranscriptEntity.verify(e.entities[t]);if(n)return"entities."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscriptAlternative)return e;var t=new s.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var n=0;n<e.items.length;++n){if(typeof e.items[n]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[n]=s.SdkTranscriptItem.fromObject(e.items[n])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var n=0;n<e.entities.length;++n){if(typeof e.entities[n]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[n]=s.SdkTranscriptEntity.fromObject(e.entities[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.items=[],n.entities=[]),t.defaults&&(n.transcript=""),e.items&&e.items.length){n.items=[];for(var r=0;r<e.items.length;++r)n.items[r]=s.SdkTranscriptItem.toObject(e.items[r],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(n.transcript=e.transcript),e.entities&&e.entities.length){n.entities=[];for(var r=0;r<e.entities.length;++r)n.entities[r]=s.SdkTranscriptEntity.toObject(e.entities[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptAlternative"},"getTypeUrl"),o}(),s.SdkTranscriptLanguageWithScore=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscriptLanguageWithScore"),o.prototype.languageCode="",o.prototype.score=0,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscriptLanguageWithScore;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.languageCode=e.string();break}case 2:{r.score=e.double();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscriptLanguageWithScore)return e;var t=new s.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.languageCode="",n.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(n.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(n.score=t.json&&!isFinite(e.score)?String(e.score):e.score),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptLanguageWithScore"},"getTypeUrl"),o}(),s.SdkTranscriptResult=function(){function o(i){if(this.alternatives=[],this.languageIdentification=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscriptResult"),o.prototype.alternatives=m.emptyArray,o.prototype.channelId="",o.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.isPartial=!1,o.prototype.resultId="",o.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.languageCode="",o.prototype.languageIdentification=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.alternatives!=null&&e.alternatives.length)for(var n=0;n<e.alternatives.length;++n)s.SdkTranscriptAlternative.encode(e.alternatives[n],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var n=0;n<e.languageIdentification.length;++n)s.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[n],t.uint32(66).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscriptResult;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.alternatives&&r.alternatives.length||(r.alternatives=[]),r.alternatives.push(s.SdkTranscriptAlternative.decode(e,e.uint32()));break}case 2:{r.channelId=e.string();break}case 3:{r.endTime=e.int64();break}case 4:{r.isPartial=e.bool();break}case 5:{r.resultId=e.string();break}case 6:{r.startTime=e.int64();break}case 7:{r.languageCode=e.string();break}case 8:{r.languageIdentification&&r.languageIdentification.length||(r.languageIdentification=[]),r.languageIdentification.push(s.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var n=s.SdkTranscriptAlternative.verify(e.alternatives[t]);if(n)return"alternatives."+n}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!m.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!m.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var n=s.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(n)return"languageIdentification."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscriptResult)return e;var t=new s.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var n=0;n<e.alternatives.length;++n){if(typeof e.alternatives[n]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[n]=s.SdkTranscriptAlternative.fromObject(e.alternatives[n])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var n=0;n<e.languageIdentification.length;++n){if(typeof e.languageIdentification[n]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[n]=s.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.alternatives=[],n.languageIdentification=[]),t.defaults){if(n.channelId="",m.Long){var r=new m.Long(0,0,!1);n.endTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.endTime=t.longs===String?"0":0;if(n.isPartial=!1,n.resultId="",m.Long){var r=new m.Long(0,0,!1);n.startTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.startTime=t.longs===String?"0":0;n.languageCode=""}if(e.alternatives&&e.alternatives.length){n.alternatives=[];for(var c=0;c<e.alternatives.length;++c)n.alternatives[c]=s.SdkTranscriptAlternative.toObject(e.alternatives[c],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(n.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(n.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(n.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(n.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){n.languageIdentification=[];for(var c=0;c<e.languageIdentification.length;++c)n.languageIdentification[c]=s.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[c],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptResult"},"getTypeUrl"),o}(),s.SdkTranscript=function(){function o(i){if(this.results=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscript"),o.prototype.results=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.results!=null&&e.results.length)for(var n=0;n<e.results.length;++n)s.SdkTranscriptResult.encode(e.results[n],t.uint32(10).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscript;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.results&&r.results.length||(r.results=[]),r.results.push(s.SdkTranscriptResult.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var n=s.SdkTranscriptResult.verify(e.results[t]);if(n)return"results."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscript)return e;var t=new s.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var n=0;n<e.results.length;++n){if(typeof e.results[n]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[n]=s.SdkTranscriptResult.fromObject(e.results[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.results=[]),e.results&&e.results.length){n.results=[];for(var r=0;r<e.results.length;++r)n.results[r]=s.SdkTranscriptResult.toObject(e.results[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscript"},"getTypeUrl"),o}(),s.SdkTranscriptionStatus=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscriptionStatus"),o.prototype.type=1,o.prototype.eventTime=m.Long?m.Long.fromBits(0,0,!1):0,o.prototype.transcriptionRegion="",o.prototype.transcriptionConfiguration="",o.prototype.message="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscriptionStatus;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.type=e.int32();break}case 2:{r.eventTime=e.int64();break}case 3:{r.transcriptionRegion=e.string();break}case 4:{r.transcriptionConfiguration=e.string();break}case 5:{r.message=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!m.isInteger(e.eventTime)&&!(e.eventTime&&m.isInteger(e.eventTime.low)&&m.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!m.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!m.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscriptionStatus)return e;var t=new s.SdkTranscriptionStatus;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(m.Long?(t.eventTime=m.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if(t.defaults){if(n.type=t.enums===String?"STARTED":1,m.Long){var r=new m.Long(0,0,!1);n.eventTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.eventTime=t.longs===String?"0":0;n.transcriptionRegion="",n.transcriptionConfiguration="",n.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?s.SdkTranscriptionStatus.Type[e.type]===void 0?e.type:s.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?n.eventTime=t.longs===String?String(e.eventTime):e.eventTime:n.eventTime=t.longs===String?m.Long.prototype.toString.call(e.eventTime):t.longs===Number?new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(n.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(n.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(n.message=e.message),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptionStatus"},"getTypeUrl"),o.Type=function(){var i={},e=Object.create(i);return e[i[1]="STARTED"]=1,e[i[2]="INTERRUPTED"]=2,e[i[3]="RESUMED"]=3,e[i[4]="STOPPED"]=4,e[i[5]="FAILED"]=5,e}(),o}(),s.SdkTranscriptEvent=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}a(o,"SdkTranscriptEvent"),o.prototype.status=null,o.prototype.transcript=null;var i;return Object.defineProperty(o.prototype,"Event",{get:m.oneOfGetter(i=["status","transcript"]),set:m.oneOfSetter(i)}),o.create=a(function(t){return new o(t)},"create"),o.encode=a(function(t,n){return n||(n=u.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&s.SdkTranscriptionStatus.encode(t.status,n.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&s.SdkTranscript.encode(t.transcript,n.uint32(18).fork()).ldelim(),n},"encode"),o.encodeDelimited=a(function(t,n){return this.encode(t,n).ldelim()},"encodeDelimited"),o.decode=a(function(t,n){t instanceof p||(t=p.create(t));for(var r=n===void 0?t.len:t.pos+n,c=new s.SdkTranscriptEvent;t.pos<r;){var f=t.uint32();switch(f>>>3){case 1:{c.status=s.SdkTranscriptionStatus.decode(t,t.uint32());break}case 2:{c.transcript=s.SdkTranscript.decode(t,t.uint32());break}default:t.skipType(f&7);break}}return c},"decode"),o.decodeDelimited=a(function(t){return t instanceof p||(t=new p(t)),this.decode(t,t.uint32())},"decodeDelimited"),o.verify=a(function(t){if(typeof t!="object"||t===null)return"object expected";var n={};if(t.status!=null&&t.hasOwnProperty("status")){n.Event=1;{var r=s.SdkTranscriptionStatus.verify(t.status);if(r)return"status."+r}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(n.Event===1)return"Event: multiple values";n.Event=1;{var r=s.SdkTranscript.verify(t.transcript);if(r)return"transcript."+r}}return null},"verify"),o.fromObject=a(function(t){if(t instanceof s.SdkTranscriptEvent)return t;var n=new s.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");n.status=s.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");n.transcript=s.SdkTranscript.fromObject(t.transcript)}return n},"fromObject"),o.toObject=a(function(t,n){n||(n={});var r={};return t.status!=null&&t.hasOwnProperty("status")&&(r.status=s.SdkTranscriptionStatus.toObject(t.status,n),n.oneofs&&(r.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(r.transcript=s.SdkTranscript.toObject(t.transcript,n),n.oneofs&&(r.Event="transcript")),r},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(t){return t===void 0&&(t="type.googleapis.com"),t+"/SdkTranscriptEvent"},"getTypeUrl"),o}(),s.SdkTranscriptFrame=function(){function o(i){if(this.events=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkTranscriptFrame"),o.prototype.events=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.events!=null&&e.events.length)for(var n=0;n<e.events.length;++n)s.SdkTranscriptEvent.encode(e.events[n],t.uint32(10).fork()).ldelim();return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkTranscriptFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.events&&r.events.length||(r.events=[]),r.events.push(s.SdkTranscriptEvent.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var n=s.SdkTranscriptEvent.verify(e.events[t]);if(n)return"events."+n}}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkTranscriptFrame)return e;var t=new s.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var n=0;n<e.events.length;++n){if(typeof e.events[n]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[n]=s.SdkTranscriptEvent.fromObject(e.events[n])}}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.events=[]),e.events&&e.events.length){n.events=[];for(var r=0;r<e.events.length;++r)n.events[r]=s.SdkTranscriptEvent.toObject(e.events[r],t)}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptFrame"},"getTypeUrl"),o}(),s.SdkRemoteVideoUpdateFrame=function(){function o(i){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkRemoteVideoUpdateFrame"),o.prototype.addedOrUpdatedVideoSubscriptions=m.emptyArray,o.prototype.removedVideoSubscriptionMids=m.emptyArray,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){if(t||(t=u.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var n=0;n<e.addedOrUpdatedVideoSubscriptions.length;++n)s.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[n],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var n=0;n<e.removedVideoSubscriptionMids.length;++n)t.uint32(18).string(e.removedVideoSubscriptionMids[n]);return t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkRemoteVideoUpdateFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.addedOrUpdatedVideoSubscriptions&&r.addedOrUpdatedVideoSubscriptions.length||(r.addedOrUpdatedVideoSubscriptions=[]),r.addedOrUpdatedVideoSubscriptions.push(s.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}case 2:{r.removedVideoSubscriptionMids&&r.removedVideoSubscriptionMids.length||(r.removedVideoSubscriptionMids=[]),r.removedVideoSubscriptionMids.push(e.string());break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var n=s.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(n)return"addedOrUpdatedVideoSubscriptions."+n}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!m.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkRemoteVideoUpdateFrame)return e;var t=new s.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var n=0;n<e.addedOrUpdatedVideoSubscriptions.length;++n){if(typeof e.addedOrUpdatedVideoSubscriptions[n]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[n]=s.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[n])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var n=0;n<e.removedVideoSubscriptionMids.length;++n)t.removedVideoSubscriptionMids[n]=String(e.removedVideoSubscriptionMids[n])}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addedOrUpdatedVideoSubscriptions=[],n.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){n.addedOrUpdatedVideoSubscriptions=[];for(var r=0;r<e.addedOrUpdatedVideoSubscriptions.length;++r)n.addedOrUpdatedVideoSubscriptions[r]=s.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[r],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){n.removedVideoSubscriptionMids=[];for(var r=0;r<e.removedVideoSubscriptionMids.length;++r)n.removedVideoSubscriptionMids[r]=e.removedVideoSubscriptionMids[r]}return n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkRemoteVideoUpdateFrame"},"getTypeUrl"),o}(),s.SdkVideoQualityAdaptationPreference=function(){var o={},i=Object.create(o);return i[o[1]="BALANCED"]=1,i[o[2]="MAINTAIN_FRAMERATE"]=2,i[o[3]="MAINTAIN_RESOLUTION"]=3,i}(),s.SdkVideoSubscriptionConfiguration=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkVideoSubscriptionConfiguration"),o.prototype.mid="",o.prototype.attendeeId="",o.prototype.streamId=0,o.prototype.priority=0,o.prototype.targetBitrateKbps=0,o.prototype.groupId=0,o.prototype.qualityAdaptationPreference=1,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkVideoSubscriptionConfiguration;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.mid=e.string();break}case 2:{r.attendeeId=e.string();break}case 3:{r.streamId=e.uint32();break}case 4:{r.priority=e.uint32();break}case 5:{r.targetBitrateKbps=e.uint32();break}case 6:{r.groupId=e.uint32();break}case 7:{r.qualityAdaptationPreference=e.int32();break}default:e.skipType(c&7);break}}if(!r.hasOwnProperty("mid"))throw m.ProtocolError("missing required 'mid'",{instance:r});return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!m.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!m.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkVideoSubscriptionConfiguration)return e;var t=new s.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){default:if(typeof e.qualityAdaptationPreference=="number"){t.qualityAdaptationPreference=e.qualityAdaptationPreference;break}break;case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.mid="",n.attendeeId="",n.streamId=0,n.priority=0,n.targetBitrateKbps=0,n.groupId=0,n.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(n.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(n.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(n.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(n.qualityAdaptationPreference=t.enums===String?s.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]===void 0?e.qualityAdaptationPreference:s.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkVideoSubscriptionConfiguration"},"getTypeUrl"),o}(),s.SdkNotificationFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkNotificationFrame"),o.prototype.level=3,o.prototype.message="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkNotificationFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.level=e.int32();break}case 2:{r.message=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkNotificationFrame)return e;var t=new s.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;default:if(typeof e.level=="number"){t.level=e.level;break}break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.level=t.enums===String?"ERROR":3,n.message=""),e.level!=null&&e.hasOwnProperty("level")&&(n.level=t.enums===String?s.SdkNotificationFrame.NotificationLevel[e.level]===void 0?e.level:s.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(n.message=e.message),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkNotificationFrame"},"getTypeUrl"),o.NotificationLevel=function(){var i={},e=Object.create(i);return e[i[1]="INFO"]=1,e[i[2]="WARNING"]=2,e[i[3]="ERROR"]=3,e}(),o}(),s.SdkPrimaryMeetingJoinFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkPrimaryMeetingJoinFrame"),o.prototype.credentials=null,o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&s.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkPrimaryMeetingJoinFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.credentials=s.SdkMeetingSessionCredentials.decode(e,e.uint32());break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=s.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkPrimaryMeetingJoinFrame)return e;var t=new s.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=s.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(n.credentials=s.SdkMeetingSessionCredentials.toObject(e.credentials,t)),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinFrame"},"getTypeUrl"),o}(),s.SdkPrimaryMeetingJoinAckFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkPrimaryMeetingJoinAckFrame"),o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkPrimaryMeetingJoinAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),o.fromObject=a(function(e){return e instanceof s.SdkPrimaryMeetingJoinAckFrame?e:new s.SdkPrimaryMeetingJoinAckFrame},"fromObject"),o.toObject=a(function(){return{}},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinAckFrame"},"getTypeUrl"),o}(),s.SdkPrimaryMeetingLeaveFrame=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkPrimaryMeetingLeaveFrame"),o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkPrimaryMeetingLeaveFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),o.fromObject=a(function(e){return e instanceof s.SdkPrimaryMeetingLeaveFrame?e:new s.SdkPrimaryMeetingLeaveFrame},"fromObject"),o.toObject=a(function(){return{}},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingLeaveFrame"},"getTypeUrl"),o}(),s.SdkMeetingSessionCredentials=function(){function o(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return a(o,"SdkMeetingSessionCredentials"),o.prototype.attendeeId="",o.prototype.externalUserId="",o.prototype.joinToken="",o.create=a(function(e){return new o(e)},"create"),o.encode=a(function(e,t){return t||(t=u.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),o.encodeDelimited=a(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),o.decode=a(function(e,t){e instanceof p||(e=p.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new s.SdkMeetingSessionCredentials;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:{r.attendeeId=e.string();break}case 2:{r.externalUserId=e.string();break}case 3:{r.joinToken=e.string();break}default:e.skipType(c&7);break}}return r},"decode"),o.decodeDelimited=a(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),o.verify=a(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!m.isString(e.joinToken)?"joinToken: string expected":null},"verify"),o.fromObject=a(function(e){if(e instanceof s.SdkMeetingSessionCredentials)return e;var t=new s.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),o.toObject=a(function(e,t){t||(t={});var n={};return t.defaults&&(n.attendeeId="",n.externalUserId="",n.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(n.joinToken=e.joinToken),n},"toObject"),o.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),o.getTypeUrl=a(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMeetingSessionCredentials"},"getTypeUrl"),o}(),s.SdkVideoCodecCapability=function(){var o={},i=Object.create(o);return i[o[1]="VP8"]=1,i[o[2]="H264_BASELINE_PROFILE"]=2,i[o[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,i[o[4]="H264_MAIN_PROFILE"]=4,i[o[5]="H264_HIGH_PROFILE"]=5,i[o[6]="H264_CONSTRAINED_HIGH_PROFILE"]=6,i[o[8]="VP9_PROFILE_0"]=8,i[o[11]="AV1_MAIN_PROFILE"]=11,i}(),W.exports=s,m.Long=void 0,g.configure()},f3u9:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("U9CR"));let u=a(class sl{static fullbandSpeechMono(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new sl(4e4,s)}static fullbandMusicMono(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new sl(64e3,s)}static fullbandMusicStereo(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new sl(128e3,s)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(s=null,o=!0){this.audioBitrateBps=s,this.enableAudioRedundancy=new p.default().supportsAudioRedundancy()&&o}},"AudioProfile");d.default=u},fCza:function(W,d,h){"use strict";var g=d;g.build="minimal",g.Writer=h("wDi9"),g.BufferWriter=h("PwtQ"),g.Reader=h("LDIi"),g.BufferReader=h("QhKv"),g.util=h("j4TH"),g.rpc=h("gCnV"),g.roots=h("3E7f"),g.configure=p;function p(){g.util._configure(),g.Writer._configure(g.BufferWriter),g.Reader._configure(g.BufferReader)}a(p,"configure"),p()},fGw7:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("hEYi"));let u=a(class{isConnectionTerminated(){switch(this.type){case p.default.WebSocketFailed:case p.default.WebSocketError:case p.default.WebSocketClosing:case p.default.WebSocketClosed:return!0;default:return!1}}constructor(s,o,i,e,t){this.client=s,this.type=o,this.message=i,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");d.default=u},fZkv:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(e,t,n,r){function c(f){return f instanceof n?f:new n(function(S){S(f)})}return a(c,"adopt"),new(n||(n=Promise))(function(f,S){function l(O){try{T(r.next(O))}catch(R){S(R)}}a(l,"fulfilled");function y(O){try{T(r.throw(O))}catch(R){S(R)}}a(y,"rejected");function T(O){O.done?f(O.value):c(O.value).then(l,y)}a(T,"step"),T((r=r.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("ppUg")),m=p(h("wXa7")),s=p(h("CAce")),o=p(h("j+uH"));let i=a(class extends o.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return g(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let r=this.context.sdpAnswer;r=new m.default(r).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(r=new m.default(r).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(r=new m.default(r).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(r=new m.default(r).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.prioritizedSendVideoCodecCapabilities=new m.default(r).prioritizedSendVideoCodecCapabilities(),this.context.currentVideoSendCodec=this.context.prioritizedSendVideoCodecCapabilities.length>0?this.context.prioritizedSendVideoCodecCapabilities[0]:void 0;const c=this.context.activeVideoInput;if(c!==void 0){const S=this.context.audioVideoController.configuration.credentials.attendeeId,l=new u.default(S).hasModality(u.default.MODALITY_CONTENT),y=c.getVideoTracks()[0];l&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===s.default.av1Main().codecName?(y.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${S}`)):this.context.audioVideoController.configuration.enableSVC&&(y.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${S}`)))}this.logger.info(`processed remote description is >>>${r}<<<`);const f={type:"answer",sdp:r,toJSON:null};try{yield this.createICEConnectionCompletedPromise(f)}catch(S){throw S}})}createICEConnectionCompletedPromise(t){return new Promise((n,r)=>g(this,void 0,void 0,function*(){const c=a(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",c),n())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",c),r(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",c);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),c()}catch(f){r(f)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");d.default=i},fi20:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.MeetingSessionLifecycleEventCondition=void 0;var g;(function(p){p[p.ConnectingNew=0]="ConnectingNew",p[p.ReconnectingExisting=1]="ReconnectingExisting",p[p.StartedNew=2]="StartedNew",p[p.StartedExisting=3]="StartedExisting",p[p.StartedAfterReconnect=4]="StartedAfterReconnect",p[p.StoppedCleanly=5]="StoppedCleanly",p[p.StoppedWithFailure=6]="StoppedWithFailure"})(g=d.MeetingSessionLifecycleEventCondition||(d.MeetingSessionLifecycleEventCondition={})),d.default=g},ftz4:function(W,d,h){"use strict";var g={},p=g,u=Object.prototype,m=u.hasOwnProperty;function s(i){for(var e=i.name+"",t=p[e],n=m.call(p,e)?t.length:0;n--;){var r=t[n],c=r.func;if(c==null||c==i)return r.name}return e}a(s,"getFuncName");var o=d.a=s},fxRI:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("ppUg")),m=h("XCDq"),s=p(h("j+uH"));let o=a(class extends s.default{checkAndApplyVideoConstraint(e,t,n,r,c){return g(this,void 0,void 0,function*(){const f=t.getSettings();let S;if(e?S=this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:S=this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution,n>S.videoWidth||r>S.videoHeight||c>S.videoFrameRate){const l={width:{ideal:S.videoWidth},height:{ideal:S.videoHeight},frameRate:{ideal:S.videoFrameRate}};this.context.logger.warn(`Video track (content = ${e}) will be constrained to: ${JSON.stringify(l)} to remain below configured video quality settings, trackSettings: ${JSON.stringify(f)}`);try{yield t.applyConstraints(l)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}}})}run(){return g(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===m.SdkStreamServiceType.RX||this.context.videoDuplexMode===m.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?m.SdkStreamServiceType.DUPLEX:m.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?m.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let n;try{n=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const r=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(r.values()))}if(this.context.activeVideoInput=n,n){const r=n.getVideoTracks();if(!r||r.length===0)return;const c=this.context.meetingSessionConfiguration.credentials.attendeeId,f=new u.default(c).hasModality(u.default.MODALITY_CONTENT),S=r[0].getSettings();if(this.context.enableSimulcast){const y=this.context.videoUplinkBandwidthPolicy.chooseMediaTrackConstraints();this.context.logger.info(`simulcast: choose constraint ${JSON.stringify(y)}`);try{yield r[0].applyConstraints(y)}catch{this.context.logger.info("simulcast: pass video without more constraint")}}else this.checkAndApplyVideoConstraint(f,r[0],S.width,S.height,S.frameRate);const l=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(c,!0,n,S.width,S.height,null,l);for(let y=0;y<r.length;y++){const T=r[y];this.logger.info(`using video device label=${T.label} id=${T.id}`),this.context.videoDeviceInformation.current_camera_name=T.label,this.context.videoDeviceInformation.current_camera_id=T.id}}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");d.default=o},"g+gC":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"Attendee");d.default=g},gCnV:function(W,d,h){"use strict";var g=d;g.Service=h("vhAZ")},gLI0:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.BlurStrengthMapper=void 0;const g={LOW:7,MEDIUM:15,HIGH:30};let p=a(class{static getBlurAmount(m,s){if(m<=0)throw new Error(`invalid value for blur strength: ${m}`);return Math.round(m*s.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");d.BlurStrengthMapper=p,p.BLUR_STRENGTH_DIVISOR=540,d.default=g},gTDO:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("qvnc")),u=g(h("TYXu")),m=g(h("ZIUS"));let s=a(class{realtimeSetLocalAttendeeId(i,e){this.state.localAttendeeId=i,this.state.localExternalUserId=e}realtimeSetAttendeeIdPresence(i,e,t,n,r){try{e&&(this.state.attendeeIdToExternalUserId[i]=t);for(const c of this.state.attendeeIdChangesCallbacks)c(i,e,t,n,r)}catch(c){this.onError(c)}}realtimeSubscribeToAttendeeIdPresence(i){try{this.state.attendeeIdChangesCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToAttendeeIdPresence(i){try{const e=this.state.attendeeIdChangesCallbacks.indexOf(i);e!==-1&&this.state.attendeeIdChangesCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSetCanUnmuteLocalAudio(i){try{if(this.state.canUnmute===i)return;this.state.canUnmute=i;for(const e of this.state.setCanUnmuteLocalAudioCallbacks)e(i)}catch(e){this.onError(e)}}realtimeSubscribeToSetCanUnmuteLocalAudio(i){try{this.state.setCanUnmuteLocalAudioCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(i){try{const e=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(i);e!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const i of this.state.muteAndUnmuteLocalAudioCallbacks)i(!0)}catch(i){this.onError(i)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const i of this.state.muteAndUnmuteLocalAudioCallbacks)i(!1);return!0}catch(i){return this.onError(i),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(i){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(i){try{const e=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(i);e!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(i,e){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(i)||(this.state.volumeIndicatorCallbacks[i]=[]),this.state.volumeIndicatorCallbacks[i].push(e),this.sendVolumeIndicatorChange(i,!0,!0,!0,this.state.attendeeIdToExternalUserId[i])}catch(t){this.onError(t)}}realtimeUnsubscribeFromVolumeIndicator(i,e){if(this.state.volumeIndicatorCallbacks[i])if(e){const n=this.state.volumeIndicatorCallbacks[i].indexOf(e);n>=0&&this.state.volumeIndicatorCallbacks[i].splice(n,1)}else delete this.state.volumeIndicatorCallbacks[i]}realtimeUpdateVolumeIndicator(i,e,t,n,r){try{t=this.applyLocalMuteOverride(i,t);const c=this.getVolumeIndicatorState(i);let f=!1,S=!1,l=!1;t!==null&&c.muted!==t&&(c.muted=t,S=!0,c.muted&&c.volume!==0&&(c.volume=0,f=!0)),!c.muted&&e!==null&&(c.volume!==e&&(c.volume=e,f=!0),c.muted===null&&(c.muted=!1,S=!0)),n!==null&&c.signalStrength!==n&&(c.signalStrength=n,l=!0),this.sendVolumeIndicatorChange(i,f,S,l,r)}catch(c){this.onError(c)}}realtimeSubscribeToLocalSignalStrengthChange(i){try{if(this.state.localSignalStrengthChangeCallbacks.push(i),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(e){this.onError(e)}}realtimeUnsubscribeToLocalSignalStrengthChange(i){try{const e=this.state.localSignalStrengthChangeCallbacks.indexOf(i);e!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSubscribeToSendDataMessage(i){try{this.state.sendDataMessageCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeFromSendDataMessage(i){try{const e=this.state.sendDataMessageCallbacks.indexOf(i);e!==-1&&this.state.sendDataMessageCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSendDataMessage(i,e,t){try{for(const n of this.state.sendDataMessageCallbacks)n(i,e,t)}catch(n){this.onError(n)}}realtimeSubscribeToReceiveDataMessage(i,e){try{this.state.receiveDataMessageCallbacks.has(i)?this.state.receiveDataMessageCallbacks.get(i).push(e):this.state.receiveDataMessageCallbacks.set(i,[e])}catch(t){this.onError(t)}}realtimeUnsubscribeFromReceiveDataMessage(i){try{this.state.receiveDataMessageCallbacks.delete(i)}catch(e){this.onError(e)}}realtimeReceiveDataMessage(i){try{if(this.state.receiveDataMessageCallbacks.has(i.topic))for(const e of this.state.receiveDataMessageCallbacks.get(i.topic))e(i)}catch(e){this.onError(e)}}realtimeSubscribeToFatalError(i){try{this.state.fatalErrorCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToFatalError(i){try{const e=this.state.fatalErrorCallbacks.indexOf(i);e!==-1&&this.state.fatalErrorCallbacks.splice(e,1)}catch(e){this.onError(e)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(i){i?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(i,e){const t=this.state.localAttendeeId,n=this.state.muted;return i!==t||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?e:n}sendVolumeIndicatorChange(i,e,t,n,r){if(this.sendLocalSignalStrengthChange(i,n),!this.state.volumeIndicatorCallbacks.hasOwnProperty(i))return;const c=this.getVolumeIndicatorState(i),f=new m.default;if(e&&(f.volume=c.volume),t&&(f.muted=c.muted),n&&(f.signalStrength=c.signalStrength),!this.stateIsEmpty(f))for(const S of this.state.volumeIndicatorCallbacks[i])S(i,f.volume,f.muted,f.signalStrength,r)}sendLocalSignalStrengthChange(i,e){if(!e||i!==this.state.localAttendeeId)return;const n=this.getVolumeIndicatorState(i).signalStrength;if(n!==null)for(const r of this.state.localSignalStrengthChangeCallbacks)r(n)}getVolumeIndicatorState(i){return this.state.volumeIndicatorState.hasOwnProperty(i)||(this.state.volumeIndicatorState[i]=new m.default),this.state.volumeIndicatorState[i]}stateIsEmpty(i){return i.volume===null&&i.muted===null&&i.signalStrength===null}onError(i){try{for(const e of this.state.fatalErrorCallbacks)e(i)}catch(e){try{console.error(i),console.error(e)}catch{}}}constructor(i,e){this.mediaStreamBroker=i,this.state=new u.default,this._transcriptionController=e||new p.default(this)}},"DefaultRealtimeController");d.default=s},ghxq:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(u){this.currentData=u}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const u=this.health();return u!==this.currentHealth?(this.currentHealth=u,u):null}constructor(u,m,s){this.minHealth=u.minHealth,this.maxHealth=u.maxHealth,this.currentHealth=u.initialHealth,this.currentData=m.clone(),this.name=s}},"BaseConnectionHealthPolicy");d.default=g},h4LR:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g;(function(p){p.STARTED="started",p.INTERRUPTED="interrupted",p.RESUMED="resumed",p.STOPPED="stopped",p.FAILED="failed"})(g||(g={})),d.default=g},h4op:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("uctb"));let u=a(class{info(s){for(const o of this._loggers)o.info(s)}warn(s){for(const o of this._loggers)o.warn(s)}error(s){for(const o of this._loggers)o.error(s)}debug(s){let o,i;typeof s=="string"?i=s:s?i=a(()=>(o||(o=s()),o),"memoized"):i=""+s;for(const e of this._loggers)e.debug(i)}setLogLevel(s){for(const o of this._loggers)o.setLogLevel(s)}getLogLevel(){for(const s of this._loggers)return s.getLogLevel();return p.default.OFF}constructor(...s){this._loggers=s}},"MultiLogger");d.default=u},h8NR:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(u,m,s,o){function i(e){return e instanceof s?e:new s(function(t){t(e)})}return a(i,"adopt"),new(s||(s=Promise))(function(e,t){function n(f){try{c(o.next(f))}catch(S){t(S)}}a(n,"fulfilled");function r(f){try{c(o.throw(f))}catch(S){t(S)}}a(r,"rejected");function c(f){f.done?e(f.value):i(f.value).then(n,r)}a(c,"step"),c((o=o.apply(u,m||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});let p=a(class{createWorkerTimer(){try{const m=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(m))}catch{}}start(m,s){return g(this,void 0,void 0,function*(){this.callback=s,this.workerTimer?(this.workerTimer.onmessage=o=>{this.lastTimeout=o.data,this.callback()},this.workerTimer.postMessage(m)):this.lastTimeout=setTimeout(()=>{this.callback()},m)})}destroy(){return g(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");d.default=p},h96U:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("w1x/")),u=g(h("aCJD"));let m=a(class ga{partialCompare(o){return this.priority-o.priority}equals(o){return this.attendeeId===o.attendeeId&&this.targetSize===o.targetSize&&this.priority===o.priority&&this.degradationPreference===o.degradationPreference}clone(){return new ga(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(o){switch(o){case p.default.Maximum:return ga.MAXIMUM_BITRATE_KBPS;case p.default.High:return ga.HIGH_BITRATE_KBPS;case p.default.Medium:return ga.MID_BITRATE_KBPS;case p.default.Low:return ga.LOW_BITRATE_KBPS}}constructor(o,i,e,t){this.attendeeId=o,this.priority=i,this.targetSize=e!==void 0?e:p.default.Maximum,this.degradationPreference=t!==void 0?t:u.default.Balanced}},"VideoPreference");d.default=m,m.LOW_BITRATE_KBPS=300,m.MID_BITRATE_KBPS=600,m.HIGH_BITRATE_KBPS=1500,m.MAXIMUM_BITRATE_KBPS=1e4},hAj8:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const u={};return u.type=this.type,u.v=this.v,u.meetingId=this.meetingId,u.attendeeId=this.attendeeId,u}constructor(u,m,s,o=[]){this.type="Meet",this.v=1,this.meetingId=u,this.attendeeId=m,this.eventsToIgnore=o,this.authenticationToken=s}},"MeetingEventsClientConfiguration");d.default=g},hEYi:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.SignalingClientEventType=void 0;var g;(function(p){p[p.WebSocketConnecting=0]="WebSocketConnecting",p[p.WebSocketOpen=1]="WebSocketOpen",p[p.WebSocketError=2]="WebSocketError",p[p.WebSocketClosing=3]="WebSocketClosing",p[p.WebSocketClosed=4]="WebSocketClosed",p[p.WebSocketFailed=5]="WebSocketFailed",p[p.WebSocketMessage=6]="WebSocketMessage",p[p.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",p[p.WebSocketSentMessage=8]="WebSocketSentMessage",p[p.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",p[p.ReceivedSignalFrame=10]="ReceivedSignalFrame",p[p.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(g=d.SignalingClientEventType||(d.SignalingClientEventType={})),d.default=g},hGh8:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(Si){return Si&&Si.__esModule?Si:{default:Si}};Object.defineProperty(d,"__esModule",{value:!0}),d.DefaultEventController=d.DefaultDevicePixelRatioMonitor=d.DefaultDeviceController=d.DefaultContentShareController=d.DefaultBrowserBehavior=d.DefaultAudioVideoFacade=d.DefaultAudioVideoController=d.DefaultAudioMixController=d.DefaultActiveSpeakerPolicy=d.DefaultActiveSpeakerDetector=d.DataMessage=d.CreateSDPTask=d.CreatePeerConnectionTask=d.ContentShareMediaStreamBroker=d.ContentShareConstants=d.ConsoleLogger=d.ConnectionHealthPolicyConfiguration=d.ConnectionHealthData=d.ClientVideoStreamReceivingReport=d.ClientMetricReportMediaType=d.ClientMetricReportDirection=d.ClientMetricReport=d.CleanStoppedSessionTask=d.CleanRestartedSessionTask=d.CheckVideoInputFeedback=d.CheckVideoConnectivityFeedback=d.CheckNetworkUDPConnectivityFeedback=d.CheckNetworkTCPConnectivityFeedback=d.CheckContentShareConnectivityFeedback=d.CheckCameraResolutionFeedback=d.CheckAudioOutputFeedback=d.CheckAudioInputFeedback=d.CheckAudioConnectivityFeedback=d.CanvasVideoFrameBuffer=d.CSPMonitor=d.BitrateParameters=d.BaseTask=d.BaseConnectionHealthPolicy=d.BackgroundReplacementVideoFrameProcessor=d.BackgroundFilterVideoFrameProcessor=d.BackgroundBlurVideoFrameProcessor=d.BackgroundBlurStrength=d.AudioVideoControllerState=d.AudioProfile=d.AudioLogEvent=d.Attendee=d.AttachMediaInputTask=d.AsyncScheduler=d.ApplicationMetadata=d.AllHighestVideoBandwidthPolicy=void 0,d.MeetingReadinessCheckerConfiguration=d.MeetingFeatures=d.MeetingEventsClientConfiguration=d.MediaDeviceProxyHandler=d.Maybe=d.LogLevel=d.Log=d.ListenForVolumeIndicatorsTask=d.LeaveAndReceiveLeaveAckTask=d.JoinAndReceiveIndexTask=d.IntervalScheduler=d.InMemoryJSONEventBuffer=d.GlobalMetricReport=d.GetUserMediaError=d.FullJitterLimitedBackoff=d.FullJitterBackoffFactory=d.FullJitterBackoff=d.FinishGatheringICECandidatesTask=d.EventIngestionConfiguration=d.EventBufferConfiguration=d.DeviceSelection=d.DevicePixelRatioWindowSource=d.DefaultWebSocketAdapter=d.DefaultVolumeIndicatorAdapter=d.DefaultVideoTransformDevice=d.DefaultVideoTileFactory=d.DefaultVideoTileController=d.DefaultVideoTile=d.DefaultVideoStreamIndex=d.DefaultVideoStreamIdSet=d.DefaultVideoFrameProcessorTimer=d.DefaultVideoFrameProcessorPipeline=d.DefaultVideoCaptureAndEncodeParameter=d.DefaultUserAgentParser=d.DefaultTranscriptionController=d.DefaultTransceiverController=d.DefaultSimulcastUplinkPolicyForContentShare=d.DefaultSimulcastUplinkPolicy=d.DefaultSignalingClient=d.DefaultSigV4=d.DefaultSessionStateController=d.DefaultReconnectController=d.DefaultRealtimeController=d.DefaultPingPong=d.DefaultModality=d.DefaultMessagingSession=d.DefaultMeetingSession=d.DefaultMeetingReadinessChecker=d.DefaultMeetingEventReporter=d.DefaultMediaDeviceFactory=void 0,d.RedundantAudioEncoderWorkerCode=d.RedundantAudioEncoder=d.ReconnectionHealthPolicy=d.ReceiveVideoStreamIndexTask=d.ReceiveVideoInputTask=d.ReceiveRemoteVideoPauseResumeTask=d.ReceiveAudioInputTask=d.RealtimeVolumeIndicator=d.RealtimeState=d.RealtimeAttendeePositionInFrame=d.PromoteToPrimaryMeetingTask=d.PromiseQueue=d.PrefetchSortBy=d.PrefetchOn=d.PermissionDeniedError=d.ParallelGroupTask=d.POSTLogger=d.OverconstrainedError=d.OpenSignalingConnectionTask=d.OnceTask=d.NotReadableError=d.NotFoundError=d.None=d.NoVideoUplinkBandwidthPolicy=d.NoVideoDownlinkBandwidthPolicy=d.NoOpVideoFrameProcessor=d.NoOpVideoElementFactory=d.NoOpTask=d.NoOpMediaStreamBroker=d.NoOpLogger=d.NoOpEventReporter=d.NoOpDeviceController=d.NoOpDebugLogger=d.NoOpAudioVideoController=d.NScaleVideoUplinkBandwidthPolicy=d.MutableVideoPreferences=d.MultiLogger=d.MonitorTask=d.ModelSpecBuilder=d.MessagingSessionConfiguration=d.Message=d.MeetingSessionVideoAvailability=d.MeetingSessionURLs=d.MeetingSessionTURNCredentials=d.MeetingSessionStatusCode=d.MeetingSessionStatus=d.MeetingSessionLifecycleEventCondition=d.MeetingSessionLifecycleEvent=d.MeetingSessionCredentials=d.MeetingSessionConfiguration=void 0,d.VideoLogEvent=d.VideoFxProcessor=d.VideoCodecCapability=d.VideoAdaptiveProbePolicy=d.Versioning=d.UnusableAudioWarningConnectionHealthPolicy=d.TypeError=d.TranscriptionStatusType=d.TranscriptionStatus=d.TranscriptResult=d.TranscriptLanguageWithScore=d.TranscriptItemType=d.TranscriptItem=d.TranscriptEntity=d.TranscriptAlternative=d.Transcript=d.TimeoutTask=d.TimeoutScheduler=d.TaskStatus=d.TargetDisplaySize=d.SubscribeAndReceiveSubscribeAckTask=d.StreamMetricReport=d.Some=d.SingleNodeAudioTransformDevice=d.SimulcastVideoStreamIndex=d.SimulcastTransceiverController=d.SimulcastLayers=d.SimulcastContentShareTransceiverController=d.SignalingClientVideoSubscriptionConfiguration=d.SignalingClientSubscribe=d.SignalingClientJoin=d.SignalingClientEventType=d.SignalingClientEvent=d.SignalingClientConnectionRequest=d.SignalingAndMetricsConnectionMonitor=d.SetRemoteDescriptionTask=d.SetLocalDescriptionTask=d.SessionStateControllerTransitionResult=d.SessionStateControllerState=d.SessionStateControllerDeferPriority=d.SessionStateControllerAction=d.ServerSideNetworkAdaption=d.SerialGroupTask=d.SendingAudioFailureConnectionHealthPolicy=d.SendAndReceiveDataMessagesTask=d.SDPMediaSection=d.SDPCandidateType=d.SDP=d.RunnableTask=d.RedundantAudioRecoveryMetricReport=void 0,d.isVideoTransformDevice=d.isDestroyable=d.isAudioTransformDevice=d.ZLIBTextCompressor=d.WebSocketReadyState=d.WaitForAttendeePresenceTask=d.VoiceFocusTransformDevice=d.VoiceFocusDeviceTransformer=d.VideoTileState=d.VideoStreamDescription=d.VideoSource=d.VideoQualitySettings=d.VideoQualityAdaptationPreference=d.VideoPriorityBasedPolicyConfig=d.VideoPriorityBasedPolicy=d.VideoPreferences=d.VideoPreference=d.VideoOnlyTransceiverController=void 0;const p=g(h("nYR4"));d.AllHighestVideoBandwidthPolicy=p.default;const u=g(h("9BEE"));d.ApplicationMetadata=u.default;const m=g(h("6/h7"));d.AsyncScheduler=m.default;const s=g(h("5ViG"));d.AttachMediaInputTask=s.default;const o=g(h("g+gC"));d.Attendee=o.default;const i=g(h("J+fJ"));d.AudioLogEvent=i.default;const e=g(h("SO8M"));d.AudioProfile=e.default;const t=g(h("rEUf"));d.AudioVideoControllerState=t.default;const n=g(h("vjEy"));d.BackgroundBlurStrength=n.default;const r=g(h("YH3u"));d.BackgroundBlurVideoFrameProcessor=r.default;const c=g(h("ywpn"));d.BackgroundFilterVideoFrameProcessor=c.default;const f=g(h("Agw+"));d.BackgroundReplacementVideoFrameProcessor=f.default;const S=g(h("ghxq"));d.BaseConnectionHealthPolicy=S.default;const l=g(h("aVV0"));d.BaseTask=l.default;const y=g(h("GxrV"));d.BitrateParameters=y.default;const T=g(h("Q8+J"));d.CSPMonitor=T.default;const O=g(h("KsuK"));d.CanvasVideoFrameBuffer=O.default;const R=g(h("Yvks"));d.CheckAudioConnectivityFeedback=R.default;const F=g(h("jmx1"));d.CheckAudioInputFeedback=F.default;const U=g(h("zN22"));d.CheckAudioOutputFeedback=U.default;const _=g(h("CPHI"));d.CheckCameraResolutionFeedback=_.default;const P=g(h("2Bsk"));d.CheckContentShareConnectivityFeedback=P.default;const L=g(h("aSsB"));d.CheckNetworkTCPConnectivityFeedback=L.default;const A=g(h("kph0"));d.CheckNetworkUDPConnectivityFeedback=A.default;const M=g(h("SdmA"));d.CheckVideoConnectivityFeedback=M.default;const k=g(h("NFcc"));d.CheckVideoInputFeedback=k.default;const G=g(h("yMiq"));d.CleanRestartedSessionTask=G.default;const K=g(h("teem"));d.CleanStoppedSessionTask=K.default;const H=g(h("uCvS"));d.ClientMetricReport=H.default;const X=g(h("LmyK"));d.ClientMetricReportDirection=X.default;const oe=g(h("mpmV"));d.ClientMetricReportMediaType=oe.default;const le=g(h("ya0l"));d.ClientVideoStreamReceivingReport=le.default;const re=g(h("RfPO"));d.ConnectionHealthData=re.default;const he=g(h("wR/T"));d.ConnectionHealthPolicyConfiguration=he.default;const Pe=g(h("e/ca"));d.ConsoleLogger=Pe.default;const pe=g(h("34ho"));d.ContentShareConstants=pe.default;const Me=g(h("Lrln"));d.ContentShareMediaStreamBroker=Me.default;const We=g(h("Fyq9"));d.CreatePeerConnectionTask=We.default;const Ae=g(h("7W6Z"));d.CreateSDPTask=Ae.default;const lt=g(h("CtrA"));d.DataMessage=lt.default;const Ne=g(h("1Cbm"));d.DefaultActiveSpeakerDetector=Ne.default;const Xe=g(h("UIXl"));d.DefaultActiveSpeakerPolicy=Xe.default;const je=g(h("WHnE"));d.DefaultAudioMixController=je.default;const Te=g(h("2nae"));d.DefaultAudioVideoController=Te.default;const At=g(h("HLgz"));d.DefaultAudioVideoFacade=At.default;const sn=g(h("Sa54"));d.DefaultBrowserBehavior=sn.default;const Dt=g(h("0NFC"));d.DefaultContentShareController=Dt.default;const tn=g(h("RUbL"));d.DefaultDeviceController=tn.default;const Yt=g(h("t9Fz"));d.DefaultDevicePixelRatioMonitor=Yt.default;const Tn=g(h("eeYi"));d.DefaultEventController=Tn.default;const Xt=g(h("Y8b2"));d.DefaultMediaDeviceFactory=Xt.default;const Cn=g(h("MFJ1"));d.DefaultMeetingEventReporter=Cn.default;const Dn=g(h("yx2K"));d.DefaultMeetingReadinessChecker=Dn.default;const cn=g(h("yvTz"));d.DefaultMeetingSession=cn.default;const Mn=g(h("JJ3a"));d.DefaultMessagingSession=Mn.default;const _n=g(h("bTau"));d.DefaultModality=_n.default;const nt=g(h("ML5K"));d.DefaultPingPong=nt.default;const $t=g(h("gTDO"));d.DefaultRealtimeController=$t.default;const It=g(h("ULlC"));d.DefaultReconnectController=It.default;const Fe=g(h("9ETa"));d.DefaultSessionStateController=Fe.default;const Rt=g(h("PsbS"));d.DefaultSigV4=Rt.default;const Qe=g(h("jP1N"));d.DefaultSignalingClient=Qe.default;const Qt=g(h("LUct"));d.DefaultSimulcastUplinkPolicy=Qt.default;const Nn=g(h("NWIo"));d.DefaultSimulcastUplinkPolicyForContentShare=Nn.default;const Zt=g(h("IBi3"));d.DefaultTransceiverController=Zt.default;const mn=g(h("qvnc"));d.DefaultTranscriptionController=mn.default;const ni=g(h("X3Fi"));d.DefaultUserAgentParser=ni.default;const fi=g(h("XJrD"));d.DefaultVideoCaptureAndEncodeParameter=fi.default;const di=g(h("3zlU"));d.DefaultVideoFrameProcessorPipeline=di.default;const Wn=g(h("EkGV"));d.DefaultVideoFrameProcessorTimer=Wn.default;const Rn=g(h("Zkgh"));d.DefaultVideoStreamIdSet=Rn.default;const bt=g(h("ldli"));d.DefaultVideoStreamIndex=bt.default;const ee=g(h("JTre"));d.DefaultVideoTile=ee.default;const ae=g(h("+D+n"));d.DefaultVideoTileController=ae.default;const fe=g(h("rcF0"));d.DefaultVideoTileFactory=fe.default;const Ue=g(h("FxSh"));d.DefaultVideoTransformDevice=Ue.default;const we=g(h("P3Bx"));d.DefaultVolumeIndicatorAdapter=we.default;const Ce=g(h("jHTc"));d.DefaultWebSocketAdapter=Ce.default;const De=g(h("QzVx"));d.DevicePixelRatioWindowSource=De.default;const pt=g(h("DbLV"));d.DeviceSelection=pt.default;const gt=g(h("8FET"));d.EventBufferConfiguration=gt.default;const ct=g(h("Y2s1"));d.EventIngestionConfiguration=ct.default;const _t=g(h("N9oo"));d.FinishGatheringICECandidatesTask=_t.default;const zn=g(h("Np2I"));d.FullJitterBackoff=zn.default;const vn=g(h("mcAb"));d.FullJitterBackoffFactory=vn.default;const li=g(h("5/Tg"));d.FullJitterLimitedBackoff=li.default;const Gn=g(h("xzjI"));d.GetUserMediaError=Gn.default;const gn=g(h("2oFa"));d.GlobalMetricReport=gn.default;const yi=g(h("3EKQ"));d.InMemoryJSONEventBuffer=yi.default;const un=g(h("8wPz"));d.IntervalScheduler=un.default;const Xn=g(h("xJ9D"));d.JoinAndReceiveIndexTask=Xn.default;const an=g(h("FCN7"));d.LeaveAndReceiveLeaveAckTask=an.default;const hi=g(h("curu"));d.ListenForVolumeIndicatorsTask=hi.default;const xn=g(h("91j7"));d.Log=xn.default;const bi=g(h("uctb"));d.LogLevel=bi.default;const Ei=g(h("tK6J"));d.MediaDeviceProxyHandler=Ei.default;const Kn=g(h("hAj8"));d.MeetingEventsClientConfiguration=Kn.default;const Oi=g(h("v9PG"));d.MeetingFeatures=Oi.default;const Re=g(h("+7ft"));d.MeetingReadinessCheckerConfiguration=Re.default;const Oe=g(h("/U1e"));d.MeetingSessionConfiguration=Oe.default;const Et=g(h("a16/"));d.MeetingSessionCredentials=Et.default;const it=g(h("tcc5"));d.MeetingSessionLifecycleEvent=it.default;const Pt=g(h("dPBs"));d.MeetingSessionLifecycleEventCondition=Pt.default;const qt=g(h("6Bxv"));d.MeetingSessionStatus=qt.default;const Jt=g(h("lUhs"));d.MeetingSessionStatusCode=Jt.default;const kt=g(h("V5IF"));d.MeetingSessionTURNCredentials=kt.default;const nn=g(h("iNgN"));d.MeetingSessionURLs=nn.default;const N=g(h("v8aG"));d.MeetingSessionVideoAvailability=N.default;const Z=g(h("evlv"));d.Message=Z.default;const de=g(h("i+zQ"));d.MessagingSessionConfiguration=de.default;const ce=g(h("J93s"));d.ModelSpecBuilder=ce.default;const ve=g(h("3Ft5"));d.MonitorTask=ve.default;const me=g(h("h4op"));d.MultiLogger=me.default;const He=g(h("hhlX"));d.NScaleVideoUplinkBandwidthPolicy=He.default;const ke=g(h("Jsna"));d.NoOpAudioVideoController=ke.default;const $e=g(h("ir/0"));d.NoOpDebugLogger=$e.default;const Be=g(h("zNm1"));d.NoOpDeviceController=Be.default;const ot=g(h("Ni8D"));d.NoOpEventReporter=ot.default;const Kt=g(h("2y31"));d.NoOpLogger=Kt.default;const Wt=g(h("r9Lw"));d.NoOpMediaStreamBroker=Wt.default;const fn=g(h("Nzn3"));d.NoOpTask=fn.default;const on=g(h("ukPp"));d.NoOpVideoElementFactory=on.default;const hn=g(h("Wjms"));d.NoOpVideoFrameProcessor=hn.default;const Ot=g(h("otBB"));d.NoVideoDownlinkBandwidthPolicy=Ot.default;const wn=g(h("DcUe"));d.NoVideoUplinkBandwidthPolicy=wn.default;const Sn=g(h("B7cK"));d.NotFoundError=Sn.default;const yn=g(h("UW8m"));d.NotReadableError=yn.default;const pi=g(h("V3UW"));d.OnceTask=pi.default;const In=g(h("mjQB"));d.OpenSignalingConnectionTask=In.default;const ci=g(h("XhYu"));d.OverconstrainedError=ci.default;const pn=g(h("e2MG"));d.POSTLogger=pn.default;const wi=g(h("mv1L"));d.ParallelGroupTask=wi.default;const On=g(h("V4cD"));d.PermissionDeniedError=On.default;const rn=g(h("p3mT"));d.PrefetchOn=rn.default;const ut=g(h("Oxpw"));d.PrefetchSortBy=ut.default;const ze=g(h("o13v"));d.PromiseQueue=ze.default;const Bn=g(h("LNXf"));d.PromoteToPrimaryMeetingTask=Bn.default;const Bi=g(h("rbNI"));d.RealtimeAttendeePositionInFrame=Bi.default;const Qn=g(h("TYXu"));d.RealtimeState=Qn.default;const An=g(h("ZIUS"));d.RealtimeVolumeIndicator=An.default;const xi=g(h("LhvI"));d.ReceiveAudioInputTask=xi.default;const Di=g(h("WRer"));d.ReceiveRemoteVideoPauseResumeTask=Di.default;const Zn=g(h("5z6C"));d.ReceiveVideoInputTask=Zn.default;const wo=g(h("1J7j"));d.ReceiveVideoStreamIndexTask=wo.default;const Ao=g(h("kItj"));d.ReconnectionHealthPolicy=Ao.default;const Pn=g(h("aNtF"));d.RedundantAudioEncoder=Pn.default;const mi=g(h("i2nt"));d.RedundantAudioEncoderWorkerCode=mi.default;const sr=g(h("Xf/8"));d.RedundantAudioRecoveryMetricReport=sr.default;const Po=g(h("2q7c"));d.RunnableTask=Po.default;const Ai=g(h("AUdx"));d.SDP=Ai.default;const Wi=g(h("0YRd"));d.SDPCandidateType=Wi.default;const Vi=g(h("Iwfh"));d.SDPMediaSection=Vi.default;const ar=g(h("0jNb"));d.SendAndReceiveDataMessagesTask=ar.default;const zr=g(h("LuEC"));d.SendingAudioFailureConnectionHealthPolicy=zr.default;const Gr=g(h("8tla"));d.SerialGroupTask=Gr.default;const Cr=g(h("DUgj"));d.ServerSideNetworkAdaption=Cr.default;const Kr=g(h("JHsX"));d.SessionStateControllerAction=Kr.default;const $r=g(h("hWev"));d.SessionStateControllerDeferPriority=$r.default;const Ir=g(h("I0Bj"));d.SessionStateControllerState=Ir.default;const Or=g(h("87Nr"));d.SessionStateControllerTransitionResult=Or.default;const Mo=g(h("ohOv"));d.SetLocalDescriptionTask=Mo.default;const wr=g(h("CRwe"));d.SetRemoteDescriptionTask=wr.default;const Ar=g(h("8dVZ"));d.SignalingAndMetricsConnectionMonitor=Ar.default;const Ro=g(h("5rM1"));d.SignalingClientConnectionRequest=Ro.default;const Jr=g(h("fGw7"));d.SignalingClientEvent=Jr.default;const Yr=g(h("hEYi"));d.SignalingClientEventType=Yr.default;const ui=g(h("COTZ"));d.SignalingClientJoin=ui.default;const Xr=g(h("iFpF"));d.SignalingClientSubscribe=Xr.default;const ko=g(h("/sFY"));d.SignalingClientVideoSubscriptionConfiguration=ko.default;const Qr=g(h("riOr"));d.SimulcastContentShareTransceiverController=Qr.default;const _i=g(h("H7ma"));d.SimulcastLayers=_i.default;const dr=g(h("OND3"));d.SimulcastTransceiverController=dr.default;const Pi=g(h("nq15"));d.SimulcastVideoStreamIndex=Pi.default;const lr=g(h("0Kz9"));d.SingleNodeAudioTransformDevice=lr.default;const Do=g(h("NE7a"));d.StreamMetricReport=Do.default;const Zr=g(h("ZPwG"));d.SubscribeAndReceiveSubscribeAckTask=Zr.default;const qr=g(h("Lspx"));d.TargetDisplaySize=qr.default;const Ti=g(h("Sl5A"));d.TaskStatus=Ti.default;const Pr=g(h("yQ3g"));d.TimeoutScheduler=Pr.default;const cr=g(h("L+i+"));d.TimeoutTask=cr.default;const Mi=g(h("7nob"));d.Transcript=Mi.default;const zi=g(h("JMN+"));d.TranscriptAlternative=zi.default;const ur=g(h("2xSc"));d.TranscriptEntity=ur.default;const eo=g(h("Ol9i"));d.TranscriptItem=eo.default;const _o=g(h("VWEK"));d.TranscriptItemType=_o.default;const Ri=g(h("SM5d"));d.TranscriptLanguageWithScore=Ri.default;const Mr=g(h("5rZr"));d.TranscriptResult=Mr.default;const ki=g(h("VoiG"));d.TranscriptionStatus=ki.default;const to=g(h("h4LR"));d.TranscriptionStatusType=to.default;const Lo=g(h("SgmS"));d.TypeError=Lo.default;const Ci=g(h("pCf5"));d.UnusableAudioWarningConnectionHealthPolicy=Ci.default;const Hi=g(h("59sL"));d.Versioning=Hi.default;const fr=g(h("5mR7"));d.VideoAdaptiveProbePolicy=fr.default;const no=g(h("CLOt"));d.VideoCodecCapability=no.default;const No=g(h("rLvK"));d.VideoFxProcessor=No.default;const Bo=g(h("DG83"));d.VideoLogEvent=Bo.default;const Rr=g(h("NUAg"));d.VideoOnlyTransceiverController=Rr.default;const io=g(h("uaNU"));d.VideoPreference=io.default;const ro=g(h("P7D+"));d.VideoPreferences=ro.default;const kr=g(h("knPd"));d.VideoPriorityBasedPolicy=kr.default;const Li=g(h("J1op"));d.VideoPriorityBasedPolicyConfig=Li.default;const oo=g(h("NBIk"));d.VideoQualityAdaptationPreference=oo.default;const Gi=g(h("dWQL"));d.VideoQualitySettings=Gi.default;const $n=g(h("aqWb"));d.VideoSource=$n.default;const Ki=g(h("MhWp"));d.VideoStreamDescription=Ki.default;const hr=g(h("5mqp"));d.VideoTileState=hr.default;const pr=g(h("6JeQ"));d.VoiceFocusDeviceTransformer=pr.default;const $i=g(h("25+x"));d.VoiceFocusTransformDevice=$i.default;const Ji=g(h("yqyw"));d.WaitForAttendeePresenceTask=Ji.default;const Dr=g(h("4EN+"));d.WebSocketReadyState=Dr.default;const so=g(h("MelK"));d.ZLIBTextCompressor=so.default;const _r=h("P7D+");Object.defineProperty(d,"MutableVideoPreferences",{enumerable:!0,get:function(){return _r.MutableVideoPreferences}});const ji=h("KyYT");Object.defineProperty(d,"Some",{enumerable:!0,get:function(){return ji.Some}}),Object.defineProperty(d,"None",{enumerable:!0,get:function(){return ji.None}}),Object.defineProperty(d,"Maybe",{enumerable:!0,get:function(){return ji.Maybe}});const ao=h("NDMw");Object.defineProperty(d,"isAudioTransformDevice",{enumerable:!0,get:function(){return ao.isAudioTransformDevice}});const gi=h("rwhO");Object.defineProperty(d,"isDestroyable",{enumerable:!0,get:function(){return gi.isDestroyable}});const lo=h("dWP+");Object.defineProperty(d,"isVideoTransformDevice",{enumerable:!0,get:function(){return lo.isVideoTransformDevice}})},hWev:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.SessionStateControllerDeferPriority=void 0;var g;(function(p){p[p.DoNotDefer=0]="DoNotDefer",p[p.Low=1]="Low",p[p.Medium=2]="Medium",p[p.High=3]="High",p[p.VeryHigh=4]="VeryHigh"})(g=d.SessionStateControllerDeferPriority||(d.SessionStateControllerDeferPriority={})),d.default=g},hhZA:function(W,d,h){"use strict";h.d(d,"a",function(){return g});const g={PendingApproval:"pending_approval",Approved:"approved",Rejected:"rejected",Expired:"expired"}},hhlX:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("XJrD"));let m=a(class Sa{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new u.default(0,0,0,0,!1),this.parametersInEffect=new u.default(0,0,0,0,!1),this.encodingParamMap.set(Sa.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(o){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(o){var i;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=o.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),n=o.numberOfParticipants();if(this.numParticipants===n&&this.numberOfPublishedVideoSources===t){(i=this.logger)===null||i===void 0||i.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=n,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let o=1;if(this.transceiverController){const i=this.getStreamCaptureSetting();i&&(o=this.calculateEncodingParameters(i).scaleResolutionDownBy)}this.optimalParameters=new u.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,o,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let o=640;return this.getNumberOfPublishedVideoSources()>4&&(o=320),o}captureHeight(){let o=384;return this.getNumberOfPublishedVideoSources()>4&&(o=192),o}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let o=0;return this.getNumberOfPublishedVideoSources()<=2?o=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?o=this.idealMaxBandwidthKbps*2/3:o=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(o)}setIdealMaxBandwidthKbps(o){this.idealMaxBandwidthKbps=o}setHasBandwidthPriority(o){this.hasBandwidthPriority=o}setTransceiverController(o){this.transceiverController=o}setSVCEnabled(o){var i;this.enableSVC=o,(i=this.logger)===null||i===void 0||i.info(`setSVCEnabled, enable: ${o}}`)}setHighResolutionFeatureEnabled(o){this.enableHighResolutionFeature=o}updateTransceiverController(){return g(this,void 0,void 0,function*(){const o=this.getStreamCaptureSetting();if(!o)return;const i=this.calculateEncodingParameters(o);this.shouldUpdateEndcodingParameters(i)&&(this.encodingParamMap.set(Sa.encodingMapKey,i),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(o){var i,e;const t=(e=(i=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||i===void 0?void 0:i.encodings)===null||e===void 0?void 0:e[0];return o.maxBitrate!==(t==null?void 0:t.maxBitrate)||o.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(o==null?void 0:o.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(o){var i,e,t;const n=this.maxBandwidthKbps()*1e3;let r=1,c=720;if(o.height!==void 0&&o.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(c=Sa.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),Sa.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],c===480&&(!((i=this.browserBehavior)===null||i===void 0)&&i.disable480pResolutionScaleDown())&&(c=360),r=Math.max(Math.min(o.height,o.width)/c,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${r} for capture resolution ${o.width}x${o.height}. New dimension is ${o.width/r}x${o.height/r}`)),this.enableSVC){let f;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?f="L1T1":f=c>=720?"L3T3":c>=360?"L2T3":"L1T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${n}  targetHeight: ${c}  scalabilityMode: ${f}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:r,maxBitrate:n,scalabilityMode:f}}else return{scaleResolutionDownBy:r,maxBitrate:n}}getStreamCaptureSetting(){var o,i,e,t;return(t=(e=(i=(o=this.transceiverController)===null||o===void 0?void 0:o.localVideoTransceiver())===null||i===void 0?void 0:i.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var o;return(o=this.numberOfPublishedVideoSources)!==null&&o!==void 0?o:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(o,i){const e=o??i,t=e.length>0&&Sa.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(o,i=!0,e=void 0,t=void 0){this.selfAttendeeId=o,this.scaleResolution=i,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");d.default=m,m.encodingMapKey="video",m.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],m.SVCCodecNames=["VP9"]},hl97:function(W,d,h){"use strict";W.exports=t;var g=h("kU+7"),p,u=g.LongBits,m=g.base64,s=g.utf8;function o(T,O,R){this.fn=T,this.len=O,this.next=void 0,this.val=R}a(o,"Op");function i(){}a(i,"noop");function e(T){this.head=T.head,this.tail=T.tail,this.len=T.len,this.next=T.states}a(e,"State");function t(){this.len=0,this.head=new o(i,0,0),this.tail=this.head,this.states=null}a(t,"Writer");var n=a(function(){return g.Buffer?a(function(){return(t.create=a(function(){return new p},"create_buffer"))()},"create_buffer_setup"):a(function(){return new t},"create_array")},"create");t.create=n(),t.alloc=a(function(O){return new g.Array(O)},"alloc"),g.Array!==Array&&(t.alloc=g.pool(t.alloc,g.Array.prototype.subarray)),t.prototype._push=a(function(O,R,F){return this.tail=this.tail.next=new o(O,R,F),this.len+=R,this},"push");function r(T,O,R){O[R]=T&255}a(r,"writeByte");function c(T,O,R){for(;T>127;)O[R++]=T&127|128,T>>>=7;O[R]=T}a(c,"writeVarint32");function f(T,O){this.len=T,this.next=void 0,this.val=O}a(f,"VarintOp"),f.prototype=Object.create(o.prototype),f.prototype.fn=c,t.prototype.uint32=a(function(O){return this.len+=(this.tail=this.tail.next=new f((O=O>>>0)<128?1:O<16384?2:O<2097152?3:O<268435456?4:5,O)).len,this},"write_uint32"),t.prototype.int32=a(function(O){return O<0?this._push(S,10,u.fromNumber(O)):this.uint32(O)},"write_int32"),t.prototype.sint32=a(function(O){return this.uint32((O<<1^O>>31)>>>0)},"write_sint32");function S(T,O,R){for(;T.hi;)O[R++]=T.lo&127|128,T.lo=(T.lo>>>7|T.hi<<25)>>>0,T.hi>>>=7;for(;T.lo>127;)O[R++]=T.lo&127|128,T.lo=T.lo>>>7;O[R++]=T.lo}a(S,"writeVarint64"),t.prototype.uint64=a(function(O){var R=u.from(O);return this._push(S,R.length(),R)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=a(function(O){var R=u.from(O).zzEncode();return this._push(S,R.length(),R)},"write_sint64"),t.prototype.bool=a(function(O){return this._push(r,1,O?1:0)},"write_bool");function l(T,O,R){O[R]=T&255,O[R+1]=T>>>8&255,O[R+2]=T>>>16&255,O[R+3]=T>>>24}a(l,"writeFixed32"),t.prototype.fixed32=a(function(O){return this._push(l,4,O>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=a(function(O){var R=u.from(O);return this._push(l,4,R.lo)._push(l,4,R.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=a(function(O){return this._push(g.float.writeFloatLE,4,O)},"write_float"),t.prototype.double=a(function(O){return this._push(g.float.writeDoubleLE,8,O)},"write_double");var y=g.Array.prototype.set?a(function(O,R,F){R.set(O,F)},"writeBytes_set"):a(function(O,R,F){for(var U=0;U<O.length;++U)R[F+U]=O[U]},"writeBytes_for");t.prototype.bytes=a(function(O){var R=O.length>>>0;if(!R)return this._push(r,1,0);if(g.isString(O)){var F=t.alloc(R=m.length(O));m.decode(O,F,0),O=F}return this.uint32(R)._push(y,R,O)},"write_bytes"),t.prototype.string=a(function(O){var R=s.length(O);return R?this.uint32(R)._push(s.write,R,O):this._push(r,1,0)},"write_string"),t.prototype.fork=a(function(){return this.states=new e(this),this.head=this.tail=new o(i,0,0),this.len=0,this},"fork"),t.prototype.reset=a(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new o(i,0,0),this.len=0),this},"reset"),t.prototype.ldelim=a(function(){var O=this.head,R=this.tail,F=this.len;return this.reset().uint32(F),F&&(this.tail.next=O.next,this.tail=R,this.len+=F),this},"ldelim"),t.prototype.finish=a(function(){for(var O=this.head.next,R=this.constructor.alloc(this.len),F=0;O;)O.fn(O.val,R,F),F+=O.len,O=O.next;return R},"finish"),t._configure=function(T){p=T,t.create=n(),p._configure()}},hlxM:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(l,y,T,O){function R(F){return F instanceof T?F:new T(function(U){U(F)})}return a(R,"adopt"),new(T||(T=Promise))(function(F,U){function _(A){try{L(O.next(A))}catch(M){U(M)}}a(_,"fulfilled");function P(A){try{L(O.throw(A))}catch(M){U(M)}}a(P,"rejected");function L(A){A.done?F(A.value):R(A.value).then(_,P)}a(L,"step"),L((O=O.apply(l,y||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.isOldChrome=d.supportsWASMStreaming=d.supportsSharedArrayBuffer=d.supportsWASM=d.supportsAudioWorklet=d.supportsWorker=d.supportsVoiceFocusWorker=d.supportsWASMPostMessage=d.isSafari=void 0;const p=h("GEtQ"),u=a(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),m=a(function(){const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,T=y.match(/Safari\//),O=y.match(/Chrom(?:e|ium)\//);return!!(T&&!O)},"isSafari");d.isSafari=m;const s=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return d.isSafari(l)?!1:u(l)?(f(l)||0)<95:!0},"supportsWASMPostMessage");d.supportsWASMPostMessage=s;const o=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0,T=arguments.length>2?arguments[2]:void 0;return g(void 0,void 0,void 0,function*(){if(!d.supportsWorker(l,T))return!1;const O=`${y.paths.workers}worker-v1.js`;try{const R=yield p.loadWorker(O,"VoiceFocusTestWorker",y,T);try{R.terminate()}catch(F){T==null||T.debug("Failed to terminate worker.",F)}return!0}catch(R){return T==null||T.info("Failed to fetch and instantiate test worker",R),!1}})},"supportsVoiceFocusWorker");d.supportsVoiceFocusWorker=o;const i=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!l.Worker}catch(T){return y==null||y.info("Does not support Worker",T),!1}},"supportsWorker");d.supportsWorker=i;const e=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!l.AudioWorklet&&!!l.AudioWorkletNode}catch(T){return y==null||y.info("Does not support Audio Worklet",T),!1}},"supportsAudioWorklet");d.supportsAudioWorklet=e;const t=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!l.WebAssembly&&(!!l.WebAssembly.compile||!!l.WebAssembly.compileStreaming)}catch(T){return y==null||y.info("Does not support WASM",T),!1}},"supportsWASM");d.supportsWASM=t;const n=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,T=arguments.length>2?arguments[2]:void 0;try{return!!l.SharedArrayBuffer&&(!!y.chrome||!!l.crossOriginIsolated)}catch{return T==null||T.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");d.supportsSharedArrayBuffer=n;const r=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;var T;try{return!!(!((T=l.WebAssembly)===null||T===void 0)&&T.compileStreaming)}catch(O){return y==null||y.info("Does not support WASM streaming compilation",O),!1}},"supportsWASMStreaming");d.supportsWASMStreaming=r;const c=90,f=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!l.chrome)return}catch{}const y=l.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(y)return parseInt(y[1],10)},"chromeVersion"),S=a(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;const T=f(l);return T&&T<c?(y==null||y.debug(`Chrome ${T} has incomplete SIMD support.`),!0):!1},"isOldChrome");d.isOldChrome=S},hrQK:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("jG7n")),m=h("gLI0"),s=p(h("FKpq"));let o=a(class extends u.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:r,targetCanvas:c}=this,{width:f,height:S}=c;r.save(),r.clearRect(0,0,f,S),r.drawImage(this.scaledCanvas,0,0,f,S),r.globalCompositeOperation="source-in",r.drawImage(e,0,0,f,S),r.globalCompositeOperation="destination-over",r.filter=`blur(${this.blurAmount}px)`,r.drawImage(e,0,0,c.width,c.height),r.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return g(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new s.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: ${this.stringify(t)}`)}},"BackgroundBlurProcessorProvided");d.default=o},hspq:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(e,t,n,r){function c(f){return f instanceof n?f:new n(function(S){S(f)})}return a(c,"adopt"),new(n||(n=Promise))(function(f,S){function l(O){try{T(r.next(O))}catch(R){S(R)}}a(l,"fulfilled");function y(O){try{T(r.throw(O))}catch(R){S(R)}}a(y,"rejected");function T(O){O.done?f(O.value):c(O.value).then(l,y)}a(T,"step"),T((r=r.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0});const u=h("tA0R"),m=p(h("HbHZ")),s=h("XCDq"),o=p(h("j+uH"));let i=a(class extends o.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return g(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new u.MeetingSessionStatus(u.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,n)=>{let r=a(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new u.MeetingSessionStatus(u.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(S){S.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new u.MeetingSessionStatus(u.MeetingSessionStatusCode.SignalingRequestFailed)),t()),S.type===m.default.ReceivedSignalFrame&&S.message.type===s.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(u.MeetingSessionStatus.fromSignalFrame(S.message)),t())}constructor(S,l,y){this.signalingClient=S,this.completionCallback=l,this.logger=y}},"Interceptor");const c=new r(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=c,this.context.signalingClient.registerObserver(c)})}constructor(t,n,r){super(t.logger),this.context=t,this.credentials=n,this.completionCallback=r,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");d.default=i},hxn6:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(R,F,U,_){function P(L){return L instanceof U?L:new U(function(A){A(L)})}return a(P,"adopt"),new(U||(U=Promise))(function(L,A){function M(K){try{G(_.next(K))}catch(H){A(H)}}a(M,"fulfilled");function k(K){try{G(_.throw(K))}catch(H){A(H)}}a(k,"rejected");function G(K){K.done?L(K.value):P(K.value).then(M,k)}a(G,"step"),G((_=_.apply(R,F||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.decideModel=d.measureAndDecideExecutionApproach=void 0;const p=h("EkyC"),u=h("KvYa"),m=3,s=2.5,o=2.63,i=.6,e=.65,t=.5,n=.7,r={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let c=a(class{roundtrip(F,U,_){return new Promise((P,L)=>{this.worker.then(A=>{let M;M=a(k=>{const{message:G,key:K}=k.data;G===U&&K===_&&(A.removeEventListener("message",M),P(k.data))},"listener"),A.addEventListener("message",M),A.postMessage(F)}).catch(A=>{var M;(M=this.logger)===null||M===void 0||M.error("Failed to load worker.",A),L(A)})})}supportsSIMD(F){const U="simd",_=F||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,P={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:_,key:U};return this.roundtrip(P,"simd-support",U).then(L=>L.supports)}measure(F,U){const _=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,P=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,L=F?P:_,A=`bench:${F}`,M={message:"measure",fetchBehavior:this.fetchBehavior,budget:U,path:L,key:A};return this.roundtrip(M,"measurement",A).then(k=>{if(k.measurement)return k.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(F=>{var U;(U=this.logger)===null||U===void 0||U.debug("Stopping estimator worker."),F.terminate()}).catch(F=>{})}constructor(F,U){this.fetchConfig=F,this.logger=U;const _=`${F.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:F.headers,escapedQueryString:F.escapedQueryString},this.worker=p.loadWorker(_,"VoiceFocusEstimator",this.fetchBehavior,U)}},"Estimator");const f=a((R,F)=>R===1?i:F==="quality"?e*R:t*R,"inlineScoreMultiplier"),S=a(function(R){let{supportsSIMD:F,supportsSAB:U,duration:_,executionPreference:P="auto",simdPreference:L,variantPreference:A="auto",namePreference:M="default",usagePreference:k,executionQuantaPreference:G=m}=R,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,H=arguments.length>2?arguments[2]:void 0;const oe=L==="force"||L!=="disable"&&F,le=_!==-1,re=le?(oe?s:o)/_:0,he=oe?K.simd:K.wasm,Pe=le?f(G,k)*re:0,pe=le?n*re:0,Me=M,We=a(Xe=>({supported:!1,reason:Xe}),"unsupported");if(le){if(re<he.noSupport)return We(`Performance score ${re} worse than threshold ${he.noSupport}.`)}else if(P==="auto"||A==="auto")return We(`Missing explicit execution (${P}) or variant (${A}) preference, but no scoring performed.`);H==null||H.debug(`Bench duration ${_} yields inline score ${Pe} and worker score ${pe}.`);const Ae=a((Xe,je,Te)=>({supported:!0,useSIMD:oe,processor:Xe,executionApproach:je,variant:Te,executionQuanta:je==="inline"?G:void 0,name:Me}),"succeed"),lt=a((Xe,je,Te)=>je!=="auto"?!le||Xe>Te[je]?je:"failed":Xe>Te.c100?"c100":Xe>Te.c50?"c50":Xe>Te.c20?"c20":Xe>Te.c10?"c10":"failed","resolveVariant"),Ne=a(Xe=>{switch(Xe||"auto"){case"auto":{let je=Ne("inline"),Te=Ne("worker");return H==null||H.debug(`Reducing auto preference: ${JSON.stringify(je)} vs ${JSON.stringify(Te)}`),je.supported===!1||Te.supported===!1?Te:je.variant===Te.variant||je.variant==="c50"?je:Te}case"worker":return u.supportsSharedArrayBuffer(globalThis,window,H)?Ne("worker-sab"):Ne("worker-postMessage");case"inline":{const je=lt(Pe,A,he.inline);return je==="failed"?We(`Performance score ${Pe} not sufficient for inline use with variant preference ${A}.`):Ae("voicefocus-inline-processor","inline",je)}case"worker-sab":{if(!U){const Te="Requested worker-sab but no SharedArrayBuffer support.";return H==null||H.warn(Te),{supported:!1,reason:Te}}const je=lt(pe,A,he.worker);return je==="failed"?We(`Performance score ${pe} not sufficient for worker use with variant preference ${A}.`):Ae("voicefocus-worker-sab-processor","worker-sab",je)}case"worker-postMessage":{const je=lt(pe,A,he.worker);if(je==="failed")return We(`Performance score ${pe} not sufficient for worker use.`);if(Me==="ns_es"){const Te="Requested echo suppression but postMessage executor does not support it.";return H==null||H.warn(Te),{supported:!1,reason:Te}}return Ae("voicefocus-worker-postMessage-processor","worker-postMessage",je)}}},"reducePreference");return Ne(P)},"decideExecutionApproach"),l=a((R,F,U,_)=>g(void 0,void 0,void 0,function*(){const P={supportsSIMD:R,supportsSAB:u.supportsSharedArrayBuffer(globalThis,window,U),duration:-1};if(R)return U==null||U.info("Supports SIMD: true (force)"),P;const L=!_,A=_||new c(F,U);try{const M=!u.isOldChrome(window,U)&&(yield A.supportsSIMD());return U==null||U.info(`Supports SIMD: ${M} (force: ${R})`),P.supportsSIMD=M,P}finally{L&&A.stop()}}),"featureCheck"),y=a((R,F,U,_)=>g(void 0,void 0,void 0,function*(){const P=new c(F,_);try{const L=yield l(R,F,_,P);if(L.supportsSIMD)try{return L.duration=yield P.measure(!0,U),_==null||_.info("SIMD timing:",L.duration),L}catch{_==null||_.warn("Failed SIMD estimation; falling back to non-SIMD."),L.supportsSIMD=!1}return L.duration=yield P.measure(!1,U),_==null||_.info("No-SIMD timing:",L.duration),L}catch(L){throw _==null||_.error("Could not feature check.",L),L}finally{P.stop()}}),"estimateAndFeatureCheck"),T=a(function(R,F,U){let _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;return g(void 0,void 0,void 0,function*(){let P=R.executionPreference;const{usagePreference:L,variantPreference:A,namePreference:M,simdPreference:k,estimatorBudget:G,executionQuantaPreference:K}=R;L==="interactivity"&&P!=="inline"&&(U==null||U.debug(`Overriding execution preference ${P} to reflect interactivity preference.`),P="inline");const H=k==="force",X=A!=="auto",oe=P!=="auto";let le;try{X&&oe?le=yield l(H,F,U):le=yield y(H,F,G,U)}catch(re){throw U==null||U.error("Could not load estimator.",re),new Error("Could not load Voice Focus estimator.")}return S(Object.assign(Object.assign({},le),{simdPreference:k,executionPreference:P,variantPreference:A,namePreference:M,usagePreference:L,executionQuantaPreference:K}),_,U)})},"measureAndDecideExecutionApproach");d.measureAndDecideExecutionApproach=T;const O=a(R=>{let{category:F,name:U,variant:_,simd:P,url:L}=R;return`${F}-${U}-${_}-v1${P?"_simd":""}`},"decideModel");d.decideModel=O},"i+zQ":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=h("R4Nl");let p=a(class{generateSessionId(){const m=new Uint32Array(1);return g.getRandomValues(m),m[0].toString()}constructor(m,s,o,i){this.userArn=m,this.messagingSessionId=s,this.endpointUrl=o,this.chimeClient=i,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");d.default=p},i2nt:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'PassthroughTransform') {
                encoder.setupPassthroughTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupPassthroughTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. This is a bad packet.
        if (!gotLastBlock) {
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(encodings[encodings.length - 1].timestamp, frameMetadata.synchronizationSource);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(timestamp, ssrc) {
        if (timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;d.default=g},iA6Z:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");d.default=g},iAlb:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=a(p=>{const u={};for(const[m,s]of Object.entries(p))if(!(s==null||s===""))if(typeof s=="number"||typeof s=="string")u[m]=s;else throw new TypeError("Unhandled type received while flattening attributes.");return u},"flattenEventAttributes");d.default=g},iFpF:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(u,m,s,o,i,e,t,n,r,c){this.attendeeId=u,this.sdpOffer=m,this.audioHost=s,this.audioMuted=o,this.audioCheckin=i,this.receiveStreamIds=e,this.localVideoEnabled=t,this.videoStreamDescriptions=n,this.connectionTypeHasVideo=r,this.compressedSdpOffer=c,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");d.default=g},iNgN:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(u){this._audioHostURL=u}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(u){this._signalingURL=u}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(u){this._turnControlURL=u}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(u){this._eventIngestionURL=u}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=u=>u}},"MeetingSessionURLs");d.default=g},iQPr:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("zcg+")),m=p(h("j+uH"));let s=a(class extends m.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return g(this,void 0,void 0,function*(){const i=new u.default(this.timeoutMs);i.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{i.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");d.default=s},iRMv:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("J5JU")),u=g(h("9Bli")),m=g(h("vhVE"));let s=a(class{realtimeSetLocalAttendeeId(i,e){this.state.localAttendeeId=i,this.state.localExternalUserId=e}realtimeSetAttendeeIdPresence(i,e,t,n,r){try{e&&(this.state.attendeeIdToExternalUserId[i]=t);for(const c of this.state.attendeeIdChangesCallbacks)c(i,e,t,n,r)}catch(c){this.onError(c)}}realtimeSubscribeToAttendeeIdPresence(i){try{this.state.attendeeIdChangesCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToAttendeeIdPresence(i){try{const e=this.state.attendeeIdChangesCallbacks.indexOf(i);e!==-1&&this.state.attendeeIdChangesCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSetCanUnmuteLocalAudio(i){try{if(this.state.canUnmute===i)return;this.state.canUnmute=i;for(const e of this.state.setCanUnmuteLocalAudioCallbacks)e(i)}catch(e){this.onError(e)}}realtimeSubscribeToSetCanUnmuteLocalAudio(i){try{this.state.setCanUnmuteLocalAudioCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(i){try{const e=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(i);e!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const i of this.state.muteAndUnmuteLocalAudioCallbacks)i(!0)}catch(i){this.onError(i)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const i of this.state.muteAndUnmuteLocalAudioCallbacks)i(!1);return!0}catch(i){return this.onError(i),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(i){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(i){try{const e=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(i);e!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(i,e){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(i)||(this.state.volumeIndicatorCallbacks[i]=[]),this.state.volumeIndicatorCallbacks[i].push(e),this.sendVolumeIndicatorChange(i,!0,!0,!0,this.state.attendeeIdToExternalUserId[i])}catch(t){this.onError(t)}}realtimeUnsubscribeFromVolumeIndicator(i,e){if(this.state.volumeIndicatorCallbacks[i])if(e){const n=this.state.volumeIndicatorCallbacks[i].indexOf(e);n>=0&&this.state.volumeIndicatorCallbacks[i].splice(n,1)}else delete this.state.volumeIndicatorCallbacks[i]}realtimeUpdateVolumeIndicator(i,e,t,n,r){try{t=this.applyLocalMuteOverride(i,t);const c=this.getVolumeIndicatorState(i);let f=!1,S=!1,l=!1;t!==null&&c.muted!==t&&(c.muted=t,S=!0,c.muted&&c.volume!==0&&(c.volume=0,f=!0)),!c.muted&&e!==null&&(c.volume!==e&&(c.volume=e,f=!0),c.muted===null&&(c.muted=!1,S=!0)),n!==null&&c.signalStrength!==n&&(c.signalStrength=n,l=!0),this.sendVolumeIndicatorChange(i,f,S,l,r)}catch(c){this.onError(c)}}realtimeSubscribeToLocalSignalStrengthChange(i){try{if(this.state.localSignalStrengthChangeCallbacks.push(i),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(e){this.onError(e)}}realtimeUnsubscribeToLocalSignalStrengthChange(i){try{const e=this.state.localSignalStrengthChangeCallbacks.indexOf(i);e!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSubscribeToSendDataMessage(i){try{this.state.sendDataMessageCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeFromSendDataMessage(i){try{const e=this.state.sendDataMessageCallbacks.indexOf(i);e!==-1&&this.state.sendDataMessageCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSendDataMessage(i,e,t){try{for(const n of this.state.sendDataMessageCallbacks)n(i,e,t)}catch(n){this.onError(n)}}realtimeSubscribeToReceiveDataMessage(i,e){try{this.state.receiveDataMessageCallbacks.has(i)?this.state.receiveDataMessageCallbacks.get(i).push(e):this.state.receiveDataMessageCallbacks.set(i,[e])}catch(t){this.onError(t)}}realtimeUnsubscribeFromReceiveDataMessage(i){try{this.state.receiveDataMessageCallbacks.delete(i)}catch(e){this.onError(e)}}realtimeReceiveDataMessage(i){try{if(this.state.receiveDataMessageCallbacks.has(i.topic))for(const e of this.state.receiveDataMessageCallbacks.get(i.topic))e(i)}catch(e){this.onError(e)}}realtimeSubscribeToFatalError(i){try{this.state.fatalErrorCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToFatalError(i){try{const e=this.state.fatalErrorCallbacks.indexOf(i);e!==-1&&this.state.fatalErrorCallbacks.splice(e,1)}catch(e){this.onError(e)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(i){i?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(i,e){const t=this.state.localAttendeeId,n=this.state.muted;return i!==t||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?e:n}sendVolumeIndicatorChange(i,e,t,n,r){if(this.sendLocalSignalStrengthChange(i,n),!this.state.volumeIndicatorCallbacks.hasOwnProperty(i))return;const c=this.getVolumeIndicatorState(i),f=new m.default;if(e&&(f.volume=c.volume),t&&(f.muted=c.muted),n&&(f.signalStrength=c.signalStrength),!this.stateIsEmpty(f))for(const S of this.state.volumeIndicatorCallbacks[i])S(i,f.volume,f.muted,f.signalStrength,r)}sendLocalSignalStrengthChange(i,e){if(!e||i!==this.state.localAttendeeId)return;const n=this.getVolumeIndicatorState(i).signalStrength;if(n!==null)for(const r of this.state.localSignalStrengthChangeCallbacks)r(n)}getVolumeIndicatorState(i){return this.state.volumeIndicatorState.hasOwnProperty(i)||(this.state.volumeIndicatorState[i]=new m.default),this.state.volumeIndicatorState[i]}stateIsEmpty(i){return i.volume===null&&i.muted===null&&i.signalStrength===null}onError(i){try{for(const e of this.state.fatalErrorCallbacks)e(i)}catch(e){try{console.error(i),console.error(e)}catch{}}}constructor(i,e){this.mediaStreamBroker=i,this.state=new u.default,this._transcriptionController=e||new p.default(this)}},"DefaultRealtimeController");d.default=s},ig3o:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckAudioInputFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.Failed=1]="Failed",p[p.PermissionDenied=2]="PermissionDenied"})(g=d.CheckAudioInputFeedback||(d.CheckAudioInputFeedback={})),d.default=g},igcJ:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("F7zz")),u=g(h("BkFD")),m=g(h("HbHZ")),s=h("XCDq"),o=h("Aplu");let i=a(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const n of this.observerQueue)p.default.nextTick(()=>{this.observerQueue.has(n)&&t(n)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(n=>{o.Maybe.of(n.didMissPongs).map(r=>r.bind(n)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=s.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=s.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const n=s.SdkPingPongFrame.create();n.pingId=t,n.type=s.SdkPingPongType.PONG,this.signalingClient.pingPong(n)}handleSignalingClientEvent(t){switch(t.type){case m.default.WebSocketOpen:this.startPingInterval();break;case m.default.WebSocketFailed:case m.default.WebSocketError:this.logger.warn(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.WebSocketClosing:case m.default.WebSocketClosed:this.logger.info(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.ReceivedSignalFrame:if(t.message.type!==s.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===s.SdkPingPongType.PONG){const n=t.message.pingPong.pingId;if(n!==this.pingId){this.logger.warn(`unexpected ping id ${n} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let r;if(typeof t.message.timestampMs=="number")r=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${n} with timestamp ${r}`);const f=t.timestampMs-this.pingTimestampLocalMs,S=Math.round(r-f/2),l=this.pingTimestampLocalMs-S;this.logger.info(`local clock skew estimate=${l}ms from ping-pong time=${f}ms`),this.forEachObserver(y=>{o.Maybe.of(y.didReceivePong).map(T=>T.bind(y)(n,l,f))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,n,r){this.signalingClient=t,this.intervalMs=n,this.logger=r,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new u.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");d.default=i},ipyK:function(W,d,h){"use strict";var g=h("jLvU");function p(u,m){return m=typeof m=="function"?m:void 0,u&&u.length?Object(g.a)(u,void 0,m):[]}a(p,"uniqWith"),d.a=p},"ir/0":function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("uctb")),u=g(h("2y31"));let m=a(class extends u.default{constructor(){super(p.default.DEBUG)}},"NoOpDebugLogger");d.default=m},irli:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.Sha256=void 0;var g=h("+br/"),p=h("9IN5"),u=h("vapa"),m=h("v4l7"),s=function(){function i(e){if(this.hash=new u.RawSha256,e){this.outer=new u.RawSha256;var t=o(e),n=new Uint8Array(p.BLOCK_SIZE);n.set(t);for(var r=0;r<p.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;this.hash.update(t),this.outer.update(n);for(var r=0;r<t.byteLength;r++)t[r]=0}}return a(i,"Sha2561"),i.prototype.update=function(e){if(!((0,m.isEmptyData)(e)||this.error))try{this.hash.update((0,m.convertToBuffer)(e))}catch(t){this.error=t}},i.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},i.prototype.digest=function(){return g.__awaiter(this,void 0,void 0,function(){return g.__generator(this,function(e){return[2,this.digestSync()]})})},i}();d.Sha256=s;function o(i){var e=(0,m.convertToBuffer)(i);if(e.byteLength>p.BLOCK_SIZE){var t=new u.RawSha256;t.update(e),e=t.digest()}var n=new Uint8Array(p.BLOCK_SIZE);return n.set(e),n}a(o,"bufferFromSecret")},"j+uH":function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("ZnGd")),m=p(h("IGBW"));let s=a(class{once(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return new u.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(i){this.parentTask=i}getStatus(){return this.status}logAndThrow(i){throw this.logger.info(i),new Error(i)}baseRun(i){return g(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case m.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case m.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case m.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=m.default.RUNNING,yield i.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==m.default.CANCELED&&(this.status=m.default.FINISHED)}})}baseCancel(i){if(this.status===m.default.CANCELED||this.status===m.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=m.default.CANCELED,i.call(this)}constructor(i){this.logger=i,this.taskName="BaseTask",this.parentTask=null,this.status=m.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");d.default=s},j4TH:function(W,d,h){"use strict";(function(g){var p=d;p.asPromise=h("MFts"),p.base64=h("bnU+"),p.EventEmitter=h("aJe0"),p.float=h("KwGI"),p.inquire=h("/TZM"),p.utf8=h("yNTq"),p.pool=h("BEY9"),p.LongBits=h("ko9P"),p.isNode=Boolean(typeof g<"u"&&g&&g.process&&g.process.versions&&g.process.versions.node),p.global=p.isNode&&g||typeof window<"u"&&window||typeof self<"u"&&self||this,p.emptyArray=Object.freeze?Object.freeze([]):[],p.emptyObject=Object.freeze?Object.freeze({}):{},p.isInteger=Number.isInteger||a(function(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o},"isInteger"),p.isString=a(function(o){return typeof o=="string"||o instanceof String},"isString"),p.isObject=a(function(o){return o&&typeof o=="object"},"isObject"),p.isset=p.isSet=a(function(o,i){var e=o[i];return e!=null&&o.hasOwnProperty(i)?typeof e!="object"||(Array.isArray(e)?e.length:Object.keys(e).length)>0:!1},"isSet"),p.Buffer=function(){try{var s=p.inquire("buffer").Buffer;return s.prototype.utf8Write?s:null}catch{return null}}(),p._Buffer_from=null,p._Buffer_allocUnsafe=null,p.newBuffer=a(function(o){return typeof o=="number"?p.Buffer?p._Buffer_allocUnsafe(o):new p.Array(o):p.Buffer?p._Buffer_from(o):typeof Uint8Array>"u"?o:new Uint8Array(o)},"newBuffer"),p.Array=typeof Uint8Array<"u"?Uint8Array:Array,p.Long=p.global.dcodeIO&&p.global.dcodeIO.Long||p.global.Long||p.inquire("long"),p.key2Re=/^true|false|0|1$/,p.key32Re=/^-?(?:0|[1-9][0-9]*)$/,p.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,p.longToHash=a(function(o){return o?p.LongBits.from(o).toHash():p.LongBits.zeroHash},"longToHash"),p.longFromHash=a(function(o,i){var e=p.LongBits.fromHash(o);return p.Long?p.Long.fromBits(e.lo,e.hi,i):e.toNumber(Boolean(i))},"longFromHash");function u(s,o,i){for(var e=Object.keys(o),t=0;t<e.length;++t)(s[e[t]]===void 0||!i)&&(s[e[t]]=o[e[t]]);return s}a(u,"merge"),p.merge=u,p.lcFirst=a(function(o){return o.charAt(0).toLowerCase()+o.substring(1)},"lcFirst");function m(s){function o(i,e){if(!(this instanceof o))return new o(i,e);Object.defineProperty(this,"message",{get:function(){return i}}),Error.captureStackTrace?Error.captureStackTrace(this,o):Object.defineProperty(this,"stack",{value:new Error().stack||""}),e&&u(this,e)}return a(o,"CustomError"),o.prototype=Object.create(Error.prototype,{constructor:{value:o,writable:!0,enumerable:!1,configurable:!0},name:{get:a(function(){return s},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:a(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),o}a(m,"newError"),p.newError=m,p.ProtocolError=m("ProtocolError"),p.oneOfGetter=a(function(o){for(var i={},e=0;e<o.length;++e)i[o[e]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(i[t[n]]===1&&this[t[n]]!==void 0&&this[t[n]]!==null)return t[n]}},"getOneOf"),p.oneOfSetter=a(function(o){return function(i){for(var e=0;e<o.length;++e)o[e]!==i&&delete this[o[e]]}},"setOneOf"),p.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},p._configure=function(){var s=p.Buffer;if(!s){p._Buffer_from=p._Buffer_allocUnsafe=null;return}p._Buffer_from=s.from!==Uint8Array.from&&s.from||a(function(i,e){return new s(i,e)},"Buffer_from"),p._Buffer_allocUnsafe=s.allocUnsafe||a(function(i){return new s(i)},"Buffer_allocUnsafe")}}).call(this,h("yLpj"))},j9sV:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={CouldNotFetchSections:"could_not_fetch_sections"},t=Object(s.a)("helpdesk.getSectionsAndArticlesByCategory generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason","token"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"helpdesk.getSectionsAndArticlesByCategory",args:y,reason:f.reason,computeToken:!1}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to helpdesk.getSectionsAndArticlesByCategory
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskGetSectionsAndArticlesByCategoryFetcher",description:"helpdesk.getSectionsAndArticlesByCategory generated fetcher"}},jG7n:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(t,n,r,c){function f(S){return S instanceof r?S:new r(function(l){l(S)})}return a(f,"adopt"),new(r||(r=Promise))(function(S,l){function y(R){try{O(c.next(R))}catch(F){l(F)}}a(y,"fulfilled");function T(R){try{O(c.throw(R))}catch(F){l(F)}}a(T,"rejected");function O(R){R.done?S(R.value):f(R.value).then(y,T)}a(O,"step"),O((c=c.apply(t,n||[])).next())})},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d,"__esModule",{value:!0}),d.BackgroundFilterMonitor=void 0;const u=h("EkyC"),m=p(h("Xv43")),s=p(h("ZXtA"));let o=a(class{whenNext(){return this.promise||(this.promise=new Promise(n=>this.resolve=n)),this.promise}next(n){this.value=n,this.resolve(n),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),i=a(class nc{static createWorkerPromise(){const n={resolve:null,reject:null,promise:null};return n.promise=new Promise((r,c)=>{n.resolve=r,n.reject=c}),n}validateSpec(n){if(!n)throw new Error("processor has null spec");if(!n.model)throw new Error("processor spec has null model");if(!n.paths)throw new Error("processor spec has null paths")}validateOptions(n){if(!n)throw new Error("processor has null options");if(!n.logger)throw new Error("processor has null options - logger");if(!n.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!n.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(n){this.videoFramesPerFilterUpdate=1,this.frameCounter=new s.default(this.delegate,n.reportingPeriodMillis,n.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(n){return JSON.stringify(n,null,2)}handleInitialize(n){if(this.logger.info(`received initialize message: ${this.stringify(n)}`),!n.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const r=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:r.path,inputHeight:r.input.height,inputWidth:r.input.width,inputChannels:4,modelRangeMin:r.input.range[0],modelRangeMax:r.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(n){if(this.logger.info(`received load model message: ${this.stringify(n)}`),n.payload!==2){this.logger.error("failed to load model! status: "+n.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+n.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(n){this.mask$.next(n.payload.output)}handleWorkerEvent(n){const r=n.data;switch(r.msg){case"initialize":this.handleInitialize(r);break;case"loadModel":this.handleLoadModel(r);break;case"predict":this.handlePredict(r);break;default:this.logger.info(`unexpected event msg: ${this.stringify(r)}`);break}}loadAssets(){return g(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield u.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",n=>this.handleWorkerEvent(n)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(n){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${n.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(n){return g(this,void 0,void 0,function*(){if(this.destroyed)return n;this.frameCounter.frameReceived(n[0].framerate),this.cpuMonitor.frameReceived();const r=n[0].asCanvasElement();if(!r)return n;if(!this.modelInitialized)return n[0]=this.canvasVideoFrameBuffer,n;const c=r.width,f=r.height;if(c===0||f===0)return n;this.sourceWidth===0&&(this.sourceWidth=c,this.sourceHeight=f,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==c||this.sourceHeight!==f)&&(this.sourceWidth=c,this.sourceHeight=f,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let S=this.mask$.value;const l=this.spec.model.input.width/r.width,y=this.spec.model.input.height/r.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const T=this.scaledCanvas.getContext("2d");T.save(),T.scale(l,y),T.drawImage(r,0,0),T.restore();const O=T.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const R=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:O},[O.data.buffer]),S=yield R}this.destroyed||this.drawImageWithMask(r,S)}catch(S){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${S}`),n}finally{this.frameCounter.filterComplete(),this.frameNumber++}return n[0]=this.canvasVideoFrameBuffer,n})}updateVideoFramesPerFilterUpdate(n){n!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=n,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var n,r,c,f;return g(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(n=this.worker)===null||n===void 0||n.postMessage({msg:"destroy"}),(r=this.worker)===null||r===void 0||r.postMessage({msg:"stop"}),(c=this.targetCanvas)===null||c===void 0||c.remove(),this.targetCanvas=void 0,(f=this.scaledCanvas)===null||f===void 0||f.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(n,r,c,f,S){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new m.default(this.targetCanvas),this.mask$=new o,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=nc.createWorkerPromise(),this.loadModelPromise=nc.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=n,this.validateSpec(r),this.validateOptions(c),this.spec=r,this.logger=c.logger,this.delegate=f,this.initCPUMonitor(c),this.eventController=S}},"BackgroundFilterProcessor");d.default=i;let e=a(class{filterCPUUtilizationHigh(){const n=Date.now();n-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=n,this.observer.reduceCPUUtilization())}frameReceived(){const n=Date.now();n-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=n,this.observer.increaseCPUUtilization())}constructor(n,r){this.monitoringPeriodMillis=n,this.observer=r,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");d.BackgroundFilterMonitor=e},jHTc:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("59sL")),u=g(h("4EN+"));let m=a(class{create(o,i,e){this.connection=new WebSocket(e?o:p.default.urlWithVersion(o),i),this.connection.binaryType="arraybuffer"}send(o){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return o instanceof Uint8Array?this.connection.send(o.buffer):this.connection.send(o),!0}catch(i){return this.logger.debug(()=>`send error: ${i.message}, websocket state=${u.default[this.readyState()]}`),!1}}close(o,i){var e;(e=this.connection)===null||e===void 0||e.close(o,i)}destroy(){this.connection=void 0}addEventListener(o,i){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(o,i)}removeEventListener(o,i){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(o,i)}readyState(){if(!this.connection)return u.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return u.default.Connecting;case WebSocket.OPEN:return u.default.Open;case WebSocket.CLOSING:return u.default.Closing;case WebSocket.CLOSED:return u.default.Closed}}constructor(o){this.logger=o}},"DefaultWebSocketAdapter");d.default=m},jP1N:function(W,d,h){"use strict";(function(g){var p=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("Sa54")),m=p(h("yQ3g")),s=h("f2XL"),o=h("R4Nl"),i=p(h("59sL")),e=p(h("NBIk")),t=p(h("4EN+")),n=h("DUgj"),r=p(h("fGw7")),c=p(h("hEYi"));let f=a(class xd{registerObserver(l){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(l)}removeObserver(l){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(l)}openConnection(l){this.logger.info("adding connection request to queue: "+l.url()),this.connectionRequestQueue.push(l),this.closeConnection()}pingPong(l){this.logger.debug(()=>"sending ping");const y=s.SdkSignalFrame.create();return y.type=s.SdkSignalFrame.Type.PING_PONG,y.pingPong=l,this.sendMessage(y),y.timestampMs}join(l){this.logger.info("sending join");const y=s.SdkJoinFrame.create();y.protocolVersion=2,y.flags=s.SdkJoinFlags.HAS_STREAM_UPDATE;const T=new u.default,O={platformName:T.name(),platformVersion:T.version(),clientSource:i.default.sdkName,chimeSdkVersion:i.default.sdkVersion,clientUtcOffset:o.getFormattedOffset(new Date().getTimezoneOffset())};if(l.applicationMetadata){const{appName:F,appVersion:U}=l.applicationMetadata;O.appName=F,O.appVersion=U}y.clientDetails=s.SdkClientDetails.create(O),y.audioSessionId=this.audioSessionId,y.wantsCompressedSdp=xd.CLIENT_SUPPORTS_COMPRESSION,y.disablePeriodicKeyframeRequestOnContentSender=l.disablePeriodicKeyframeRequestOnContentSender,y.serverSideNetworkAdaption=n.convertServerSideNetworkAdaptionEnumToSignaled(l.serverSideNetworkAdaption),y.supportedServerSideNetworkAdaptions=l.supportedServerSideNetworkAdaptions.map(n.convertServerSideNetworkAdaptionEnumToSignaled),y.wantsAllTemporalLayersInIndex=l.wantsAllTemporalLayersInIndex;const R=s.SdkSignalFrame.create();R.type=s.SdkSignalFrame.Type.JOIN,R.join=y,this.sendMessage(R)}subscribe(l){const y=s.SdkSubscribeFrame.create();if(y.sendStreams=[],y.sdpOffer=l.sdpOffer,l.connectionTypeHasVideo&&(y.receiveStreamIds=l.receiveStreamIds),l.audioHost&&(y.audioCheckin=l.audioCheckin,y.audioHost=l.audioHost,y.audioMuted=l.audioMuted,!l.audioCheckin)){const O=s.SdkStreamDescriptor.create();O.mediaType=s.SdkStreamMediaType.AUDIO,O.trackLabel="AmazonChimeExpressAudio",O.attendeeId=l.attendeeId,O.streamId=1,O.groupId=1,O.framerate=15,O.maxBitrateKbps=600,O.avgBitrateBps=4e5,y.sendStreams.push(O)}if(y.compressedSdpOffer=l.compressedSdpOffer,y.duplex=s.SdkStreamServiceType.RX,l.localVideoEnabled){y.duplex=s.SdkStreamServiceType.DUPLEX;for(let O=0;O<l.videoStreamDescriptions.length;O++){const R=l.videoStreamDescriptions[O].clone();R.attendeeId=l.attendeeId,y.sendStreams.push(R.toStreamDescriptor())}}l.videoSubscriptionConfiguration.length>0&&(y.videoSubscriptionConfiguration=l.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const T=s.SdkSignalFrame.create();T.type=s.SdkSignalFrame.Type.SUBSCRIBE,T.sub=y,this.sendMessage(T)}remoteVideoUpdate(l,y){const T=s.SdkRemoteVideoUpdateFrame.create();T.addedOrUpdatedVideoSubscriptions=l.map(this.convertSignalingClientVideoSubscriptionConfiguration),T.removedVideoSubscriptionMids=y;const O=s.SdkSignalFrame.create();O.type=s.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,O.remoteVideoUpdate=T,this.sendMessage(O)}convertSignalingClientVideoSubscriptionConfiguration(l){const y=new s.SdkVideoSubscriptionConfiguration;switch(y.mid=l.mid,y.attendeeId=l.attendeeId,y.streamId=l.streamId,y.groupId=l.groupId,y.priority=l.priority,y.targetBitrateKbps=l.targetBitrateKbps,l.qualityAdaptationPreference){case e.default.Balanced:y.qualityAdaptationPreference=s.SdkVideoQualityAdaptationPreference.BALANCED;break;case e.default.MaintainFramerate:y.qualityAdaptationPreference=s.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case e.default.MaintainResolution:y.qualityAdaptationPreference=s.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:y.qualityAdaptationPreference=s.SdkVideoQualityAdaptationPreference.BALANCED}return y}leave(){const l=s.SdkSignalFrame.create();l.type=s.SdkSignalFrame.Type.LEAVE,l.leave=s.SdkLeaveFrame.create(),this.sendMessage(l),this.logger.debug(()=>"sent leave")}sendClientMetrics(l){const y=s.SdkSignalFrame.create();y.type=s.SdkSignalFrame.Type.CLIENT_METRIC,y.clientMetric=l,this.sendMessage(y)}sendDataMessage(l){const y=s.SdkSignalFrame.create();y.type=s.SdkSignalFrame.Type.DATA_MESSAGE,y.dataMessage=l,this.sendMessage(y)}closeConnection(){var l,y;if(this.webSocket.readyState()!==t.default.None&&this.webSocket.readyState()!==t.default.Closed){this.isClosing=!0,this.sendEvent(new r.default(this,c.default.WebSocketClosing,null));const T=new m.default(xd.CLOSE_EVENT_TIMEOUT_MS),O=a(R=>{var F,U;(U=(F=this.webSocket).removeEventListener)===null||U===void 0||U.call(F,"close",O),T.stop(),this.closeEventHandler(R)},"handler");(y=(l=this.webSocket).removeEventListener)===null||y===void 0||y.call(l,"close",this.closeEventHandler),this.webSocket.addEventListener("close",O),T.start(()=>{O(new CloseEvent("close",{wasClean:!1,code:1006,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===t.default.Open&&!this.isClosing&&this.wasOpened}mute(l){const y=s.SdkSignalFrame.create();y.type=s.SdkSignalFrame.Type.AUDIO_CONTROL;const T=s.SdkAudioControlFrame.create();T.muted=l,y.audioControl=T,this.sendMessage(y)}pause(l){const y=s.SdkSignalFrame.create();y.type=s.SdkSignalFrame.Type.PAUSE,y.pause=s.SdkPauseResumeFrame.create(),y.pause.streamIds=l,this.sendMessage(y)}resume(l){const y=s.SdkSignalFrame.create();y.type=s.SdkSignalFrame.Type.RESUME,y.pause=s.SdkPauseResumeFrame.create(),y.pause.streamIds=l,this.sendMessage(y)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(l){l.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(l)}`);const y=this.prependWithFrameTypeRTC(s.SdkSignalFrame.encode(l).finish());if(this.ready()){if(!this.webSocket.send(y)){this.sendEvent(new r.default(this,c.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new r.default(this,c.default.WebSocketSentMessage,null))}else this.sendEvent(new r.default(this,c.default.WebSocketSkippedMessage,null))}receiveMessage(l){let y;try{y=s.SdkSignalFrame.decode(l)}catch{this.logger.info(`failed to decode: ${l}`),this.sendEvent(new r.default(this,c.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(y)}`),this.webSocket.readyState()===t.default.Open?this.sendEvent(new r.default(this,c.default.ReceivedSignalFrame,y)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(y)}`)}stripFrameTypeRTC(l){const y=l[0];return y!==xd.FRAME_TYPE_RTC&&y!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${y}`),l.slice(1)}prependWithFrameTypeRTC(l){const y=new Uint8Array(l.length+1);return y[0]=xd.FRAME_TYPE_RTC,y.set(l,1),y}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const l=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${l.url()}`),this.isClosing=!1,this.webSocket.create(l.url(),l.protocols()),this.setUpEventListeners(),this.sendEvent(new r.default(this,c.default.WebSocketConnecting,null))}sendEvent(l){switch(l.type){case c.default.WebSocketMessage:case c.default.ReceivedSignalFrame:case c.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${c.default[l.type]}`);break;case c.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${c.default[l.type]}, websocket state=${t.default[this.webSocket.readyState()]}`);break;default:this.logger.info(`notifying event: ${c.default[l.type]}`);break}for(const y of this.observerQueue)y.handleSignalingClientEvent(l)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new r.default(this,c.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",l=>{this.sendEvent(new r.default(this,c.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(l.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("ignoring error closing signaling while connecting");return}this.wasOpened?(this.logger.error("received error while connected"),this.sendEvent(new r.default(this,c.default.WebSocketError,null))):(this.logger.error("failed to connect"),this.sendEvent(new r.default(this,c.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const l=g;l.window&&l.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const l=g;l.window&&l.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const l=new Uint32Array(1);return o.getRandomValues(l),l[0]}promoteToPrimaryMeeting(l){const y=s.SdkMeetingSessionCredentials.create();y.attendeeId=l.attendeeId,y.externalUserId=l.externalUserId,y.joinToken=l.joinToken;const T=s.SdkPrimaryMeetingJoinFrame.create();T.credentials=y;const O=s.SdkSignalFrame.create();O.type=s.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,O.primaryMeetingJoin=T,this.sendMessage(O)}demoteFromPrimaryMeeting(){const l=s.SdkPrimaryMeetingLeaveFrame.create(),y=s.SdkSignalFrame.create();y.type=s.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,y.primaryMeetingLeave=l,this.sendMessage(y)}constructor(l,y){this.webSocket=l,this.logger=y,this.unloadHandler=null,this.closeEventHandler=T=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new r.default(this,c.default.WebSocketClosed,null,T.code,T.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");d.default=f,f.FRAME_TYPE_RTC=5,f.CLOSE_EVENT_TIMEOUT_MS=2e3,f.CLIENT_SUPPORTS_COMPRESSION=!0}).call(this,h("yLpj"))},je3o:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.Sha256=void 0;var g=h("7JaV"),p=h("vdHl"),u=h("cZ61"),m=h("pU0T"),s=function(){function i(e){this.secret=e,this.hash=new u.RawSha256,this.reset()}return a(i,"Sha256"),i.prototype.update=function(e){if(!((0,m.isEmptyData)(e)||this.error))try{this.hash.update((0,m.convertToBuffer)(e))}catch(t){this.error=t}},i.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},i.prototype.digest=function(){return g.__awaiter(this,void 0,void 0,function(){return g.__generator(this,function(e){return[2,this.digestSync()]})})},i.prototype.reset=function(){if(this.hash=new u.RawSha256,this.secret){this.outer=new u.RawSha256;var e=o(this.secret),t=new Uint8Array(p.BLOCK_SIZE);t.set(e);for(var n=0;n<p.BLOCK_SIZE;n++)e[n]^=54,t[n]^=92;this.hash.update(e),this.outer.update(t);for(var n=0;n<e.byteLength;n++)e[n]=0}},i}();d.Sha256=s;function o(i){var e=(0,m.convertToBuffer)(i);if(e.byteLength>p.BLOCK_SIZE){var t=new u.RawSha256;t.update(e),e=t.digest()}var n=new Uint8Array(p.BLOCK_SIZE);return n.set(e),n}a(o,"bufferFromSecret")},jhQD:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d,"__esModule",{value:!0}),d.TranscriptEventConverter=void 0;const p=h("f2XL"),u=g(h("7nob")),m=g(h("VoiG")),s=g(h("h4LR")),o=g(h("VWEK")),i={[p.SdkTranscriptionStatus.Type.STARTED]:s.default.STARTED,[p.SdkTranscriptionStatus.Type.INTERRUPTED]:s.default.INTERRUPTED,[p.SdkTranscriptionStatus.Type.RESUMED]:s.default.RESUMED,[p.SdkTranscriptionStatus.Type.STOPPED]:s.default.STOPPED,[p.SdkTranscriptionStatus.Type.FAILED]:s.default.FAILED};let e=a(class{static from(n){let r;try{r=p.SdkTranscriptFrame.decode(n.data)}catch(f){throw new Error("Cannot decode transcript data message: "+f)}const c=[];for(const f of r.events)if(f.status){const S=i[f.status.type];if(!S)continue;const l=new m.default;l.type=S,l.eventTimeMs=f.status.eventTime,l.transcriptionRegion=f.status.transcriptionRegion,l.transcriptionConfiguration=f.status.transcriptionConfiguration,f.status.message&&(l.message=f.status.message),c.push(l)}else if(f.transcript){const S=new u.default;S.results=[];for(const l of f.transcript.results){const y={channelId:l.channelId,isPartial:l.isPartial,resultId:l.resultId,startTimeMs:l.startTime,endTimeMs:l.endTime,alternatives:[]};if(l.languageCode&&(y.languageCode=l.languageCode),l.languageIdentification&&l.languageIdentification.length>0){y.languageIdentification=[];for(const T of l.languageIdentification){const O={languageCode:T.languageCode,score:T.score};y.languageIdentification.push(O)}}for(const T of l.alternatives){const O={items:[],transcript:T.transcript};for(const R of T.items){const F={content:R.content,attendee:{attendeeId:R.speakerAttendeeId,externalUserId:R.speakerExternalUserId},startTimeMs:R.startTime,endTimeMs:R.endTime,type:null};switch(R.vocabularyFilterMatch&&(F.vocabularyFilterMatch=R.vocabularyFilterMatch),R.hasOwnProperty("stable")&&(F.stable=R.stable),R.hasOwnProperty("confidence")&&(F.confidence=R.confidence),R.type){case p.SdkTranscriptItem.Type.PRONUNCIATION:F.type=o.default.PRONUNCIATION;break;case p.SdkTranscriptItem.Type.PUNCTUATION:F.type=o.default.PUNCTUATION;break}O.items.push(F)}for(const R of T.entities){O.entities||(O.entities=[]);const F={category:R.category,confidence:R.confidence,content:R.content,startTimeMs:R.startTime,endTimeMs:R.endTime};R.type&&(F.type=R.type),O.entities.push(F)}y.alternatives.push(O)}S.results.push(y)}c.push(S)}return c}},"TranscriptEventConverter");d.TranscriptEventConverter=e},jmx1:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckAudioInputFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.Failed=1]="Failed",p[p.PermissionDenied=2]="PermissionDenied"})(g=d.CheckAudioInputFeedback||(d.CheckAudioInputFeedback={})),d.default=g},k6mT:function(W,d,h){"use strict";h.d(d,"a",function(){return e}),h.d(d,"b",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={BadUsername:"bad_username",CannotUpdateAdminUser:"cannot_update_admin_user",EmailBad:"email_bad",EmailTaken:"email_taken",DisplayNameNotAllowed:"display_name_not_allowed",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InvalidProfile:"invalid_profile",InvalidReservedWord:"invalid_reserved_word",InvalidUser:"invalid_user",LongUsername:"long_username",MustClearBothStatusTextAndStatusEmoji:"must_clear_both_status_text_and_status_emoji",NameNotAllowed:"name_not_allowed",NotAdmin:"not_admin",NotAppAdmin:"not_app_admin",PartialProfileSetFailed:"partial_profile_set_failed",ProfileSetFailed:"profile_set_failed",ProfileStatusSetFailedNotEmojiSyntax:"profile_status_set_failed_not_emoji_syntax",ProfileStatusSetFailedNotValidEmoji:"profile_status_set_failed_not_valid_emoji",ProfileStatusSetFailedWritingExpiration:"profile_status_set_failed_writing_expiration",ReadOnlyProfileField:"read_only_profile_field",ReservedName:"reserved_name",SudoRequired:"sudo_required",TooLong:"too_long",UserNotFound:"user_not_found",UserNotSpecified:"user_not_specified",UserRemovedFromTeam:"user_removed_from_team",UsernameEmpty:"username_empty",UsernameTaken:"username_taken"},t=Object(s.a)("users.profile.set generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"users.profile.set",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to users.profile.set
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherusersProfileSetFetcher",description:"users.profile.set generated fetcher"}},k8sa:function(W,d,h){"use strict";W.exports={}},kItj:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("ghxq"));let u=a(class Tr extends p.default{health(){if(this.currentData.isConnectionStartRecent(Tr.CONNECTION_WAIT_TIME_MS))return 1;const o=this.currentData.consecutiveStatsWithNoPackets>=Tr.CONNECTION_UNHEALTHY_THRESHOLD,i=this.currentData.consecutiveMissedPongs>=Tr.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>Tr.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>Tr.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),o||i||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${o}, missed pongs: ${i}, bad audio delay: ${e}`),0):1}constructor(s,o,i){super(o,i,"Reconnection Health"),this.logger=s,this.audioDelayPointsOverMaximum=0,Tr.CONNECTION_UNHEALTHY_THRESHOLD=o.connectionUnhealthyThreshold,Tr.CONNECTION_WAIT_TIME_MS=o.connectionWaitTimeMs,Tr.MISSED_PONGS_THRESHOLD=o.missedPongsUpperThreshold,Tr.MAXIMUM_AUDIO_DELAY_MS=o.maximumAudioDelayMs,Tr.MAXIMUM_AUDIO_DELAY_DATA_POINTS=o.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");d.default=u},kQNw:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.isEmptyData=void 0;function g(p){return typeof p=="string"?p.length===0:p.byteLength===0}a(g,"isEmptyData"),d.isEmptyData=g},"kU+7":function(W,d,h){"use strict";(function(g){var p=d;p.asPromise=h("MFts"),p.base64=h("bnU+"),p.EventEmitter=h("aJe0"),p.float=h("KwGI"),p.inquire=h("/TZM"),p.utf8=h("yNTq"),p.pool=h("BEY9"),p.LongBits=h("xGEd"),p.isNode=Boolean(typeof g<"u"&&g&&g.process&&g.process.versions&&g.process.versions.node),p.global=p.isNode&&g||typeof window<"u"&&window||typeof self<"u"&&self||this,p.emptyArray=Object.freeze?Object.freeze([]):[],p.emptyObject=Object.freeze?Object.freeze({}):{},p.isInteger=Number.isInteger||a(function(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o},"isInteger"),p.isString=a(function(o){return typeof o=="string"||o instanceof String},"isString"),p.isObject=a(function(o){return o&&typeof o=="object"},"isObject"),p.isset=p.isSet=a(function(o,i){var e=o[i];return e!=null&&o.hasOwnProperty(i)?typeof e!="object"||(Array.isArray(e)?e.length:Object.keys(e).length)>0:!1},"isSet"),p.Buffer=function(){try{var s=p.inquire("buffer").Buffer;return s.prototype.utf8Write?s:null}catch{return null}}(),p._Buffer_from=null,p._Buffer_allocUnsafe=null,p.newBuffer=a(function(o){return typeof o=="number"?p.Buffer?p._Buffer_allocUnsafe(o):new p.Array(o):p.Buffer?p._Buffer_from(o):typeof Uint8Array>"u"?o:new Uint8Array(o)},"newBuffer"),p.Array=typeof Uint8Array<"u"?Uint8Array:Array,p.Long=p.global.dcodeIO&&p.global.dcodeIO.Long||p.global.Long||p.inquire("long"),p.key2Re=/^true|false|0|1$/,p.key32Re=/^-?(?:0|[1-9][0-9]*)$/,p.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,p.longToHash=a(function(o){return o?p.LongBits.from(o).toHash():p.LongBits.zeroHash},"longToHash"),p.longFromHash=a(function(o,i){var e=p.LongBits.fromHash(o);return p.Long?p.Long.fromBits(e.lo,e.hi,i):e.toNumber(Boolean(i))},"longFromHash");function u(s,o,i){for(var e=Object.keys(o),t=0;t<e.length;++t)(s[e[t]]===void 0||!i)&&(s[e[t]]=o[e[t]]);return s}a(u,"merge"),p.merge=u,p.lcFirst=a(function(o){return o.charAt(0).toLowerCase()+o.substring(1)},"lcFirst");function m(s){function o(i,e){if(!(this instanceof o))return new o(i,e);Object.defineProperty(this,"message",{get:function(){return i}}),Error.captureStackTrace?Error.captureStackTrace(this,o):Object.defineProperty(this,"stack",{value:new Error().stack||""}),e&&u(this,e)}return a(o,"CustomError"),o.prototype=Object.create(Error.prototype,{constructor:{value:o,writable:!0,enumerable:!1,configurable:!0},name:{get:a(function(){return s},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:a(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),o}a(m,"newError"),p.newError=m,p.ProtocolError=m("ProtocolError"),p.oneOfGetter=a(function(o){for(var i={},e=0;e<o.length;++e)i[o[e]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(i[t[n]]===1&&this[t[n]]!==void 0&&this[t[n]]!==null)return t[n]}},"getOneOf"),p.oneOfSetter=a(function(o){return function(i){for(var e=0;e<o.length;++e)o[e]!==i&&delete this[o[e]]}},"setOneOf"),p.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},p._configure=function(){var s=p.Buffer;if(!s){p._Buffer_from=p._Buffer_allocUnsafe=null;return}p._Buffer_from=s.from!==Uint8Array.from&&s.from||a(function(i,e){return new s(i,e)},"Buffer_from"),p._Buffer_allocUnsafe=s.allocUnsafe||a(function(i){return new s(i)},"Buffer_allocUnsafe")}}).call(this,h("yLpj"))},kUL9:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("U9CR")),m=p(h("F7zz"));let s=a(class{bindAudioElement(i){return g(this,void 0,void 0,function*(){if(!i)throw new Error(`Cannot bind audio element: ${i}`);return this.audioElement=i,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(i=>{this.audioStream&&i.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(i){return g(this,void 0,void 0,function*(){if(i){this.audioStream=i;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(i){return g(this,void 0,void 0,function*(){if(i&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=i,this.bindAudioMix()})}forEachObserver(i){for(const e of this.observers)m.default.nextTick(()=>{i(e)})}bindAudioMix(){var i,e;return g(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(l=>{t&&l.meetingAudioStreamBecameInactive(t),this.audioStream&&l.meetingAudioStreamBecameActive(this.audioStream)});const n=((i=this.audioDevice)===null||i===void 0?void 0:i.deviceId)!==this.audioElement.sinkId;if(n&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const r=this.audioDevice?this.audioDevice.deviceId:"",c=this.audioElement.sinkId;if(r===c)return;const f=this.audioElement,S=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(f.srcObject=null),n)try{yield f.setSinkId(r)}catch(l){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${l}`),l}this.browserBehavior.hasChromiumWebRTC()&&(f.srcObject=S)})}getCurrentMeetingAudioStream(){return g(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(i){return g(this,void 0,void 0,function*(){this.observers.add(i)})}removeAudioMixObserver(i){return g(this,void 0,void 0,function*(){this.observers.delete(i)})}audioOutputDidChange(i){return g(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(i)})}constructor(i){this.logger=i,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new u.default,this.observers=new Set}},"DefaultAudioMixController");d.default=s},kabN:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class al{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(u){let m=0;for(const s of u.streams){const o=!!s.attendeeId,i=!!s.externalUserId,e=s.hasOwnProperty("muted"),t=!!s.dropped;if(o){this.attendeeIdToStreamId[s.attendeeId]&&this.attendeeIdToStreamId[s.attendeeId]<s.audioStreamId&&delete this.attendeeIdToStreamId[s.attendeeId],this.streamIdToAttendeeId[s.audioStreamId]=s.attendeeId;const n=i?s.externalUserId:s.attendeeId;this.streamIdToExternalUserId[s.audioStreamId]=n,this.attendeeIdToStreamId[s.attendeeId]=s.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(s.attendeeId,!0,n,!1,{attendeeIndex:m++,attendeesInFrame:u.streams.length})}if(e){const n=this.streamIdToAttendeeId[s.audioStreamId],r=this.streamIdToExternalUserId[s.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(n,null,s.muted,null,r)}if(!o&&!e){const n=this.streamIdToAttendeeId[s.audioStreamId];if(n){const r=this.streamIdToExternalUserId[s.audioStreamId];delete this.streamIdToAttendeeId[s.audioStreamId],delete this.streamIdToExternalUserId[s.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[s.audioStreamId],this.attendeeIdToStreamId[n]===s.audioStreamId&&delete this.attendeeIdToStreamId[n];let c=!1;for(const f of Object.keys(this.streamIdToAttendeeId)){const S=parseInt(f);if(S>s.audioStreamId&&this.streamIdToAttendeeId[S]===n){c=!0;break}}c||this.realtimeController.realtimeSetAttendeeIdPresence(n,!1,r,t,{attendeeIndex:m++,attendeesInFrame:u.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(u),this.sessionReconnected=!1)}cleanUpState(u){const m=Object.values(this.streamIdToAttendeeId),s=u.streams.map(i=>i.attendeeId),o=m.filter(i=>!s.includes(i));for(const[i,e]of o.entries()){const t=this.attendeeIdToStreamId[e],n=this.streamIdToExternalUserId[t];if(delete this.streamIdToAttendeeId[t],delete this.streamIdToExternalUserId[t],delete this.warnedAboutMissingStreamIdMapping[t],delete this.attendeeIdToStreamId[e],e===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(e,!1,n,!1,{attendeeIndex:i,attendeesInFrame:e.length})}}sendRealtimeUpdatesForAudioMetadata(u){let m=null,s=null;for(const o of u.attendeeStates){const i=this.attendeeIdForStreamId(o.audioStreamId);o.hasOwnProperty("volume")&&(m===null&&(m={}),i!==null&&(m[i]=this.normalizedVolume(o))),o.hasOwnProperty("signalStrength")&&(s===null&&(s={}),i!==null&&(s[i]=this.normalizedSignalStrength(o)))}this.applyRealtimeUpdatesForAudioMetadata(m,s)}normalizedVolume(u){const s=1-(-u.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(s,0),1)}normalizedSignalStrength(u){const m=u.signalStrength/al.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(m,0),1)}applyRealtimeUpdatesForAudioMetadata(u,m){for(const s in this.streamIdToAttendeeId){const o=this.streamIdToAttendeeId[s],i=this.streamIdToExternalUserId[s];let e=null,t=null;u!==null&&(u.hasOwnProperty(o)?e=u[o]:e=al.IMPLICIT_VOLUME),m!==null&&(m.hasOwnProperty(o)?t=m[o]:t=al.IMPLICIT_SIGNAL_STRENGTH),(e!==null||t!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(o,e,null,t,i)}}attendeeIdForStreamId(u){if(u===0)return null;const m=this.streamIdToAttendeeId[u];return m||(this.warnedAboutMissingStreamIdMapping[u]||(this.warnedAboutMissingStreamIdMapping[u]=!0,this.logger.warn(`volume indicator stream id ${u} seen before being defined`)),null)}constructor(u,m,s,o,i){this.logger=u,this.realtimeController=m,this.minVolumeDecibels=s,this.maxVolumeDecibels=o,this.selfAttendeeId=i,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");d.default=g,g.MAX_SIGNAL_STRENGTH_LEVELS=2,g.IMPLICIT_VOLUME=0,g.IMPLICIT_SIGNAL_STRENGTH=1},knPd:function(W,d,h){"use strict";var g=this&&this.__createBinding||(Object.create?function(U,_,P,L){L===void 0&&(L=P),Object.defineProperty(U,L,{enumerable:!0,get:function(){return _[P]}})}:function(U,_,P,L){L===void 0&&(L=P),U[L]=_[P]}),p=this&&this.__setModuleDefault||(Object.create?function(U,_){Object.defineProperty(U,"default",{enumerable:!0,value:_})}:function(U,_){U.default=_}),u=this&&this.__importStar||function(U){if(U&&U.__esModule)return U;var _={};if(U!=null)for(var P in U)P!=="default"&&Object.prototype.hasOwnProperty.call(U,P)&&g(_,U,P);return p(_,U),_},m=this&&this.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(d,"__esModule",{value:!0});const s=m(h("g+gC")),o=m(h("LmyK")),i=m(h("mpmV")),e=m(h("34ho")),t=h("uctb"),n=u(h("DUgj")),r=m(h("aqWb")),c=m(h("Zkgh")),f=m(h("nYR4")),S=m(h("Lspx")),l=m(h("uaNU")),y=h("P7D+"),T=m(h("J1op")),O=m(h("NBIk"));let R=a(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),F=a(class ti{reset(){this.allHighestPolicy=new f.default(""),this.optimalReceiveSet=new c.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new c.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new c.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=ti.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=ti.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new R,this.prevDownlinkStats=new R,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(_){this.tileController=_,this.logger.info("tileController bound")}setWantsResubscribeObserver(_){this.wantsResubscribeObserver=_}chooseRemoteVideoSources(_){var P;if(!(!((P=this.videoPreferences)===null||P===void 0)&&P.equals(_))){if(this.videoPreferences=_==null?void 0:_.clone(),!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const L=new Array;for(const A of this.videoPreferences){const M=new r.default;M.attendee=new s.default,M.attendee.attendeeId=A.attendeeId,L.push(M)}this.allHighestPolicy.chooseRemoteVideoSources(L);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(_)}`)}}updateIndex(_){this.videoIndex=_,this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(_),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const _=new Set;for(const M of this.videoIndex.remoteStreamDescriptions())_.add(M.attendeeId);const P=y.VideoPreferences.prepare(),L=_.size;let A=S.default.Maximum;L>8?A=S.default.Low:L>4&&(A=S.default.Medium);for(const M of _)P.add(new l.default(M,1,A));this.defaultVideoPreferences=P.build()}updateMetrics(_){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new R;const P=_.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=P.availableIncomingBitrate/1e3;for(const L in _.streamMetricReports){const A=Number.parseInt(L,10),M=_.streamMetricReports[A];M.direction===o.default.DOWNSTREAM&&M.mediaType===i.default.VIDEO&&(M.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=_.countPerSecond("nackCount",A)),M.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=_.countPerSecond("packetsLost",A)),M.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=_.bitsPerSecond("bytesReceived",A)/1e3))}}wantsResubscribe(){let _=!1;return!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(_||(_=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)?_||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),_||(_=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),_)}chooseSubscriptions(){return!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(_){this.observerQueue.add(_)}removeObserver(_){this.observerQueue.delete(_)}forEachObserver(_){for(const P of this.observerQueue)_(P)}setVideoPriorityBasedPolicyConfigs(_){this.videoPriorityBasedPolicyConfig=_}calculateOptimalReceiveStreams(){var _;const P=[],L=this.videoIndex.remoteStreamDescriptions();if(L.length===0||!((_=this.videoPreferences)===null||_===void 0)&&_.isEmpty()){this.optimalReceiveStreams=[];return}const A=this.rateProbeState;this.cleanBwPausedTiles(L),this.handleAppPausedStreams(P,L);const M=new Map;for(const Ae of this.getCurrentVideoPreferences())M.set(Ae.attendeeId,Ae);const k=L.filter(Ae=>M.has(Ae.attendeeId)),G=!this.streamsWithPreferenceDidChange(k),K=!this.startupPeriod&&G;if(K&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;k.sort((Ae,lt)=>Ae.maxBitrateKbps===lt.maxBitrateKbps?Ae.streamId-lt.streamId:Ae.maxBitrateKbps-lt.maxBitrateKbps);for(const Ae of k)(Ae.avgBitrateKbps===0||Ae.avgBitrateKbps>Ae.maxBitrateKbps)&&(Ae.attendeeId.endsWith(e.default.Modality)&&Ae.maxBitrateKbps<100?Ae.maxBitrateKbps=Ae.avgBitrateKbps:Ae.avgBitrateKbps=Ae.maxBitrateKbps);const H=new Set;for(const Ae of this.getCurrentVideoPreferences()){const lt=k.filter(Te=>Te.attendeeId===Ae.attendeeId);if(lt.length<3)continue;let Ne=15,Xe=320*480;lt.forEach(Te=>{Ne=Math.max(Ne,Te.maxFrameRate),Xe=Math.max(Xe,Te.totalPixels())}),lt.sort((Te,At)=>{if(Ae.degradationPreference===O.default.MaintainResolution)return Math.abs(Te.maxFrameRate-At.maxFrameRate)<2?Te.totalPixels()-At.totalPixels():Te.maxFrameRate-At.maxFrameRate;if(Ae.degradationPreference===O.default.MaintainFramerate)return Te.totalPixels()===At.totalPixels()?Te.maxFrameRate-At.maxFrameRate:Te.totalPixels()-At.totalPixels();{const tn=a(Yt=>Yt.avgBitrateKbps*Math.pow(2,5*Yt.maxFrameRate/Ne*Math.pow(4,Yt.totalPixels()/Xe)),"weighByFramerate");return tn(Te)-tn(At)}});let je;for(const Te of lt){if(je!==void 0&&(Te.maxFrameRate<je.maxFrameRate&&Math.abs(je.maxFrameRate-Te.maxFrameRate)>2||Te.totalPixels()<je.totalPixels())){H.add(Te.streamId);continue}je=Te}}const X=k.filter(Ae=>!H.has(Ae.streamId));this.logger.info(`Filtered to ${JSON.stringify(X)}`);const oe={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};oe.targetDownlinkBitrate=this.determineTargetRate();const le=this.subscribedReceiveSet.size(),re=this.downlinkStats.bandwidthEstimateKbps,he=!this.videoPriorityBasedPolicyConfig.allowSubscribe(le,re);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=ti.MIN_TIME_BETWEEN_SUBSCRIBE_MS,K&&he))return;const Pe=this.priorityPolicy(oe,X,P),pe=!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let Me=0;if(!pe&&!this.startupPeriod&&G?this.rateProbeState==="Probing"?Me=this.handleProbe(P,oe.targetDownlinkBitrate):oe.deltaToNextUpgrade!==0&&(Me=this.maybeOverrideOrProbe(P,oe,Pe)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=k,this.videoPreferencesUpdated=!1,Me===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=oe.targetDownlinkBitrate;return}if(Me===2){const Ae=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(k,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+Ae);return}this.optimalNonPausedReceiveStreams=P.slice();const We=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(k,P),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==A||this.optimalReceiveStreams.length!==P.length||We!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(L,oe.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=oe.targetDownlinkBitrate,this.optimalReceiveStreams=P.slice()}calculateOptimalReceiveSet(){const _=new c.default;this.calculateOptimalReceiveStreams();for(const P of this.optimalReceiveStreams)_.add(P.streamId);if(!this.optimalReceiveSet.equal(_)){const P=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(_)} subscribedRate:${P}`)}this.optimalReceiveSet=_}determineTargetRate(){let _=0;const P=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=P),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>ti.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||P-this.firstEstimateTimestamp>ti.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?_=ti.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<ti.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),_=this.downlinkStats.usedBandwidthKbps+ti.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):_=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?_=ti.DEFAULT_BANDWIDTH_KBPS:_=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-ti.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*ti.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,_=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,_>15e3&&this.logger.warn("bwe: "+_+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(_,15e3)}setProbeState(_){if(this.rateProbeState===_)return!1;const P=Date.now();switch(_){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||P-this.lastProbeTimestamp>ti.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=P;else return!1;break;case"Probing":if(P-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=P,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,ti.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+_+" from "+this.rateProbeState),this.rateProbeState=_,!0}upgradeToStream(_,P){for(let L=0;L<_.length;L++)if(_[L].groupId===P.groupId){const A=P.avgBitrateKbps-_[L].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(_[L])+" to "+P),this.lastUpgradeRateKbps=A,_[L]=P,A}return _.push(P),this.lastUpgradeRateKbps=P.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(_,P){if(Date.now()-this.lastProbeTimestamp>ti.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>ti.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max(ti.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const L=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(_)||P>L?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=ti.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(_,P,L){const A=this.chosenStreamsSameAsLast(_);let M=0;const k=P.targetDownlinkBitrate>ti.LOW_BITRATE_THRESHOLD_KBPS?ti.TARGET_RATE_CHANGE_TRIGGER_PERCENT:ti.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,G=P.targetDownlinkBitrate*k/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!A&&Math.abs(P.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<G?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),M=1):this.targetRateBaselineForDeltaCheckKbps=P.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,M;if(A||M===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(_,L),M=0);break}else this.setProbeState("Not Probing");return M}calculateSubscribeRate(_){let P=0;for(const L of _)!this.pausedStreamIds.contain(L.streamId)&&!this.pausedBwAttendeeIds.has(L.attendeeId)&&(P+=L.maxBitrateKbps);return P}handleAppPausedStreams(_,P){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new c.default;const L=this.tileController.getAllRemoteVideoTiles();for(const A of L){const M=A.state();if(M.paused&&!this.pausedBwAttendeeIds.has(M.boundAttendeeId)){let k=P.length;for(;k--;)P[k].attendeeId===M.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+M.boundAttendeeId+" streamId: "+P[k].streamId),this.pausedStreamIds.add(P[k].streamId),this.subscribedReceiveSet.contain(P[k].streamId)&&_.push(P[k]),P.splice(k,1))}}}processBwPausedStreams(_,P){if(!this.tileController){this.logger.warn("tileController not found!");return}const L=this.getCurrentVideoPreferences();if(L&&this.shouldPauseTiles){const A=this.tileController.getAllVideoTiles();for(const M of L){const k=this.getVideoTileForAttendeeId(M.attendeeId,A),G=(k==null?void 0:k.state().paused)||!1;if(P.some(K=>K.attendeeId===M.attendeeId))G&&this.pausedBwAttendeeIds.has(M.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${M.attendeeId} due to bandwidth`),this.forEachObserver(K=>{K.tileWillBeUnpausedByDownlinkPolicy(k.id())}),this.tileController.unpauseVideoTile(k.id()),this.pausedBwAttendeeIds.delete(M.attendeeId));else{const K=_.some(H=>H.attendeeId===M.attendeeId);if(k&&K){const H=this.optimalReceiveStreams.find(X=>X.attendeeId===M.attendeeId);H!==void 0&&(G||(this.logger.info(`bwe: pausing streamId ${H.streamId} attendee ${M.attendeeId} due to bandwidth`),this.forEachObserver(X=>{X.tileWillBePausedByDownlinkPolicy(k.id())}),this.tileController.pauseVideoTile(k.id())),P.push(H)),this.pausedBwAttendeeIds.add(M.attendeeId)}else if(K){const H=this.tileController.addVideoTile();H.bindVideoStream(M.attendeeId,!1,null,0,0,0,null),this.forEachObserver(X=>{X.tileWillBePausedByDownlinkPolicy(H.id())}),H.pause(),this.logger.info(`bwe: Created video tile ${H.id()} for bw paused attendee ${M.attendeeId}`),this.pausedBwAttendeeIds.add(M.attendeeId)}}}}}cleanBwPausedTiles(_){if(!this.tileController){this.logger.warn("tileController not found!");return}const P=this.tileController.getAllRemoteVideoTiles(),L=this.getCurrentVideoPreferences();for(const A of P){const M=A.state();M.boundVideoStream||(_.some(k=>k.attendeeId===M.boundAttendeeId)?L!==void 0&&!L.some(k=>k.attendeeId===M.boundAttendeeId)&&this.tileController.removeVideoTile(M.tileId):(this.tileController.removeVideoTile(M.tileId),this.logger.info(`bwe: Removed video tile ${M.tileId} for bw paused attendee ${M.boundAttendeeId}`)))}}priorityPolicy(_,P,L){let A;const M=this.getCurrentVideoPreferences(),k=M.highestPriority();let G,K=k;for(;K!==-1;){G=-1;for(const H of M)if(H.priority===K)for(const X of P)X.attendeeId===H.attendeeId&&(L.some(oe=>oe.groupId===X.groupId)||(_.chosenTotalBitrate+X.avgBitrateKbps<=_.targetDownlinkBitrate?(L.push(X),_.chosenTotalBitrate+=X.avgBitrateKbps):_.deltaToNextUpgrade===0&&(_.deltaToNextUpgrade=X.avgBitrateKbps,A=X)));else if(H.priority>K){G=H.priority;break}for(const H of M)if(H.priority===K){for(const X of P)if(X.attendeeId===H.attendeeId){const oe=L.findIndex(le=>le.groupId===X.groupId&&le.maxBitrateKbps<=X.maxBitrateKbps&&le.avgBitrateKbps<X.avgBitrateKbps);if(oe!==-1){const le=X.avgBitrateKbps-L[oe].avgBitrateKbps;this.hasSimulcastStreams(P,X.attendeeId,X.groupId)&&this.canUpgrade(X.avgBitrateKbps,H.targetSize,H.targetSizeToBitrateKbps(H.targetSize),X.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${X.attendeeId} group: ${X.groupId} has simulcast and can upgrade avgBitrate: ${X.avgBitrateKbps} target: ${H.targetSizeToBitrateKbps(H.targetSize)} targetTotalBitrate: ${_.targetDownlinkBitrate}`),_.chosenTotalBitrate+le<=_.targetDownlinkBitrate?(_.chosenTotalBitrate+=le,L[oe]=X):_.deltaToNextUpgrade===0&&(_.deltaToNextUpgrade=le,A=X)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(H.priority>K)break;if(K===k&&_.deltaToNextUpgrade!==0)break;K=G}return A}getVideoTileForAttendeeId(_,P){for(const L of P)if(L.state().boundAttendeeId===_)return L;return null}canUpgrade(_,P,L,A){let M=!1;return(P===S.default.High||!A&&_<=L||A&&P===S.default.Medium&&_<=L)&&(M=!0),M?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${_} targetBitrateKbps: ${L}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${_} targetBitrateKbps: ${L}`),!1)}hasSimulcastStreams(_,P,L){let A=0;for(const M of _)M.attendeeId===P&&M.groupId===L&&A++;return this.logger.info(`bwe: attendeeId: ${P} groupId: ${L} hasSimulcastStreams: streamCount: ${A}`),A>1}streamsWithPreferenceDidChange(_){if(this.previousStreamsWithPreference===void 0||_.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const P of _)if(this.previousStreamsWithPreference.find(A=>A.groupId===P.groupId&&A.streamId===P.streamId&&A.maxBitrateKbps===P.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(_){if(this.optimalNonPausedReceiveStreams.length!==_.length)return!1;for(const P of this.optimalNonPausedReceiveStreams)if(!_.some(L=>L.streamId===P.streamId))return!1;return!0}policyStateLogStr(_,P){const L=this.calculateSubscribeRate(this.optimalReceiveStreams),A={targetBitrate:P,subscribedRate:L,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let M="remoteInfos: [";for(const G of _)M+=`{grpId:${G.groupId} strId:${G.streamId} maxBr:${G.maxBitrateKbps} avgBr:${G.avgBitrateKbps}}, `;M+="]";let k=`bwe: optimalReceiveSet ${JSON.stringify(A)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${M}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(k+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?k+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:k+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,k}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(_){this.serverSideNetworkAdaption=_,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[n.default.None,n.default.BandwidthProbing,n.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let _=this.getCurrentVideoPreferences();return _||(_=y.VideoPreferences.prepare().build()),_}wantsAllTemporalLayersInIndex(){return!0}constructor(_,P=T.default.Default){this.logger=_,this.videoPriorityBasedPolicyConfig=P,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.reset()}},"VideoPriorityBasedPolicy");d.default=F,F.DEFAULT_BANDWIDTH_KBPS=2800,F.STARTUP_PERIOD_MS=6e3,F.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,F.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,F.LOW_BITRATE_THRESHOLD_KBPS=300,F.MIN_TIME_BETWEEN_PROBE_MS=5e3,F.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,F.MAX_HOLD_BEFORE_PROBE_MS=3e4,F.MAX_ALLOWED_PROBE_TIME_MS=6e4,F.SPURIOUS_PACKET_LOST_THRESHOLD=2,F.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},ko9P:function(W,d,h){"use strict";W.exports=p;var g=h("j4TH");function p(o,i){this.lo=o>>>0,this.hi=i>>>0}a(p,"LongBits");var u=p.zero=new p(0,0);u.toNumber=function(){return 0},u.zzEncode=u.zzDecode=function(){return this},u.length=function(){return 1};var m=p.zeroHash="\0\0\0\0\0\0\0\0";p.fromNumber=a(function(i){if(i===0)return u;var e=i<0;e&&(i=-i);var t=i>>>0,n=(i-t)/4294967296>>>0;return e&&(n=~n>>>0,t=~t>>>0,++t>4294967295&&(t=0,++n>4294967295&&(n=0))),new p(t,n)},"fromNumber"),p.from=a(function(i){if(typeof i=="number")return p.fromNumber(i);if(g.isString(i))if(g.Long)i=g.Long.fromString(i);else return p.fromNumber(parseInt(i,10));return i.low||i.high?new p(i.low>>>0,i.high>>>0):u},"from"),p.prototype.toNumber=a(function(i){if(!i&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),p.prototype.toLong=a(function(i){return g.Long?new g.Long(this.lo|0,this.hi|0,Boolean(i)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(i)}},"toLong");var s=String.prototype.charCodeAt;p.fromHash=a(function(i){return i===m?u:new p((s.call(i,0)|s.call(i,1)<<8|s.call(i,2)<<16|s.call(i,3)<<24)>>>0,(s.call(i,4)|s.call(i,5)<<8|s.call(i,6)<<16|s.call(i,7)<<24)>>>0)},"fromHash"),p.prototype.toHash=a(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),p.prototype.zzEncode=a(function(){var i=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^i)>>>0,this.lo=(this.lo<<1^i)>>>0,this},"zzEncode"),p.prototype.zzDecode=a(function(){var i=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^i)>>>0,this.hi=(this.hi>>>1^i)>>>0,this},"zzDecode"),p.prototype.length=a(function(){var i=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?i<16384?i<128?1:2:i<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},kph0:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckNetworkUDPConnectivityFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",p[p.ConnectionFailed=2]="ConnectionFailed",p[p.ICENegotiationFailed=3]="ICENegotiationFailed"})(g=d.CheckNetworkUDPConnectivityFeedback||(d.CheckNetworkUDPConnectivityFeedback={})),d.default=g},kud1:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("jG7n")),m=p(h("83pg"));let s=a(class ic extends u.default{setImageBlob(i){return g(this,void 0,void 0,function*(){this.replacementBlob=i,this.replacementImage=yield ic.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(i,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:n,targetCanvas:r}=this,{width:c,height:f}=r;n.save(),n.clearRect(0,0,c,f),n.drawImage(this.scaledCanvas,0,0,c,f),n.globalCompositeOperation="source-in",n.drawImage(i,0,0,c,f),n.globalCompositeOperation="destination-over",n.drawImage(this.replacementImage,0,0,r.width,r.height),n.restore()}static loadImageExecutor(i,e,t){const n=new Image;n.crossOrigin="Anonymous",n.addEventListener("load",()=>{i(n)},!1),n.addEventListener("error",r=>{e(new Error(`Could not load replacement image ${n.src}: ${r.message}`))},!1),n.src=t}static loadImage(i){return g(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,i))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const i=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return g(this,void 0,void 0,function*(){this.replacementImage=yield ic.loadImage(this.createReplacementObjectUrl()),i.loadAssets.call(this)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});return g(this,void 0,void 0,function*(){i.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(i){this.eventController?this.eventController=i:(this.eventController=i,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const i={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",i)}constructor(i,e){super("background replacement",i,e,new m.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: ${this.stringify(e)}`)}},"BackgroundReplacementFilter");d.default=s},l7oq:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("zcg+"));let u=a(class ef{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(s){this._isFirstConnection=s,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(s,o){const i=this.shouldReconnect&&!this.hasPastReconnectDeadline();return i&&(this.backoffCancel=o,this.backoffTimer=new p.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,s()})),i}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new ef(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(s){this.lastActiveTimestampMs=s}constructor(s,o){this.reconnectTimeoutMs=s,this.backoffPolicy=o,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");d.default=u},l8QA:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("Czkq"));let u=a(class extends p.default{},"BackgroundBlurVideoFrameProcessorDelegate");d.default=u},lFzH:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("papz")),m=p(h("wXa7")),s=p(h("j+uH"));let o=a(class extends s.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const n=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),r=t||n;return this.context.logger.info(`uses video: ${r} (enabled: ${!0}, sending: ${t}, receiving: ${n})`),r}run(){return g(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,n)=>g(this,void 0,void 0,function*(){this.cancelPromise=r=>{n(r)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new m.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const r=new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,n(r);return}t()}catch(r){n(r)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");d.default=o},lUhs:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.MeetingSessionStatusCode=void 0;var g;(function(p){p[p.OK=0]="OK",p[p.Left=1]="Left",p[p.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",p[p.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",p[p.AudioCallAtCapacity=4]="AudioCallAtCapacity",p[p.MeetingEnded=5]="MeetingEnded",p[p.AudioInternalServerError=6]="AudioInternalServerError",p[p.AudioServiceUnavailable=7]="AudioServiceUnavailable",p[p.AudioDisconnected=8]="AudioDisconnected",p[p.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",p[p.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",p[p.SignalingBadRequest=11]="SignalingBadRequest",p[p.SignalingInternalServerError=12]="SignalingInternalServerError",p[p.SignalingRequestFailed=13]="SignalingRequestFailed",p[p.ICEGatheringTimeoutWorkaround=14]="ICEGatheringTimeoutWorkaround",p[p.ConnectionHealthReconnect=15]="ConnectionHealthReconnect",p[p.RealtimeApiFailed=16]="RealtimeApiFailed",p[p.TaskFailed=17]="TaskFailed",p[p.IncompatibleSDP=18]="IncompatibleSDP",p[p.TURNCredentialsForbidden=19]="TURNCredentialsForbidden",p[p.NoAttendeePresent=20]="NoAttendeePresent",p[p.AudioAttendeeRemoved=21]="AudioAttendeeRemoved",p[p.AudioVideoWasRemovedFromPrimaryMeeting=22]="AudioVideoWasRemovedFromPrimaryMeeting",p[p.AudioDisconnectAudio=23]="AudioDisconnectAudio"})(g=d.MeetingSessionStatusCode||(d.MeetingSessionStatusCode={})),d.default=g},ldli:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const p=h("f2XL"),u=g(h("Zkgh")),m=g(h("MhWp"));let s=a(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(i){return i>0&&i<1e3?1:Math.trunc(i/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const i=[];return this.currentIndex.sources.forEach(e=>{const t=new m.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,i.push(t)}),i}integrateUplinkPolicyDecision(i){if(i&&i.length){const e=i[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(i){if(this.currentIndex=i,!i)return;const e=new Map;let t=!1;for(const n of i.sources){if(!e.has(n.attendeeId)){e.set(n.attendeeId,n.groupId);continue}const r=e.get(n.attendeeId);r<n.groupId&&(this.logger.warn(`Old group ID ${r} found for attendee ID ${n.attendeeId}, replacing with newer group ID ${n.groupId}`),e.set(n.attendeeId,n.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(n=>e.get(n.attendeeId)===n.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}integrateSubscribeAckFrame(i){this.currentSubscribeAck=i,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,i.allocations&&i.allocations!==void 0&&i.allocations.length>0&&(this.sendVideoStreamId=i.allocations[0].streamId)}integrateBitratesFrame(i){if(this.currentIndex)for(const e of i.bitrates){const t=this.currentIndex.sources.find(n=>n.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const i=new u.default;if(this.currentIndex)for(const e of this.currentIndex.sources)i.add(e.streamId);return i}allVideoSendingSourcesExcludingSelf(i){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const n of this.currentIndex.sources){const{attendeeId:r,externalUserId:c,mediaType:f}=n;r!==i&&f===p.SdkStreamMediaType.VIDEO&&(t.has(r)||(e.push({attendee:{attendeeId:r,externalUserId:c}}),t.add(r)))}return e}streamSelectionUnderBandwidthConstraint(i,e,t,n){const r=new Set;if(this.currentIndex)for(const y of this.currentIndex.sources)y.attendeeId===i||y.mediaType!==p.SdkStreamMediaType.VIDEO||!e.has(y.attendeeId)&&!t.has(y.attendeeId)&&r.add(y.attendeeId);const c=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i),f=new Map;let S=0;c.forEach((y,T)=>{f.set(T,y[0]),S+=y[0].maxBitrateKbps}),S=this.trySelectHighBitrateForAttendees(c,e,S,n,f),this.trySelectHighBitrateForAttendees(c,r,S,n,f);const l=new u.default;for(const y of f.values())l.add(y.streamId);return l}highestQualityStreamFromEachGroupExcludingSelf(i){const e=new u.default;if(this.currentIndex){const t=new Map;for(const n of this.currentIndex.sources)n.attendeeId===i||n.mediaType!==p.SdkStreamMediaType.VIDEO||(!t.has(n.groupId)||n.maxBitrateKbps>t.get(n.groupId).maxBitrateKbps)&&t.set(n.groupId,n);for(const n of t.values())e.add(n.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(i){return this.highestQualityStreamFromEachGroupExcludingSelf(i).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${i}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${i}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(i){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(i);return e||(this.logger.info(`stream ID ${i} does not correspond to a known attendee`),"")}attendeeIdForGroupId(i){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(i);return e||(this.logger.info(`group ID ${i} does not correspond to a known attendee`),"")}groupIdForStreamId(i){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===i)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===i)return e.groupId}}}StreamIdsInSameGroup(i,e){return this.groupIdForStreamId(i)===this.groupIdForStreamId(e)}streamIdForTrack(i){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(i)}streamIdForSSRC(i){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(i)}overrideStreamIdMappings(i,e){if(this.subscribeTrackToStreamMap){for(const[t,n]of this.subscribeTrackToStreamMap.entries())if(i===n){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,n]of this.subscribeSsrcToStreamMap.entries())if(i===n){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(i){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(i)}streamsPausedAtSource(){const i=new u.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)i.add(e);return i}sendVideoStreamIdFromRid(i){return this.sendVideoStreamId}buildTrackToStreamMap(i){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(i){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(i){const e=new Map;for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(i){const e=new Map;if(i)for(const t of i.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(i){const e=new Map;for(const t of i.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(i){const e=new Map;if(i)for(const t of i.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(i,e,t,n,r){for(const c of e){if(t>=n)break;if(i.has(c)){const f=i.get(c);for(const S of f.reverse())if(t-r.get(c).maxBitrateKbps+S.maxBitrateKbps<n){t=t-r.get(c).maxBitrateKbps+S.maxBitrateKbps,r.set(c,S);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===i||t.mediaType!==p.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,n)=>{t.sort((r,c)=>r.maxBitrateKbps>c.maxBitrateKbps?1:r.maxBitrateKbps<c.maxBitrateKbps?-1:0)}),e}constructor(i){this.logger=i,this.currentIndex=null,this.indexForSubscribe=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new m.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");d.default=s},lmsn:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={CouldNotFindArticle:"could_not_find_article"},t=Object(s.a)("helpdesk.getArticle generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"helpdesk.getArticle",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to helpdesk.getArticle
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskGetArticleFetcher",description:"helpdesk.getArticle generated fetcher"}},lnWt:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.numToUint8=void 0;function g(p){return new Uint8Array([(p&4278190080)>>24,(p&16711680)>>16,(p&65280)>>8,p&255])}a(g,"numToUint8"),d.numToUint8=g},"m/NO":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.MeetingSessionLifecycleEvent=void 0;var g;(function(p){p[p.Connecting=0]="Connecting",p[p.Started=1]="Started",p[p.Stopped=2]="Stopped"})(g=d.MeetingSessionLifecycleEvent||(d.MeetingSessionLifecycleEvent={})),d.default=g},mYvd:function(W,d,h){"use strict";h.r(d),h.d(d,"Deflate",function(){return bs}),h.d(d,"Inflate",function(){return Fn}),h.d(d,"constants",function(){return Os}),h.d(d,"default",function(){return ws}),h.d(d,"deflate",function(){return Es}),h.d(d,"deflateRaw",function(){return Ts}),h.d(d,"gzip",function(){return Ys}),h.d(d,"inflate",function(){return yr}),h.d(d,"inflateRaw",function(){return Cs}),h.d(d,"ungzip",function(){return Is});/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */const g=4,p=0,u=1,m=2;function s(E){let B=E.length;for(;--B>=0;)E[B]=0}a(s,"zero$1");const o=0,i=1,e=2,t=3,n=258,r=29,c=256,f=c+1+r,S=30,l=19,y=2*f+1,T=15,O=16,R=7,F=256,U=16,_=17,P=18,L=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),A=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),k=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),G=512,K=new Array((f+2)*2);s(K);const H=new Array(S*2);s(H);const X=new Array(G);s(X);const oe=new Array(n-t+1);s(oe);const le=new Array(r);s(le);const re=new Array(S);s(re);function he(E,B,w,z,V){this.static_tree=E,this.extra_bits=B,this.extra_base=w,this.elems=z,this.max_length=V,this.has_stree=E&&E.length}a(he,"StaticTreeDesc");let Pe,pe,Me;function We(E,B){this.dyn_tree=E,this.max_code=0,this.stat_desc=B}a(We,"TreeDesc");const Ae=a(E=>E<256?X[E]:X[256+(E>>>7)],"d_code"),lt=a((E,B)=>{E.pending_buf[E.pending++]=B&255,E.pending_buf[E.pending++]=B>>>8&255},"put_short"),Ne=a((E,B,w)=>{E.bi_valid>O-w?(E.bi_buf|=B<<E.bi_valid&65535,lt(E,E.bi_buf),E.bi_buf=B>>O-E.bi_valid,E.bi_valid+=w-O):(E.bi_buf|=B<<E.bi_valid&65535,E.bi_valid+=w)},"send_bits"),Xe=a((E,B,w)=>{Ne(E,w[B*2],w[B*2+1])},"send_code"),je=a((E,B)=>{let w=0;do w|=E&1,E>>>=1,w<<=1;while(--B>0);return w>>>1},"bi_reverse"),Te=a(E=>{E.bi_valid===16?(lt(E,E.bi_buf),E.bi_buf=0,E.bi_valid=0):E.bi_valid>=8&&(E.pending_buf[E.pending++]=E.bi_buf&255,E.bi_buf>>=8,E.bi_valid-=8)},"bi_flush"),At=a((E,B)=>{const w=B.dyn_tree,z=B.max_code,V=B.stat_desc.static_tree,J=B.stat_desc.has_stree,ie=B.stat_desc.extra_bits,te=B.stat_desc.extra_base,be=B.stat_desc.max_length;let q,se,at,ye,ue,_e,zt=0;for(ye=0;ye<=T;ye++)E.bl_count[ye]=0;for(w[E.heap[E.heap_max]*2+1]=0,q=E.heap_max+1;q<y;q++)se=E.heap[q],ye=w[w[se*2+1]*2+1]+1,ye>be&&(ye=be,zt++),w[se*2+1]=ye,!(se>z)&&(E.bl_count[ye]++,ue=0,se>=te&&(ue=ie[se-te]),_e=w[se*2],E.opt_len+=_e*(ye+ue),J&&(E.static_len+=_e*(V[se*2+1]+ue)));if(zt!==0){do{for(ye=be-1;E.bl_count[ye]===0;)ye--;E.bl_count[ye]--,E.bl_count[ye+1]+=2,E.bl_count[be]--,zt-=2}while(zt>0);for(ye=be;ye!==0;ye--)for(se=E.bl_count[ye];se!==0;)at=E.heap[--q],!(at>z)&&(w[at*2+1]!==ye&&(E.opt_len+=(ye-w[at*2+1])*w[at*2],w[at*2+1]=ye),se--)}},"gen_bitlen"),sn=a((E,B,w)=>{const z=new Array(T+1);let V=0,J,ie;for(J=1;J<=T;J++)z[J]=V=V+w[J-1]<<1;for(ie=0;ie<=B;ie++){let te=E[ie*2+1];te!==0&&(E[ie*2]=je(z[te]++,te))}},"gen_codes"),Dt=a(()=>{let E,B,w,z,V;const J=new Array(T+1);for(w=0,z=0;z<r-1;z++)for(le[z]=w,E=0;E<1<<L[z];E++)oe[w++]=z;for(oe[w-1]=z,V=0,z=0;z<16;z++)for(re[z]=V,E=0;E<1<<A[z];E++)X[V++]=z;for(V>>=7;z<S;z++)for(re[z]=V<<7,E=0;E<1<<A[z]-7;E++)X[256+V++]=z;for(B=0;B<=T;B++)J[B]=0;for(E=0;E<=143;)K[E*2+1]=8,E++,J[8]++;for(;E<=255;)K[E*2+1]=9,E++,J[9]++;for(;E<=279;)K[E*2+1]=7,E++,J[7]++;for(;E<=287;)K[E*2+1]=8,E++,J[8]++;for(sn(K,f+1,J),E=0;E<S;E++)H[E*2+1]=5,H[E*2]=je(E,5);Pe=new he(K,L,c+1,f,T),pe=new he(H,A,0,S,T),Me=new he(new Array(0),M,0,l,R)},"tr_static_init"),tn=a(E=>{let B;for(B=0;B<f;B++)E.dyn_ltree[B*2]=0;for(B=0;B<S;B++)E.dyn_dtree[B*2]=0;for(B=0;B<l;B++)E.bl_tree[B*2]=0;E.dyn_ltree[F*2]=1,E.opt_len=E.static_len=0,E.last_lit=E.matches=0},"init_block"),Yt=a(E=>{E.bi_valid>8?lt(E,E.bi_buf):E.bi_valid>0&&(E.pending_buf[E.pending++]=E.bi_buf),E.bi_buf=0,E.bi_valid=0},"bi_windup"),Tn=a((E,B,w,z)=>{Yt(E),z&&(lt(E,w),lt(E,~w)),E.pending_buf.set(E.window.subarray(B,B+w),E.pending),E.pending+=w},"copy_block"),Xt=a((E,B,w,z)=>{const V=B*2,J=w*2;return E[V]<E[J]||E[V]===E[J]&&z[B]<=z[w]},"smaller"),Cn=a((E,B,w)=>{const z=E.heap[w];let V=w<<1;for(;V<=E.heap_len&&(V<E.heap_len&&Xt(B,E.heap[V+1],E.heap[V],E.depth)&&V++,!Xt(B,z,E.heap[V],E.depth));)E.heap[w]=E.heap[V],w=V,V<<=1;E.heap[w]=z},"pqdownheap"),Dn=a((E,B,w)=>{let z,V,J=0,ie,te;if(E.last_lit!==0)do z=E.pending_buf[E.d_buf+J*2]<<8|E.pending_buf[E.d_buf+J*2+1],V=E.pending_buf[E.l_buf+J],J++,z===0?Xe(E,V,B):(ie=oe[V],Xe(E,ie+c+1,B),te=L[ie],te!==0&&(V-=le[ie],Ne(E,V,te)),z--,ie=Ae(z),Xe(E,ie,w),te=A[ie],te!==0&&(z-=re[ie],Ne(E,z,te)));while(J<E.last_lit);Xe(E,F,B)},"compress_block"),cn=a((E,B)=>{const w=B.dyn_tree,z=B.stat_desc.static_tree,V=B.stat_desc.has_stree,J=B.stat_desc.elems;let ie,te,be=-1,q;for(E.heap_len=0,E.heap_max=y,ie=0;ie<J;ie++)w[ie*2]!==0?(E.heap[++E.heap_len]=be=ie,E.depth[ie]=0):w[ie*2+1]=0;for(;E.heap_len<2;)q=E.heap[++E.heap_len]=be<2?++be:0,w[q*2]=1,E.depth[q]=0,E.opt_len--,V&&(E.static_len-=z[q*2+1]);for(B.max_code=be,ie=E.heap_len>>1;ie>=1;ie--)Cn(E,w,ie);q=J;do ie=E.heap[1],E.heap[1]=E.heap[E.heap_len--],Cn(E,w,1),te=E.heap[1],E.heap[--E.heap_max]=ie,E.heap[--E.heap_max]=te,w[q*2]=w[ie*2]+w[te*2],E.depth[q]=(E.depth[ie]>=E.depth[te]?E.depth[ie]:E.depth[te])+1,w[ie*2+1]=w[te*2+1]=q,E.heap[1]=q++,Cn(E,w,1);while(E.heap_len>=2);E.heap[--E.heap_max]=E.heap[1],At(E,B),sn(w,be,E.bl_count)},"build_tree"),Mn=a((E,B,w)=>{let z,V=-1,J,ie=B[0*2+1],te=0,be=7,q=4;for(ie===0&&(be=138,q=3),B[(w+1)*2+1]=65535,z=0;z<=w;z++)J=ie,ie=B[(z+1)*2+1],!(++te<be&&J===ie)&&(te<q?E.bl_tree[J*2]+=te:J!==0?(J!==V&&E.bl_tree[J*2]++,E.bl_tree[U*2]++):te<=10?E.bl_tree[_*2]++:E.bl_tree[P*2]++,te=0,V=J,ie===0?(be=138,q=3):J===ie?(be=6,q=3):(be=7,q=4))},"scan_tree"),_n=a((E,B,w)=>{let z,V=-1,J,ie=B[0*2+1],te=0,be=7,q=4;for(ie===0&&(be=138,q=3),z=0;z<=w;z++)if(J=ie,ie=B[(z+1)*2+1],!(++te<be&&J===ie)){if(te<q)do Xe(E,J,E.bl_tree);while(--te!==0);else J!==0?(J!==V&&(Xe(E,J,E.bl_tree),te--),Xe(E,U,E.bl_tree),Ne(E,te-3,2)):te<=10?(Xe(E,_,E.bl_tree),Ne(E,te-3,3)):(Xe(E,P,E.bl_tree),Ne(E,te-11,7));te=0,V=J,ie===0?(be=138,q=3):J===ie?(be=6,q=3):(be=7,q=4)}},"send_tree"),nt=a(E=>{let B;for(Mn(E,E.dyn_ltree,E.l_desc.max_code),Mn(E,E.dyn_dtree,E.d_desc.max_code),cn(E,E.bl_desc),B=l-1;B>=3&&E.bl_tree[k[B]*2+1]===0;B--);return E.opt_len+=3*(B+1)+5+5+4,B},"build_bl_tree"),$t=a((E,B,w,z)=>{let V;for(Ne(E,B-257,5),Ne(E,w-1,5),Ne(E,z-4,4),V=0;V<z;V++)Ne(E,E.bl_tree[k[V]*2+1],3);_n(E,E.dyn_ltree,B-1),_n(E,E.dyn_dtree,w-1)},"send_all_trees"),It=a(E=>{let B=4093624447,w;for(w=0;w<=31;w++,B>>>=1)if(B&1&&E.dyn_ltree[w*2]!==0)return p;if(E.dyn_ltree[9*2]!==0||E.dyn_ltree[10*2]!==0||E.dyn_ltree[13*2]!==0)return u;for(w=32;w<c;w++)if(E.dyn_ltree[w*2]!==0)return u;return p},"detect_data_type");let Fe=!1;const Rt=a(E=>{Fe||(Dt(),Fe=!0),E.l_desc=new We(E.dyn_ltree,Pe),E.d_desc=new We(E.dyn_dtree,pe),E.bl_desc=new We(E.bl_tree,Me),E.bi_buf=0,E.bi_valid=0,tn(E)},"_tr_init$1"),Qe=a((E,B,w,z)=>{Ne(E,(o<<1)+(z?1:0),3),Tn(E,B,w,!0)},"_tr_stored_block$1"),Qt=a(E=>{Ne(E,i<<1,3),Xe(E,F,K),Te(E)},"_tr_align$1"),Nn=a((E,B,w,z)=>{let V,J,ie=0;E.level>0?(E.strm.data_type===m&&(E.strm.data_type=It(E)),cn(E,E.l_desc),cn(E,E.d_desc),ie=nt(E),V=E.opt_len+3+7>>>3,J=E.static_len+3+7>>>3,J<=V&&(V=J)):V=J=w+5,w+4<=V&&B!==-1?Qe(E,B,w,z):E.strategy===g||J===V?(Ne(E,(i<<1)+(z?1:0),3),Dn(E,K,H)):(Ne(E,(e<<1)+(z?1:0),3),$t(E,E.l_desc.max_code+1,E.d_desc.max_code+1,ie+1),Dn(E,E.dyn_ltree,E.dyn_dtree)),tn(E),z&&Yt(E)},"_tr_flush_block$1"),Zt=a((E,B,w)=>(E.pending_buf[E.d_buf+E.last_lit*2]=B>>>8&255,E.pending_buf[E.d_buf+E.last_lit*2+1]=B&255,E.pending_buf[E.l_buf+E.last_lit]=w&255,E.last_lit++,B===0?E.dyn_ltree[w*2]++:(E.matches++,B--,E.dyn_ltree[(oe[w]+c+1)*2]++,E.dyn_dtree[Ae(B)*2]++),E.last_lit===E.lit_bufsize-1),"_tr_tally$1");var mn=Rt,ni=Qe,fi=Nn,di=Zt,Wn=Qt,Rn={_tr_init:mn,_tr_stored_block:ni,_tr_flush_block:fi,_tr_tally:di,_tr_align:Wn},ee=a((E,B,w,z)=>{let V=E&65535|0,J=E>>>16&65535|0,ie=0;for(;w!==0;){ie=w>2e3?2e3:w,w-=ie;do V=V+B[z++]|0,J=J+V|0;while(--ie);V%=65521,J%=65521}return V|J<<16|0},"adler32");const ae=a(()=>{let E,B=[];for(var w=0;w<256;w++){E=w;for(var z=0;z<8;z++)E=E&1?3988292384^E>>>1:E>>>1;B[w]=E}return B},"makeTable"),fe=new Uint32Array(ae());var we=a((E,B,w,z)=>{const V=fe,J=z+w;E^=-1;for(let ie=z;ie<J;ie++)E=E>>>8^V[(E^B[ie])&255];return E^-1},"crc32"),Ce={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},De={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:pt,_tr_stored_block:gt,_tr_flush_block:ct,_tr_tally:_t,_tr_align:zn}=Rn,{Z_NO_FLUSH:vn,Z_PARTIAL_FLUSH:li,Z_FULL_FLUSH:Gn,Z_FINISH:gn,Z_BLOCK:yi,Z_OK:un,Z_STREAM_END:Xn,Z_STREAM_ERROR:an,Z_DATA_ERROR:hi,Z_BUF_ERROR:xn,Z_DEFAULT_COMPRESSION:bi,Z_FILTERED:Ei,Z_HUFFMAN_ONLY:Kn,Z_RLE:Oi,Z_FIXED:Re,Z_DEFAULT_STRATEGY:Oe,Z_UNKNOWN:Et,Z_DEFLATED:it}=De,Pt=9,qt=15,Jt=8,kt=29,N=256+1+kt,Z=30,de=19,ce=2*N+1,ve=15,me=3,He=258,ke=He+me+1,$e=32,Be=42,ot=69,Kt=73,Wt=91,fn=103,on=113,hn=666,Ot=1,wn=2,Sn=3,yn=4,pi=3,In=a((E,B)=>(E.msg=Ce[B],B),"err"),ci=a(E=>(E<<1)-(E>4?9:0),"rank"),pn=a(E=>{let B=E.length;for(;--B>=0;)E[B]=0},"zero");let On=a((E,B,w)=>(B<<E.hash_shift^w)&E.hash_mask,"HASH_ZLIB");const rn=a(E=>{const B=E.state;let w=B.pending;w>E.avail_out&&(w=E.avail_out),w!==0&&(E.output.set(B.pending_buf.subarray(B.pending_out,B.pending_out+w),E.next_out),E.next_out+=w,B.pending_out+=w,E.total_out+=w,E.avail_out-=w,B.pending-=w,B.pending===0&&(B.pending_out=0))},"flush_pending"),ut=a((E,B)=>{ct(E,E.block_start>=0?E.block_start:-1,E.strstart-E.block_start,B),E.block_start=E.strstart,rn(E.strm)},"flush_block_only"),ze=a((E,B)=>{E.pending_buf[E.pending++]=B},"put_byte"),Bn=a((E,B)=>{E.pending_buf[E.pending++]=B>>>8&255,E.pending_buf[E.pending++]=B&255},"putShortMSB"),Bi=a((E,B,w,z)=>{let V=E.avail_in;return V>z&&(V=z),V===0?0:(E.avail_in-=V,B.set(E.input.subarray(E.next_in,E.next_in+V),w),E.state.wrap===1?E.adler=ee(E.adler,B,V,w):E.state.wrap===2&&(E.adler=we(E.adler,B,V,w)),E.next_in+=V,E.total_in+=V,V)},"read_buf"),Qn=a((E,B)=>{let w=E.max_chain_length,z=E.strstart,V,J,ie=E.prev_length,te=E.nice_match;const be=E.strstart>E.w_size-ke?E.strstart-(E.w_size-ke):0,q=E.window,se=E.w_mask,at=E.prev,ye=E.strstart+He;let ue=q[z+ie-1],_e=q[z+ie];E.prev_length>=E.good_match&&(w>>=2),te>E.lookahead&&(te=E.lookahead);do if(V=B,!(q[V+ie]!==_e||q[V+ie-1]!==ue||q[V]!==q[z]||q[++V]!==q[z+1])){z+=2,V++;do;while(q[++z]===q[++V]&&q[++z]===q[++V]&&q[++z]===q[++V]&&q[++z]===q[++V]&&q[++z]===q[++V]&&q[++z]===q[++V]&&q[++z]===q[++V]&&q[++z]===q[++V]&&z<ye);if(J=He-(ye-z),z=ye-He,J>ie){if(E.match_start=B,ie=J,J>=te)break;ue=q[z+ie-1],_e=q[z+ie]}}while((B=at[B&se])>be&&--w!==0);return ie<=E.lookahead?ie:E.lookahead},"longest_match"),An=a(E=>{const B=E.w_size;let w,z,V,J,ie;do{if(J=E.window_size-E.lookahead-E.strstart,E.strstart>=B+(B-ke)){E.window.set(E.window.subarray(B,B+B),0),E.match_start-=B,E.strstart-=B,E.block_start-=B,z=E.hash_size,w=z;do V=E.head[--w],E.head[w]=V>=B?V-B:0;while(--z);z=B,w=z;do V=E.prev[--w],E.prev[w]=V>=B?V-B:0;while(--z);J+=B}if(E.strm.avail_in===0)break;if(z=Bi(E.strm,E.window,E.strstart+E.lookahead,J),E.lookahead+=z,E.lookahead+E.insert>=me)for(ie=E.strstart-E.insert,E.ins_h=E.window[ie],E.ins_h=On(E,E.ins_h,E.window[ie+1]);E.insert&&(E.ins_h=On(E,E.ins_h,E.window[ie+me-1]),E.prev[ie&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=ie,ie++,E.insert--,!(E.lookahead+E.insert<me)););}while(E.lookahead<ke&&E.strm.avail_in!==0)},"fill_window"),xi=a((E,B)=>{let w=65535;for(w>E.pending_buf_size-5&&(w=E.pending_buf_size-5);;){if(E.lookahead<=1){if(An(E),E.lookahead===0&&B===vn)return Ot;if(E.lookahead===0)break}E.strstart+=E.lookahead,E.lookahead=0;const z=E.block_start+w;if((E.strstart===0||E.strstart>=z)&&(E.lookahead=E.strstart-z,E.strstart=z,ut(E,!1),E.strm.avail_out===0)||E.strstart-E.block_start>=E.w_size-ke&&(ut(E,!1),E.strm.avail_out===0))return Ot}return E.insert=0,B===gn?(ut(E,!0),E.strm.avail_out===0?Sn:yn):(E.strstart>E.block_start&&(ut(E,!1),E.strm.avail_out===0),Ot)},"deflate_stored"),Di=a((E,B)=>{let w,z;for(;;){if(E.lookahead<ke){if(An(E),E.lookahead<ke&&B===vn)return Ot;if(E.lookahead===0)break}if(w=0,E.lookahead>=me&&(E.ins_h=On(E,E.ins_h,E.window[E.strstart+me-1]),w=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),w!==0&&E.strstart-w<=E.w_size-ke&&(E.match_length=Qn(E,w)),E.match_length>=me)if(z=_t(E,E.strstart-E.match_start,E.match_length-me),E.lookahead-=E.match_length,E.match_length<=E.max_lazy_match&&E.lookahead>=me){E.match_length--;do E.strstart++,E.ins_h=On(E,E.ins_h,E.window[E.strstart+me-1]),w=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart;while(--E.match_length!==0);E.strstart++}else E.strstart+=E.match_length,E.match_length=0,E.ins_h=E.window[E.strstart],E.ins_h=On(E,E.ins_h,E.window[E.strstart+1]);else z=_t(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++;if(z&&(ut(E,!1),E.strm.avail_out===0))return Ot}return E.insert=E.strstart<me-1?E.strstart:me-1,B===gn?(ut(E,!0),E.strm.avail_out===0?Sn:yn):E.last_lit&&(ut(E,!1),E.strm.avail_out===0)?Ot:wn},"deflate_fast"),Zn=a((E,B)=>{let w,z,V;for(;;){if(E.lookahead<ke){if(An(E),E.lookahead<ke&&B===vn)return Ot;if(E.lookahead===0)break}if(w=0,E.lookahead>=me&&(E.ins_h=On(E,E.ins_h,E.window[E.strstart+me-1]),w=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),E.prev_length=E.match_length,E.prev_match=E.match_start,E.match_length=me-1,w!==0&&E.prev_length<E.max_lazy_match&&E.strstart-w<=E.w_size-ke&&(E.match_length=Qn(E,w),E.match_length<=5&&(E.strategy===Ei||E.match_length===me&&E.strstart-E.match_start>4096)&&(E.match_length=me-1)),E.prev_length>=me&&E.match_length<=E.prev_length){V=E.strstart+E.lookahead-me,z=_t(E,E.strstart-1-E.prev_match,E.prev_length-me),E.lookahead-=E.prev_length-1,E.prev_length-=2;do++E.strstart<=V&&(E.ins_h=On(E,E.ins_h,E.window[E.strstart+me-1]),w=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart);while(--E.prev_length!==0);if(E.match_available=0,E.match_length=me-1,E.strstart++,z&&(ut(E,!1),E.strm.avail_out===0))return Ot}else if(E.match_available){if(z=_t(E,0,E.window[E.strstart-1]),z&&ut(E,!1),E.strstart++,E.lookahead--,E.strm.avail_out===0)return Ot}else E.match_available=1,E.strstart++,E.lookahead--}return E.match_available&&(z=_t(E,0,E.window[E.strstart-1]),E.match_available=0),E.insert=E.strstart<me-1?E.strstart:me-1,B===gn?(ut(E,!0),E.strm.avail_out===0?Sn:yn):E.last_lit&&(ut(E,!1),E.strm.avail_out===0)?Ot:wn},"deflate_slow"),wo=a((E,B)=>{let w,z,V,J;const ie=E.window;for(;;){if(E.lookahead<=He){if(An(E),E.lookahead<=He&&B===vn)return Ot;if(E.lookahead===0)break}if(E.match_length=0,E.lookahead>=me&&E.strstart>0&&(V=E.strstart-1,z=ie[V],z===ie[++V]&&z===ie[++V]&&z===ie[++V])){J=E.strstart+He;do;while(z===ie[++V]&&z===ie[++V]&&z===ie[++V]&&z===ie[++V]&&z===ie[++V]&&z===ie[++V]&&z===ie[++V]&&z===ie[++V]&&V<J);E.match_length=He-(J-V),E.match_length>E.lookahead&&(E.match_length=E.lookahead)}if(E.match_length>=me?(w=_t(E,1,E.match_length-me),E.lookahead-=E.match_length,E.strstart+=E.match_length,E.match_length=0):(w=_t(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++),w&&(ut(E,!1),E.strm.avail_out===0))return Ot}return E.insert=0,B===gn?(ut(E,!0),E.strm.avail_out===0?Sn:yn):E.last_lit&&(ut(E,!1),E.strm.avail_out===0)?Ot:wn},"deflate_rle"),Ao=a((E,B)=>{let w;for(;;){if(E.lookahead===0&&(An(E),E.lookahead===0)){if(B===vn)return Ot;break}if(E.match_length=0,w=_t(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++,w&&(ut(E,!1),E.strm.avail_out===0))return Ot}return E.insert=0,B===gn?(ut(E,!0),E.strm.avail_out===0?Sn:yn):E.last_lit&&(ut(E,!1),E.strm.avail_out===0)?Ot:wn},"deflate_huff");function Pn(E,B,w,z,V){this.good_length=E,this.max_lazy=B,this.nice_length=w,this.max_chain=z,this.func=V}a(Pn,"Config");const mi=[new Pn(0,0,0,0,xi),new Pn(4,4,8,4,Di),new Pn(4,5,16,8,Di),new Pn(4,6,32,32,Di),new Pn(4,4,16,16,Zn),new Pn(8,16,32,32,Zn),new Pn(8,16,128,128,Zn),new Pn(8,32,128,256,Zn),new Pn(32,128,258,1024,Zn),new Pn(32,258,258,4096,Zn)],sr=a(E=>{E.window_size=2*E.w_size,pn(E.head),E.max_lazy_match=mi[E.level].max_lazy,E.good_match=mi[E.level].good_length,E.nice_match=mi[E.level].nice_length,E.max_chain_length=mi[E.level].max_chain,E.strstart=0,E.block_start=0,E.lookahead=0,E.insert=0,E.match_length=E.prev_length=me-1,E.match_available=0,E.ins_h=0},"lm_init");function Po(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=it,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(ce*2),this.dyn_dtree=new Uint16Array((2*Z+1)*2),this.bl_tree=new Uint16Array((2*de+1)*2),pn(this.dyn_ltree),pn(this.dyn_dtree),pn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ve+1),this.heap=new Uint16Array(2*N+1),pn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*N+1),pn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}a(Po,"DeflateState");const Ai=a(E=>{if(!E||!E.state)return In(E,an);E.total_in=E.total_out=0,E.data_type=Et;const B=E.state;return B.pending=0,B.pending_out=0,B.wrap<0&&(B.wrap=-B.wrap),B.status=B.wrap?Be:on,E.adler=B.wrap===2?0:1,B.last_flush=vn,pt(B),un},"deflateResetKeep"),Wi=a(E=>{const B=Ai(E);return B===un&&sr(E.state),B},"deflateReset"),Vi=a((E,B)=>!E||!E.state||E.state.wrap!==2?an:(E.state.gzhead=B,un),"deflateSetHeader"),ar=a((E,B,w,z,V,J)=>{if(!E)return an;let ie=1;if(B===bi&&(B=6),z<0?(ie=0,z=-z):z>15&&(ie=2,z-=16),V<1||V>Pt||w!==it||z<8||z>15||B<0||B>9||J<0||J>Re)return In(E,an);z===8&&(z=9);const te=new Po;return E.state=te,te.strm=E,te.wrap=ie,te.gzhead=null,te.w_bits=z,te.w_size=1<<te.w_bits,te.w_mask=te.w_size-1,te.hash_bits=V+7,te.hash_size=1<<te.hash_bits,te.hash_mask=te.hash_size-1,te.hash_shift=~~((te.hash_bits+me-1)/me),te.window=new Uint8Array(te.w_size*2),te.head=new Uint16Array(te.hash_size),te.prev=new Uint16Array(te.w_size),te.lit_bufsize=1<<V+6,te.pending_buf_size=te.lit_bufsize*4,te.pending_buf=new Uint8Array(te.pending_buf_size),te.d_buf=1*te.lit_bufsize,te.l_buf=(1+2)*te.lit_bufsize,te.level=B,te.strategy=J,te.method=w,Wi(E)},"deflateInit2"),zr=a((E,B)=>ar(E,B,it,qt,Jt,Oe),"deflateInit"),Gr=a((E,B)=>{let w,z;if(!E||!E.state||B>yi||B<0)return E?In(E,an):an;const V=E.state;if(!E.output||!E.input&&E.avail_in!==0||V.status===hn&&B!==gn)return In(E,E.avail_out===0?xn:an);V.strm=E;const J=V.last_flush;if(V.last_flush=B,V.status===Be)if(V.wrap===2)E.adler=0,ze(V,31),ze(V,139),ze(V,8),V.gzhead?(ze(V,(V.gzhead.text?1:0)+(V.gzhead.hcrc?2:0)+(V.gzhead.extra?4:0)+(V.gzhead.name?8:0)+(V.gzhead.comment?16:0)),ze(V,V.gzhead.time&255),ze(V,V.gzhead.time>>8&255),ze(V,V.gzhead.time>>16&255),ze(V,V.gzhead.time>>24&255),ze(V,V.level===9?2:V.strategy>=Kn||V.level<2?4:0),ze(V,V.gzhead.os&255),V.gzhead.extra&&V.gzhead.extra.length&&(ze(V,V.gzhead.extra.length&255),ze(V,V.gzhead.extra.length>>8&255)),V.gzhead.hcrc&&(E.adler=we(E.adler,V.pending_buf,V.pending,0)),V.gzindex=0,V.status=ot):(ze(V,0),ze(V,0),ze(V,0),ze(V,0),ze(V,0),ze(V,V.level===9?2:V.strategy>=Kn||V.level<2?4:0),ze(V,pi),V.status=on);else{let ie=it+(V.w_bits-8<<4)<<8,te=-1;V.strategy>=Kn||V.level<2?te=0:V.level<6?te=1:V.level===6?te=2:te=3,ie|=te<<6,V.strstart!==0&&(ie|=$e),ie+=31-ie%31,V.status=on,Bn(V,ie),V.strstart!==0&&(Bn(V,E.adler>>>16),Bn(V,E.adler&65535)),E.adler=1}if(V.status===ot)if(V.gzhead.extra){for(w=V.pending;V.gzindex<(V.gzhead.extra.length&65535)&&!(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>w&&(E.adler=we(E.adler,V.pending_buf,V.pending-w,w)),rn(E),w=V.pending,V.pending===V.pending_buf_size));)ze(V,V.gzhead.extra[V.gzindex]&255),V.gzindex++;V.gzhead.hcrc&&V.pending>w&&(E.adler=we(E.adler,V.pending_buf,V.pending-w,w)),V.gzindex===V.gzhead.extra.length&&(V.gzindex=0,V.status=Kt)}else V.status=Kt;if(V.status===Kt)if(V.gzhead.name){w=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>w&&(E.adler=we(E.adler,V.pending_buf,V.pending-w,w)),rn(E),w=V.pending,V.pending===V.pending_buf_size)){z=1;break}V.gzindex<V.gzhead.name.length?z=V.gzhead.name.charCodeAt(V.gzindex++)&255:z=0,ze(V,z)}while(z!==0);V.gzhead.hcrc&&V.pending>w&&(E.adler=we(E.adler,V.pending_buf,V.pending-w,w)),z===0&&(V.gzindex=0,V.status=Wt)}else V.status=Wt;if(V.status===Wt)if(V.gzhead.comment){w=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>w&&(E.adler=we(E.adler,V.pending_buf,V.pending-w,w)),rn(E),w=V.pending,V.pending===V.pending_buf_size)){z=1;break}V.gzindex<V.gzhead.comment.length?z=V.gzhead.comment.charCodeAt(V.gzindex++)&255:z=0,ze(V,z)}while(z!==0);V.gzhead.hcrc&&V.pending>w&&(E.adler=we(E.adler,V.pending_buf,V.pending-w,w)),z===0&&(V.status=fn)}else V.status=fn;if(V.status===fn&&(V.gzhead.hcrc?(V.pending+2>V.pending_buf_size&&rn(E),V.pending+2<=V.pending_buf_size&&(ze(V,E.adler&255),ze(V,E.adler>>8&255),E.adler=0,V.status=on)):V.status=on),V.pending!==0){if(rn(E),E.avail_out===0)return V.last_flush=-1,un}else if(E.avail_in===0&&ci(B)<=ci(J)&&B!==gn)return In(E,xn);if(V.status===hn&&E.avail_in!==0)return In(E,xn);if(E.avail_in!==0||V.lookahead!==0||B!==vn&&V.status!==hn){let ie=V.strategy===Kn?Ao(V,B):V.strategy===Oi?wo(V,B):mi[V.level].func(V,B);if((ie===Sn||ie===yn)&&(V.status=hn),ie===Ot||ie===Sn)return E.avail_out===0&&(V.last_flush=-1),un;if(ie===wn&&(B===li?zn(V):B!==yi&&(gt(V,0,0,!1),B===Gn&&(pn(V.head),V.lookahead===0&&(V.strstart=0,V.block_start=0,V.insert=0))),rn(E),E.avail_out===0))return V.last_flush=-1,un}return B!==gn?un:V.wrap<=0?Xn:(V.wrap===2?(ze(V,E.adler&255),ze(V,E.adler>>8&255),ze(V,E.adler>>16&255),ze(V,E.adler>>24&255),ze(V,E.total_in&255),ze(V,E.total_in>>8&255),ze(V,E.total_in>>16&255),ze(V,E.total_in>>24&255)):(Bn(V,E.adler>>>16),Bn(V,E.adler&65535)),rn(E),V.wrap>0&&(V.wrap=-V.wrap),V.pending!==0?un:Xn)},"deflate$2"),Cr=a(E=>{if(!E||!E.state)return an;const B=E.state.status;return B!==Be&&B!==ot&&B!==Kt&&B!==Wt&&B!==fn&&B!==on&&B!==hn?In(E,an):(E.state=null,B===on?In(E,hi):un)},"deflateEnd"),Kr=a((E,B)=>{let w=B.length;if(!E||!E.state)return an;const z=E.state,V=z.wrap;if(V===2||V===1&&z.status!==Be||z.lookahead)return an;if(V===1&&(E.adler=ee(E.adler,B,w,0)),z.wrap=0,w>=z.w_size){V===0&&(pn(z.head),z.strstart=0,z.block_start=0,z.insert=0);let be=new Uint8Array(z.w_size);be.set(B.subarray(w-z.w_size,w),0),B=be,w=z.w_size}const J=E.avail_in,ie=E.next_in,te=E.input;for(E.avail_in=w,E.next_in=0,E.input=B,An(z);z.lookahead>=me;){let be=z.strstart,q=z.lookahead-(me-1);do z.ins_h=On(z,z.ins_h,z.window[be+me-1]),z.prev[be&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=be,be++;while(--q);z.strstart=be,z.lookahead=me-1,An(z)}return z.strstart+=z.lookahead,z.block_start=z.strstart,z.insert=z.lookahead,z.lookahead=0,z.match_length=z.prev_length=me-1,z.match_available=0,E.next_in=ie,E.input=te,E.avail_in=J,z.wrap=V,un},"deflateSetDictionary");var $r=zr,Ir=ar,Or=Wi,Mo=Ai,wr=Vi,Ar=Gr,Ro=Cr,Jr=Kr,Yr="pako deflate (from Nodeca project)",ui={deflateInit:$r,deflateInit2:Ir,deflateReset:Or,deflateResetKeep:Mo,deflateSetHeader:wr,deflate:Ar,deflateEnd:Ro,deflateSetDictionary:Jr,deflateInfo:Yr};const Xr=a((E,B)=>Object.prototype.hasOwnProperty.call(E,B),"_has");var ko=a(function(E){const B=Array.prototype.slice.call(arguments,1);for(;B.length;){const w=B.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(const z in w)Xr(w,z)&&(E[z]=w[z])}}return E},"assign"),Qr=a(E=>{let B=0;for(let z=0,V=E.length;z<V;z++)B+=E[z].length;const w=new Uint8Array(B);for(let z=0,V=0,J=E.length;z<J;z++){let ie=E[z];w.set(ie,V),V+=ie.length}return w},"flattenChunks"),_i={assign:ko,flattenChunks:Qr};let dr=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{dr=!1}const Pi=new Uint8Array(256);for(let E=0;E<256;E++)Pi[E]=E>=252?6:E>=248?5:E>=240?4:E>=224?3:E>=192?2:1;Pi[254]=Pi[254]=1;var lr=a(E=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(E);let B,w,z,V,J,ie=E.length,te=0;for(V=0;V<ie;V++)w=E.charCodeAt(V),(w&64512)===55296&&V+1<ie&&(z=E.charCodeAt(V+1),(z&64512)===56320&&(w=65536+(w-55296<<10)+(z-56320),V++)),te+=w<128?1:w<2048?2:w<65536?3:4;for(B=new Uint8Array(te),J=0,V=0;J<te;V++)w=E.charCodeAt(V),(w&64512)===55296&&V+1<ie&&(z=E.charCodeAt(V+1),(z&64512)===56320&&(w=65536+(w-55296<<10)+(z-56320),V++)),w<128?B[J++]=w:w<2048?(B[J++]=192|w>>>6,B[J++]=128|w&63):w<65536?(B[J++]=224|w>>>12,B[J++]=128|w>>>6&63,B[J++]=128|w&63):(B[J++]=240|w>>>18,B[J++]=128|w>>>12&63,B[J++]=128|w>>>6&63,B[J++]=128|w&63);return B},"string2buf");const Do=a((E,B)=>{if(B<65534&&E.subarray&&dr)return String.fromCharCode.apply(null,E.length===B?E:E.subarray(0,B));let w="";for(let z=0;z<B;z++)w+=String.fromCharCode(E[z]);return w},"buf2binstring");var Zr=a((E,B)=>{const w=B||E.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(E.subarray(0,B));let z,V;const J=new Array(w*2);for(V=0,z=0;z<w;){let ie=E[z++];if(ie<128){J[V++]=ie;continue}let te=Pi[ie];if(te>4){J[V++]=65533,z+=te-1;continue}for(ie&=te===2?31:te===3?15:7;te>1&&z<w;)ie=ie<<6|E[z++]&63,te--;if(te>1){J[V++]=65533;continue}ie<65536?J[V++]=ie:(ie-=65536,J[V++]=55296|ie>>10&1023,J[V++]=56320|ie&1023)}return Do(J,V)},"buf2string"),qr=a((E,B)=>{B=B||E.length,B>E.length&&(B=E.length);let w=B-1;for(;w>=0&&(E[w]&192)===128;)w--;return w<0||w===0?B:w+Pi[E[w]]>B?w:B},"utf8border"),Ti={string2buf:lr,buf2string:Zr,utf8border:qr};function Pr(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}a(Pr,"ZStream");var cr=Pr;const Mi=Object.prototype.toString,{Z_NO_FLUSH:zi,Z_SYNC_FLUSH:ur,Z_FULL_FLUSH:eo,Z_FINISH:_o,Z_OK:Ri,Z_STREAM_END:Mr,Z_DEFAULT_COMPRESSION:ki,Z_DEFAULT_STRATEGY:to,Z_DEFLATED:Lo}=De;function Ci(E){this.options=_i.assign({level:ki,method:Lo,chunkSize:16384,windowBits:15,memLevel:8,strategy:to},E||{});let B=this.options;B.raw&&B.windowBits>0?B.windowBits=-B.windowBits:B.gzip&&B.windowBits>0&&B.windowBits<16&&(B.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cr,this.strm.avail_out=0;let w=ui.deflateInit2(this.strm,B.level,B.method,B.windowBits,B.memLevel,B.strategy);if(w!==Ri)throw new Error(Ce[w]);if(B.header&&ui.deflateSetHeader(this.strm,B.header),B.dictionary){let z;if(typeof B.dictionary=="string"?z=Ti.string2buf(B.dictionary):Mi.call(B.dictionary)==="[object ArrayBuffer]"?z=new Uint8Array(B.dictionary):z=B.dictionary,w=ui.deflateSetDictionary(this.strm,z),w!==Ri)throw new Error(Ce[w]);this._dict_set=!0}}a(Ci,"Deflate$1"),Ci.prototype.push=function(E,B){const w=this.strm,z=this.options.chunkSize;let V,J;if(this.ended)return!1;for(B===~~B?J=B:J=B===!0?_o:zi,typeof E=="string"?w.input=Ti.string2buf(E):Mi.call(E)==="[object ArrayBuffer]"?w.input=new Uint8Array(E):w.input=E,w.next_in=0,w.avail_in=w.input.length;;){if(w.avail_out===0&&(w.output=new Uint8Array(z),w.next_out=0,w.avail_out=z),(J===ur||J===eo)&&w.avail_out<=6){this.onData(w.output.subarray(0,w.next_out)),w.avail_out=0;continue}if(V=ui.deflate(w,J),V===Mr)return w.next_out>0&&this.onData(w.output.subarray(0,w.next_out)),V=ui.deflateEnd(this.strm),this.onEnd(V),this.ended=!0,V===Ri;if(w.avail_out===0){this.onData(w.output);continue}if(J>0&&w.next_out>0){this.onData(w.output.subarray(0,w.next_out)),w.avail_out=0;continue}if(w.avail_in===0)break}return!0},Ci.prototype.onData=function(E){this.chunks.push(E)},Ci.prototype.onEnd=function(E){E===Ri&&(this.result=_i.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg};function Hi(E,B){const w=new Ci(B);if(w.push(E,!0),w.err)throw w.msg||Ce[w.err];return w.result}a(Hi,"deflate$1");function fr(E,B){return B=B||{},B.raw=!0,Hi(E,B)}a(fr,"deflateRaw$1");function no(E,B){return B=B||{},B.gzip=!0,Hi(E,B)}a(no,"gzip$1");var No=Ci,Bo=Hi,Rr=fr,io=no,ro=De,kr={Deflate:No,deflate:Bo,deflateRaw:Rr,gzip:io,constants:ro};const Li=30,oo=12;var Gi=a(function(B,w){let z,V,J,ie,te,be,q,se,at,ye,ue,_e,zt,st,Ge,vt,tt,Se,dt,ge,Le,Ee,Tt,Ke;const Je=B.state;z=B.next_in,Tt=B.input,V=z+(B.avail_in-5),J=B.next_out,Ke=B.output,ie=J-(w-B.avail_out),te=J+(B.avail_out-257),be=Je.dmax,q=Je.wsize,se=Je.whave,at=Je.wnext,ye=Je.window,ue=Je.hold,_e=Je.bits,zt=Je.lencode,st=Je.distcode,Ge=(1<<Je.lenbits)-1,vt=(1<<Je.distbits)-1;e:do{_e<15&&(ue+=Tt[z++]<<_e,_e+=8,ue+=Tt[z++]<<_e,_e+=8),tt=zt[ue&Ge];t:for(;;){if(Se=tt>>>24,ue>>>=Se,_e-=Se,Se=tt>>>16&255,Se===0)Ke[J++]=tt&65535;else if(Se&16){dt=tt&65535,Se&=15,Se&&(_e<Se&&(ue+=Tt[z++]<<_e,_e+=8),dt+=ue&(1<<Se)-1,ue>>>=Se,_e-=Se),_e<15&&(ue+=Tt[z++]<<_e,_e+=8,ue+=Tt[z++]<<_e,_e+=8),tt=st[ue&vt];n:for(;;){if(Se=tt>>>24,ue>>>=Se,_e-=Se,Se=tt>>>16&255,Se&16){if(ge=tt&65535,Se&=15,_e<Se&&(ue+=Tt[z++]<<_e,_e+=8,_e<Se&&(ue+=Tt[z++]<<_e,_e+=8)),ge+=ue&(1<<Se)-1,ge>be){B.msg="invalid distance too far back",Je.mode=Li;break e}if(ue>>>=Se,_e-=Se,Se=J-ie,ge>Se){if(Se=ge-Se,Se>se&&Je.sane){B.msg="invalid distance too far back",Je.mode=Li;break e}if(Le=0,Ee=ye,at===0){if(Le+=q-Se,Se<dt){dt-=Se;do Ke[J++]=ye[Le++];while(--Se);Le=J-ge,Ee=Ke}}else if(at<Se){if(Le+=q+at-Se,Se-=at,Se<dt){dt-=Se;do Ke[J++]=ye[Le++];while(--Se);if(Le=0,at<dt){Se=at,dt-=Se;do Ke[J++]=ye[Le++];while(--Se);Le=J-ge,Ee=Ke}}}else if(Le+=at-Se,Se<dt){dt-=Se;do Ke[J++]=ye[Le++];while(--Se);Le=J-ge,Ee=Ke}for(;dt>2;)Ke[J++]=Ee[Le++],Ke[J++]=Ee[Le++],Ke[J++]=Ee[Le++],dt-=3;dt&&(Ke[J++]=Ee[Le++],dt>1&&(Ke[J++]=Ee[Le++]))}else{Le=J-ge;do Ke[J++]=Ke[Le++],Ke[J++]=Ke[Le++],Ke[J++]=Ke[Le++],dt-=3;while(dt>2);dt&&(Ke[J++]=Ke[Le++],dt>1&&(Ke[J++]=Ke[Le++]))}}else if(Se&64){B.msg="invalid distance code",Je.mode=Li;break e}else{tt=st[(tt&65535)+(ue&(1<<Se)-1)];continue n}break}}else if(Se&64)if(Se&32){Je.mode=oo;break e}else{B.msg="invalid literal/length code",Je.mode=Li;break e}else{tt=zt[(tt&65535)+(ue&(1<<Se)-1)];continue t}break}}while(z<V&&J<te);dt=_e>>3,z-=dt,_e-=dt<<3,ue&=(1<<_e)-1,B.next_in=z,B.next_out=J,B.avail_in=z<V?5+(V-z):5-(z-V),B.avail_out=J<te?257+(te-J):257-(J-te),Je.hold=ue,Je.bits=_e},"inflate_fast");const $n=15,Ki=852,hr=592,pr=0,$i=1,Ji=2,Dr=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),so=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),_r=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ji=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var gi=a((E,B,w,z,V,J,ie,te)=>{const be=te.bits;let q=0,se=0,at=0,ye=0,ue=0,_e=0,zt=0,st=0,Ge=0,vt=0,tt,Se,dt,ge,Le,Ee=null,Tt=0,Ke;const Je=new Uint16Array($n+1),Ii=new Uint16Array($n+1);let St=null,Xs=0,mt,Ur,br;for(q=0;q<=$n;q++)Je[q]=0;for(se=0;se<z;se++)Je[B[w+se]]++;for(ue=be,ye=$n;ye>=1&&Je[ye]===0;ye--);if(ue>ye&&(ue=ye),ye===0)return V[J++]=1<<24|64<<16|0,V[J++]=1<<24|64<<16|0,te.bits=1,0;for(at=1;at<ye&&Je[at]===0;at++);for(ue<at&&(ue=at),st=1,q=1;q<=$n;q++)if(st<<=1,st-=Je[q],st<0)return-1;if(st>0&&(E===pr||ye!==1))return-1;for(Ii[1]=0,q=1;q<$n;q++)Ii[q+1]=Ii[q]+Je[q];for(se=0;se<z;se++)B[w+se]!==0&&(ie[Ii[B[w+se]]++]=se);if(E===pr?(Ee=St=ie,Ke=19):E===$i?(Ee=Dr,Tt-=257,St=so,Xs-=257,Ke=256):(Ee=_r,St=ji,Ke=-1),vt=0,se=0,q=at,Le=J,_e=ue,zt=0,dt=-1,Ge=1<<ue,ge=Ge-1,E===$i&&Ge>Ki||E===Ji&&Ge>hr)return 1;for(;;){mt=q-zt,ie[se]<Ke?(Ur=0,br=ie[se]):ie[se]>Ke?(Ur=St[Xs+ie[se]],br=Ee[Tt+ie[se]]):(Ur=32+64,br=0),tt=1<<q-zt,Se=1<<_e,at=Se;do Se-=tt,V[Le+(vt>>zt)+Se]=mt<<24|Ur<<16|br|0;while(Se!==0);for(tt=1<<q-1;vt&tt;)tt>>=1;if(tt!==0?(vt&=tt-1,vt+=tt):vt=0,se++,--Je[q]===0){if(q===ye)break;q=B[w+ie[se]]}if(q>ue&&(vt&ge)!==dt){for(zt===0&&(zt=ue),Le+=at,_e=q-zt,st=1<<_e;_e+zt<ye&&(st-=Je[_e+zt],!(st<=0));)_e++,st<<=1;if(Ge+=1<<_e,E===$i&&Ge>Ki||E===Ji&&Ge>hr)return 1;dt=vt&ge,V[dt]=ue<<24|_e<<16|Le-J|0}}return vt!==0&&(V[Le+vt]=q-zt<<24|64<<16|0),te.bits=ue,0},"inflate_table");const lo=0,Si=1,Bs=2,{Z_FINISH:ts,Z_BLOCK:xs,Z_TREES:Yi,Z_OK:vi,Z_STREAM_END:ba,Z_NEED_DICT:Fs,Z_STREAM_ERROR:kn,Z_DATA_ERROR:xo,Z_MEM_ERROR:mr,Z_BUF_ERROR:Xi,Z_DEFLATED:ii}=De,ns=1,Fo=2,is=3,co=4,Uo=5,rs=6,os=7,ss=8,Vo=9,as=10,gr=11,Jn=12,Lr=13,Sr=14,Nr=15,uo=16,ds=17,ls=18,cs=19,vr=20,Qi=21,us=22,Br=23,Ho=24,fs=25,fo=26,ho=27,jo=28,Wo=29,Lt=30,hs=31,Ea=32,Ta=852,Us=592,Vs=15,po=a(E=>(E>>>24&255)+(E>>>8&65280)+((E&65280)<<8)+((E&255)<<24),"zswap32");function Hs(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}a(Hs,"InflateState");const ps=a(E=>{if(!E||!E.state)return kn;const B=E.state;return E.total_in=E.total_out=B.total=0,E.msg="",B.wrap&&(E.adler=B.wrap&1),B.mode=ns,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new Int32Array(Ta),B.distcode=B.distdyn=new Int32Array(Us),B.sane=1,B.back=-1,vi},"inflateResetKeep"),ms=a(E=>{if(!E||!E.state)return kn;const B=E.state;return B.wsize=0,B.whave=0,B.wnext=0,ps(E)},"inflateReset"),mo=a((E,B)=>{let w;if(!E||!E.state)return kn;const z=E.state;return B<0?(w=0,B=-B):(w=(B>>4)+1,B<48&&(B&=15)),B&&(B<8||B>15)?kn:(z.window!==null&&z.wbits!==B&&(z.window=null),z.wrap=w,z.wbits=B,ms(E))},"inflateReset2"),gs=a((E,B)=>{if(!E)return kn;const w=new Hs;E.state=w,w.window=null;const z=mo(E,B);return z!==vi&&(E.state=null),z},"inflateInit2"),Ca=a(E=>gs(E,Vs),"inflateInit");let zo=!0,Zi,xr;const js=a(E=>{if(zo){Zi=new Int32Array(512),xr=new Int32Array(32);let B=0;for(;B<144;)E.lens[B++]=8;for(;B<256;)E.lens[B++]=9;for(;B<280;)E.lens[B++]=7;for(;B<288;)E.lens[B++]=8;for(gi(Si,E.lens,0,288,Zi,0,E.work,{bits:9}),B=0;B<32;)E.lens[B++]=5;gi(Bs,E.lens,0,32,xr,0,E.work,{bits:5}),zo=!1}E.lencode=Zi,E.lenbits=9,E.distcode=xr,E.distbits=5},"fixedtables"),go=a((E,B,w,z)=>{let V;const J=E.state;return J.window===null&&(J.wsize=1<<J.wbits,J.wnext=0,J.whave=0,J.window=new Uint8Array(J.wsize)),z>=J.wsize?(J.window.set(B.subarray(w-J.wsize,w),0),J.wnext=0,J.whave=J.wsize):(V=J.wsize-J.wnext,V>z&&(V=z),J.window.set(B.subarray(w-z,w-z+V),J.wnext),z-=V,z?(J.window.set(B.subarray(w-z,w),0),J.wnext=z,J.whave=J.wsize):(J.wnext+=V,J.wnext===J.wsize&&(J.wnext=0),J.whave<J.wsize&&(J.whave+=V))),0},"updatewindow"),wt=a((E,B)=>{let w,z,V,J,ie,te,be,q,se,at,ye,ue,_e,zt,st=0,Ge,vt,tt,Se,dt,ge,Le,Ee;const Tt=new Uint8Array(4);let Ke,Je;const Ii=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return kn;w=E.state,w.mode===Jn&&(w.mode=Lr),ie=E.next_out,V=E.output,be=E.avail_out,J=E.next_in,z=E.input,te=E.avail_in,q=w.hold,se=w.bits,at=te,ye=be,Ee=vi;e:for(;;)switch(w.mode){case ns:if(w.wrap===0){w.mode=Lr;break}for(;se<16;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(w.wrap&2&&q===35615){w.check=0,Tt[0]=q&255,Tt[1]=q>>>8&255,w.check=we(w.check,Tt,2,0),q=0,se=0,w.mode=Fo;break}if(w.flags=0,w.head&&(w.head.done=!1),!(w.wrap&1)||(((q&255)<<8)+(q>>8))%31){E.msg="incorrect header check",w.mode=Lt;break}if((q&15)!==ii){E.msg="unknown compression method",w.mode=Lt;break}if(q>>>=4,se-=4,Le=(q&15)+8,w.wbits===0)w.wbits=Le;else if(Le>w.wbits){E.msg="invalid window size",w.mode=Lt;break}w.dmax=1<<w.wbits,E.adler=w.check=1,w.mode=q&512?as:Jn,q=0,se=0;break;case Fo:for(;se<16;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(w.flags=q,(w.flags&255)!==ii){E.msg="unknown compression method",w.mode=Lt;break}if(w.flags&57344){E.msg="unknown header flags set",w.mode=Lt;break}w.head&&(w.head.text=q>>8&1),w.flags&512&&(Tt[0]=q&255,Tt[1]=q>>>8&255,w.check=we(w.check,Tt,2,0)),q=0,se=0,w.mode=is;case is:for(;se<32;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}w.head&&(w.head.time=q),w.flags&512&&(Tt[0]=q&255,Tt[1]=q>>>8&255,Tt[2]=q>>>16&255,Tt[3]=q>>>24&255,w.check=we(w.check,Tt,4,0)),q=0,se=0,w.mode=co;case co:for(;se<16;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}w.head&&(w.head.xflags=q&255,w.head.os=q>>8),w.flags&512&&(Tt[0]=q&255,Tt[1]=q>>>8&255,w.check=we(w.check,Tt,2,0)),q=0,se=0,w.mode=Uo;case Uo:if(w.flags&1024){for(;se<16;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}w.length=q,w.head&&(w.head.extra_len=q),w.flags&512&&(Tt[0]=q&255,Tt[1]=q>>>8&255,w.check=we(w.check,Tt,2,0)),q=0,se=0}else w.head&&(w.head.extra=null);w.mode=rs;case rs:if(w.flags&1024&&(ue=w.length,ue>te&&(ue=te),ue&&(w.head&&(Le=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Uint8Array(w.head.extra_len)),w.head.extra.set(z.subarray(J,J+ue),Le)),w.flags&512&&(w.check=we(w.check,z,ue,J)),te-=ue,J+=ue,w.length-=ue),w.length))break e;w.length=0,w.mode=os;case os:if(w.flags&2048){if(te===0)break e;ue=0;do Le=z[J+ue++],w.head&&Le&&w.length<65536&&(w.head.name+=String.fromCharCode(Le));while(Le&&ue<te);if(w.flags&512&&(w.check=we(w.check,z,ue,J)),te-=ue,J+=ue,Le)break e}else w.head&&(w.head.name=null);w.length=0,w.mode=ss;case ss:if(w.flags&4096){if(te===0)break e;ue=0;do Le=z[J+ue++],w.head&&Le&&w.length<65536&&(w.head.comment+=String.fromCharCode(Le));while(Le&&ue<te);if(w.flags&512&&(w.check=we(w.check,z,ue,J)),te-=ue,J+=ue,Le)break e}else w.head&&(w.head.comment=null);w.mode=Vo;case Vo:if(w.flags&512){for(;se<16;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(q!==(w.check&65535)){E.msg="header crc mismatch",w.mode=Lt;break}q=0,se=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),E.adler=w.check=0,w.mode=Jn;break;case as:for(;se<32;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}E.adler=w.check=po(q),q=0,se=0,w.mode=gr;case gr:if(w.havedict===0)return E.next_out=ie,E.avail_out=be,E.next_in=J,E.avail_in=te,w.hold=q,w.bits=se,Fs;E.adler=w.check=1,w.mode=Jn;case Jn:if(B===xs||B===Yi)break e;case Lr:if(w.last){q>>>=se&7,se-=se&7,w.mode=ho;break}for(;se<3;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}switch(w.last=q&1,q>>>=1,se-=1,q&3){case 0:w.mode=Sr;break;case 1:if(js(w),w.mode=vr,B===Yi){q>>>=2,se-=2;break e}break;case 2:w.mode=ds;break;case 3:E.msg="invalid block type",w.mode=Lt}q>>>=2,se-=2;break;case Sr:for(q>>>=se&7,se-=se&7;se<32;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if((q&65535)!==(q>>>16^65535)){E.msg="invalid stored block lengths",w.mode=Lt;break}if(w.length=q&65535,q=0,se=0,w.mode=Nr,B===Yi)break e;case Nr:w.mode=uo;case uo:if(ue=w.length,ue){if(ue>te&&(ue=te),ue>be&&(ue=be),ue===0)break e;V.set(z.subarray(J,J+ue),ie),te-=ue,J+=ue,be-=ue,ie+=ue,w.length-=ue;break}w.mode=Jn;break;case ds:for(;se<14;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(w.nlen=(q&31)+257,q>>>=5,se-=5,w.ndist=(q&31)+1,q>>>=5,se-=5,w.ncode=(q&15)+4,q>>>=4,se-=4,w.nlen>286||w.ndist>30){E.msg="too many length or distance symbols",w.mode=Lt;break}w.have=0,w.mode=ls;case ls:for(;w.have<w.ncode;){for(;se<3;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}w.lens[Ii[w.have++]]=q&7,q>>>=3,se-=3}for(;w.have<19;)w.lens[Ii[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,Ke={bits:w.lenbits},Ee=gi(lo,w.lens,0,19,w.lencode,0,w.work,Ke),w.lenbits=Ke.bits,Ee){E.msg="invalid code lengths set",w.mode=Lt;break}w.have=0,w.mode=cs;case cs:for(;w.have<w.nlen+w.ndist;){for(;st=w.lencode[q&(1<<w.lenbits)-1],Ge=st>>>24,vt=st>>>16&255,tt=st&65535,!(Ge<=se);){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(tt<16)q>>>=Ge,se-=Ge,w.lens[w.have++]=tt;else{if(tt===16){for(Je=Ge+2;se<Je;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(q>>>=Ge,se-=Ge,w.have===0){E.msg="invalid bit length repeat",w.mode=Lt;break}Le=w.lens[w.have-1],ue=3+(q&3),q>>>=2,se-=2}else if(tt===17){for(Je=Ge+3;se<Je;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}q>>>=Ge,se-=Ge,Le=0,ue=3+(q&7),q>>>=3,se-=3}else{for(Je=Ge+7;se<Je;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}q>>>=Ge,se-=Ge,Le=0,ue=11+(q&127),q>>>=7,se-=7}if(w.have+ue>w.nlen+w.ndist){E.msg="invalid bit length repeat",w.mode=Lt;break}for(;ue--;)w.lens[w.have++]=Le}}if(w.mode===Lt)break;if(w.lens[256]===0){E.msg="invalid code -- missing end-of-block",w.mode=Lt;break}if(w.lenbits=9,Ke={bits:w.lenbits},Ee=gi(Si,w.lens,0,w.nlen,w.lencode,0,w.work,Ke),w.lenbits=Ke.bits,Ee){E.msg="invalid literal/lengths set",w.mode=Lt;break}if(w.distbits=6,w.distcode=w.distdyn,Ke={bits:w.distbits},Ee=gi(Bs,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,Ke),w.distbits=Ke.bits,Ee){E.msg="invalid distances set",w.mode=Lt;break}if(w.mode=vr,B===Yi)break e;case vr:w.mode=Qi;case Qi:if(te>=6&&be>=258){E.next_out=ie,E.avail_out=be,E.next_in=J,E.avail_in=te,w.hold=q,w.bits=se,Gi(E,ye),ie=E.next_out,V=E.output,be=E.avail_out,J=E.next_in,z=E.input,te=E.avail_in,q=w.hold,se=w.bits,w.mode===Jn&&(w.back=-1);break}for(w.back=0;st=w.lencode[q&(1<<w.lenbits)-1],Ge=st>>>24,vt=st>>>16&255,tt=st&65535,!(Ge<=se);){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(vt&&!(vt&240)){for(Se=Ge,dt=vt,ge=tt;st=w.lencode[ge+((q&(1<<Se+dt)-1)>>Se)],Ge=st>>>24,vt=st>>>16&255,tt=st&65535,!(Se+Ge<=se);){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}q>>>=Se,se-=Se,w.back+=Se}if(q>>>=Ge,se-=Ge,w.back+=Ge,w.length=tt,vt===0){w.mode=fo;break}if(vt&32){w.back=-1,w.mode=Jn;break}if(vt&64){E.msg="invalid literal/length code",w.mode=Lt;break}w.extra=vt&15,w.mode=us;case us:if(w.extra){for(Je=w.extra;se<Je;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}w.length+=q&(1<<w.extra)-1,q>>>=w.extra,se-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=Br;case Br:for(;st=w.distcode[q&(1<<w.distbits)-1],Ge=st>>>24,vt=st>>>16&255,tt=st&65535,!(Ge<=se);){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(!(vt&240)){for(Se=Ge,dt=vt,ge=tt;st=w.distcode[ge+((q&(1<<Se+dt)-1)>>Se)],Ge=st>>>24,vt=st>>>16&255,tt=st&65535,!(Se+Ge<=se);){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}q>>>=Se,se-=Se,w.back+=Se}if(q>>>=Ge,se-=Ge,w.back+=Ge,vt&64){E.msg="invalid distance code",w.mode=Lt;break}w.offset=tt,w.extra=vt&15,w.mode=Ho;case Ho:if(w.extra){for(Je=w.extra;se<Je;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}w.offset+=q&(1<<w.extra)-1,q>>>=w.extra,se-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){E.msg="invalid distance too far back",w.mode=Lt;break}w.mode=fs;case fs:if(be===0)break e;if(ue=ye-be,w.offset>ue){if(ue=w.offset-ue,ue>w.whave&&w.sane){E.msg="invalid distance too far back",w.mode=Lt;break}ue>w.wnext?(ue-=w.wnext,_e=w.wsize-ue):_e=w.wnext-ue,ue>w.length&&(ue=w.length),zt=w.window}else zt=V,_e=ie-w.offset,ue=w.length;ue>be&&(ue=be),be-=ue,w.length-=ue;do V[ie++]=zt[_e++];while(--ue);w.length===0&&(w.mode=Qi);break;case fo:if(be===0)break e;V[ie++]=w.length,be--,w.mode=Qi;break;case ho:if(w.wrap){for(;se<32;){if(te===0)break e;te--,q|=z[J++]<<se,se+=8}if(ye-=be,E.total_out+=ye,w.total+=ye,ye&&(E.adler=w.check=w.flags?we(w.check,V,ye,ie-ye):ee(w.check,V,ye,ie-ye)),ye=be,(w.flags?q:po(q))!==w.check){E.msg="incorrect data check",w.mode=Lt;break}q=0,se=0}w.mode=jo;case jo:if(w.wrap&&w.flags){for(;se<32;){if(te===0)break e;te--,q+=z[J++]<<se,se+=8}if(q!==(w.total&4294967295)){E.msg="incorrect length check",w.mode=Lt;break}q=0,se=0}w.mode=Wo;case Wo:Ee=ba;break e;case Lt:Ee=xo;break e;case hs:return mr;case Ea:default:return kn}return E.next_out=ie,E.avail_out=be,E.next_in=J,E.avail_in=te,w.hold=q,w.bits=se,(w.wsize||ye!==E.avail_out&&w.mode<Lt&&(w.mode<ho||B!==ts))&&go(E,E.output,E.next_out,ye-E.avail_out),at-=E.avail_in,ye-=E.avail_out,E.total_in+=at,E.total_out+=ye,w.total+=ye,w.wrap&&ye&&(E.adler=w.check=w.flags?we(w.check,V,ye,E.next_out-ye):ee(w.check,V,ye,E.next_out-ye)),E.data_type=w.bits+(w.last?64:0)+(w.mode===Jn?128:0)+(w.mode===vr||w.mode===Nr?256:0),(at===0&&ye===0||B===ts)&&Ee===vi&&(Ee=Xi),Ee},"inflate$2"),ft=a(E=>{if(!E||!E.state)return kn;let B=E.state;return B.window&&(B.window=null),E.state=null,vi},"inflateEnd"),Ia=a((E,B)=>{if(!E||!E.state)return kn;const w=E.state;return w.wrap&2?(w.head=B,B.done=!1,vi):kn},"inflateGetHeader"),Fd=a((E,B)=>{const w=B.length;let z,V,J;return!E||!E.state||(z=E.state,z.wrap!==0&&z.mode!==gr)?kn:z.mode===gr&&(V=1,V=ee(V,B,w,0),V!==z.check)?xo:(J=go(E,B,w,w),J?(z.mode=hs,mr):(z.havedict=1,vi))},"inflateSetDictionary");var Ws=ms,Ln=mo,Oa=ps,Ss=Ca,Go=gs,Ud=wt,zs=ft,Gs=Ia,Ks=Fd,vs="pako inflate (from Nodeca project)",qn={inflateReset:Ws,inflateReset2:Ln,inflateResetKeep:Oa,inflateInit:Ss,inflateInit2:Go,inflate:Ud,inflateEnd:zs,inflateGetHeader:Gs,inflateSetDictionary:Ks,inflateInfo:vs};function ht(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}a(ht,"GZheader");var en=ht;const xe=Object.prototype.toString,{Z_NO_FLUSH:Vd,Z_FINISH:$s,Z_OK:qi,Z_STREAM_END:So,Z_NEED_DICT:vo,Z_STREAM_ERROR:Fr,Z_DATA_ERROR:Ko,Z_MEM_ERROR:Hd}=De;function er(E){this.options=_i.assign({chunkSize:1024*64,windowBits:15,to:""},E||{});const B=this.options;B.raw&&B.windowBits>=0&&B.windowBits<16&&(B.windowBits=-B.windowBits,B.windowBits===0&&(B.windowBits=-15)),B.windowBits>=0&&B.windowBits<16&&!(E&&E.windowBits)&&(B.windowBits+=32),B.windowBits>15&&B.windowBits<48&&(B.windowBits&15||(B.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cr,this.strm.avail_out=0;let w=qn.inflateInit2(this.strm,B.windowBits);if(w!==qi)throw new Error(Ce[w]);if(this.header=new en,qn.inflateGetHeader(this.strm,this.header),B.dictionary&&(typeof B.dictionary=="string"?B.dictionary=Ti.string2buf(B.dictionary):xe.call(B.dictionary)==="[object ArrayBuffer]"&&(B.dictionary=new Uint8Array(B.dictionary)),B.raw&&(w=qn.inflateSetDictionary(this.strm,B.dictionary),w!==qi)))throw new Error(Ce[w])}a(er,"Inflate$1"),er.prototype.push=function(E,B){const w=this.strm,z=this.options.chunkSize,V=this.options.dictionary;let J,ie,te;if(this.ended)return!1;for(B===~~B?ie=B:ie=B===!0?$s:Vd,xe.call(E)==="[object ArrayBuffer]"?w.input=new Uint8Array(E):w.input=E,w.next_in=0,w.avail_in=w.input.length;;){for(w.avail_out===0&&(w.output=new Uint8Array(z),w.next_out=0,w.avail_out=z),J=qn.inflate(w,ie),J===vo&&V&&(J=qn.inflateSetDictionary(w,V),J===qi?J=qn.inflate(w,ie):J===Ko&&(J=vo));w.avail_in>0&&J===So&&w.state.wrap>0&&E[w.next_in]!==0;)qn.inflateReset(w),J=qn.inflate(w,ie);switch(J){case Fr:case Ko:case vo:case Hd:return this.onEnd(J),this.ended=!0,!1}if(te=w.avail_out,w.next_out&&(w.avail_out===0||J===So))if(this.options.to==="string"){let be=Ti.utf8border(w.output,w.next_out),q=w.next_out-be,se=Ti.buf2string(w.output,be);w.next_out=q,w.avail_out=z-q,q&&w.output.set(w.output.subarray(be,be+q),0),this.onData(se)}else this.onData(w.output.length===w.next_out?w.output:w.output.subarray(0,w.next_out));if(!(J===qi&&te===0)){if(J===So)return J=qn.inflateEnd(this.strm),this.onEnd(J),this.ended=!0,!0;if(w.avail_in===0)break}}return!0},er.prototype.onData=function(E){this.chunks.push(E)},er.prototype.onEnd=function(E){E===qi&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=_i.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg};function $o(E,B){const w=new er(B);if(w.push(E),w.err)throw w.msg||Ce[w.err];return w.result}a($o,"inflate$1");function Js(E,B){return B=B||{},B.raw=!0,$o(E,B)}a(Js,"inflateRaw$1");var jd=er,Wd=$o,zd=Js,yo=$o,wa=De,Jo={Inflate:jd,inflate:Wd,inflateRaw:zd,ungzip:yo,constants:wa};const{Deflate:Yo,deflate:Aa,deflateRaw:ys,gzip:Gd}=kr,{Inflate:Pa,inflate:Kd,inflateRaw:Ma,ungzip:$d}=Jo;var bs=Yo,Es=Aa,Ts=ys,Ys=Gd,Fn=Pa,yr=Kd,Cs=Ma,Is=$d,Os=De,ws={Deflate:bs,deflate:Es,deflateRaw:Ts,gzip:Ys,Inflate:Fn,inflate:yr,inflateRaw:Cs,ungzip:Is,constants:Os}},mZDK:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(u){}},"NoOpTask");d.default=g},mb4i:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={ChannelNotFound:"channel_not_found",InvalidChannelId:"invalid_channel_id"},t=Object(s.a)("conversations.teamConnections generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"conversations.teamConnections",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to conversations.teamConnections
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsTeamConnectionsFetcher",description:"conversations.teamConnections generated fetcher"}},mcAb:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("Np2I")),u=g(h("5/Tg"));let m=a(class{create(){return new p.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(o){return new u.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,o)}constructor(o,i,e){this.fixedWaitMs=o,this.shortBackoffMs=i,this.longBackoffMs=e}},"FullJitterBackoffFactory");d.default=m},mgFs:function(W,d,h){"use strict";h.d(d,"b",function(){return g}),h.d(d,"a",function(){return p});var g;(function(u){u[u.ID=25]="ID",u[u.FRECENCY=0]="FRECENCY",u[u.RAW_FRECENCY=65]="RAW_FRECENCY",u[u.FRECENCY_BONUS=76]="FRECENCY_BONUS",u[u.FRECENCY_WEIGHT_HIT_VISITS=91]="FRECENCY_WEIGHT_HIT_VISITS",u[u.FRECENCY_HIT_COUNT=92]="FRECENCY_HIT_COUNT",u[u.FRECENCY_WEIGHT_ITEM_VISITS=93]="FRECENCY_WEIGHT_ITEM_VISITS",u[u.FRECENCY_ITEM_COUNT=94]="FRECENCY_ITEM_COUNT",u[u.FRECENCY_LOG_HIT_COUNT=105]="FRECENCY_LOG_HIT_COUNT",u[u.FRECENCY_LOG_HIT_COUNT_SCALED=106]="FRECENCY_LOG_HIT_COUNT_SCALED",u[u.FRECENCY_LOG_ITEM_COUNT=159]="FRECENCY_LOG_ITEM_COUNT",u[u.FRECENCY_LOG_ITEM_COUNT_SCALED=160]="FRECENCY_LOG_ITEM_COUNT_SCALED",u[u.FRECENCY_HIT_VISIT_DECAY_2H=162]="FRECENCY_HIT_VISIT_DECAY_2H",u[u.FRECENCY_HIT_VISIT_DECAY_7D=163]="FRECENCY_HIT_VISIT_DECAY_7D",u[u.FRECENCY_ITEM_VISIT_DECAY_2H=164]="FRECENCY_ITEM_VISIT_DECAY_2H",u[u.FRECENCY_ITEM_VISIT_DECAY_7D=165]="FRECENCY_ITEM_VISIT_DECAY_7D",u[u.FRECENCY_HIT_VISITS_4H=242]="FRECENCY_HIT_VISITS_4H",u[u.FRECENCY_HIT_VISITS_1D=243]="FRECENCY_HIT_VISITS_1D",u[u.FRECENCY_HIT_VISITS_3D=244]="FRECENCY_HIT_VISITS_3D",u[u.FRECENCY_HIT_VISITS_1W=245]="FRECENCY_HIT_VISITS_1W",u[u.FRECENCY_HIT_VISITS_1M=246]="FRECENCY_HIT_VISITS_1M",u[u.FRECENCY_HIT_VISITS_90D=247]="FRECENCY_HIT_VISITS_90D",u[u.FRECENCY_ITEM_VISITS_4H=248]="FRECENCY_ITEM_VISITS_4H",u[u.FRECENCY_ITEM_VISITS_1D=249]="FRECENCY_ITEM_VISITS_1D",u[u.FRECENCY_ITEM_VISITS_3D=250]="FRECENCY_ITEM_VISITS_3D",u[u.FRECENCY_ITEM_VISITS_1W=251]="FRECENCY_ITEM_VISITS_1W",u[u.FRECENCY_ITEM_VISITS_1M=252]="FRECENCY_ITEM_VISITS_1M",u[u.FRECENCY_ITEM_VISITS_90D=253]="FRECENCY_ITEM_VISITS_90D",u[u.TYPE_NAVIGATION_CHANNEL=2]="TYPE_NAVIGATION_CHANNEL",u[u.TYPE_NAVIGATION_LINK=172]="TYPE_NAVIGATION_LINK",u[u.TYPE_NAVIGATION_MPIM=4]="TYPE_NAVIGATION_MPIM",u[u.TYPE_NAVIGATION_MODAL=177]="TYPE_NAVIGATION_MODAL",u[u.TYPE_NAVIGATION_USER=5]="TYPE_NAVIGATION_USER",u[u.TYPE_QUERY=6]="TYPE_QUERY",u[u.TYPE_QUERY_HISTORY=7]="TYPE_QUERY_HISTORY",u[u.TYPE_EMOJI=178]="TYPE_EMOJI",u[u.ACTIVE_TOKEN_FILTER_IN=8]="ACTIVE_TOKEN_FILTER_IN",u[u.ACTIVE_TOKEN_FILTER_FROM=9]="ACTIVE_TOKEN_FILTER_FROM",u[u.ACTIVE_TOKEN_FILTER_TO=10]="ACTIVE_TOKEN_FILTER_TO",u[u.ACTIVE_TOKEN_FILTER_BEFORE=11]="ACTIVE_TOKEN_FILTER_BEFORE",u[u.ACTIVE_TOKEN_FILTER_DURING=12]="ACTIVE_TOKEN_FILTER_DURING",u[u.ACTIVE_TOKEN_FILTER_ON=13]="ACTIVE_TOKEN_FILTER_ON",u[u.ACTIVE_TOKEN_FILTER_AFTER=14]="ACTIVE_TOKEN_FILTER_AFTER",u[u.ACTIVE_TOKEN_FILTER_HAS=15]="ACTIVE_TOKEN_FILTER_HAS",u[u.ACTIVE_TOKEN_FILTER_IS=155]="ACTIVE_TOKEN_FILTER_IS",u[u.ACTIVE_TOKEN_FILTER_WITH=233]="ACTIVE_TOKEN_FILTER_WITH",u[u.ACTIVE_TOKEN_MEMBER=16]="ACTIVE_TOKEN_MEMBER",u[u.ACTIVE_TOKEN_STRING=17]="ACTIVE_TOKEN_STRING",u[u.ACTIVE_TOKEN_PHRASE=18]="ACTIVE_TOKEN_PHRASE",u[u.STRING_EXACT_MATCH=19]="STRING_EXACT_MATCH",u[u.STRING_EXACT_PREFIX_MATCH=20]="STRING_EXACT_PREFIX_MATCH",u[u.STRING_NORMAL_MATCH=21]="STRING_NORMAL_MATCH",u[u.STRING_NORMAL_PREFIX_MATCH=22]="STRING_NORMAL_PREFIX_MATCH",u[u.STRING_SAME_NUMBER_WORDS=23]="STRING_SAME_NUMBER_WORDS",u[u.EXCESS_STRING_LENGTH=24]="EXCESS_STRING_LENGTH",u[u.EXACT_MATCH_LOG_RESULTS=229]="EXACT_MATCH_LOG_RESULTS",u[u.FILE_SUGGESTION_SCORE=26]="FILE_SUGGESTION_SCORE",u[u.ACTIVE_TOKEN_QUERY_SUGGESTION=27]="ACTIVE_TOKEN_QUERY_SUGGESTION",u[u.QUERY_SUGGESTION_SCORE_V2=28]="QUERY_SUGGESTION_SCORE_V2",u[u.TYPE_NAVIGATION_TEAM=31]="TYPE_NAVIGATION_TEAM",u[u.TYPE_NAVIGATION_VIEW=32]="TYPE_NAVIGATION_VIEW",u[u.TYPE_USER_QUERY=33]="TYPE_USER_QUERY",u[u.NAV_EXACT_MATCH=35]="NAV_EXACT_MATCH",u[u.NAV_EXACT_PREFIX_MATCH=36]="NAV_EXACT_PREFIX_MATCH",u[u.NAV_NORMAL_MATCH=37]="NAV_NORMAL_MATCH",u[u.NAV_NORMAL_PREFIX_MATCH=75]="NAV_NORMAL_PREFIX_MATCH",u[u.CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH=38]="CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH",u[u.CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH=39]="CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH",u[u.CHANNEL_IS_ARCHIVED=40]="CHANNEL_IS_ARCHIVED",u[u.CHANNEL_IS_MEMBER=41]="CHANNEL_IS_MEMBER",u[u.CHANNEL_IS_STARRED=42]="CHANNEL_IS_STARRED",u[u.MPIM_IS_STARRED=43]="MPIM_IS_STARRED",u[u.CHANNEL_IS_UNREAD=44]="CHANNEL_IS_UNREAD",u[u.MPIM_IS_UNREAD=45]="MPIM_IS_UNREAD",u[u.CHANNEL_IS_OTHER_TEAM=46]="CHANNEL_IS_OTHER_TEAM",u[u.USER_IS_ACTIVE=47]="USER_IS_ACTIVE",u[u.USER_IS_CURRENT_USER=48]="USER_IS_CURRENT_USER",u[u.USER_DM_IS_STARRED=49]="USER_DM_IS_STARRED",u[u.USER_DM_IS_UNREAD=50]="USER_DM_IS_UNREAD",u[u.CHANNEL_PRIORITY=51]="CHANNEL_PRIORITY",u[u.CHANNEL_READ_AGE_DECAY_7D=52]="CHANNEL_READ_AGE_DECAY_7D",u[u.CHANNEL_READ_AGE_DECAY_2H=53]="CHANNEL_READ_AGE_DECAY_2H",u[u.MPIM_READ_AGE_DECAY_2H=54]="MPIM_READ_AGE_DECAY_2H",u[u.MPIM_READ_AGE_DECAY_7D=55]="MPIM_READ_AGE_DECAY_7D",u[u.USER_DM_READ_AGE_DECAY_7D=56]="USER_DM_READ_AGE_DECAY_7D",u[u.USER_DM_READ_AGE_DECAY_2H=57]="USER_DM_READ_AGE_DECAY_2H",u[u.USER_DM_READ_AGE_DECAY_7D_V2=274]="USER_DM_READ_AGE_DECAY_7D_V2",u[u.USER_DM_READ_AGE_DECAY_2H_V2=275]="USER_DM_READ_AGE_DECAY_2H_V2",u[u.QUERY_LENGTH=61]="QUERY_LENGTH",u[u.NAV_QUERY_LENGTH=62]="NAV_QUERY_LENGTH",u[u.SUGGESTION_TEXT_LENGTH=63]="SUGGESTION_TEXT_LENGTH",u[u.NAV_TEXT_LENGTH=64]="NAV_TEXT_LENGTH",u[u.MPIM_PRIORITY=66]="MPIM_PRIORITY",u[u.QUERY_RATIO_LENGTH_STRING=68]="QUERY_RATIO_LENGTH_STRING",u[u.NAV_QUERY_RATIO_LENGTH_STRING=69]="NAV_QUERY_RATIO_LENGTH_STRING",u[u.USER_QUERY_RATIO_LENGTH_STRING=70]="USER_QUERY_RATIO_LENGTH_STRING",u[u.CHANNEL_QUERY_RATIO_LENGTH_STRING=71]="CHANNEL_QUERY_RATIO_LENGTH_STRING",u[u.MPIM_QUERY_RATIO_LENGTH_STRING=72]="MPIM_QUERY_RATIO_LENGTH_STRING",u[u.FUZZY_SCORE=73]="FUZZY_SCORE",u[u.MPIM_WITH_DEACTIVATED_USER=74]="MPIM_WITH_DEACTIVATED_USER",u[u.USER_FIRST_NAME_EXACT_MATCH=81]="USER_FIRST_NAME_EXACT_MATCH",u[u.USER_FIRST_NAME_EXACT_PREFIX_MATCH=82]="USER_FIRST_NAME_EXACT_PREFIX_MATCH",u[u.USER_FIRST_NAME_NORMAL_MATCH=83]="USER_FIRST_NAME_NORMAL_MATCH",u[u.USER_FIRST_NAME_NORMAL_PREFIX_MATCH=84]="USER_FIRST_NAME_NORMAL_PREFIX_MATCH",u[u.USER_LAST_NAME_EXACT_MATCH=85]="USER_LAST_NAME_EXACT_MATCH",u[u.USER_LAST_NAME_EXACT_PREFIX_MATCH=86]="USER_LAST_NAME_EXACT_PREFIX_MATCH",u[u.USER_LAST_NAME_NORMAL_MATCH=87]="USER_LAST_NAME_NORMAL_MATCH",u[u.USER_LAST_NAME_NORMAL_PREFIX_MATCH=88]="USER_LAST_NAME_NORMAL_PREFIX_MATCH",u[u.USER_PRIORITY=89]="USER_PRIORITY",u[u.ONLY_MATCHES_PREVIOUS_NAME=90]="ONLY_MATCHES_PREVIOUS_NAME",u[u.NAV_NORMAL_MATCH_USER=95]="NAV_NORMAL_MATCH_USER",u[u.NAV_NORMAL_PREFIX_MATCH_USER=96]="NAV_NORMAL_PREFIX_MATCH_USER",u[u.NAV_NORMAL_MATCH_NO_USER=97]="NAV_NORMAL_MATCH_NO_USER",u[u.NAV_NORMAL_PREFIX_MATCH_NO_USER=98]="NAV_NORMAL_PREFIX_MATCH_NO_USER",u[u.CHANNEL_LATEST_MSG_AGE_DECAY_7D=99]="CHANNEL_LATEST_MSG_AGE_DECAY_7D",u[u.CHANNEL_LATEST_MSG_AGE_DECAY_2H=100]="CHANNEL_LATEST_MSG_AGE_DECAY_2H",u[u.MPIM_LATEST_MSG_AGE_DECAY_2H=101]="MPIM_LATEST_MSG_AGE_DECAY_2H",u[u.MPIM_LATEST_MSG_AGE_DECAY_7D=102]="MPIM_LATEST_MSG_AGE_DECAY_7D",u[u.USER_DM_LATEST_MSG_AGE_DECAY_7D=103]="USER_DM_LATEST_MSG_AGE_DECAY_7D",u[u.USER_DM_LATEST_MSG_AGE_DECAY_2H=104]="USER_DM_LATEST_MSG_AGE_DECAY_2H",u[u.USER_DM_LATEST_MSG_AGE_DECAY_7D_V2=260]="USER_DM_LATEST_MSG_AGE_DECAY_7D_V2",u[u.USER_DM_LATEST_MSG_AGE_DECAY_2H_V2=261]="USER_DM_LATEST_MSG_AGE_DECAY_2H_V2",u[u.FUZZY_SCORE_50=127]="FUZZY_SCORE_50",u[u.FUZZY_SCORE_25=128]="FUZZY_SCORE_25",u[u.FUZZY_SCORE_ALL=129]="FUZZY_SCORE_ALL",u[u.FUZZY_SCORE_SCALED_EXP=291]="FUZZY_SCORE_SCALED_EXP",u[u.FUZZY_SCORE_SCALED_FLIPPED=292]="FUZZY_SCORE_SCALED_FLIPPED",u[u.FUZZY_SCORE_SCALED_SUBTRACT=293]="FUZZY_SCORE_SCALED_SUBTRACT",u[u.HERE_KEYWORD=131]="HERE_KEYWORD",u[u.HERE_KEYWORD_EXACT_MATCH=132]="HERE_KEYWORD_EXACT_MATCH",u[u.IS_BROADCAST_KEYWORD=133]="IS_BROADCAST_KEYWORD",u[u.BROADCAST_KEYWORD_NORMAL_MATCH=134]="BROADCAST_KEYWORD_NORMAL_MATCH",u[u.MEMBER_OF_CURRENT_CHANNEL=153]="MEMBER_OF_CURRENT_CHANNEL",u[u.QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL=154]="QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL",u[u.USER_EMAIL_MATCH=170]="USER_EMAIL_MATCH",u[u.USER_EMAIL_ONLY_MATCH=171]="USER_EMAIL_ONLY_MATCH",u[u.QUERY_IS_SELF=193]="QUERY_IS_SELF",u[u.CURRENT_USER_TEXTY=194]="CURRENT_USER_TEXTY",u[u.USER_IS_EXTERNAL=234]="USER_IS_EXTERNAL",u[u.USER_SAME_TEAM=235]="USER_SAME_TEAM",u[u.USER_IS_BOT=254]="USER_IS_BOT",u[u.CHANNEL_TEAM_CTR_90DD=189]="CHANNEL_TEAM_CTR_90DD",u[u.CHANNEL_USER_CTR_30DD=190]="CHANNEL_USER_CTR_30DD",u[u.NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS=199]="NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS",u[u.HISTORY_AGE_DECAY_2H=230]="HISTORY_AGE_DECAY_2H",u[u.HISTORY_AGE_DECAY_7D=231]="HISTORY_AGE_DECAY_7D",u[u.HISTORY_POSITION=232]="HISTORY_POSITION",u[u.USER_DM_NULL=179]="USER_DM_NULL",u[u.USER_DM_EMPTY=180]="USER_DM_EMPTY",u[u.USER_DM_NOT_OPEN=181]="USER_DM_NOT_OPEN",u[u.USER_DM_OPEN=182]="USER_DM_OPEN",u[u.USER_DM_LATEST_OLDER_30D=183]="USER_DM_LATEST_OLDER_30D",u[u.USER_DM_LATEST_OLDER_90D=184]="USER_DM_LATEST_OLDER_90D",u[u.USER_DM_EMPTY_V2=257]="USER_DM_EMPTY_V2",u[u.USER_DM_LATEST_OLDER_30D_V2=258]="USER_DM_LATEST_OLDER_30D_V2",u[u.USER_DM_LATEST_OLDER_90D_V2=259]="USER_DM_LATEST_OLDER_90D_V2",u[u.USER_HAS_DMED=284]="USER_HAS_DMED",u[u.USER_DM_READ_AGE_DECAY_2H_V3=285]="USER_DM_READ_AGE_DECAY_2H_V3",u[u.USER_DM_READ_AGE_DECAY_7D_V3=286]="USER_DM_READ_AGE_DECAY_7D_V3",u[u.USER_DM_READ_OLDER_7D=287]="USER_DM_READ_OLDER_7D",u[u.USER_DM_READ_OLDER_30D=288]="USER_DM_READ_OLDER_30D",u[u.USER_DM_READ_OLDER_90D=289]="USER_DM_READ_OLDER_90D",u[u.USER_MPIM_READ_AGE_DECAY_7D=236]="USER_MPIM_READ_AGE_DECAY_7D",u[u.USER_MPIM_READ_AGE_DECAY_2H=237]="USER_MPIM_READ_AGE_DECAY_2H",u[u.USER_MPIM_LATEST_MSG_AGE_DECAY_7D=238]="USER_MPIM_LATEST_MSG_AGE_DECAY_7D",u[u.USER_MPIM_LATEST_MSG_AGE_DECAY_2H=239]="USER_MPIM_LATEST_MSG_AGE_DECAY_2H",u[u.USER_MPIM_FRECENCY_LOG_HIT_COUNT=240]="USER_MPIM_FRECENCY_LOG_HIT_COUNT",u[u.USER_MPIM_FRECENCY_LOG_ITEM_COUNT=241]="USER_MPIM_FRECENCY_LOG_ITEM_COUNT",u[u.MPIM_MEMBERS=166]="MPIM_MEMBERS",u[u.MPIM_MEMBER_NAME_MATCHES=167]="MPIM_MEMBER_NAME_MATCHES",u[u.MPIM_MEMBER_ALL_MATCHES=168]="MPIM_MEMBER_ALL_MATCHES",u[u.MPIM_MATCHER_SCORE=169]="MPIM_MATCHER_SCORE",u[u.MPIM_MATCHER_SCORE_0=173]="MPIM_MATCHER_SCORE_0",u[u.MPIM_MATCHER_SCORE_1=174]="MPIM_MATCHER_SCORE_1",u[u.MPIM_MATCHER_SCORE_2=175]="MPIM_MATCHER_SCORE_2",u[u.MPIM_MATCHER_SCORE_3=176]="MPIM_MATCHER_SCORE_3",u[u.MPIM_TEAM_CTR_90DD=187]="MPIM_TEAM_CTR_90DD",u[u.MPIM_USER_CTR_30DD=188]="MPIM_USER_CTR_30DD",u[u.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H=262]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H",u[u.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D=263]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D",u[u.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H=264]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H",u[u.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D=265]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D",u[u.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H=266]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H",u[u.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D=267]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D",u[u.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H=268]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H",u[u.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D=269]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D",u[u.MPIM_USERS_PCT_NON_EMPTY_DMS=270]="MPIM_USERS_PCT_NON_EMPTY_DMS",u[u.MPIM_USERS_PCT_NON_NULL_DMS=271]="MPIM_USERS_PCT_NON_NULL_DMS",u[u.MPIM_USERS_ALL_INTERNAL=272]="MPIM_USERS_ALL_INTERNAL",u[u.EMOJI_EXACT_MATCH=136]="EMOJI_EXACT_MATCH",u[u.EMOJI_QUERY_LENGTH_RATIO=150]="EMOJI_QUERY_LENGTH_RATIO",u[u.EMOJI_TOTAL_COMBO_BREAKS=151]="EMOJI_TOTAL_COMBO_BREAKS",u[u.EMOJI_COMBO_BREAK_0=161]="EMOJI_COMBO_BREAK_0",u[u.EMOJI_COMBO_BREAK_1=156]="EMOJI_COMBO_BREAK_1",u[u.EMOJI_COMBO_BREAK_2=157]="EMOJI_COMBO_BREAK_2",u[u.EMOJI_COMBO_BREAK_3=158]="EMOJI_COMBO_BREAK_3",u[u.EMOJI_TEAM_CTR_90DD=185]="EMOJI_TEAM_CTR_90DD",u[u.EMOJI_USER_CTR_30DD=186]="EMOJI_USER_CTR_30DD",u[u.CHANNEL_IS_FROZEN=146]="CHANNEL_IS_FROZEN",u[u.USER_DM_IS_FROZEN=147]="USER_DM_IS_FROZEN",u[u.CHANNEL_HAS_DRAFT=148]="CHANNEL_HAS_DRAFT",u[u.USER_DM_HAS_DRAFT=149]="USER_DM_HAS_DRAFT",u[u.QUERY_FRECENCY_RAW=107]="QUERY_FRECENCY_RAW",u[u.QUERY_FRECENCY_WEIGHT_HIT_VISITS=108]="QUERY_FRECENCY_WEIGHT_HIT_VISITS",u[u.QUERY_FRECENCY_HIT_COUNT=109]="QUERY_FRECENCY_HIT_COUNT",u[u.QUERY_FRECENCY_WEIGHT_ITEM_VISITS=110]="QUERY_FRECENCY_WEIGHT_ITEM_VISITS",u[u.QUERY_FRECENCY_ITEM_COUNT=111]="QUERY_FRECENCY_ITEM_COUNT",u[u.QUERY_FUZZY_SCORE=112]="QUERY_FUZZY_SCORE",u[u.QUERY_FRECENCY_BONUS=113]="QUERY_FRECENCY_BONUS",u[u.QUERY_LOG_HIT_COUNT=130]="QUERY_LOG_HIT_COUNT",u[u.QUERY_TOKEN_NORMAL_MATCH=137]="QUERY_TOKEN_NORMAL_MATCH",u[u.QUERY_TOKEN_NORMAL_PREFIX_MATCH=138]="QUERY_TOKEN_NORMAL_PREFIX_MATCH",u[u.QUERY_HISTORY_AGE_DECAY_30D=282]="QUERY_HISTORY_AGE_DECAY_30D",u[u.QUERY_HISTORY_LOG_INDEX=283]="QUERY_HISTORY_LOG_INDEX",u[u.FILTER_USER_IS_ACTIVE=114]="FILTER_USER_IS_ACTIVE",u[u.FILTER_USER_IS_CURRENT_USER=115]="FILTER_USER_IS_CURRENT_USER",u[u.FILTER_USER_DM_IS_STARRED=116]="FILTER_USER_DM_IS_STARRED",u[u.FILTER_USER_DM_IS_UNREAD=117]="FILTER_USER_DM_IS_UNREAD",u[u.FILTER_USER_DM_READ_AGE_DECAY_7D=118]="FILTER_USER_DM_READ_AGE_DECAY_7D",u[u.FILTER_USER_DM_READ_AGE_DECAY_2H=119]="FILTER_USER_DM_READ_AGE_DECAY_2H",u[u.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D=120]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D",u[u.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H=121]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H",u[u.FILTER_USER_FIRST_NAME_NORMAL_MATCH=122]="FILTER_USER_FIRST_NAME_NORMAL_MATCH",u[u.FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH=123]="FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH",u[u.FILTER_USER_LAST_NAME_NORMAL_MATCH=124]="FILTER_USER_LAST_NAME_NORMAL_MATCH",u[u.FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH=125]="FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH",u[u.FILTER_USER_PRIORITY=126]="FILTER_USER_PRIORITY",u[u.FILTER_CHANNEL_IS_ARCHIVED=139]="FILTER_CHANNEL_IS_ARCHIVED",u[u.FILTER_CHANNEL_IS_MEMBER=140]="FILTER_CHANNEL_IS_MEMBER",u[u.FILTER_CHANNEL_IS_STARRED=141]="FILTER_CHANNEL_IS_STARRED",u[u.FILTER_CHANNEL_IS_UNREAD=142]="FILTER_CHANNEL_IS_UNREAD",u[u.FILTER_CHANNEL_READ_AGE_DECAY_7D=143]="FILTER_CHANNEL_READ_AGE_DECAY_7D",u[u.FILTER_CHANNEL_READ_AGE_DECAY_2H=144]="FILTER_CHANNEL_READ_AGE_DECAY_2H",u[u.FILTER_CHANNEL_PRIORITY=145]="FILTER_CHANNEL_PRIORITY",u[u.USER_ENTITY_TYPE_CTR_30DD=191]="USER_ENTITY_TYPE_CTR_30DD",u[u.NUM_RESULTS=192]="NUM_RESULTS",u[u.TYPE_NAVIGATION_FILE=3]="TYPE_NAVIGATION_FILE",u[u.FILE_AGE_DECAY_7D=195]="FILE_AGE_DECAY_7D",u[u.FILE_AGE_DECAY_28D=196]="FILE_AGE_DECAY_28D",u[u.FILE_AGE_DECAY_90D=197]="FILE_AGE_DECAY_90D",u[u.FILE_FROM_CURRENT_USER=198]="FILE_FROM_CURRENT_USER",u[u.FILE_LOG_PRIVATE_SHARES=200]="FILE_LOG_PRIVATE_SHARES",u[u.FILE_LOG_PUBLIC_SHARES=201]="FILE_LOG_PUBLIC_SHARES",u[u.FILE_LOG_ACTIONS=202]="FILE_LOG_ACTIONS",u[u.FILE_LATEST_ACTION_AGE_DECAY_2H=203]="FILE_LATEST_ACTION_AGE_DECAY_2H",u[u.FILE_LATEST_ACTION_AGE_DECAY_7D=204]="FILE_LATEST_ACTION_AGE_DECAY_7D",u[u.FILE_LATEST_ACTION_AGE_DECAY_90D=205]="FILE_LATEST_ACTION_AGE_DECAY_90D",u[u.FILE_LATEST_SHARE_AGE_DECAY_2H=206]="FILE_LATEST_SHARE_AGE_DECAY_2H",u[u.FILE_LATEST_SHARE_AGE_DECAY_7D=207]="FILE_LATEST_SHARE_AGE_DECAY_7D",u[u.FILE_LATEST_SHARE_AGE_DECAY_90D=208]="FILE_LATEST_SHARE_AGE_DECAY_90D",u[u.FILE_CHANNEL_CTR=209]="FILE_CHANNEL_CTR",u[u.FILE_SUGGESTIONS_SEARCHER=210]="FILE_SUGGESTIONS_SEARCHER",u[u.FILE_USER_CTR=211]="FILE_USER_CTR",u[u.FILE_NAME_CONTAINS_QUERY_NORMALIZED=273]="FILE_NAME_CONTAINS_QUERY_NORMALIZED",u[u.FILE_IS_CANVAS=276]="FILE_IS_CANVAS",u[u.FILE_HAS_DMS_WITH_CREATOR=277]="FILE_HAS_DMS_WITH_CREATOR",u[u.FILE_LATEST_VIEW_BY_USER_OLDER_90D=278]="FILE_LATEST_VIEW_BY_USER_OLDER_90D",u[u.FILE_HAS_DMS_WITH_CREATOR_V2=290]="FILE_HAS_DMS_WITH_CREATOR_V2",u[u.APP_NAME_PREFIX_MATCH=215]="APP_NAME_PREFIX_MATCH",u[u.BEST_NAME_MATCH_LOG_RESULTS=218]="BEST_NAME_MATCH_LOG_RESULTS",u[u.SHORTCUT_ENTITY_TYPE_CTR=226]="SHORTCUT_ENTITY_TYPE_CTR",u[u.TYPE_SLASH_COMMAND=212]="TYPE_SLASH_COMMAND",u[u.SLASH_COMMAND_TEAM_CTR=227]="SLASH_COMMAND_TEAM_CTR",u[u.SLASH_COMMAND_USER_CTR=219]="SLASH_COMMAND_USER_CTR",u[u.TYPE_GLOBAL_ACTION=213]="TYPE_GLOBAL_ACTION",u[u.IS_INVITE_WORKSPACE=217]="IS_INVITE_WORKSPACE",u[u.GLOBAL_ACTION_TEAM_CTR=220]="GLOBAL_ACTION_TEAM_CTR",u[u.GLOBAL_ACTION_USER_CTR=221]="GLOBAL_ACTION_USER_CTR",u[u.TYPE_CHANNEL_ACTION=214]="TYPE_CHANNEL_ACTION",u[u.CHANNEL_ACTION_TEAM_CTR=222]="CHANNEL_ACTION_TEAM_CTR",u[u.CHANNEL_ACTION_USER_CTR=223]="CHANNEL_ACTION_USER_CTR",u[u.TYPE_APP_ACTION=152]="TYPE_APP_ACTION",u[u.APP_ACTION_TEAM_CTR=224]="APP_ACTION_TEAM_CTR",u[u.APP_ACTION_USER_CTR=225]="APP_ACTION_USER_CTR",u[u.OS_APP_ACTION=228]="OS_APP_ACTION",u[u.TYPE_APP=216]="TYPE_APP",u[u.TYPE_NAVIGATION_MESSAGE=255]="TYPE_NAVIGATION_MESSAGE",u[u.TYPE_WORKFLOW_TRIGGER=256]="TYPE_WORKFLOW_TRIGGER",u[u.WORKFLOW_TRIGGER_TEAM_CTR=279]="WORKFLOW_TRIGGER_TEAM_CTR",u[u.WORKFLOW_TRIGGER_USER_CTR=280]="WORKFLOW_TRIGGER_USER_CTR",u[u.HAS_CHANNEL_ASSOCIATION=281]="HAS_CHANNEL_ASSOCIATION",u[u.DEPRECATED_QUERY_SUGGESTION_SCORE=1]="DEPRECATED_QUERY_SUGGESTION_SCORE",u[u.DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL=29]="DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL",u[u.DEPRECATED_BM25_SCORE=30]="DEPRECATED_BM25_SCORE",u[u.DEPRECATED_NAV_EXCESS_STRING_LENGTH=34]="DEPRECATED_NAV_EXCESS_STRING_LENGTH",u[u.DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH=58]="DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH",u[u.DEPRECATED_USER_EXCESS_STRING_LENGTH=59]="DEPRECATED_USER_EXCESS_STRING_LENGTH",u[u.DEPRECATED_MPIM_EXCESS_STRING_LENGTH=60]="DEPRECATED_MPIM_EXCESS_STRING_LENGTH",u[u.DEPRECATED_LOG_FRECENCY=67]="DEPRECATED_LOG_FRECENCY",u[u.DEPRECATED_LOG_FRECENCY_BONUS=77]="DEPRECATED_LOG_FRECENCY_BONUS",u[u.DEPRECATED_LOG_FRECENCY_CHANNEL=78]="DEPRECATED_LOG_FRECENCY_CHANNEL",u[u.DEPRECATED_LOG_FRECENCY_USER=79]="DEPRECATED_LOG_FRECENCY_USER",u[u.DEPRECATED_LOG_FRECENCY_MPIM=80]="DEPRECATED_LOG_FRECENCY_MPIM",u[u.DEPRECATED_EMOJI_SCORE_BONUS=135]="DEPRECATED_EMOJI_SCORE_BONUS",u[u.TEST_FEATURE_1=1e3]="TEST_FEATURE_1",u[u.TEST_FEATURE_2=1001]="TEST_FEATURE_2",u[u.TEST_FEATURE_3=1002]="TEST_FEATURE_3",u[u.TEST_FEATURE_4=1003]="TEST_FEATURE_4",u[u.TEST_FEATURE_5=1004]="TEST_FEATURE_5",u[u.TEST_FEATURE_6=1005]="TEST_FEATURE_6",u[u.TEST_FEATURE_7=1006]="TEST_FEATURE_7",u[u.TEST_FEATURE_8=1007]="TEST_FEATURE_8",u[u.TEST_FEATURE_9=1008]="TEST_FEATURE_9",u[u.TEST_FEATURE_10=1009]="TEST_FEATURE_10"})(g||(g={}));var p;(function(u){u[u.NUMERICAL=1]="NUMERICAL",u[u.BINARY=2]="BINARY",u[u.TEXT=3]="TEXT"})(p||(p={}))},mjQB:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("5rM1")),m=p(h("hEYi")),s=p(h("aVV0"));let o=a(class extends s.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return g(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new u.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((n,r)=>{let c=a(class{cancel(){this.signalingClient.removeObserver(this),r(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(l){switch(l.type){case m.default.WebSocketOpen:this.signalingClient.removeObserver(this),n();break;case m.default.WebSocketFailed:this.signalingClient.removeObserver(this),r(new Error("WebSocket connection failed"));break}}constructor(l){this.signalingClient=l}},"WebSocketOpenInterceptor");const f=new c(this.context.signalingClient);this.context.signalingClient.registerObserver(f),this.taskCanceler=f})}catch(n){throw n}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");d.default=o},mlaT:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.LogLevel=void 0;var g;(function(p){p[p.DEBUG=0]="DEBUG",p[p.INFO=1]="INFO",p[p.WARN=2]="WARN",p[p.ERROR=3]="ERROR",p[p.OFF=4]="OFF"})(g=d.LogLevel||(d.LogLevel={})),d.default=g},mpmV:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.ClientMetricReportMediaType=void 0;var g;(function(p){p[p.AUDIO=0]="AUDIO",p[p.VIDEO=1]="VIDEO"})(g=d.ClientMetricReportMediaType||(d.ClientMetricReportMediaType={})),d.default=g},mv1L:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("aVV0"));let m=a(class extends u.default{cancel(){for(const o of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${o.name()}`),o.cancel()}run(){return g(this,void 0,void 0,function*(){const o=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),o.push(e.run());const i=[];for(let e=0;e<o.length;e++){try{yield o[e]}catch(t){i.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(i.length>0){const e=i.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(o,i,e){super(o),this.taskName=i,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");d.default=m},my46:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{equals(u){return this.videoWidth===u.videoWidth&&this.videoHeight===u.videoHeight&&this.videoFrameRate===u.videoFrameRate}constructor(u,m,s){this.videoWidth=u,this.videoHeight=m,this.videoFrameRate=s}},"VideoQualitySettings");d.default=g,g.VideoDisabled=new g(0,0,0),g.VideoResolutionHD=new g(1280,720,30),g.VideoResolutionFHD=new g(1920,1080,30),g.VideoResolutionUHD=new g(3840,2160,30)},nDuE:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("10yS")),m=p(h("j+uH"));let s=a(class extends m.default{run(){return g(this,void 0,void 0,function*(){const i=this.context.transceiverController;i.setPeer(this.context.peer),i.setupLocalTransceivers();const e=this.context.activeAudioInput;if(e){const n=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield i.setAudioInput(n.length?n[0]:null)}else yield i.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const n=t.getVideoTracks(),r=n.length?n[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield i.setVideoInput(r),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const c=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();i.setEncodingParameters(c)}r&&this.context.statsCollector.logVideoEvent(u.default.InputAttached,this.context.videoDeviceInformation)}else yield i.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=i.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive)})}setAudioCodecPreferences(){const i=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!i){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:n}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(n,null,4)}`);const r=n.findIndex(c=>c.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(r>=0){const c=n[r];n.splice(r,1),e?(n.unshift(c),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(n);return}this.context.logger.info("audio/red codec not supported")}constructor(i){super(i.logger),this.context=i,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");d.default=s},"nJ1/":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.VoiceFocusAudioWorkletNode=void 0;let g=a(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||a(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");d.VoiceFocusAudioWorkletNode=g},nSNv:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.VoiceFocusAudioWorkletNode=void 0;let g=a(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||a(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");d.VoiceFocusAudioWorkletNode=g},nWLk:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckCameraResolutionFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.Failed=1]="Failed",p[p.ResolutionNotSupported=2]="ResolutionNotSupported",p[p.PermissionDenied=3]="PermissionDenied"})(g=d.CheckCameraResolutionFeedback||(d.CheckCameraResolutionFeedback={})),d.default=g},nWxe:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});const p=h("hlxM"),u=h("nSNv"),m=5*1e3;let s=a(class extends u.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(i,e){this.port.postMessage({message:"module-buffer",buffer:i,key:e})}onModuleLoaded(i,e){this.port.postMessage({message:"module",module:i,key:e})}enable(){return g(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return g(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var i;return g(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(i=this.worker)===null||i===void 0||i.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(i){var e,t,n;const r=i.data;switch(r.message){case"cpu":this.cpuWarningCount++;const c=Date.now(),f=this.cpuWarningLastTriggered||c,S=Math.abs(c-f);(!this.cpuWarningLastTriggered||S>m)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,r.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=c),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(n=this.logger)===null||n===void 0||n.debug("Ignoring processor message.")}}onWorkerMessage(i){const e=i.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(i,e){super(i,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:n,fetchBehavior:r,logger:c,delegate:f}=e;this.logger=c,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=f,c&&c.debug("VoiceFocusInlineNode:",t),this.worker=n,this.worker.onmessage=this.onWorkerMessage.bind(this);const S=p.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:S,key:"model",fetchBehavior:r,path:t})}},"VoiceFocusInlineNode");d.default=s},nXJe:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"TranscriptResult");d.default=g},nYR4:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("Zkgh"));let u=a(class tf{reset(){this.optimalReceiveSet=new p.default,this.subscribedReceiveSet=new p.default,this.videoSources=void 0}updateIndex(s){this.videoIndex=s,this.optimalReceiveSet=this.calculateOptimalReceiveSet(s)}updateMetrics(s){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(s){this.videoSources=s,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(s){const o=new p.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return o;const i=s.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),n=new Map;for(const c of t)i.contain(c.streamId)&&n.set(c.attendeeId,c);let r=0;for(const c of e){const f=c.attendee.attendeeId;if(n.has(f)){const S=n.get(f);if(r+S.maxBitrateKbps<=tf.maxReceiveBitrateKbps)o.add(S.streamId),r+=S.maxBitrateKbps;else{console.warn("total bitrate "+(r+S.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return o}constructor(s){this.selfAttendeeId=s,this.reset()}},"AllHighestVideoBandwidthPolicy");d.default=u,u.maxReceiveBitrateKbps=15e3},ngjY:function(W,d,h){"use strict";var g=h("+Xah"),p=h("YXGX"),u=p.a?function(Re,Oe){return p.a.set(Re,Oe),Re}:g.a,m=u,s=h("c3gm"),o=h("IzLi");function i(Re){return function(){var Oe=arguments;switch(Oe.length){case 0:return new Re;case 1:return new Re(Oe[0]);case 2:return new Re(Oe[0],Oe[1]);case 3:return new Re(Oe[0],Oe[1],Oe[2]);case 4:return new Re(Oe[0],Oe[1],Oe[2],Oe[3]);case 5:return new Re(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4]);case 6:return new Re(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4],Oe[5]);case 7:return new Re(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4],Oe[5],Oe[6])}var Et=Object(s.a)(Re.prototype),it=Re.apply(Et,Oe);return Object(o.a)(it)?it:Et}}a(i,"createCtor");var e=i,t=h("Ju5/"),n=1;function r(Re,Oe,Et){var it=Oe&n,Pt=e(Re);function qt(){var Jt=this&&this!==t.a&&this instanceof qt?Pt:Re;return Jt.apply(it?Et:this,arguments)}return a(qt,"wrapper"),qt}a(r,"createBind");var c=r,f=h("uRGJ"),S=Math.max;function l(Re,Oe,Et,it){for(var Pt=-1,qt=Re.length,Jt=Et.length,kt=-1,nn=Oe.length,N=S(qt-Jt,0),Z=Array(nn+N),de=!it;++kt<nn;)Z[kt]=Oe[kt];for(;++Pt<Jt;)(de||Pt<qt)&&(Z[Et[Pt]]=Re[Pt]);for(;N--;)Z[kt++]=Re[Pt++];return Z}a(l,"composeArgs");var y=l,T=Math.max;function O(Re,Oe,Et,it){for(var Pt=-1,qt=Re.length,Jt=-1,kt=Et.length,nn=-1,N=Oe.length,Z=T(qt-kt,0),de=Array(Z+N),ce=!it;++Pt<Z;)de[Pt]=Re[Pt];for(var ve=Pt;++nn<N;)de[ve+nn]=Oe[nn];for(;++Jt<kt;)(ce||Pt<qt)&&(de[ve+Et[Jt]]=Re[Pt++]);return de}a(O,"composeArgsRight");var R=O;function F(Re,Oe){for(var Et=Re.length,it=0;Et--;)Re[Et]===Oe&&++it;return it}a(F,"countHolders");var U=F,_=h("Zhxc"),P=h("Ha6T"),L=Object(P.a)(m),A=L,M=/\{\n\/\* \[wrapped with (.+)\] \*/,k=/,? & /;function G(Re){var Oe=Re.match(M);return Oe?Oe[1].split(k):[]}a(G,"getWrapDetails");var K=G,H=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function X(Re,Oe){var Et=Oe.length;if(!Et)return Re;var it=Et-1;return Oe[it]=(Et>1?"& ":"")+Oe[it],Oe=Oe.join(Et>2?", ":" "),Re.replace(H,`{
/* [wrapped with `+Oe+`] */
`)}a(X,"insertWrapDetails");var oe=X,le=h("xhnO"),re=h("ILaC"),he=h("cvt+"),Pe=1,pe=2,Me=8,We=16,Ae=32,lt=64,Ne=128,Xe=256,je=512,Te=[["ary",Ne],["bind",Pe],["bindKey",pe],["curry",Me],["curryRight",We],["flip",je],["partial",Ae],["partialRight",lt],["rearg",Xe]];function At(Re,Oe){return Object(re.a)(Te,function(Et){var it="_."+Et[0];Oe&Et[1]&&!Object(he.a)(Re,it)&&Re.push(it)}),Re.sort()}a(At,"updateWrapDetails");var sn=At;function Dt(Re,Oe,Et){var it=Oe+"";return Object(le.a)(Re,oe(it,sn(K(it),Et)))}a(Dt,"setWrapToString");var tn=Dt,Yt=1,Tn=2,Xt=4,Cn=8,Dn=32,cn=64;function Mn(Re,Oe,Et,it,Pt,qt,Jt,kt,nn,N){var Z=Oe&Cn,de=Z?Jt:void 0,ce=Z?void 0:Jt,ve=Z?qt:void 0,me=Z?void 0:qt;Oe|=Z?Dn:cn,Oe&=~(Z?cn:Dn),Oe&Xt||(Oe&=~(Yt|Tn));var He=[Re,Oe,Pt,ve,de,me,ce,kt,nn,N],ke=Et.apply(void 0,He);return Object(_.a)(Re)&&A(ke,He),ke.placeholder=it,tn(ke,Re,Oe)}a(Mn,"createRecurry");var _n=Mn,nt=h("KSud"),$t=h("eAQQ"),It=h("cSlR"),Fe=Math.min;function Rt(Re,Oe){for(var Et=Re.length,it=Fe(Oe.length,Et),Pt=Object($t.a)(Re);it--;){var qt=Oe[it];Re[it]=Object(It.a)(qt,Et)?Pt[qt]:void 0}return Re}a(Rt,"reorder");var Qe=Rt,Qt=h("nzLN"),Nn=1,Zt=2,mn=8,ni=16,fi=128,di=512;function Wn(Re,Oe,Et,it,Pt,qt,Jt,kt,nn,N){var Z=Oe&fi,de=Oe&Nn,ce=Oe&Zt,ve=Oe&(mn|ni),me=Oe&di,He=ce?void 0:e(Re);function ke(){for(var $e=arguments.length,Be=Array($e),ot=$e;ot--;)Be[ot]=arguments[ot];if(ve)var Kt=Object(nt.a)(ke),Wt=U(Be,Kt);if(it&&(Be=y(Be,it,Pt,ve)),qt&&(Be=R(Be,qt,Jt,ve)),$e-=Wt,ve&&$e<N){var fn=Object(Qt.a)(Be,Kt);return _n(Re,Oe,Wn,ke.placeholder,Et,Be,fn,kt,nn,N-$e)}var on=de?Et:this,hn=ce?on[Re]:Re;return $e=Be.length,kt?Be=Qe(Be,kt):me&&$e>1&&Be.reverse(),Z&&nn<$e&&(Be.length=nn),this&&this!==t.a&&this instanceof ke&&(hn=He||e(hn)),hn.apply(on,Be)}return a(ke,"wrapper"),ke}a(Wn,"createHybrid");var Rn=Wn;function bt(Re,Oe,Et){var it=e(Re);function Pt(){for(var qt=arguments.length,Jt=Array(qt),kt=qt,nn=Object(nt.a)(Pt);kt--;)Jt[kt]=arguments[kt];var N=qt<3&&Jt[0]!==nn&&Jt[qt-1]!==nn?[]:Object(Qt.a)(Jt,nn);if(qt-=N.length,qt<Et)return _n(Re,Oe,Rn,Pt.placeholder,void 0,Jt,N,void 0,void 0,Et-qt);var Z=this&&this!==t.a&&this instanceof Pt?it:Re;return Object(f.a)(Z,this,Jt)}return a(Pt,"wrapper"),Pt}a(bt,"createCurry");var ee=bt,ae=1;function fe(Re,Oe,Et,it){var Pt=Oe&ae,qt=e(Re);function Jt(){for(var kt=-1,nn=arguments.length,N=-1,Z=it.length,de=Array(Z+nn),ce=this&&this!==t.a&&this instanceof Jt?qt:Re;++N<Z;)de[N]=it[N];for(;nn--;)de[N++]=arguments[++kt];return Object(f.a)(ce,Pt?Et:this,de)}return a(Jt,"wrapper"),Jt}a(fe,"createPartial");var Ue=fe,we=h("+j7y"),Ce="__lodash_placeholder__",De=1,pt=2,gt=4,ct=8,_t=128,zn=256,vn=Math.min;function li(Re,Oe){var Et=Re[1],it=Oe[1],Pt=Et|it,qt=Pt<(De|pt|_t),Jt=it==_t&&Et==ct||it==_t&&Et==zn&&Re[7].length<=Oe[8]||it==(_t|zn)&&Oe[7].length<=Oe[8]&&Et==ct;if(!(qt||Jt))return Re;it&De&&(Re[2]=Oe[2],Pt|=Et&De?0:gt);var kt=Oe[3];if(kt){var nn=Re[3];Re[3]=nn?y(nn,kt,Oe[4]):kt,Re[4]=nn?Object(Qt.a)(Re[3],Ce):Oe[4]}return kt=Oe[5],kt&&(nn=Re[5],Re[5]=nn?R(nn,kt,Oe[6]):kt,Re[6]=nn?Object(Qt.a)(Re[5],Ce):Oe[6]),kt=Oe[7],kt&&(Re[7]=kt),it&_t&&(Re[8]=Re[8]==null?Oe[8]:vn(Re[8],Oe[8])),Re[9]==null&&(Re[9]=Oe[9]),Re[0]=Oe[0],Re[1]=Pt,Re}a(li,"mergeData");var Gn=li,gn=h("fshX"),yi="Expected a function",un=1,Xn=2,an=8,hi=16,xn=32,bi=64,Ei=Math.max;function Kn(Re,Oe,Et,it,Pt,qt,Jt,kt){var nn=Oe&Xn;if(!nn&&typeof Re!="function")throw new TypeError(yi);var N=it?it.length:0;if(N||(Oe&=~(xn|bi),it=Pt=void 0),Jt=Jt===void 0?Jt:Ei(Object(gn.a)(Jt),0),kt=kt===void 0?kt:Object(gn.a)(kt),N-=Pt?Pt.length:0,Oe&bi){var Z=it,de=Pt;it=Pt=void 0}var ce=nn?void 0:Object(we.a)(Re),ve=[Re,Oe,Et,it,Pt,Z,de,qt,Jt,kt];if(ce&&Gn(ve,ce),Re=ve[0],Oe=ve[1],Et=ve[2],it=ve[3],Pt=ve[4],kt=ve[9]=ve[9]===void 0?nn?0:Re.length:Ei(ve[9]-N,0),!kt&&Oe&(an|hi)&&(Oe&=~(an|hi)),!Oe||Oe==un)var me=c(Re,Oe,Et);else Oe==an||Oe==hi?me=ee(Re,Oe,kt):(Oe==xn||Oe==(un|xn))&&!Pt.length?me=Ue(Re,Oe,Et,it):me=Rn.apply(void 0,ve);var He=ce?m:A;return tn(He(me,ve),Re,Oe)}a(Kn,"createWrap");var Oi=d.a=Kn},nq15:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const p=h("f2XL"),u=g(h("ldli")),m=g(h("MhWp"));let s=a(class Oo extends u.default{localStreamDescriptions(){const i=[];return this._localStreamInfos.forEach(e=>{i.push(e.clone())}),i}integrateUplinkPolicyDecision(i){let e=!0,t=0;for(let n=0;n<i.length;n++){const r=i[n].maxBitrate/1e3,c=i[n].maxFramerate;if(!e||n===this._localStreamInfos.length){e=!1;const f=new m.default;f.maxBitrateKbps=r,f.maxFrameRate=c,f.disabledByUplinkPolicy=r===0,f.rid=i[n].rid,r!==0&&(f.timeEnabled=Date.now()),this._localStreamInfos.push(f),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&r>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=r,this._localStreamInfos[t].maxFrameRate=c,this._localStreamInfos[t].disabledByUplinkPolicy=r===0,this._localStreamInfos[t].disabledByUplinkPolicy===!0&&(this._localStreamInfos[t].disabledByWebRTC=!1),t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(i){super.integrateBitratesFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const n of i.bitrates)e.add(n.sourceStreamId),this.streamIdToBitrateKbpsMap.set(n.sourceStreamId,this.convertBpsToKbps(n.avgBitrateBps));for(const n of t)e.has(n)||(this.streamIdToBitrateKbpsMap.get(n)===Oo.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(n,Oo.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(n,Oo.NOT_SENDING_STREAM_BITRATE));for(let n=0;n<this._localStreamInfos.length;n++){this._localStreamInfos[n].disabledByWebRTC=!1;const r=this._localStreamInfos[n].streamId;this._localStreamInfos[n].disabledByUplinkPolicy||(this.streamIdToBitrateKbpsMap.has(r)?this.streamIdToBitrateKbpsMap.get(r)===Oo.NOT_SENDING_STREAM_BITRATE&&this._lastBitRateMsgTime-this._localStreamInfos[n].timeEnabled>Oo.BitratesMsgFrequencyMs&&(this._localStreamInfos[n].disabledByWebRTC=!0):this._lastBitRateMsgTime-this._localStreamInfos[n].timeEnabled>Oo.BitratesMsgFrequencyMs&&(this._localStreamInfos[n].disabledByWebRTC=!0))}this._lastBitRateMsgTime=Date.now(),this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let i="";for(const e of this._localStreamInfos)i+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByWebRTC=${e.disabledByWebRTC} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>i)}integrateIndexFrame(i){super.integrateIndexFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const n of this.currentIndex.sources)n.mediaType===p.SdkStreamMediaType.VIDEO&&(e.add(n.streamId),this.streamIdToBitrateKbpsMap.has(n.streamId)||this.streamIdToBitrateKbpsMap.set(n.streamId,Oo.UNSEEN_STREAM_BITRATE));for(const n of t)e.has(n)||this.streamIdToBitrateKbpsMap.delete(n)}integrateSubscribeAckFrame(i){if(super.integrateSubscribeAckFrame(i),!i.allocations||i.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of i.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,Oo.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(i){let e=0;return this._sendRidToVideoStreamIdMap.has(i)&&(e=this._sendRidToVideoStreamIdMap.get(i)),e}constructor(i){super(i),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map,this._lastBitRateMsgTime=Date.now()}},"SimulcastVideoStreamIndex");d.default=s,s.UNSEEN_STREAM_BITRATE=-2,s.RECENTLY_INACTIVE_STREAM_BITRATE=-1,s.NOT_SENDING_STREAM_BITRATE=0,s.BitratesMsgFrequencyMs=4e3},ntEb:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.supportsZeroByteGCM=d.supportsSubtleCrypto=d.supportsSecureRandom=d.supportsWebCrypto=void 0;var g=h("4vb1"),p=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function u(i){if(m(i)&&typeof i.crypto.subtle=="object"){var e=i.crypto.subtle;return s(e)}return!1}a(u,"supportsWebCrypto"),d.supportsWebCrypto=u;function m(i){if(typeof i=="object"&&typeof i.crypto=="object"){var e=i.crypto.getRandomValues;return typeof e=="function"}return!1}a(m,"supportsSecureRandom"),d.supportsSecureRandom=m;function s(i){return i&&p.every(function(e){return typeof i[e]=="function"})}a(s,"supportsSubtleCrypto"),d.supportsSubtleCrypto=s;function o(i){return g.__awaiter(this,void 0,void 0,function(){var e,t,n;return g.__generator(this,function(r){switch(r.label){case 0:if(!s(i))return[2,!1];r.label=1;case 1:return r.trys.push([1,4,,5]),[4,i.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return e=r.sent(),[4,i.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},e,new Uint8Array(0))];case 3:return t=r.sent(),[2,t.byteLength===16];case 4:return n=r.sent(),[2,!1];case 5:return[2]}})})}a(o,"supportsZeroByteGCM"),d.supportsZeroByteGCM=o},ntxC:function(W,d,h){"use strict";var g=h("FUmc"),p=h("cSlR"),u=Array.prototype,m=u.splice;function s(o,i){for(var e=o?i.length:0,t=e-1;e--;){var n=i[e];if(e==t||n!==r){var r=n;Object(p.a)(n)?m.call(o,n,1):Object(g.a)(o,n)}}return o}a(s,"basePullAt"),d.a=s},nzLN:function(W,d,h){"use strict";var g="__lodash_placeholder__";function p(u,m){for(var s=-1,o=u.length,i=0,e=[];++s<o;){var t=u[s];(t===m||t===g)&&(u[s]=g,e[i++]=s)}return e}a(p,"replaceHolders"),d.a=p},o13v:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{add(u){return new Promise((m,s)=>{this.queue=this.queue.then(u).then(m).catch(s)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");d.default=g},o1Pf:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",InvalidTranscriptionCache:"invalid_transcription_cache",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied"},t=Object(s.a)("rooms.stopTranscription generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"rooms.stopTranscription",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to rooms.stopTranscription
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsStopTranscriptionFetcher",description:"rooms.stopTranscription generated fetcher"}},"o3U+":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.isValidRevisionID=d.isValidAssetGroup=d.resolveURL=d.addQueryParams=d.withQueryString=d.withRequestHeaders=d.fetchWithBehavior=void 0;function g(t,n,r){if(!r)return fetch(t,n);const c=u(t,r),f=p(n,r);return fetch(c,f)}a(g,"fetchWithBehavior"),d.fetchWithBehavior=g;function p(t,n){return n!=null&&n.headers?t?Object.assign(Object.assign({},t),{headers:Object.assign(Object.assign({},t.headers||{}),n.headers)}):{headers:n.headers}:t}a(p,"withRequestHeaders"),d.withRequestHeaders=p;function u(t,n){if(!(n!=null&&n.escapedQueryString))return t;const r=t.lastIndexOf("?")!==-1;return`${t}${r?"&":"?"}${n.escapedQueryString}`}a(u,"withQueryString"),d.withQueryString=u;function m(t,n){const r=Object.keys(n);if(!r.length)return t;const c=new URLSearchParams(t==null?void 0:t.escapedQueryString);for(const f of r)c.append(f,n[f]);return Object.assign(Object.assign({},t),{escapedQueryString:c.toString()})}a(m,"addQueryParams"),d.addQueryParams=m;const s={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function o(t,n){return g(t,s,n).then(r=>r.redirected?r.url:t)}a(o,"resolveURL"),d.resolveURL=o;function i(t){return!!t&&/^[-.a-zA-Z0-9]+$/.test(t)}a(i,"isValidAssetGroup"),d.isValidAssetGroup=i;function e(t){return!!t&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(t)}a(e,"isValidRevisionID"),d.isValidRevisionID=e},o4xN:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(A,M,k,G){function K(H){return H instanceof k?H:new k(function(X){X(H)})}return a(K,"adopt"),new(k||(k=Promise))(function(H,X){function oe(he){try{re(G.next(he))}catch(Pe){X(Pe)}}a(oe,"fulfilled");function le(he){try{re(G.throw(he))}catch(Pe){X(Pe)}}a(le,"rejected");function re(he){he.done?H(he.value):K(he.value).then(oe,le)}a(re,"step"),re((G=G.apply(A,M||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.getAudioInput=d.createAudioContext=d.VoiceFocus=void 0;const p=h("riVe"),u=h("XEV2"),m=h("GEtQ"),s=h("hlxM"),o=h("nWxe"),i=h("TdKi"),e=h("M9Lm"),n={useVoiceFocusAGC:!1,useBuiltInAGC:!0},r="stable-v1",c="https://static.sdkassets.chime.aws",f={processors:`${c}/processors/`,workers:`${c}/workers/`,wasm:`${c}/wasm/`,models:`${c}/wasm/`},S={latencyHint:0},l={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},y=Object.assign(Object.assign({},l),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),T=Object.assign(Object.assign({},l),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),O={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:i.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:o.default}},R=a((A,M)=>{if(A!==void 0&&!u.isValidAssetGroup(A))throw new Error(`Invalid asset group ${A}`);if(M!==void 0&&!u.isValidRevisionID(M))throw new Error(`Invalid revision ID ${M}`)},"validateAssetSpec"),F=a((A,M)=>{let k;if(M.useBuiltInAGC?k=y:k=T,!A)return{audio:k};if(!A.audio)return A;if(A.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},A),{audio:A.audio===!0?k:Object.assign(Object.assign({},A.audio),k)})},"mungeConstraints"),U=a((A,M)=>`${M.models}${p.decideModel(A)}.wasm`,"urlForModel");let _=a(class nf{static isSupported(M,k){const{fetchBehavior:G,logger:K}=k||{};if(typeof globalThis>"u")return K==null||K.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!s.supportsAudioWorklet(globalThis,K))return K==null||K.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!s.supportsWASM(globalThis,K))return K==null||K.debug("Browser does not support WASM."),Promise.resolve(!1);s.supportsWASMStreaming(globalThis,K)||K==null||K.debug("Browser does not support streaming WASM compilation.");const{assetGroup:H=r,revisionID:X,paths:oe=f}=M||{};R(H,X);const le=X?{revisionID:X}:{assetGroup:H},re=u.addQueryParams(G,le),he=Object.assign(Object.assign({},re),{paths:oe});return s.supportsVoiceFocusWorker(globalThis,he,K)}static mungeExecutionPreference(M,k){const G=M===void 0||M==="auto";if(s.isSafari(globalThis)){if(G||M==="inline")return"inline";if(!G)throw new Error(`Unsupported execution preference ${M}`)}if(M==="worker-sab"&&!s.supportsSharedArrayBuffer(globalThis,globalThis,k))throw new Error(`Unsupported execution preference ${M}`);return M||"auto"}static configure(M,k){return g(this,void 0,void 0,function*(){const{fetchBehavior:G,preResolve:K,logger:H}=k||{},{category:X="voicefocus",name:oe="default",variant:le="auto",assetGroup:re=r,revisionID:he,simd:Pe="detect",executionPreference:pe="auto",executionQuantaPreference:Me,usagePreference:We="interactivity",estimatorBudget:Ae=100,paths:lt=f,thresholds:Ne}=M||{};if(H==null||H.debug("Configuring Voice Focus with spec",M),X!==void 0&&X!=="voicefocus")throw new Error(`Unrecognized category ${X}`);if(oe!==void 0&&oe!=="default"&&oe!=="ns_es")throw new Error(`Unrecognized feature name ${oe}`);if(le!==void 0&&!["auto","c100","c50","c20","c10"].includes(le))throw new Error(`Unrecognized feature variant ${le}`);if(Me!==void 0&&![1,2,3].includes(Me))throw new Error(`Unrecognized execution quanta preference ${Me}`);if(R(re,he),Pe!==void 0&&!["detect","force","disable"].includes(Pe))throw new Error(`Unrecognized SIMD option ${Pe}`);if(pe!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(pe))throw new Error(`Unrecognized execution preference ${pe}`);if(We!==void 0&&!["quality","interactivity"].includes(We))throw new Error(`Unrecognized usage preference ${We}`);const Xe={executionPreference:this.mungeExecutionPreference(pe,H),usagePreference:We,executionQuantaPreference:Me,variantPreference:le,namePreference:oe,simdPreference:Pe,estimatorBudget:Ae},je=he?{revisionID:he}:{assetGroup:re},Te=u.addQueryParams(G,je),At=Object.assign({paths:lt},Te),sn=yield p.measureAndDecideExecutionApproach(Xe,At,H,Ne);if(sn.supported===!1)return{supported:!1,reason:sn.reason};H==null||H.info("Decided execution approach",sn);const{useSIMD:Dt,processor:tn,variant:Yt,executionQuanta:Tn}=sn,Xt={category:X||"voicefocus",name:oe||"default",variant:Yt,simd:Dt};if(K){const Cn=U(Xt,lt);Xt.url=yield u.resolveURL(Cn,Te)}return{fetchConfig:At,model:Xt,processor:tn,executionQuanta:Tn,supported:!0}})}static init(M,k){let{delegate:G,preload:K=!0,logger:H}=k;return g(this,void 0,void 0,function*(){if(M.supported===!1)throw new Error("Voice Focus not supported. Reason: "+M.reason);const{model:X,processor:oe,fetchConfig:le,executionQuanta:re}=M,{simd:he,name:Pe}=X,{paths:pe}=le;if(oe!=="voicefocus-inline-processor"&&oe!=="voicefocus-worker-postMessage-processor"&&oe!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${oe}`);const Me=X.url||U(X,pe);H==null||H.debug(`Using model URL ${Me}.`);const We=`${pe.wasm}audio_buffer-v1${he?"_simd":""}.wasm`,Ae=`${pe.wasm}resampler-v1${he?"_simd":""}.wasm`,lt=`${pe.workers}worker-v1.js`,{file:Ne,node:Xe}=O[oe],je=`${pe.processors}${Ne}`,Te=yield m.loadWorker(lt,"VoiceFocusWorker",le,H);if(K){H==null||H.debug("Preloading",Me);let tn=s.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";Te.postMessage({message:tn,preload:!0,key:"model",fetchBehavior:le,path:Me})}const sn={processor:oe,worker:Te,audioBufferURL:We,resamplerURL:Ae,fetchBehavior:le,modelURL:Me,delegate:G,logger:H,numberOfInputs:Pe==="ns_es"?2:1},Dt=new nf(Te,je,Xe,sn,re);return Promise.resolve(Dt)})}createNode(M,k){var G;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:K=M.sampleRate===16e3?16e3:48e3,enabled:H=!0,agc:X=n}=k||{},oe=k==null?void 0:k.es,le={voiceFocusSampleRate:K,enabled:H,sendBufferCount:10,prefill:6,agc:X,executionQuanta:this.executionQuanta,supportFarendStream:oe},re=u.withQueryString(this.processorURL,(G=this.nodeOptions)===null||G===void 0?void 0:G.fetchBehavior);return M.audioWorklet.addModule(re).then(()=>new this.nodeConstructor(M,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:le})))}applyToStream(M,k,G){return g(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const K=k.createMediaStreamSource(M),H=yield this.applyToSourceNode(K,k,G),X=k.createMediaStreamDestination();return H.connect(X),{node:H,source:K,destination:X,stream:X.stream}})}applyToSourceNode(M,k,G){return g(this,void 0,void 0,function*(){const K=yield this.createNode(k,G);return M.connect(K),K})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(M,k,G,K,H){this.processorURL=k,this.nodeConstructor=G,this.nodeOptions=K,this.executionQuanta=H,this.internal={worker:M,nodeOptions:K,isDestroyed:!1}}},"VoiceFocus");d.VoiceFocus=_;const P=a(function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S;return new(window.AudioContext||window.webkitAudioContext)(A)},"createAudioContext");d.createAudioContext=P;const L=a((A,M,k)=>g(void 0,void 0,void 0,function*(){var G,K;const{constraints:H,spec:X,delegate:oe,preload:le=!0,options:re}=M,{logger:he}=k,Pe=yield _.configure(X,k);if(!Pe.supported)return(G=k.logger)===null||G===void 0||G.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(H);const pe=yield _.init(Pe,{delegate:oe,preload:le,logger:he}),Me=((K=M.options)===null||K===void 0?void 0:K.agc)||n,We=yield window.navigator.mediaDevices.getUserMedia(F(H,Me));return pe.applyToStream(We,A,re).then(Ae=>Ae.stream)}),"getAudioInput");d.getAudioInput=L},o5nl:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("cKqT")),u=g(h("HCbE"));let m=a(class{create(){return new p.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(o){return new u.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,o)}constructor(o,i,e){this.fixedWaitMs=o,this.shortBackoffMs=i,this.longBackoffMs=e}},"FullJitterBackoffFactory");d.default=m},oHvd:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(u){this.currentData=u}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const u=this.health();return u!==this.currentHealth?(this.currentHealth=u,u):null}constructor(u,m,s){this.minHealth=u.minHealth,this.maxHealth=u.maxHealth,this.currentHealth=u.initialHealth,this.currentData=m.clone(),this.name=s}},"BaseConnectionHealthPolicy");d.default=g},oJqn:function(W,d,h){"use strict";h.d(d,"a",function(){return i});var g=h("VDtp"),p=h.n(g);const u=g.Reader,m=g.Writer,s=g.util,o=g.roots.default||(g.roots.default={}),i=o.slack=(()=>{const e={};return e.calls=function(){const t={};return t.analytics=function(){const n={};return n.RecvMedia=function(){function r(f){if(f)for(let S=Object.keys(f),l=0;l<S.length;++l)f[S[l]]!=null&&(this[S[l]]=f[S[l]])}a(r,"RecvMedia"),r.prototype.peerId=s.Long?s.Long.fromBits(0,0,!0):0,r.prototype.bytesReceived=s.Long?s.Long.fromBits(0,0,!0):0,r.prototype.packetsReceived=s.Long?s.Long.fromBits(0,0,!0):0,r.prototype.fractionLost=0,r.prototype.jitter=0,r.prototype.packetsLost=s.Long?s.Long.fromBits(0,0,!0):0,r.prototype.codec=0,r.prototype.userId="",r.prototype.peerIdString="",r.prototype.audioStats=null,r.prototype.videoStats=null;let c;return Object.defineProperty(r.prototype,"mediaType",{get:s.oneOfGetter(c=["audioStats","videoStats"]),set:s.oneOfSetter(c)}),r.create=a(function(S){return new r(S)},"create"),r.encode=a(function(S,l){return l||(l=m.create()),S.peerId!=null&&Object.hasOwnProperty.call(S,"peerId")&&l.uint32(8).uint64(S.peerId),S.bytesReceived!=null&&Object.hasOwnProperty.call(S,"bytesReceived")&&l.uint32(16).uint64(S.bytesReceived),S.packetsReceived!=null&&Object.hasOwnProperty.call(S,"packetsReceived")&&l.uint32(24).uint64(S.packetsReceived),S.fractionLost!=null&&Object.hasOwnProperty.call(S,"fractionLost")&&l.uint32(33).double(S.fractionLost),S.jitter!=null&&Object.hasOwnProperty.call(S,"jitter")&&l.uint32(41).double(S.jitter),S.packetsLost!=null&&Object.hasOwnProperty.call(S,"packetsLost")&&l.uint32(48).uint64(S.packetsLost),S.codec!=null&&Object.hasOwnProperty.call(S,"codec")&&l.uint32(56).int32(S.codec),S.audioStats!=null&&Object.hasOwnProperty.call(S,"audioStats")&&o.slack.calls.analytics.RecvMedia.Audio.encode(S.audioStats,l.uint32(66).fork()).ldelim(),S.videoStats!=null&&Object.hasOwnProperty.call(S,"videoStats")&&o.slack.calls.analytics.RecvMedia.Video.encode(S.videoStats,l.uint32(74).fork()).ldelim(),S.userId!=null&&Object.hasOwnProperty.call(S,"userId")&&l.uint32(82).string(S.userId),S.peerIdString!=null&&Object.hasOwnProperty.call(S,"peerIdString")&&l.uint32(90).string(S.peerIdString),l},"encode"),r.encodeDelimited=a(function(S,l){return this.encode(S,l).ldelim()},"encodeDelimited"),r.decode=a(function(S,l){S instanceof u||(S=u.create(S));let y=l===void 0?S.len:S.pos+l,T=new o.slack.calls.analytics.RecvMedia;for(;S.pos<y;){let O=S.uint32();switch(O>>>3){case 1:{T.peerId=S.uint64();break}case 2:{T.bytesReceived=S.uint64();break}case 3:{T.packetsReceived=S.uint64();break}case 4:{T.fractionLost=S.double();break}case 5:{T.jitter=S.double();break}case 6:{T.packetsLost=S.uint64();break}case 7:{T.codec=S.int32();break}case 10:{T.userId=S.string();break}case 11:{T.peerIdString=S.string();break}case 8:{T.audioStats=o.slack.calls.analytics.RecvMedia.Audio.decode(S,S.uint32());break}case 9:{T.videoStats=o.slack.calls.analytics.RecvMedia.Video.decode(S,S.uint32());break}default:S.skipType(O&7);break}}return T},"decode"),r.decodeDelimited=a(function(S){return S instanceof u||(S=new u(S)),this.decode(S,S.uint32())},"decodeDelimited"),r.verify=a(function(S){if(typeof S!="object"||S===null)return"object expected";let l={};if(S.peerId!=null&&S.hasOwnProperty("peerId")&&!s.isInteger(S.peerId)&&!(S.peerId&&s.isInteger(S.peerId.low)&&s.isInteger(S.peerId.high)))return"peerId: integer|Long expected";if(S.bytesReceived!=null&&S.hasOwnProperty("bytesReceived")&&!s.isInteger(S.bytesReceived)&&!(S.bytesReceived&&s.isInteger(S.bytesReceived.low)&&s.isInteger(S.bytesReceived.high)))return"bytesReceived: integer|Long expected";if(S.packetsReceived!=null&&S.hasOwnProperty("packetsReceived")&&!s.isInteger(S.packetsReceived)&&!(S.packetsReceived&&s.isInteger(S.packetsReceived.low)&&s.isInteger(S.packetsReceived.high)))return"packetsReceived: integer|Long expected";if(S.fractionLost!=null&&S.hasOwnProperty("fractionLost")&&typeof S.fractionLost!="number")return"fractionLost: number expected";if(S.jitter!=null&&S.hasOwnProperty("jitter")&&typeof S.jitter!="number")return"jitter: number expected";if(S.packetsLost!=null&&S.hasOwnProperty("packetsLost")&&!s.isInteger(S.packetsLost)&&!(S.packetsLost&&s.isInteger(S.packetsLost.low)&&s.isInteger(S.packetsLost.high)))return"packetsLost: integer|Long expected";if(S.codec!=null&&S.hasOwnProperty("codec"))switch(S.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(S.userId!=null&&S.hasOwnProperty("userId")&&!s.isString(S.userId))return"userId: string expected";if(S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&!s.isString(S.peerIdString))return"peerIdString: string expected";if(S.audioStats!=null&&S.hasOwnProperty("audioStats")){l.mediaType=1;{let y=o.slack.calls.analytics.RecvMedia.Audio.verify(S.audioStats);if(y)return"audioStats."+y}}if(S.videoStats!=null&&S.hasOwnProperty("videoStats")){if(l.mediaType===1)return"mediaType: multiple values";l.mediaType=1;{let y=o.slack.calls.analytics.RecvMedia.Video.verify(S.videoStats);if(y)return"videoStats."+y}}return null},"verify"),r.fromObject=a(function(S){if(S instanceof o.slack.calls.analytics.RecvMedia)return S;let l=new o.slack.calls.analytics.RecvMedia;switch(S.peerId!=null&&(s.Long?(l.peerId=s.Long.fromValue(S.peerId)).unsigned=!0:typeof S.peerId=="string"?l.peerId=parseInt(S.peerId,10):typeof S.peerId=="number"?l.peerId=S.peerId:typeof S.peerId=="object"&&(l.peerId=new s.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0))),S.bytesReceived!=null&&(s.Long?(l.bytesReceived=s.Long.fromValue(S.bytesReceived)).unsigned=!0:typeof S.bytesReceived=="string"?l.bytesReceived=parseInt(S.bytesReceived,10):typeof S.bytesReceived=="number"?l.bytesReceived=S.bytesReceived:typeof S.bytesReceived=="object"&&(l.bytesReceived=new s.LongBits(S.bytesReceived.low>>>0,S.bytesReceived.high>>>0).toNumber(!0))),S.packetsReceived!=null&&(s.Long?(l.packetsReceived=s.Long.fromValue(S.packetsReceived)).unsigned=!0:typeof S.packetsReceived=="string"?l.packetsReceived=parseInt(S.packetsReceived,10):typeof S.packetsReceived=="number"?l.packetsReceived=S.packetsReceived:typeof S.packetsReceived=="object"&&(l.packetsReceived=new s.LongBits(S.packetsReceived.low>>>0,S.packetsReceived.high>>>0).toNumber(!0))),S.fractionLost!=null&&(l.fractionLost=Number(S.fractionLost)),S.jitter!=null&&(l.jitter=Number(S.jitter)),S.packetsLost!=null&&(s.Long?(l.packetsLost=s.Long.fromValue(S.packetsLost)).unsigned=!0:typeof S.packetsLost=="string"?l.packetsLost=parseInt(S.packetsLost,10):typeof S.packetsLost=="number"?l.packetsLost=S.packetsLost:typeof S.packetsLost=="object"&&(l.packetsLost=new s.LongBits(S.packetsLost.low>>>0,S.packetsLost.high>>>0).toNumber(!0))),S.codec){default:if(typeof S.codec=="number"){l.codec=S.codec;break}break;case"UNKNOWN":case 0:l.codec=0;break;case"OPUS":case 1:l.codec=1;break;case"VP8":case 2:l.codec=2;break;case"VP9":case 3:l.codec=3;break;case"H264":case 4:l.codec=4;break}if(S.userId!=null&&(l.userId=String(S.userId)),S.peerIdString!=null&&(l.peerIdString=String(S.peerIdString)),S.audioStats!=null){if(typeof S.audioStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.audioStats: object expected");l.audioStats=o.slack.calls.analytics.RecvMedia.Audio.fromObject(S.audioStats)}if(S.videoStats!=null){if(typeof S.videoStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.videoStats: object expected");l.videoStats=o.slack.calls.analytics.RecvMedia.Video.fromObject(S.videoStats)}return l},"fromObject"),r.toObject=a(function(S,l){l||(l={});let y={};if(l.defaults){if(s.Long){let T=new s.Long(0,0,!0);y.peerId=l.longs===String?T.toString():l.longs===Number?T.toNumber():T}else y.peerId=l.longs===String?"0":0;if(s.Long){let T=new s.Long(0,0,!0);y.bytesReceived=l.longs===String?T.toString():l.longs===Number?T.toNumber():T}else y.bytesReceived=l.longs===String?"0":0;if(s.Long){let T=new s.Long(0,0,!0);y.packetsReceived=l.longs===String?T.toString():l.longs===Number?T.toNumber():T}else y.packetsReceived=l.longs===String?"0":0;if(y.fractionLost=0,y.jitter=0,s.Long){let T=new s.Long(0,0,!0);y.packetsLost=l.longs===String?T.toString():l.longs===Number?T.toNumber():T}else y.packetsLost=l.longs===String?"0":0;y.codec=l.enums===String?"UNKNOWN":0,y.userId="",y.peerIdString=""}return S.peerId!=null&&S.hasOwnProperty("peerId")&&(typeof S.peerId=="number"?y.peerId=l.longs===String?String(S.peerId):S.peerId:y.peerId=l.longs===String?s.Long.prototype.toString.call(S.peerId):l.longs===Number?new s.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0):S.peerId),S.bytesReceived!=null&&S.hasOwnProperty("bytesReceived")&&(typeof S.bytesReceived=="number"?y.bytesReceived=l.longs===String?String(S.bytesReceived):S.bytesReceived:y.bytesReceived=l.longs===String?s.Long.prototype.toString.call(S.bytesReceived):l.longs===Number?new s.LongBits(S.bytesReceived.low>>>0,S.bytesReceived.high>>>0).toNumber(!0):S.bytesReceived),S.packetsReceived!=null&&S.hasOwnProperty("packetsReceived")&&(typeof S.packetsReceived=="number"?y.packetsReceived=l.longs===String?String(S.packetsReceived):S.packetsReceived:y.packetsReceived=l.longs===String?s.Long.prototype.toString.call(S.packetsReceived):l.longs===Number?new s.LongBits(S.packetsReceived.low>>>0,S.packetsReceived.high>>>0).toNumber(!0):S.packetsReceived),S.fractionLost!=null&&S.hasOwnProperty("fractionLost")&&(y.fractionLost=l.json&&!isFinite(S.fractionLost)?String(S.fractionLost):S.fractionLost),S.jitter!=null&&S.hasOwnProperty("jitter")&&(y.jitter=l.json&&!isFinite(S.jitter)?String(S.jitter):S.jitter),S.packetsLost!=null&&S.hasOwnProperty("packetsLost")&&(typeof S.packetsLost=="number"?y.packetsLost=l.longs===String?String(S.packetsLost):S.packetsLost:y.packetsLost=l.longs===String?s.Long.prototype.toString.call(S.packetsLost):l.longs===Number?new s.LongBits(S.packetsLost.low>>>0,S.packetsLost.high>>>0).toNumber(!0):S.packetsLost),S.codec!=null&&S.hasOwnProperty("codec")&&(y.codec=l.enums===String?o.slack.calls.analytics.Codec[S.codec]===void 0?S.codec:o.slack.calls.analytics.Codec[S.codec]:S.codec),S.audioStats!=null&&S.hasOwnProperty("audioStats")&&(y.audioStats=o.slack.calls.analytics.RecvMedia.Audio.toObject(S.audioStats,l),l.oneofs&&(y.mediaType="audioStats")),S.videoStats!=null&&S.hasOwnProperty("videoStats")&&(y.videoStats=o.slack.calls.analytics.RecvMedia.Video.toObject(S.videoStats,l),l.oneofs&&(y.mediaType="videoStats")),S.userId!=null&&S.hasOwnProperty("userId")&&(y.userId=S.userId),S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&(y.peerIdString=S.peerIdString),y},"toObject"),r.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),r.getTypeUrl=a(function(S){return S===void 0&&(S="type.googleapis.com"),S+"/slack.calls.analytics.RecvMedia"},"getTypeUrl"),r.Audio=function(){function f(S){if(S)for(let l=Object.keys(S),y=0;y<l.length;++y)S[l[y]]!=null&&(this[l[y]]=S[l[y]])}return a(f,"Audio"),f.prototype.audioLevel=0,f.prototype.jitterBufferDelay=0,f.prototype.concealmentEvents=s.Long?s.Long.fromBits(0,0,!0):0,f.prototype.concealedSamples=s.Long?s.Long.fromBits(0,0,!0):0,f.create=a(function(l){return new f(l)},"create"),f.encode=a(function(l,y){return y||(y=m.create()),l.audioLevel!=null&&Object.hasOwnProperty.call(l,"audioLevel")&&y.uint32(9).double(l.audioLevel),l.jitterBufferDelay!=null&&Object.hasOwnProperty.call(l,"jitterBufferDelay")&&y.uint32(17).double(l.jitterBufferDelay),l.concealmentEvents!=null&&Object.hasOwnProperty.call(l,"concealmentEvents")&&y.uint32(24).uint64(l.concealmentEvents),l.concealedSamples!=null&&Object.hasOwnProperty.call(l,"concealedSamples")&&y.uint32(32).uint64(l.concealedSamples),y},"encode"),f.encodeDelimited=a(function(l,y){return this.encode(l,y).ldelim()},"encodeDelimited"),f.decode=a(function(l,y){l instanceof u||(l=u.create(l));let T=y===void 0?l.len:l.pos+y,O=new o.slack.calls.analytics.RecvMedia.Audio;for(;l.pos<T;){let R=l.uint32();switch(R>>>3){case 1:{O.audioLevel=l.double();break}case 2:{O.jitterBufferDelay=l.double();break}case 3:{O.concealmentEvents=l.uint64();break}case 4:{O.concealedSamples=l.uint64();break}default:l.skipType(R&7);break}}return O},"decode"),f.decodeDelimited=a(function(l){return l instanceof u||(l=new u(l)),this.decode(l,l.uint32())},"decodeDelimited"),f.verify=a(function(l){return typeof l!="object"||l===null?"object expected":l.audioLevel!=null&&l.hasOwnProperty("audioLevel")&&typeof l.audioLevel!="number"?"audioLevel: number expected":l.jitterBufferDelay!=null&&l.hasOwnProperty("jitterBufferDelay")&&typeof l.jitterBufferDelay!="number"?"jitterBufferDelay: number expected":l.concealmentEvents!=null&&l.hasOwnProperty("concealmentEvents")&&!s.isInteger(l.concealmentEvents)&&!(l.concealmentEvents&&s.isInteger(l.concealmentEvents.low)&&s.isInteger(l.concealmentEvents.high))?"concealmentEvents: integer|Long expected":l.concealedSamples!=null&&l.hasOwnProperty("concealedSamples")&&!s.isInteger(l.concealedSamples)&&!(l.concealedSamples&&s.isInteger(l.concealedSamples.low)&&s.isInteger(l.concealedSamples.high))?"concealedSamples: integer|Long expected":null},"verify"),f.fromObject=a(function(l){if(l instanceof o.slack.calls.analytics.RecvMedia.Audio)return l;let y=new o.slack.calls.analytics.RecvMedia.Audio;return l.audioLevel!=null&&(y.audioLevel=Number(l.audioLevel)),l.jitterBufferDelay!=null&&(y.jitterBufferDelay=Number(l.jitterBufferDelay)),l.concealmentEvents!=null&&(s.Long?(y.concealmentEvents=s.Long.fromValue(l.concealmentEvents)).unsigned=!0:typeof l.concealmentEvents=="string"?y.concealmentEvents=parseInt(l.concealmentEvents,10):typeof l.concealmentEvents=="number"?y.concealmentEvents=l.concealmentEvents:typeof l.concealmentEvents=="object"&&(y.concealmentEvents=new s.LongBits(l.concealmentEvents.low>>>0,l.concealmentEvents.high>>>0).toNumber(!0))),l.concealedSamples!=null&&(s.Long?(y.concealedSamples=s.Long.fromValue(l.concealedSamples)).unsigned=!0:typeof l.concealedSamples=="string"?y.concealedSamples=parseInt(l.concealedSamples,10):typeof l.concealedSamples=="number"?y.concealedSamples=l.concealedSamples:typeof l.concealedSamples=="object"&&(y.concealedSamples=new s.LongBits(l.concealedSamples.low>>>0,l.concealedSamples.high>>>0).toNumber(!0))),y},"fromObject"),f.toObject=a(function(l,y){y||(y={});let T={};if(y.defaults){if(T.audioLevel=0,T.jitterBufferDelay=0,s.Long){let O=new s.Long(0,0,!0);T.concealmentEvents=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.concealmentEvents=y.longs===String?"0":0;if(s.Long){let O=new s.Long(0,0,!0);T.concealedSamples=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.concealedSamples=y.longs===String?"0":0}return l.audioLevel!=null&&l.hasOwnProperty("audioLevel")&&(T.audioLevel=y.json&&!isFinite(l.audioLevel)?String(l.audioLevel):l.audioLevel),l.jitterBufferDelay!=null&&l.hasOwnProperty("jitterBufferDelay")&&(T.jitterBufferDelay=y.json&&!isFinite(l.jitterBufferDelay)?String(l.jitterBufferDelay):l.jitterBufferDelay),l.concealmentEvents!=null&&l.hasOwnProperty("concealmentEvents")&&(typeof l.concealmentEvents=="number"?T.concealmentEvents=y.longs===String?String(l.concealmentEvents):l.concealmentEvents:T.concealmentEvents=y.longs===String?s.Long.prototype.toString.call(l.concealmentEvents):y.longs===Number?new s.LongBits(l.concealmentEvents.low>>>0,l.concealmentEvents.high>>>0).toNumber(!0):l.concealmentEvents),l.concealedSamples!=null&&l.hasOwnProperty("concealedSamples")&&(typeof l.concealedSamples=="number"?T.concealedSamples=y.longs===String?String(l.concealedSamples):l.concealedSamples:T.concealedSamples=y.longs===String?s.Long.prototype.toString.call(l.concealedSamples):y.longs===Number?new s.LongBits(l.concealedSamples.low>>>0,l.concealedSamples.high>>>0).toNumber(!0):l.concealedSamples),T},"toObject"),f.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),f.getTypeUrl=a(function(l){return l===void 0&&(l="type.googleapis.com"),l+"/slack.calls.analytics.RecvMedia.Audio"},"getTypeUrl"),f}(),r.Video=function(){function f(S){if(S)for(let l=Object.keys(S),y=0;y<l.length;++y)S[l[y]]!=null&&(this[l[y]]=S[l[y]])}return a(f,"Video"),f.prototype.firCount=s.Long?s.Long.fromBits(0,0,!0):0,f.prototype.nackCount=s.Long?s.Long.fromBits(0,0,!0):0,f.prototype.pliCount=s.Long?s.Long.fromBits(0,0,!0):0,f.prototype.sliCount=s.Long?s.Long.fromBits(0,0,!0):0,f.prototype.frameHeight=s.Long?s.Long.fromBits(0,0,!0):0,f.prototype.frameWidth=s.Long?s.Long.fromBits(0,0,!0):0,f.prototype.framesPerSecond=0,f.prototype.framesCorrupted=s.Long?s.Long.fromBits(0,0,!0):0,f.prototype.framesDecoded=s.Long?s.Long.fromBits(0,0,!0):0,f.prototype.framesDropped=s.Long?s.Long.fromBits(0,0,!0):0,f.prototype.framesReceived=s.Long?s.Long.fromBits(0,0,!0):0,f.create=a(function(l){return new f(l)},"create"),f.encode=a(function(l,y){return y||(y=m.create()),l.firCount!=null&&Object.hasOwnProperty.call(l,"firCount")&&y.uint32(8).uint64(l.firCount),l.nackCount!=null&&Object.hasOwnProperty.call(l,"nackCount")&&y.uint32(16).uint64(l.nackCount),l.pliCount!=null&&Object.hasOwnProperty.call(l,"pliCount")&&y.uint32(24).uint64(l.pliCount),l.sliCount!=null&&Object.hasOwnProperty.call(l,"sliCount")&&y.uint32(32).uint64(l.sliCount),l.frameHeight!=null&&Object.hasOwnProperty.call(l,"frameHeight")&&y.uint32(40).uint64(l.frameHeight),l.frameWidth!=null&&Object.hasOwnProperty.call(l,"frameWidth")&&y.uint32(48).uint64(l.frameWidth),l.framesPerSecond!=null&&Object.hasOwnProperty.call(l,"framesPerSecond")&&y.uint32(57).double(l.framesPerSecond),l.framesCorrupted!=null&&Object.hasOwnProperty.call(l,"framesCorrupted")&&y.uint32(64).uint64(l.framesCorrupted),l.framesDecoded!=null&&Object.hasOwnProperty.call(l,"framesDecoded")&&y.uint32(72).uint64(l.framesDecoded),l.framesDropped!=null&&Object.hasOwnProperty.call(l,"framesDropped")&&y.uint32(80).uint64(l.framesDropped),l.framesReceived!=null&&Object.hasOwnProperty.call(l,"framesReceived")&&y.uint32(88).uint64(l.framesReceived),y},"encode"),f.encodeDelimited=a(function(l,y){return this.encode(l,y).ldelim()},"encodeDelimited"),f.decode=a(function(l,y){l instanceof u||(l=u.create(l));let T=y===void 0?l.len:l.pos+y,O=new o.slack.calls.analytics.RecvMedia.Video;for(;l.pos<T;){let R=l.uint32();switch(R>>>3){case 1:{O.firCount=l.uint64();break}case 2:{O.nackCount=l.uint64();break}case 3:{O.pliCount=l.uint64();break}case 4:{O.sliCount=l.uint64();break}case 5:{O.frameHeight=l.uint64();break}case 6:{O.frameWidth=l.uint64();break}case 7:{O.framesPerSecond=l.double();break}case 8:{O.framesCorrupted=l.uint64();break}case 9:{O.framesDecoded=l.uint64();break}case 10:{O.framesDropped=l.uint64();break}case 11:{O.framesReceived=l.uint64();break}default:l.skipType(R&7);break}}return O},"decode"),f.decodeDelimited=a(function(l){return l instanceof u||(l=new u(l)),this.decode(l,l.uint32())},"decodeDelimited"),f.verify=a(function(l){return typeof l!="object"||l===null?"object expected":l.firCount!=null&&l.hasOwnProperty("firCount")&&!s.isInteger(l.firCount)&&!(l.firCount&&s.isInteger(l.firCount.low)&&s.isInteger(l.firCount.high))?"firCount: integer|Long expected":l.nackCount!=null&&l.hasOwnProperty("nackCount")&&!s.isInteger(l.nackCount)&&!(l.nackCount&&s.isInteger(l.nackCount.low)&&s.isInteger(l.nackCount.high))?"nackCount: integer|Long expected":l.pliCount!=null&&l.hasOwnProperty("pliCount")&&!s.isInteger(l.pliCount)&&!(l.pliCount&&s.isInteger(l.pliCount.low)&&s.isInteger(l.pliCount.high))?"pliCount: integer|Long expected":l.sliCount!=null&&l.hasOwnProperty("sliCount")&&!s.isInteger(l.sliCount)&&!(l.sliCount&&s.isInteger(l.sliCount.low)&&s.isInteger(l.sliCount.high))?"sliCount: integer|Long expected":l.frameHeight!=null&&l.hasOwnProperty("frameHeight")&&!s.isInteger(l.frameHeight)&&!(l.frameHeight&&s.isInteger(l.frameHeight.low)&&s.isInteger(l.frameHeight.high))?"frameHeight: integer|Long expected":l.frameWidth!=null&&l.hasOwnProperty("frameWidth")&&!s.isInteger(l.frameWidth)&&!(l.frameWidth&&s.isInteger(l.frameWidth.low)&&s.isInteger(l.frameWidth.high))?"frameWidth: integer|Long expected":l.framesPerSecond!=null&&l.hasOwnProperty("framesPerSecond")&&typeof l.framesPerSecond!="number"?"framesPerSecond: number expected":l.framesCorrupted!=null&&l.hasOwnProperty("framesCorrupted")&&!s.isInteger(l.framesCorrupted)&&!(l.framesCorrupted&&s.isInteger(l.framesCorrupted.low)&&s.isInteger(l.framesCorrupted.high))?"framesCorrupted: integer|Long expected":l.framesDecoded!=null&&l.hasOwnProperty("framesDecoded")&&!s.isInteger(l.framesDecoded)&&!(l.framesDecoded&&s.isInteger(l.framesDecoded.low)&&s.isInteger(l.framesDecoded.high))?"framesDecoded: integer|Long expected":l.framesDropped!=null&&l.hasOwnProperty("framesDropped")&&!s.isInteger(l.framesDropped)&&!(l.framesDropped&&s.isInteger(l.framesDropped.low)&&s.isInteger(l.framesDropped.high))?"framesDropped: integer|Long expected":l.framesReceived!=null&&l.hasOwnProperty("framesReceived")&&!s.isInteger(l.framesReceived)&&!(l.framesReceived&&s.isInteger(l.framesReceived.low)&&s.isInteger(l.framesReceived.high))?"framesReceived: integer|Long expected":null},"verify"),f.fromObject=a(function(l){if(l instanceof o.slack.calls.analytics.RecvMedia.Video)return l;let y=new o.slack.calls.analytics.RecvMedia.Video;return l.firCount!=null&&(s.Long?(y.firCount=s.Long.fromValue(l.firCount)).unsigned=!0:typeof l.firCount=="string"?y.firCount=parseInt(l.firCount,10):typeof l.firCount=="number"?y.firCount=l.firCount:typeof l.firCount=="object"&&(y.firCount=new s.LongBits(l.firCount.low>>>0,l.firCount.high>>>0).toNumber(!0))),l.nackCount!=null&&(s.Long?(y.nackCount=s.Long.fromValue(l.nackCount)).unsigned=!0:typeof l.nackCount=="string"?y.nackCount=parseInt(l.nackCount,10):typeof l.nackCount=="number"?y.nackCount=l.nackCount:typeof l.nackCount=="object"&&(y.nackCount=new s.LongBits(l.nackCount.low>>>0,l.nackCount.high>>>0).toNumber(!0))),l.pliCount!=null&&(s.Long?(y.pliCount=s.Long.fromValue(l.pliCount)).unsigned=!0:typeof l.pliCount=="string"?y.pliCount=parseInt(l.pliCount,10):typeof l.pliCount=="number"?y.pliCount=l.pliCount:typeof l.pliCount=="object"&&(y.pliCount=new s.LongBits(l.pliCount.low>>>0,l.pliCount.high>>>0).toNumber(!0))),l.sliCount!=null&&(s.Long?(y.sliCount=s.Long.fromValue(l.sliCount)).unsigned=!0:typeof l.sliCount=="string"?y.sliCount=parseInt(l.sliCount,10):typeof l.sliCount=="number"?y.sliCount=l.sliCount:typeof l.sliCount=="object"&&(y.sliCount=new s.LongBits(l.sliCount.low>>>0,l.sliCount.high>>>0).toNumber(!0))),l.frameHeight!=null&&(s.Long?(y.frameHeight=s.Long.fromValue(l.frameHeight)).unsigned=!0:typeof l.frameHeight=="string"?y.frameHeight=parseInt(l.frameHeight,10):typeof l.frameHeight=="number"?y.frameHeight=l.frameHeight:typeof l.frameHeight=="object"&&(y.frameHeight=new s.LongBits(l.frameHeight.low>>>0,l.frameHeight.high>>>0).toNumber(!0))),l.frameWidth!=null&&(s.Long?(y.frameWidth=s.Long.fromValue(l.frameWidth)).unsigned=!0:typeof l.frameWidth=="string"?y.frameWidth=parseInt(l.frameWidth,10):typeof l.frameWidth=="number"?y.frameWidth=l.frameWidth:typeof l.frameWidth=="object"&&(y.frameWidth=new s.LongBits(l.frameWidth.low>>>0,l.frameWidth.high>>>0).toNumber(!0))),l.framesPerSecond!=null&&(y.framesPerSecond=Number(l.framesPerSecond)),l.framesCorrupted!=null&&(s.Long?(y.framesCorrupted=s.Long.fromValue(l.framesCorrupted)).unsigned=!0:typeof l.framesCorrupted=="string"?y.framesCorrupted=parseInt(l.framesCorrupted,10):typeof l.framesCorrupted=="number"?y.framesCorrupted=l.framesCorrupted:typeof l.framesCorrupted=="object"&&(y.framesCorrupted=new s.LongBits(l.framesCorrupted.low>>>0,l.framesCorrupted.high>>>0).toNumber(!0))),l.framesDecoded!=null&&(s.Long?(y.framesDecoded=s.Long.fromValue(l.framesDecoded)).unsigned=!0:typeof l.framesDecoded=="string"?y.framesDecoded=parseInt(l.framesDecoded,10):typeof l.framesDecoded=="number"?y.framesDecoded=l.framesDecoded:typeof l.framesDecoded=="object"&&(y.framesDecoded=new s.LongBits(l.framesDecoded.low>>>0,l.framesDecoded.high>>>0).toNumber(!0))),l.framesDropped!=null&&(s.Long?(y.framesDropped=s.Long.fromValue(l.framesDropped)).unsigned=!0:typeof l.framesDropped=="string"?y.framesDropped=parseInt(l.framesDropped,10):typeof l.framesDropped=="number"?y.framesDropped=l.framesDropped:typeof l.framesDropped=="object"&&(y.framesDropped=new s.LongBits(l.framesDropped.low>>>0,l.framesDropped.high>>>0).toNumber(!0))),l.framesReceived!=null&&(s.Long?(y.framesReceived=s.Long.fromValue(l.framesReceived)).unsigned=!0:typeof l.framesReceived=="string"?y.framesReceived=parseInt(l.framesReceived,10):typeof l.framesReceived=="number"?y.framesReceived=l.framesReceived:typeof l.framesReceived=="object"&&(y.framesReceived=new s.LongBits(l.framesReceived.low>>>0,l.framesReceived.high>>>0).toNumber(!0))),y},"fromObject"),f.toObject=a(function(l,y){y||(y={});let T={};if(y.defaults){if(s.Long){let O=new s.Long(0,0,!0);T.firCount=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.firCount=y.longs===String?"0":0;if(s.Long){let O=new s.Long(0,0,!0);T.nackCount=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.nackCount=y.longs===String?"0":0;if(s.Long){let O=new s.Long(0,0,!0);T.pliCount=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.pliCount=y.longs===String?"0":0;if(s.Long){let O=new s.Long(0,0,!0);T.sliCount=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.sliCount=y.longs===String?"0":0;if(s.Long){let O=new s.Long(0,0,!0);T.frameHeight=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.frameHeight=y.longs===String?"0":0;if(s.Long){let O=new s.Long(0,0,!0);T.frameWidth=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.frameWidth=y.longs===String?"0":0;if(T.framesPerSecond=0,s.Long){let O=new s.Long(0,0,!0);T.framesCorrupted=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.framesCorrupted=y.longs===String?"0":0;if(s.Long){let O=new s.Long(0,0,!0);T.framesDecoded=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.framesDecoded=y.longs===String?"0":0;if(s.Long){let O=new s.Long(0,0,!0);T.framesDropped=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.framesDropped=y.longs===String?"0":0;if(s.Long){let O=new s.Long(0,0,!0);T.framesReceived=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.framesReceived=y.longs===String?"0":0}return l.firCount!=null&&l.hasOwnProperty("firCount")&&(typeof l.firCount=="number"?T.firCount=y.longs===String?String(l.firCount):l.firCount:T.firCount=y.longs===String?s.Long.prototype.toString.call(l.firCount):y.longs===Number?new s.LongBits(l.firCount.low>>>0,l.firCount.high>>>0).toNumber(!0):l.firCount),l.nackCount!=null&&l.hasOwnProperty("nackCount")&&(typeof l.nackCount=="number"?T.nackCount=y.longs===String?String(l.nackCount):l.nackCount:T.nackCount=y.longs===String?s.Long.prototype.toString.call(l.nackCount):y.longs===Number?new s.LongBits(l.nackCount.low>>>0,l.nackCount.high>>>0).toNumber(!0):l.nackCount),l.pliCount!=null&&l.hasOwnProperty("pliCount")&&(typeof l.pliCount=="number"?T.pliCount=y.longs===String?String(l.pliCount):l.pliCount:T.pliCount=y.longs===String?s.Long.prototype.toString.call(l.pliCount):y.longs===Number?new s.LongBits(l.pliCount.low>>>0,l.pliCount.high>>>0).toNumber(!0):l.pliCount),l.sliCount!=null&&l.hasOwnProperty("sliCount")&&(typeof l.sliCount=="number"?T.sliCount=y.longs===String?String(l.sliCount):l.sliCount:T.sliCount=y.longs===String?s.Long.prototype.toString.call(l.sliCount):y.longs===Number?new s.LongBits(l.sliCount.low>>>0,l.sliCount.high>>>0).toNumber(!0):l.sliCount),l.frameHeight!=null&&l.hasOwnProperty("frameHeight")&&(typeof l.frameHeight=="number"?T.frameHeight=y.longs===String?String(l.frameHeight):l.frameHeight:T.frameHeight=y.longs===String?s.Long.prototype.toString.call(l.frameHeight):y.longs===Number?new s.LongBits(l.frameHeight.low>>>0,l.frameHeight.high>>>0).toNumber(!0):l.frameHeight),l.frameWidth!=null&&l.hasOwnProperty("frameWidth")&&(typeof l.frameWidth=="number"?T.frameWidth=y.longs===String?String(l.frameWidth):l.frameWidth:T.frameWidth=y.longs===String?s.Long.prototype.toString.call(l.frameWidth):y.longs===Number?new s.LongBits(l.frameWidth.low>>>0,l.frameWidth.high>>>0).toNumber(!0):l.frameWidth),l.framesPerSecond!=null&&l.hasOwnProperty("framesPerSecond")&&(T.framesPerSecond=y.json&&!isFinite(l.framesPerSecond)?String(l.framesPerSecond):l.framesPerSecond),l.framesCorrupted!=null&&l.hasOwnProperty("framesCorrupted")&&(typeof l.framesCorrupted=="number"?T.framesCorrupted=y.longs===String?String(l.framesCorrupted):l.framesCorrupted:T.framesCorrupted=y.longs===String?s.Long.prototype.toString.call(l.framesCorrupted):y.longs===Number?new s.LongBits(l.framesCorrupted.low>>>0,l.framesCorrupted.high>>>0).toNumber(!0):l.framesCorrupted),l.framesDecoded!=null&&l.hasOwnProperty("framesDecoded")&&(typeof l.framesDecoded=="number"?T.framesDecoded=y.longs===String?String(l.framesDecoded):l.framesDecoded:T.framesDecoded=y.longs===String?s.Long.prototype.toString.call(l.framesDecoded):y.longs===Number?new s.LongBits(l.framesDecoded.low>>>0,l.framesDecoded.high>>>0).toNumber(!0):l.framesDecoded),l.framesDropped!=null&&l.hasOwnProperty("framesDropped")&&(typeof l.framesDropped=="number"?T.framesDropped=y.longs===String?String(l.framesDropped):l.framesDropped:T.framesDropped=y.longs===String?s.Long.prototype.toString.call(l.framesDropped):y.longs===Number?new s.LongBits(l.framesDropped.low>>>0,l.framesDropped.high>>>0).toNumber(!0):l.framesDropped),l.framesReceived!=null&&l.hasOwnProperty("framesReceived")&&(typeof l.framesReceived=="number"?T.framesReceived=y.longs===String?String(l.framesReceived):l.framesReceived:T.framesReceived=y.longs===String?s.Long.prototype.toString.call(l.framesReceived):y.longs===Number?new s.LongBits(l.framesReceived.low>>>0,l.framesReceived.high>>>0).toNumber(!0):l.framesReceived),T},"toObject"),f.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),f.getTypeUrl=a(function(l){return l===void 0&&(l="type.googleapis.com"),l+"/slack.calls.analytics.RecvMedia.Video"},"getTypeUrl"),f}(),r}(),n.SendMedia=function(){function r(f){if(f)for(let S=Object.keys(f),l=0;l<S.length;++l)f[S[l]]!=null&&(this[S[l]]=f[S[l]])}a(r,"SendMedia"),r.prototype.peerId=s.Long?s.Long.fromBits(0,0,!0):0,r.prototype.bytesSent=s.Long?s.Long.fromBits(0,0,!0):0,r.prototype.packetsSent=s.Long?s.Long.fromBits(0,0,!0):0,r.prototype.codec=0,r.prototype.peerIdString="",r.prototype.audioStats=null,r.prototype.videoStats=null;let c;return Object.defineProperty(r.prototype,"mediaType",{get:s.oneOfGetter(c=["audioStats","videoStats"]),set:s.oneOfSetter(c)}),r.create=a(function(S){return new r(S)},"create"),r.encode=a(function(S,l){return l||(l=m.create()),S.peerId!=null&&Object.hasOwnProperty.call(S,"peerId")&&l.uint32(8).uint64(S.peerId),S.bytesSent!=null&&Object.hasOwnProperty.call(S,"bytesSent")&&l.uint32(16).uint64(S.bytesSent),S.packetsSent!=null&&Object.hasOwnProperty.call(S,"packetsSent")&&l.uint32(24).uint64(S.packetsSent),S.codec!=null&&Object.hasOwnProperty.call(S,"codec")&&l.uint32(32).int32(S.codec),S.audioStats!=null&&Object.hasOwnProperty.call(S,"audioStats")&&o.slack.calls.analytics.SendMedia.Audio.encode(S.audioStats,l.uint32(42).fork()).ldelim(),S.videoStats!=null&&Object.hasOwnProperty.call(S,"videoStats")&&o.slack.calls.analytics.SendMedia.Video.encode(S.videoStats,l.uint32(50).fork()).ldelim(),S.peerIdString!=null&&Object.hasOwnProperty.call(S,"peerIdString")&&l.uint32(58).string(S.peerIdString),l},"encode"),r.encodeDelimited=a(function(S,l){return this.encode(S,l).ldelim()},"encodeDelimited"),r.decode=a(function(S,l){S instanceof u||(S=u.create(S));let y=l===void 0?S.len:S.pos+l,T=new o.slack.calls.analytics.SendMedia;for(;S.pos<y;){let O=S.uint32();switch(O>>>3){case 1:{T.peerId=S.uint64();break}case 2:{T.bytesSent=S.uint64();break}case 3:{T.packetsSent=S.uint64();break}case 4:{T.codec=S.int32();break}case 7:{T.peerIdString=S.string();break}case 5:{T.audioStats=o.slack.calls.analytics.SendMedia.Audio.decode(S,S.uint32());break}case 6:{T.videoStats=o.slack.calls.analytics.SendMedia.Video.decode(S,S.uint32());break}default:S.skipType(O&7);break}}return T},"decode"),r.decodeDelimited=a(function(S){return S instanceof u||(S=new u(S)),this.decode(S,S.uint32())},"decodeDelimited"),r.verify=a(function(S){if(typeof S!="object"||S===null)return"object expected";let l={};if(S.peerId!=null&&S.hasOwnProperty("peerId")&&!s.isInteger(S.peerId)&&!(S.peerId&&s.isInteger(S.peerId.low)&&s.isInteger(S.peerId.high)))return"peerId: integer|Long expected";if(S.bytesSent!=null&&S.hasOwnProperty("bytesSent")&&!s.isInteger(S.bytesSent)&&!(S.bytesSent&&s.isInteger(S.bytesSent.low)&&s.isInteger(S.bytesSent.high)))return"bytesSent: integer|Long expected";if(S.packetsSent!=null&&S.hasOwnProperty("packetsSent")&&!s.isInteger(S.packetsSent)&&!(S.packetsSent&&s.isInteger(S.packetsSent.low)&&s.isInteger(S.packetsSent.high)))return"packetsSent: integer|Long expected";if(S.codec!=null&&S.hasOwnProperty("codec"))switch(S.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&!s.isString(S.peerIdString))return"peerIdString: string expected";if(S.audioStats!=null&&S.hasOwnProperty("audioStats")){l.mediaType=1;{let y=o.slack.calls.analytics.SendMedia.Audio.verify(S.audioStats);if(y)return"audioStats."+y}}if(S.videoStats!=null&&S.hasOwnProperty("videoStats")){if(l.mediaType===1)return"mediaType: multiple values";l.mediaType=1;{let y=o.slack.calls.analytics.SendMedia.Video.verify(S.videoStats);if(y)return"videoStats."+y}}return null},"verify"),r.fromObject=a(function(S){if(S instanceof o.slack.calls.analytics.SendMedia)return S;let l=new o.slack.calls.analytics.SendMedia;switch(S.peerId!=null&&(s.Long?(l.peerId=s.Long.fromValue(S.peerId)).unsigned=!0:typeof S.peerId=="string"?l.peerId=parseInt(S.peerId,10):typeof S.peerId=="number"?l.peerId=S.peerId:typeof S.peerId=="object"&&(l.peerId=new s.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0))),S.bytesSent!=null&&(s.Long?(l.bytesSent=s.Long.fromValue(S.bytesSent)).unsigned=!0:typeof S.bytesSent=="string"?l.bytesSent=parseInt(S.bytesSent,10):typeof S.bytesSent=="number"?l.bytesSent=S.bytesSent:typeof S.bytesSent=="object"&&(l.bytesSent=new s.LongBits(S.bytesSent.low>>>0,S.bytesSent.high>>>0).toNumber(!0))),S.packetsSent!=null&&(s.Long?(l.packetsSent=s.Long.fromValue(S.packetsSent)).unsigned=!0:typeof S.packetsSent=="string"?l.packetsSent=parseInt(S.packetsSent,10):typeof S.packetsSent=="number"?l.packetsSent=S.packetsSent:typeof S.packetsSent=="object"&&(l.packetsSent=new s.LongBits(S.packetsSent.low>>>0,S.packetsSent.high>>>0).toNumber(!0))),S.codec){default:if(typeof S.codec=="number"){l.codec=S.codec;break}break;case"UNKNOWN":case 0:l.codec=0;break;case"OPUS":case 1:l.codec=1;break;case"VP8":case 2:l.codec=2;break;case"VP9":case 3:l.codec=3;break;case"H264":case 4:l.codec=4;break}if(S.peerIdString!=null&&(l.peerIdString=String(S.peerIdString)),S.audioStats!=null){if(typeof S.audioStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.audioStats: object expected");l.audioStats=o.slack.calls.analytics.SendMedia.Audio.fromObject(S.audioStats)}if(S.videoStats!=null){if(typeof S.videoStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.videoStats: object expected");l.videoStats=o.slack.calls.analytics.SendMedia.Video.fromObject(S.videoStats)}return l},"fromObject"),r.toObject=a(function(S,l){l||(l={});let y={};if(l.defaults){if(s.Long){let T=new s.Long(0,0,!0);y.peerId=l.longs===String?T.toString():l.longs===Number?T.toNumber():T}else y.peerId=l.longs===String?"0":0;if(s.Long){let T=new s.Long(0,0,!0);y.bytesSent=l.longs===String?T.toString():l.longs===Number?T.toNumber():T}else y.bytesSent=l.longs===String?"0":0;if(s.Long){let T=new s.Long(0,0,!0);y.packetsSent=l.longs===String?T.toString():l.longs===Number?T.toNumber():T}else y.packetsSent=l.longs===String?"0":0;y.codec=l.enums===String?"UNKNOWN":0,y.peerIdString=""}return S.peerId!=null&&S.hasOwnProperty("peerId")&&(typeof S.peerId=="number"?y.peerId=l.longs===String?String(S.peerId):S.peerId:y.peerId=l.longs===String?s.Long.prototype.toString.call(S.peerId):l.longs===Number?new s.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0):S.peerId),S.bytesSent!=null&&S.hasOwnProperty("bytesSent")&&(typeof S.bytesSent=="number"?y.bytesSent=l.longs===String?String(S.bytesSent):S.bytesSent:y.bytesSent=l.longs===String?s.Long.prototype.toString.call(S.bytesSent):l.longs===Number?new s.LongBits(S.bytesSent.low>>>0,S.bytesSent.high>>>0).toNumber(!0):S.bytesSent),S.packetsSent!=null&&S.hasOwnProperty("packetsSent")&&(typeof S.packetsSent=="number"?y.packetsSent=l.longs===String?String(S.packetsSent):S.packetsSent:y.packetsSent=l.longs===String?s.Long.prototype.toString.call(S.packetsSent):l.longs===Number?new s.LongBits(S.packetsSent.low>>>0,S.packetsSent.high>>>0).toNumber(!0):S.packetsSent),S.codec!=null&&S.hasOwnProperty("codec")&&(y.codec=l.enums===String?o.slack.calls.analytics.Codec[S.codec]===void 0?S.codec:o.slack.calls.analytics.Codec[S.codec]:S.codec),S.audioStats!=null&&S.hasOwnProperty("audioStats")&&(y.audioStats=o.slack.calls.analytics.SendMedia.Audio.toObject(S.audioStats,l),l.oneofs&&(y.mediaType="audioStats")),S.videoStats!=null&&S.hasOwnProperty("videoStats")&&(y.videoStats=o.slack.calls.analytics.SendMedia.Video.toObject(S.videoStats,l),l.oneofs&&(y.mediaType="videoStats")),S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&(y.peerIdString=S.peerIdString),y},"toObject"),r.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),r.getTypeUrl=a(function(S){return S===void 0&&(S="type.googleapis.com"),S+"/slack.calls.analytics.SendMedia"},"getTypeUrl"),r.Audio=function(){function f(S){if(S)for(let l=Object.keys(S),y=0;y<l.length;++y)S[l[y]]!=null&&(this[l[y]]=S[l[y]])}return a(f,"Audio"),f.prototype.audioLevel=0,f.prototype.echoReturnLoss=0,f.prototype.echoReturnLossEnhancement=0,f.prototype.totalAudioEnergy=0,f.prototype.totalSamplesDuration=0,f.create=a(function(l){return new f(l)},"create"),f.encode=a(function(l,y){return y||(y=m.create()),l.audioLevel!=null&&Object.hasOwnProperty.call(l,"audioLevel")&&y.uint32(9).double(l.audioLevel),l.echoReturnLoss!=null&&Object.hasOwnProperty.call(l,"echoReturnLoss")&&y.uint32(17).double(l.echoReturnLoss),l.echoReturnLossEnhancement!=null&&Object.hasOwnProperty.call(l,"echoReturnLossEnhancement")&&y.uint32(25).double(l.echoReturnLossEnhancement),l.totalAudioEnergy!=null&&Object.hasOwnProperty.call(l,"totalAudioEnergy")&&y.uint32(33).double(l.totalAudioEnergy),l.totalSamplesDuration!=null&&Object.hasOwnProperty.call(l,"totalSamplesDuration")&&y.uint32(41).double(l.totalSamplesDuration),y},"encode"),f.encodeDelimited=a(function(l,y){return this.encode(l,y).ldelim()},"encodeDelimited"),f.decode=a(function(l,y){l instanceof u||(l=u.create(l));let T=y===void 0?l.len:l.pos+y,O=new o.slack.calls.analytics.SendMedia.Audio;for(;l.pos<T;){let R=l.uint32();switch(R>>>3){case 1:{O.audioLevel=l.double();break}case 2:{O.echoReturnLoss=l.double();break}case 3:{O.echoReturnLossEnhancement=l.double();break}case 4:{O.totalAudioEnergy=l.double();break}case 5:{O.totalSamplesDuration=l.double();break}default:l.skipType(R&7);break}}return O},"decode"),f.decodeDelimited=a(function(l){return l instanceof u||(l=new u(l)),this.decode(l,l.uint32())},"decodeDelimited"),f.verify=a(function(l){return typeof l!="object"||l===null?"object expected":l.audioLevel!=null&&l.hasOwnProperty("audioLevel")&&typeof l.audioLevel!="number"?"audioLevel: number expected":l.echoReturnLoss!=null&&l.hasOwnProperty("echoReturnLoss")&&typeof l.echoReturnLoss!="number"?"echoReturnLoss: number expected":l.echoReturnLossEnhancement!=null&&l.hasOwnProperty("echoReturnLossEnhancement")&&typeof l.echoReturnLossEnhancement!="number"?"echoReturnLossEnhancement: number expected":l.totalAudioEnergy!=null&&l.hasOwnProperty("totalAudioEnergy")&&typeof l.totalAudioEnergy!="number"?"totalAudioEnergy: number expected":l.totalSamplesDuration!=null&&l.hasOwnProperty("totalSamplesDuration")&&typeof l.totalSamplesDuration!="number"?"totalSamplesDuration: number expected":null},"verify"),f.fromObject=a(function(l){if(l instanceof o.slack.calls.analytics.SendMedia.Audio)return l;let y=new o.slack.calls.analytics.SendMedia.Audio;return l.audioLevel!=null&&(y.audioLevel=Number(l.audioLevel)),l.echoReturnLoss!=null&&(y.echoReturnLoss=Number(l.echoReturnLoss)),l.echoReturnLossEnhancement!=null&&(y.echoReturnLossEnhancement=Number(l.echoReturnLossEnhancement)),l.totalAudioEnergy!=null&&(y.totalAudioEnergy=Number(l.totalAudioEnergy)),l.totalSamplesDuration!=null&&(y.totalSamplesDuration=Number(l.totalSamplesDuration)),y},"fromObject"),f.toObject=a(function(l,y){y||(y={});let T={};return y.defaults&&(T.audioLevel=0,T.echoReturnLoss=0,T.echoReturnLossEnhancement=0,T.totalAudioEnergy=0,T.totalSamplesDuration=0),l.audioLevel!=null&&l.hasOwnProperty("audioLevel")&&(T.audioLevel=y.json&&!isFinite(l.audioLevel)?String(l.audioLevel):l.audioLevel),l.echoReturnLoss!=null&&l.hasOwnProperty("echoReturnLoss")&&(T.echoReturnLoss=y.json&&!isFinite(l.echoReturnLoss)?String(l.echoReturnLoss):l.echoReturnLoss),l.echoReturnLossEnhancement!=null&&l.hasOwnProperty("echoReturnLossEnhancement")&&(T.echoReturnLossEnhancement=y.json&&!isFinite(l.echoReturnLossEnhancement)?String(l.echoReturnLossEnhancement):l.echoReturnLossEnhancement),l.totalAudioEnergy!=null&&l.hasOwnProperty("totalAudioEnergy")&&(T.totalAudioEnergy=y.json&&!isFinite(l.totalAudioEnergy)?String(l.totalAudioEnergy):l.totalAudioEnergy),l.totalSamplesDuration!=null&&l.hasOwnProperty("totalSamplesDuration")&&(T.totalSamplesDuration=y.json&&!isFinite(l.totalSamplesDuration)?String(l.totalSamplesDuration):l.totalSamplesDuration),T},"toObject"),f.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),f.getTypeUrl=a(function(l){return l===void 0&&(l="type.googleapis.com"),l+"/slack.calls.analytics.SendMedia.Audio"},"getTypeUrl"),f}(),r.Video=function(){function f(S){if(S)for(let l=Object.keys(S),y=0;y<l.length;++y)S[l[y]]!=null&&(this[l[y]]=S[l[y]])}return a(f,"Video"),f.prototype.frameHeight=s.Long?s.Long.fromBits(0,0,!0):0,f.prototype.frameWidth=s.Long?s.Long.fromBits(0,0,!0):0,f.prototype.framesPerSecond=0,f.prototype.framesSent=s.Long?s.Long.fromBits(0,0,!0):0,f.prototype.framesEncoded=s.Long?s.Long.fromBits(0,0,!0):0,f.prototype.hugeFramesSent=s.Long?s.Long.fromBits(0,0,!0):0,f.create=a(function(l){return new f(l)},"create"),f.encode=a(function(l,y){return y||(y=m.create()),l.frameHeight!=null&&Object.hasOwnProperty.call(l,"frameHeight")&&y.uint32(8).uint64(l.frameHeight),l.frameWidth!=null&&Object.hasOwnProperty.call(l,"frameWidth")&&y.uint32(16).uint64(l.frameWidth),l.framesPerSecond!=null&&Object.hasOwnProperty.call(l,"framesPerSecond")&&y.uint32(25).double(l.framesPerSecond),l.framesSent!=null&&Object.hasOwnProperty.call(l,"framesSent")&&y.uint32(32).uint64(l.framesSent),l.framesEncoded!=null&&Object.hasOwnProperty.call(l,"framesEncoded")&&y.uint32(40).uint64(l.framesEncoded),l.hugeFramesSent!=null&&Object.hasOwnProperty.call(l,"hugeFramesSent")&&y.uint32(48).uint64(l.hugeFramesSent),y},"encode"),f.encodeDelimited=a(function(l,y){return this.encode(l,y).ldelim()},"encodeDelimited"),f.decode=a(function(l,y){l instanceof u||(l=u.create(l));let T=y===void 0?l.len:l.pos+y,O=new o.slack.calls.analytics.SendMedia.Video;for(;l.pos<T;){let R=l.uint32();switch(R>>>3){case 1:{O.frameHeight=l.uint64();break}case 2:{O.frameWidth=l.uint64();break}case 3:{O.framesPerSecond=l.double();break}case 4:{O.framesSent=l.uint64();break}case 5:{O.framesEncoded=l.uint64();break}case 6:{O.hugeFramesSent=l.uint64();break}default:l.skipType(R&7);break}}return O},"decode"),f.decodeDelimited=a(function(l){return l instanceof u||(l=new u(l)),this.decode(l,l.uint32())},"decodeDelimited"),f.verify=a(function(l){return typeof l!="object"||l===null?"object expected":l.frameHeight!=null&&l.hasOwnProperty("frameHeight")&&!s.isInteger(l.frameHeight)&&!(l.frameHeight&&s.isInteger(l.frameHeight.low)&&s.isInteger(l.frameHeight.high))?"frameHeight: integer|Long expected":l.frameWidth!=null&&l.hasOwnProperty("frameWidth")&&!s.isInteger(l.frameWidth)&&!(l.frameWidth&&s.isInteger(l.frameWidth.low)&&s.isInteger(l.frameWidth.high))?"frameWidth: integer|Long expected":l.framesPerSecond!=null&&l.hasOwnProperty("framesPerSecond")&&typeof l.framesPerSecond!="number"?"framesPerSecond: number expected":l.framesSent!=null&&l.hasOwnProperty("framesSent")&&!s.isInteger(l.framesSent)&&!(l.framesSent&&s.isInteger(l.framesSent.low)&&s.isInteger(l.framesSent.high))?"framesSent: integer|Long expected":l.framesEncoded!=null&&l.hasOwnProperty("framesEncoded")&&!s.isInteger(l.framesEncoded)&&!(l.framesEncoded&&s.isInteger(l.framesEncoded.low)&&s.isInteger(l.framesEncoded.high))?"framesEncoded: integer|Long expected":l.hugeFramesSent!=null&&l.hasOwnProperty("hugeFramesSent")&&!s.isInteger(l.hugeFramesSent)&&!(l.hugeFramesSent&&s.isInteger(l.hugeFramesSent.low)&&s.isInteger(l.hugeFramesSent.high))?"hugeFramesSent: integer|Long expected":null},"verify"),f.fromObject=a(function(l){if(l instanceof o.slack.calls.analytics.SendMedia.Video)return l;let y=new o.slack.calls.analytics.SendMedia.Video;return l.frameHeight!=null&&(s.Long?(y.frameHeight=s.Long.fromValue(l.frameHeight)).unsigned=!0:typeof l.frameHeight=="string"?y.frameHeight=parseInt(l.frameHeight,10):typeof l.frameHeight=="number"?y.frameHeight=l.frameHeight:typeof l.frameHeight=="object"&&(y.frameHeight=new s.LongBits(l.frameHeight.low>>>0,l.frameHeight.high>>>0).toNumber(!0))),l.frameWidth!=null&&(s.Long?(y.frameWidth=s.Long.fromValue(l.frameWidth)).unsigned=!0:typeof l.frameWidth=="string"?y.frameWidth=parseInt(l.frameWidth,10):typeof l.frameWidth=="number"?y.frameWidth=l.frameWidth:typeof l.frameWidth=="object"&&(y.frameWidth=new s.LongBits(l.frameWidth.low>>>0,l.frameWidth.high>>>0).toNumber(!0))),l.framesPerSecond!=null&&(y.framesPerSecond=Number(l.framesPerSecond)),l.framesSent!=null&&(s.Long?(y.framesSent=s.Long.fromValue(l.framesSent)).unsigned=!0:typeof l.framesSent=="string"?y.framesSent=parseInt(l.framesSent,10):typeof l.framesSent=="number"?y.framesSent=l.framesSent:typeof l.framesSent=="object"&&(y.framesSent=new s.LongBits(l.framesSent.low>>>0,l.framesSent.high>>>0).toNumber(!0))),l.framesEncoded!=null&&(s.Long?(y.framesEncoded=s.Long.fromValue(l.framesEncoded)).unsigned=!0:typeof l.framesEncoded=="string"?y.framesEncoded=parseInt(l.framesEncoded,10):typeof l.framesEncoded=="number"?y.framesEncoded=l.framesEncoded:typeof l.framesEncoded=="object"&&(y.framesEncoded=new s.LongBits(l.framesEncoded.low>>>0,l.framesEncoded.high>>>0).toNumber(!0))),l.hugeFramesSent!=null&&(s.Long?(y.hugeFramesSent=s.Long.fromValue(l.hugeFramesSent)).unsigned=!0:typeof l.hugeFramesSent=="string"?y.hugeFramesSent=parseInt(l.hugeFramesSent,10):typeof l.hugeFramesSent=="number"?y.hugeFramesSent=l.hugeFramesSent:typeof l.hugeFramesSent=="object"&&(y.hugeFramesSent=new s.LongBits(l.hugeFramesSent.low>>>0,l.hugeFramesSent.high>>>0).toNumber(!0))),y},"fromObject"),f.toObject=a(function(l,y){y||(y={});let T={};if(y.defaults){if(s.Long){let O=new s.Long(0,0,!0);T.frameHeight=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.frameHeight=y.longs===String?"0":0;if(s.Long){let O=new s.Long(0,0,!0);T.frameWidth=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.frameWidth=y.longs===String?"0":0;if(T.framesPerSecond=0,s.Long){let O=new s.Long(0,0,!0);T.framesSent=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.framesSent=y.longs===String?"0":0;if(s.Long){let O=new s.Long(0,0,!0);T.framesEncoded=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.framesEncoded=y.longs===String?"0":0;if(s.Long){let O=new s.Long(0,0,!0);T.hugeFramesSent=y.longs===String?O.toString():y.longs===Number?O.toNumber():O}else T.hugeFramesSent=y.longs===String?"0":0}return l.frameHeight!=null&&l.hasOwnProperty("frameHeight")&&(typeof l.frameHeight=="number"?T.frameHeight=y.longs===String?String(l.frameHeight):l.frameHeight:T.frameHeight=y.longs===String?s.Long.prototype.toString.call(l.frameHeight):y.longs===Number?new s.LongBits(l.frameHeight.low>>>0,l.frameHeight.high>>>0).toNumber(!0):l.frameHeight),l.frameWidth!=null&&l.hasOwnProperty("frameWidth")&&(typeof l.frameWidth=="number"?T.frameWidth=y.longs===String?String(l.frameWidth):l.frameWidth:T.frameWidth=y.longs===String?s.Long.prototype.toString.call(l.frameWidth):y.longs===Number?new s.LongBits(l.frameWidth.low>>>0,l.frameWidth.high>>>0).toNumber(!0):l.frameWidth),l.framesPerSecond!=null&&l.hasOwnProperty("framesPerSecond")&&(T.framesPerSecond=y.json&&!isFinite(l.framesPerSecond)?String(l.framesPerSecond):l.framesPerSecond),l.framesSent!=null&&l.hasOwnProperty("framesSent")&&(typeof l.framesSent=="number"?T.framesSent=y.longs===String?String(l.framesSent):l.framesSent:T.framesSent=y.longs===String?s.Long.prototype.toString.call(l.framesSent):y.longs===Number?new s.LongBits(l.framesSent.low>>>0,l.framesSent.high>>>0).toNumber(!0):l.framesSent),l.framesEncoded!=null&&l.hasOwnProperty("framesEncoded")&&(typeof l.framesEncoded=="number"?T.framesEncoded=y.longs===String?String(l.framesEncoded):l.framesEncoded:T.framesEncoded=y.longs===String?s.Long.prototype.toString.call(l.framesEncoded):y.longs===Number?new s.LongBits(l.framesEncoded.low>>>0,l.framesEncoded.high>>>0).toNumber(!0):l.framesEncoded),l.hugeFramesSent!=null&&l.hasOwnProperty("hugeFramesSent")&&(typeof l.hugeFramesSent=="number"?T.hugeFramesSent=y.longs===String?String(l.hugeFramesSent):l.hugeFramesSent:T.hugeFramesSent=y.longs===String?s.Long.prototype.toString.call(l.hugeFramesSent):y.longs===Number?new s.LongBits(l.hugeFramesSent.low>>>0,l.hugeFramesSent.high>>>0).toNumber(!0):l.hugeFramesSent),T},"toObject"),f.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),f.getTypeUrl=a(function(l){return l===void 0&&(l="type.googleapis.com"),l+"/slack.calls.analytics.SendMedia.Video"},"getTypeUrl"),f}(),r}(),n.MemoryInfo=function(){function r(c){if(c)for(let f=Object.keys(c),S=0;S<f.length;++S)c[f[S]]!=null&&(this[f[S]]=c[f[S]])}return a(r,"MemoryInfo"),r.prototype.workingSetSize=0,r.prototype.peakWorkingSetSize=0,r.create=a(function(f){return new r(f)},"create"),r.encode=a(function(f,S){return S||(S=m.create()),f.workingSetSize!=null&&Object.hasOwnProperty.call(f,"workingSetSize")&&S.uint32(9).double(f.workingSetSize),f.peakWorkingSetSize!=null&&Object.hasOwnProperty.call(f,"peakWorkingSetSize")&&S.uint32(17).double(f.peakWorkingSetSize),S},"encode"),r.encodeDelimited=a(function(f,S){return this.encode(f,S).ldelim()},"encodeDelimited"),r.decode=a(function(f,S){f instanceof u||(f=u.create(f));let l=S===void 0?f.len:f.pos+S,y=new o.slack.calls.analytics.MemoryInfo;for(;f.pos<l;){let T=f.uint32();switch(T>>>3){case 1:{y.workingSetSize=f.double();break}case 2:{y.peakWorkingSetSize=f.double();break}default:f.skipType(T&7);break}}return y},"decode"),r.decodeDelimited=a(function(f){return f instanceof u||(f=new u(f)),this.decode(f,f.uint32())},"decodeDelimited"),r.verify=a(function(f){return typeof f!="object"||f===null?"object expected":f.workingSetSize!=null&&f.hasOwnProperty("workingSetSize")&&typeof f.workingSetSize!="number"?"workingSetSize: number expected":f.peakWorkingSetSize!=null&&f.hasOwnProperty("peakWorkingSetSize")&&typeof f.peakWorkingSetSize!="number"?"peakWorkingSetSize: number expected":null},"verify"),r.fromObject=a(function(f){if(f instanceof o.slack.calls.analytics.MemoryInfo)return f;let S=new o.slack.calls.analytics.MemoryInfo;return f.workingSetSize!=null&&(S.workingSetSize=Number(f.workingSetSize)),f.peakWorkingSetSize!=null&&(S.peakWorkingSetSize=Number(f.peakWorkingSetSize)),S},"fromObject"),r.toObject=a(function(f,S){S||(S={});let l={};return S.defaults&&(l.workingSetSize=0,l.peakWorkingSetSize=0),f.workingSetSize!=null&&f.hasOwnProperty("workingSetSize")&&(l.workingSetSize=S.json&&!isFinite(f.workingSetSize)?String(f.workingSetSize):f.workingSetSize),f.peakWorkingSetSize!=null&&f.hasOwnProperty("peakWorkingSetSize")&&(l.peakWorkingSetSize=S.json&&!isFinite(f.peakWorkingSetSize)?String(f.peakWorkingSetSize):f.peakWorkingSetSize),l},"toObject"),r.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),r.getTypeUrl=a(function(f){return f===void 0&&(f="type.googleapis.com"),f+"/slack.calls.analytics.MemoryInfo"},"getTypeUrl"),r}(),n.AppMetrics=function(){function r(c){if(c)for(let f=Object.keys(c),S=0;S<f.length;++S)c[f[S]]!=null&&(this[f[S]]=c[f[S]])}return a(r,"AppMetrics"),r.prototype.cpu=0,r.prototype.memory=null,r.create=a(function(f){return new r(f)},"create"),r.encode=a(function(f,S){return S||(S=m.create()),f.cpu!=null&&Object.hasOwnProperty.call(f,"cpu")&&S.uint32(9).double(f.cpu),f.memory!=null&&Object.hasOwnProperty.call(f,"memory")&&o.slack.calls.analytics.MemoryInfo.encode(f.memory,S.uint32(18).fork()).ldelim(),S},"encode"),r.encodeDelimited=a(function(f,S){return this.encode(f,S).ldelim()},"encodeDelimited"),r.decode=a(function(f,S){f instanceof u||(f=u.create(f));let l=S===void 0?f.len:f.pos+S,y=new o.slack.calls.analytics.AppMetrics;for(;f.pos<l;){let T=f.uint32();switch(T>>>3){case 1:{y.cpu=f.double();break}case 2:{y.memory=o.slack.calls.analytics.MemoryInfo.decode(f,f.uint32());break}default:f.skipType(T&7);break}}return y},"decode"),r.decodeDelimited=a(function(f){return f instanceof u||(f=new u(f)),this.decode(f,f.uint32())},"decodeDelimited"),r.verify=a(function(f){if(typeof f!="object"||f===null)return"object expected";if(f.cpu!=null&&f.hasOwnProperty("cpu")&&typeof f.cpu!="number")return"cpu: number expected";if(f.memory!=null&&f.hasOwnProperty("memory")){let S=o.slack.calls.analytics.MemoryInfo.verify(f.memory);if(S)return"memory."+S}return null},"verify"),r.fromObject=a(function(f){if(f instanceof o.slack.calls.analytics.AppMetrics)return f;let S=new o.slack.calls.analytics.AppMetrics;if(f.cpu!=null&&(S.cpu=Number(f.cpu)),f.memory!=null){if(typeof f.memory!="object")throw TypeError(".slack.calls.analytics.AppMetrics.memory: object expected");S.memory=o.slack.calls.analytics.MemoryInfo.fromObject(f.memory)}return S},"fromObject"),r.toObject=a(function(f,S){S||(S={});let l={};return S.defaults&&(l.cpu=0,l.memory=null),f.cpu!=null&&f.hasOwnProperty("cpu")&&(l.cpu=S.json&&!isFinite(f.cpu)?String(f.cpu):f.cpu),f.memory!=null&&f.hasOwnProperty("memory")&&(l.memory=o.slack.calls.analytics.MemoryInfo.toObject(f.memory,S)),l},"toObject"),r.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),r.getTypeUrl=a(function(f){return f===void 0&&(f="type.googleapis.com"),f+"/slack.calls.analytics.AppMetrics"},"getTypeUrl"),r}(),n.Codec=function(){const r={},c=Object.create(r);return c[r[0]="UNKNOWN"]=0,c[r[1]="OPUS"]=1,c[r[2]="VP8"]=2,c[r[3]="VP9"]=3,c[r[4]="H264"]=4,c}(),n.Protocol=function(){const r={},c=Object.create(r);return c[r[0]="UDP"]=0,c[r[1]="TCP"]=1,c}(),n.PathType=function(){const r={},c=Object.create(r);return c[r[0]="DIRECT"]=0,c[r[1]="RELAY"]=1,c}(),n.Report=function(){function r(c){if(this.recv=[],this.send=[],c)for(let f=Object.keys(c),S=0;S<f.length;++S)c[f[S]]!=null&&(this[f[S]]=c[f[S]])}return a(r,"Report"),r.prototype.totalBytesSent=s.Long?s.Long.fromBits(0,0,!0):0,r.prototype.totalBytesReceived=s.Long?s.Long.fromBits(0,0,!0):0,r.prototype.totalRoundTripTime=0,r.prototype.currentRoundTripTime=0,r.prototype.availableOutgoingBitrate=s.Long?s.Long.fromBits(0,0,!0):0,r.prototype.protocol=0,r.prototype.pathType=0,r.prototype.recv=s.emptyArray,r.prototype.send=s.emptyArray,r.prototype.clientTime=s.Long?s.Long.fromBits(0,0,!0):0,r.prototype.availableIncomingBitrate=s.Long?s.Long.fromBits(0,0,!0):0,r.prototype.appMetrics=null,r.create=a(function(f){return new r(f)},"create"),r.encode=a(function(f,S){if(S||(S=m.create()),f.totalBytesSent!=null&&Object.hasOwnProperty.call(f,"totalBytesSent")&&S.uint32(8).uint64(f.totalBytesSent),f.totalBytesReceived!=null&&Object.hasOwnProperty.call(f,"totalBytesReceived")&&S.uint32(16).uint64(f.totalBytesReceived),f.totalRoundTripTime!=null&&Object.hasOwnProperty.call(f,"totalRoundTripTime")&&S.uint32(25).double(f.totalRoundTripTime),f.currentRoundTripTime!=null&&Object.hasOwnProperty.call(f,"currentRoundTripTime")&&S.uint32(33).double(f.currentRoundTripTime),f.availableOutgoingBitrate!=null&&Object.hasOwnProperty.call(f,"availableOutgoingBitrate")&&S.uint32(40).uint64(f.availableOutgoingBitrate),f.protocol!=null&&Object.hasOwnProperty.call(f,"protocol")&&S.uint32(48).int32(f.protocol),f.pathType!=null&&Object.hasOwnProperty.call(f,"pathType")&&S.uint32(56).int32(f.pathType),f.recv!=null&&f.recv.length)for(let l=0;l<f.recv.length;++l)o.slack.calls.analytics.RecvMedia.encode(f.recv[l],S.uint32(66).fork()).ldelim();if(f.send!=null&&f.send.length)for(let l=0;l<f.send.length;++l)o.slack.calls.analytics.SendMedia.encode(f.send[l],S.uint32(74).fork()).ldelim();return f.clientTime!=null&&Object.hasOwnProperty.call(f,"clientTime")&&S.uint32(80).uint64(f.clientTime),f.availableIncomingBitrate!=null&&Object.hasOwnProperty.call(f,"availableIncomingBitrate")&&S.uint32(88).uint64(f.availableIncomingBitrate),f.appMetrics!=null&&Object.hasOwnProperty.call(f,"appMetrics")&&o.slack.calls.analytics.AppMetrics.encode(f.appMetrics,S.uint32(98).fork()).ldelim(),S},"encode"),r.encodeDelimited=a(function(f,S){return this.encode(f,S).ldelim()},"encodeDelimited"),r.decode=a(function(f,S){f instanceof u||(f=u.create(f));let l=S===void 0?f.len:f.pos+S,y=new o.slack.calls.analytics.Report;for(;f.pos<l;){let T=f.uint32();switch(T>>>3){case 1:{y.totalBytesSent=f.uint64();break}case 2:{y.totalBytesReceived=f.uint64();break}case 3:{y.totalRoundTripTime=f.double();break}case 4:{y.currentRoundTripTime=f.double();break}case 5:{y.availableOutgoingBitrate=f.uint64();break}case 6:{y.protocol=f.int32();break}case 7:{y.pathType=f.int32();break}case 8:{y.recv&&y.recv.length||(y.recv=[]),y.recv.push(o.slack.calls.analytics.RecvMedia.decode(f,f.uint32()));break}case 9:{y.send&&y.send.length||(y.send=[]),y.send.push(o.slack.calls.analytics.SendMedia.decode(f,f.uint32()));break}case 10:{y.clientTime=f.uint64();break}case 11:{y.availableIncomingBitrate=f.uint64();break}case 12:{y.appMetrics=o.slack.calls.analytics.AppMetrics.decode(f,f.uint32());break}default:f.skipType(T&7);break}}return y},"decode"),r.decodeDelimited=a(function(f){return f instanceof u||(f=new u(f)),this.decode(f,f.uint32())},"decodeDelimited"),r.verify=a(function(f){if(typeof f!="object"||f===null)return"object expected";if(f.totalBytesSent!=null&&f.hasOwnProperty("totalBytesSent")&&!s.isInteger(f.totalBytesSent)&&!(f.totalBytesSent&&s.isInteger(f.totalBytesSent.low)&&s.isInteger(f.totalBytesSent.high)))return"totalBytesSent: integer|Long expected";if(f.totalBytesReceived!=null&&f.hasOwnProperty("totalBytesReceived")&&!s.isInteger(f.totalBytesReceived)&&!(f.totalBytesReceived&&s.isInteger(f.totalBytesReceived.low)&&s.isInteger(f.totalBytesReceived.high)))return"totalBytesReceived: integer|Long expected";if(f.totalRoundTripTime!=null&&f.hasOwnProperty("totalRoundTripTime")&&typeof f.totalRoundTripTime!="number")return"totalRoundTripTime: number expected";if(f.currentRoundTripTime!=null&&f.hasOwnProperty("currentRoundTripTime")&&typeof f.currentRoundTripTime!="number")return"currentRoundTripTime: number expected";if(f.availableOutgoingBitrate!=null&&f.hasOwnProperty("availableOutgoingBitrate")&&!s.isInteger(f.availableOutgoingBitrate)&&!(f.availableOutgoingBitrate&&s.isInteger(f.availableOutgoingBitrate.low)&&s.isInteger(f.availableOutgoingBitrate.high)))return"availableOutgoingBitrate: integer|Long expected";if(f.protocol!=null&&f.hasOwnProperty("protocol"))switch(f.protocol){default:return"protocol: enum value expected";case 0:case 1:break}if(f.pathType!=null&&f.hasOwnProperty("pathType"))switch(f.pathType){default:return"pathType: enum value expected";case 0:case 1:break}if(f.recv!=null&&f.hasOwnProperty("recv")){if(!Array.isArray(f.recv))return"recv: array expected";for(let S=0;S<f.recv.length;++S){let l=o.slack.calls.analytics.RecvMedia.verify(f.recv[S]);if(l)return"recv."+l}}if(f.send!=null&&f.hasOwnProperty("send")){if(!Array.isArray(f.send))return"send: array expected";for(let S=0;S<f.send.length;++S){let l=o.slack.calls.analytics.SendMedia.verify(f.send[S]);if(l)return"send."+l}}if(f.clientTime!=null&&f.hasOwnProperty("clientTime")&&!s.isInteger(f.clientTime)&&!(f.clientTime&&s.isInteger(f.clientTime.low)&&s.isInteger(f.clientTime.high)))return"clientTime: integer|Long expected";if(f.availableIncomingBitrate!=null&&f.hasOwnProperty("availableIncomingBitrate")&&!s.isInteger(f.availableIncomingBitrate)&&!(f.availableIncomingBitrate&&s.isInteger(f.availableIncomingBitrate.low)&&s.isInteger(f.availableIncomingBitrate.high)))return"availableIncomingBitrate: integer|Long expected";if(f.appMetrics!=null&&f.hasOwnProperty("appMetrics")){let S=o.slack.calls.analytics.AppMetrics.verify(f.appMetrics);if(S)return"appMetrics."+S}return null},"verify"),r.fromObject=a(function(f){if(f instanceof o.slack.calls.analytics.Report)return f;let S=new o.slack.calls.analytics.Report;switch(f.totalBytesSent!=null&&(s.Long?(S.totalBytesSent=s.Long.fromValue(f.totalBytesSent)).unsigned=!0:typeof f.totalBytesSent=="string"?S.totalBytesSent=parseInt(f.totalBytesSent,10):typeof f.totalBytesSent=="number"?S.totalBytesSent=f.totalBytesSent:typeof f.totalBytesSent=="object"&&(S.totalBytesSent=new s.LongBits(f.totalBytesSent.low>>>0,f.totalBytesSent.high>>>0).toNumber(!0))),f.totalBytesReceived!=null&&(s.Long?(S.totalBytesReceived=s.Long.fromValue(f.totalBytesReceived)).unsigned=!0:typeof f.totalBytesReceived=="string"?S.totalBytesReceived=parseInt(f.totalBytesReceived,10):typeof f.totalBytesReceived=="number"?S.totalBytesReceived=f.totalBytesReceived:typeof f.totalBytesReceived=="object"&&(S.totalBytesReceived=new s.LongBits(f.totalBytesReceived.low>>>0,f.totalBytesReceived.high>>>0).toNumber(!0))),f.totalRoundTripTime!=null&&(S.totalRoundTripTime=Number(f.totalRoundTripTime)),f.currentRoundTripTime!=null&&(S.currentRoundTripTime=Number(f.currentRoundTripTime)),f.availableOutgoingBitrate!=null&&(s.Long?(S.availableOutgoingBitrate=s.Long.fromValue(f.availableOutgoingBitrate)).unsigned=!0:typeof f.availableOutgoingBitrate=="string"?S.availableOutgoingBitrate=parseInt(f.availableOutgoingBitrate,10):typeof f.availableOutgoingBitrate=="number"?S.availableOutgoingBitrate=f.availableOutgoingBitrate:typeof f.availableOutgoingBitrate=="object"&&(S.availableOutgoingBitrate=new s.LongBits(f.availableOutgoingBitrate.low>>>0,f.availableOutgoingBitrate.high>>>0).toNumber(!0))),f.protocol){default:if(typeof f.protocol=="number"){S.protocol=f.protocol;break}break;case"UDP":case 0:S.protocol=0;break;case"TCP":case 1:S.protocol=1;break}switch(f.pathType){default:if(typeof f.pathType=="number"){S.pathType=f.pathType;break}break;case"DIRECT":case 0:S.pathType=0;break;case"RELAY":case 1:S.pathType=1;break}if(f.recv){if(!Array.isArray(f.recv))throw TypeError(".slack.calls.analytics.Report.recv: array expected");S.recv=[];for(let l=0;l<f.recv.length;++l){if(typeof f.recv[l]!="object")throw TypeError(".slack.calls.analytics.Report.recv: object expected");S.recv[l]=o.slack.calls.analytics.RecvMedia.fromObject(f.recv[l])}}if(f.send){if(!Array.isArray(f.send))throw TypeError(".slack.calls.analytics.Report.send: array expected");S.send=[];for(let l=0;l<f.send.length;++l){if(typeof f.send[l]!="object")throw TypeError(".slack.calls.analytics.Report.send: object expected");S.send[l]=o.slack.calls.analytics.SendMedia.fromObject(f.send[l])}}if(f.clientTime!=null&&(s.Long?(S.clientTime=s.Long.fromValue(f.clientTime)).unsigned=!0:typeof f.clientTime=="string"?S.clientTime=parseInt(f.clientTime,10):typeof f.clientTime=="number"?S.clientTime=f.clientTime:typeof f.clientTime=="object"&&(S.clientTime=new s.LongBits(f.clientTime.low>>>0,f.clientTime.high>>>0).toNumber(!0))),f.availableIncomingBitrate!=null&&(s.Long?(S.availableIncomingBitrate=s.Long.fromValue(f.availableIncomingBitrate)).unsigned=!0:typeof f.availableIncomingBitrate=="string"?S.availableIncomingBitrate=parseInt(f.availableIncomingBitrate,10):typeof f.availableIncomingBitrate=="number"?S.availableIncomingBitrate=f.availableIncomingBitrate:typeof f.availableIncomingBitrate=="object"&&(S.availableIncomingBitrate=new s.LongBits(f.availableIncomingBitrate.low>>>0,f.availableIncomingBitrate.high>>>0).toNumber(!0))),f.appMetrics!=null){if(typeof f.appMetrics!="object")throw TypeError(".slack.calls.analytics.Report.appMetrics: object expected");S.appMetrics=o.slack.calls.analytics.AppMetrics.fromObject(f.appMetrics)}return S},"fromObject"),r.toObject=a(function(f,S){S||(S={});let l={};if((S.arrays||S.defaults)&&(l.recv=[],l.send=[]),S.defaults){if(s.Long){let y=new s.Long(0,0,!0);l.totalBytesSent=S.longs===String?y.toString():S.longs===Number?y.toNumber():y}else l.totalBytesSent=S.longs===String?"0":0;if(s.Long){let y=new s.Long(0,0,!0);l.totalBytesReceived=S.longs===String?y.toString():S.longs===Number?y.toNumber():y}else l.totalBytesReceived=S.longs===String?"0":0;if(l.totalRoundTripTime=0,l.currentRoundTripTime=0,s.Long){let y=new s.Long(0,0,!0);l.availableOutgoingBitrate=S.longs===String?y.toString():S.longs===Number?y.toNumber():y}else l.availableOutgoingBitrate=S.longs===String?"0":0;if(l.protocol=S.enums===String?"UDP":0,l.pathType=S.enums===String?"DIRECT":0,s.Long){let y=new s.Long(0,0,!0);l.clientTime=S.longs===String?y.toString():S.longs===Number?y.toNumber():y}else l.clientTime=S.longs===String?"0":0;if(s.Long){let y=new s.Long(0,0,!0);l.availableIncomingBitrate=S.longs===String?y.toString():S.longs===Number?y.toNumber():y}else l.availableIncomingBitrate=S.longs===String?"0":0;l.appMetrics=null}if(f.totalBytesSent!=null&&f.hasOwnProperty("totalBytesSent")&&(typeof f.totalBytesSent=="number"?l.totalBytesSent=S.longs===String?String(f.totalBytesSent):f.totalBytesSent:l.totalBytesSent=S.longs===String?s.Long.prototype.toString.call(f.totalBytesSent):S.longs===Number?new s.LongBits(f.totalBytesSent.low>>>0,f.totalBytesSent.high>>>0).toNumber(!0):f.totalBytesSent),f.totalBytesReceived!=null&&f.hasOwnProperty("totalBytesReceived")&&(typeof f.totalBytesReceived=="number"?l.totalBytesReceived=S.longs===String?String(f.totalBytesReceived):f.totalBytesReceived:l.totalBytesReceived=S.longs===String?s.Long.prototype.toString.call(f.totalBytesReceived):S.longs===Number?new s.LongBits(f.totalBytesReceived.low>>>0,f.totalBytesReceived.high>>>0).toNumber(!0):f.totalBytesReceived),f.totalRoundTripTime!=null&&f.hasOwnProperty("totalRoundTripTime")&&(l.totalRoundTripTime=S.json&&!isFinite(f.totalRoundTripTime)?String(f.totalRoundTripTime):f.totalRoundTripTime),f.currentRoundTripTime!=null&&f.hasOwnProperty("currentRoundTripTime")&&(l.currentRoundTripTime=S.json&&!isFinite(f.currentRoundTripTime)?String(f.currentRoundTripTime):f.currentRoundTripTime),f.availableOutgoingBitrate!=null&&f.hasOwnProperty("availableOutgoingBitrate")&&(typeof f.availableOutgoingBitrate=="number"?l.availableOutgoingBitrate=S.longs===String?String(f.availableOutgoingBitrate):f.availableOutgoingBitrate:l.availableOutgoingBitrate=S.longs===String?s.Long.prototype.toString.call(f.availableOutgoingBitrate):S.longs===Number?new s.LongBits(f.availableOutgoingBitrate.low>>>0,f.availableOutgoingBitrate.high>>>0).toNumber(!0):f.availableOutgoingBitrate),f.protocol!=null&&f.hasOwnProperty("protocol")&&(l.protocol=S.enums===String?o.slack.calls.analytics.Protocol[f.protocol]===void 0?f.protocol:o.slack.calls.analytics.Protocol[f.protocol]:f.protocol),f.pathType!=null&&f.hasOwnProperty("pathType")&&(l.pathType=S.enums===String?o.slack.calls.analytics.PathType[f.pathType]===void 0?f.pathType:o.slack.calls.analytics.PathType[f.pathType]:f.pathType),f.recv&&f.recv.length){l.recv=[];for(let y=0;y<f.recv.length;++y)l.recv[y]=o.slack.calls.analytics.RecvMedia.toObject(f.recv[y],S)}if(f.send&&f.send.length){l.send=[];for(let y=0;y<f.send.length;++y)l.send[y]=o.slack.calls.analytics.SendMedia.toObject(f.send[y],S)}return f.clientTime!=null&&f.hasOwnProperty("clientTime")&&(typeof f.clientTime=="number"?l.clientTime=S.longs===String?String(f.clientTime):f.clientTime:l.clientTime=S.longs===String?s.Long.prototype.toString.call(f.clientTime):S.longs===Number?new s.LongBits(f.clientTime.low>>>0,f.clientTime.high>>>0).toNumber(!0):f.clientTime),f.availableIncomingBitrate!=null&&f.hasOwnProperty("availableIncomingBitrate")&&(typeof f.availableIncomingBitrate=="number"?l.availableIncomingBitrate=S.longs===String?String(f.availableIncomingBitrate):f.availableIncomingBitrate:l.availableIncomingBitrate=S.longs===String?s.Long.prototype.toString.call(f.availableIncomingBitrate):S.longs===Number?new s.LongBits(f.availableIncomingBitrate.low>>>0,f.availableIncomingBitrate.high>>>0).toNumber(!0):f.availableIncomingBitrate),f.appMetrics!=null&&f.hasOwnProperty("appMetrics")&&(l.appMetrics=o.slack.calls.analytics.AppMetrics.toObject(f.appMetrics,S)),l},"toObject"),r.prototype.toJSON=a(function(){return this.constructor.toObject(this,g.util.toJSONOptions)},"toJSON"),r.getTypeUrl=a(function(f){return f===void 0&&(f="type.googleapis.com"),f+"/slack.calls.analytics.Report"},"getTypeUrl"),r}(),n}(),t}(),e})()},ohOv:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(e,t,n,r){function c(f){return f instanceof n?f:new n(function(S){S(f)})}return a(c,"adopt"),new(n||(n=Promise))(function(f,S){function l(O){try{T(r.next(O))}catch(R){S(R)}}a(l,"fulfilled");function y(O){try{T(r.throw(O))}catch(R){S(R)}}a(y,"rejected");function T(O){O.done?f(O.value):c(O.value).then(l,y)}a(T,"step"),T((r=r.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("Sa54")),m=p(h("bTau")),s=p(h("AUdx")),o=p(h("aVV0"));let i=a(class extends o.default{cancel(){if(this.cancelPromise){const t=new Error(`canceling ${this.name()}`);this.cancelPromise(t),delete this.cancelPromise}}run(){return g(this,void 0,void 0,function*(){const t=this.context.peer;let r=this.context.sdpOfferInit.sdp;this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(r=new s.default(r).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(r=new s.default(r).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new u.default().requiresDisablingH264Encoding()&&(r=new s.default(r).removeH264SupportFromSendSection().sdp);const c=this.context.audioVideoController.configuration.credentials.attendeeId;if(new m.default(c).hasModality(m.default.MODALITY_CONTENT)&&this.context.audioVideoController.configuration.enableSVC&&(r=new s.default(r).withStartingVideoSendBitrate(100).sdp),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(r=new s.default(r).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(r=new s.default(r).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(r=new s.default(r).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const l=new s.default(r).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(l)}this.logger.debug(()=>`local description is >>>${r}<<<`);const S={type:"offer",sdp:r,toJSON:null};yield new Promise((l,y)=>g(this,void 0,void 0,function*(){this.cancelPromise=T=>{y(T)};try{yield t.setLocalDescription(S),l()}catch(T){y(T)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(t){super(t.logger),this.context=t,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");d.default=i},okoL:function(W,d,h){"use strict";var g=h("5iG2"),p=h("fshX");function u(m,s,o){var i=m==null?0:m.length;return i?(s=o||s===void 0?1:Object(p.a)(s),s=i-s,Object(g.a)(m,s<0?0:s,i)):[]}a(u,"takeRight"),d.a=u},on9F:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=h("K5tc"),p=h("JOZa"),u=h("AXyi"),m=h("Q2ix");let s=a(class{perform(i,e){const t=this.currentState;if(t===u.SessionStateControllerState.NotConnected&&i===g.SessionStateControllerAction.Connect)this.transition(u.SessionStateControllerState.Connecting,i);else if(t===u.SessionStateControllerState.Connecting&&i===g.SessionStateControllerAction.Fail)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Connecting&&i===g.SessionStateControllerAction.FinishConnecting)this.transition(u.SessionStateControllerState.Connected,i);else if(t===u.SessionStateControllerState.Connected&&i===g.SessionStateControllerAction.Disconnect)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Connected&&i===g.SessionStateControllerAction.Reconnect)this.transition(u.SessionStateControllerState.Connecting,i);else if(t===u.SessionStateControllerState.Connected&&i===g.SessionStateControllerAction.Fail)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Connected&&i===g.SessionStateControllerAction.Update)this.transition(u.SessionStateControllerState.Updating,i);else if(t===u.SessionStateControllerState.Updating&&i===g.SessionStateControllerAction.Fail)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Updating&&i===g.SessionStateControllerAction.FinishUpdating)this.transition(u.SessionStateControllerState.Connected,i);else if(t===u.SessionStateControllerState.Disconnecting&&i===g.SessionStateControllerAction.FinishDisconnecting)this.transition(u.SessionStateControllerState.NotConnected,i);else return this.canDefer(i)?(this.logger.info(`deferring transition from ${u.SessionStateControllerState[this.currentState]} with ${g.SessionStateControllerAction[i]}`),this.deferAction(i,e),m.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${u.SessionStateControllerState[this.currentState]} with ${g.SessionStateControllerAction[i]}`),m.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(n){return this.logger.error(`error during state ${u.SessionStateControllerState[this.currentState]} with action ${g.SessionStateControllerAction[i]}: ${n}`),this.logger.info(`rolling back transition to ${u.SessionStateControllerState[t]}`),this.currentState=t,m.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),m.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(i,e){this.logger.info(`transitioning from ${u.SessionStateControllerState[this.currentState]} to ${u.SessionStateControllerState[i]} with ${g.SessionStateControllerAction[e]}`),this.currentState=i}deferPriority(i){switch(i){case g.SessionStateControllerAction.Disconnect:return p.SessionStateControllerDeferPriority.VeryHigh;case g.SessionStateControllerAction.Fail:return p.SessionStateControllerDeferPriority.High;case g.SessionStateControllerAction.Reconnect:return p.SessionStateControllerDeferPriority.Medium;case g.SessionStateControllerAction.Update:return p.SessionStateControllerDeferPriority.Low;default:return p.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(i,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(i)||(this.deferredAction=i,this.deferredWork=e)}canDefer(i){return this.deferPriority(i)!==p.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===u.SessionStateControllerState.Connecting||this.currentState===u.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const i=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${g.SessionStateControllerAction[i]}`),this.perform(i,e)!==m.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${g.SessionStateControllerAction[i]} in state ${u.SessionStateControllerState[this.currentState]}`)}constructor(i){this.logger=i,this.currentState=u.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");d.default=s},otBB:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("Zkgh"));let u=a(class{reset(){}updateIndex(s){}updateMetrics(s){}wantsResubscribe(){return!1}chooseSubscriptions(){return new p.default}},"NoVideoDownlinkBandwidthPolicy");d.default=u},p3mT:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g;(function(p){p.Connect="connect"})(g||(g={})),d.default=g},p5Ac:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"BitrateParameters");d.default=g},p72H:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.EMPTY_DATA_SHA_256=d.SHA_256_HMAC_ALGO=d.SHA_256_HASH=void 0,d.SHA_256_HASH={name:"SHA-256"},d.SHA_256_HMAC_ALGO={name:"HMAC",hash:d.SHA_256_HASH},d.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},p7bP:function(W,d,h){"use strict";(function(g){Object.defineProperty(d,"__esModule",{value:!0});let p=a(class or{static register(){!("document"in g)||!document.addEventListener||or.shouldRegisterCSPMonitor&&(or.added||(document.addEventListener("securitypolicyviolation",or.listener),or.added=!0))}static unregister(){!("document"in g)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",or.listener),or.loggers=new Set,or.added=!1)}static disable(){or.shouldRegisterCSPMonitor=!1,or.unregister()}static addLogger(m){m&&or.loggers.add(m)}static removeLogger(m){m&&or.loggers.delete(m)}},"CSPMonitor");d.default=p,p.loggers=new Set,p.shouldRegisterCSPMonitor=!0,p.added=!1,p.listener=u=>{const m=`Security Policy Violation
Blocked URI: ${u.blockedURI}
Violated Directive: ${u.violatedDirective}
Original Policy: ${u.originalPolicy}
Document URI: ${u.documentURI}
Source File: ${u.sourceFile}
Line No.: ${u.lineNumber}
`;for(const s of p.loggers)s.error(m);p.loggers.size===0&&console.error(m)}}).call(this,h("yLpj"))},pCf5:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("ghxq"));let u=a(class extends p.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const s=this.pastSamplesToConsider,o=s*this.packetsExpected;let i=0;for(let e=0;e<s;e++)i+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-i/o,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(s,o){super(s,o,"Unusable Audio Warning"),this.coolDownTimeMs=s.cooldownTimeMs,this.pastSamplesToConsider=s.pastSamplesToConsider,this.fractionalLoss=s.fractionalLoss,this.packetsExpected=s.packetsExpected,this.maximumTimesToWarn=s.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");d.default=u},pU0T:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.uint32ArrayFrom=d.numToUint8=d.isEmptyData=d.convertToBuffer=void 0;var g=h("YcE2");Object.defineProperty(d,"convertToBuffer",{enumerable:!0,get:function(){return g.convertToBuffer}});var p=h("zW/2");Object.defineProperty(d,"isEmptyData",{enumerable:!0,get:function(){return p.isEmptyData}});var u=h("lnWt");Object.defineProperty(d,"numToUint8",{enumerable:!0,get:function(){return u.numToUint8}});var m=h("wiFD");Object.defineProperty(d,"uint32ArrayFrom",{enumerable:!0,get:function(){return m.uint32ArrayFrom}})},pacc:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(S,l,y,T){function O(R){return R instanceof y?R:new y(function(F){F(R)})}return a(O,"adopt"),new(y||(y=Promise))(function(R,F){function U(L){try{P(T.next(L))}catch(A){F(A)}}a(U,"fulfilled");function _(L){try{P(T.throw(L))}catch(A){F(A)}}a(_,"rejected");function P(L){L.done?R(L.value):O(L.value).then(U,_)}a(P,"step"),P((T=T.apply(S,l||[])).next())})},p=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(d,"__esModule",{value:!0});const u=h("Zit3"),m=p(h("cKqT")),s=p(h("p7bP")),o=p(h("HXIC")),i=p(h("l7oq")),e=p(h("F7zz")),t=p(h("dPyZ")),n=p(h("3jln")),r=p(h("z8+u")),c=p(h("18tZ"));let f=a(class{addObserver(l){this.logger.info("adding messaging observer"),this.observerQueue.add(l)}removeObserver(l){this.logger.info("removing messaging observer"),this.observerQueue.delete(l)}start(){return g(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),s.default.removeLogger(this.logger))}forEachObserver(l){for(const y of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(y)&&l(y)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",l=>{this.receiveMessageHandler(l.data)}),this.webSocket.addEventListener("close",l=>{this.closeEventHandler(l)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(l){return g(this,void 0,void 0,function*(){return yield this.startConnectingInternal(l),yield new Promise((y,T)=>{this.bootstrapResolved=y,this.bootstrapRejected=T})})}startConnectingInternal(l){var y;return g(this,void 0,void 0,function*(){let T=this.configuration.endpointUrl;if(l||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),l||T===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const R=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((y=R.Endpoint)===null||y===void 0)&&y.Url?T=R.Endpoint.Url:T=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else T=(yield this.configuration.chimeClient.send(new u.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${T}`)}catch(R){this.logger.error(`Messaging Session failed to resolve endpoint: ${R}`);const F=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(F);return}const O=yield this.prepareWebSocketUrl(T);this.logger.info(`opening connection to ${O}`),l||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(O,[],!0),this.forEachObserver(R=>{R.messagingSessionDidStartConnecting&&R.messagingSessionDidStartConnecting(l)}),this.setUpEventListeners()})}prepareWebSocketUrl(l){return g(this,void 0,void 0,function*(){const y=new Map;return y.set("userArn",[this.configuration.userArn]),y.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===c.default.Connect&&y.set("prefetch-on",[c.default.Connect]),this.configuration.prefetchSortBy&&y.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",l,"/connect","",y)})}isClosed(){return this.webSocket.readyState()===r.default.None||this.webSocket.readyState()===r.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(l){try{const y=JSON.parse(l),T=y.Headers["x-amz-chime-event-type"],O=new o.default(T,y.Headers,y.Payload||null);if(!this.isSessionEstablished&&T==="SESSION_ESTABLISHED"){this.forEachObserver(F=>{F.messagingSessionDidStart&&F.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const R=this.preBootstrapMessages.length;for(let F=0;F<R;F++){const U=this.preBootstrapMessages.shift();this.forEachObserver(_=>{this.sendMessageToObserver(_,U)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(O);return}this.forEachObserver(R=>{this.sendMessageToObserver(R,O)})}catch(y){this.logger.error(`Messaging parsing failed: ${y}`)}}sendMessageToObserver(l,y){l.messagingSessionDidReceiveMessage&&l.messagingSessionDidReceiveMessage(y)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>g(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(l){this.logger.info(`WebSocket close: ${l.code} ${l.reason}`),l.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(l.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(y=>{y.messagingSessionDidStop&&y.messagingSessionDidStop(l)}):this.bootstrapRejected(l))}canReconnect(l){return l===1001||l===1006||l>=1011&&l<=1014||l>4e3&&l!==4002&&l!==4003&&l!==4401}constructor(l,y,T,O,R){this.configuration=l,this.logger=y,this.webSocket=T,this.reconnectController=O,this.sigV4=R,this.observerQueue=new Set,this.webSocket||(this.webSocket=new n.default(this.logger)),this.reconnectController||(this.reconnectController=new i.default(l.reconnectTimeoutMs,new m.default(l.reconnectFixedWaitMs,l.reconnectShortBackoffMs,l.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),s.default.addLogger(this.logger),s.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");d.default=f},papz:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.MeetingSessionStatusCode=void 0;var g;(function(p){p[p.OK=0]="OK",p[p.Left=1]="Left",p[p.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",p[p.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",p[p.AudioCallAtCapacity=4]="AudioCallAtCapacity",p[p.MeetingEnded=5]="MeetingEnded",p[p.AudioInternalServerError=6]="AudioInternalServerError",p[p.AudioServiceUnavailable=7]="AudioServiceUnavailable",p[p.AudioDisconnected=8]="AudioDisconnected",p[p.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",p[p.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",p[p.SignalingBadRequest=11]="SignalingBadRequest",p[p.SignalingInternalServerError=12]="SignalingInternalServerError",p[p.SignalingRequestFailed=13]="SignalingRequestFailed",p[p.ICEGatheringTimeoutWorkaround=14]="ICEGatheringTimeoutWorkaround",p[p.ConnectionHealthReconnect=15]="ConnectionHealthReconnect",p[p.RealtimeApiFailed=16]="RealtimeApiFailed",p[p.TaskFailed=17]="TaskFailed",p[p.IncompatibleSDP=18]="IncompatibleSDP",p[p.TURNCredentialsForbidden=19]="TURNCredentialsForbidden",p[p.NoAttendeePresent=20]="NoAttendeePresent",p[p.AudioAttendeeRemoved=21]="AudioAttendeeRemoved",p[p.AudioVideoWasRemovedFromPrimaryMeeting=22]="AudioVideoWasRemovedFromPrimaryMeeting",p[p.AudioDisconnectAudio=23]="AudioDisconnectAudio"})(g=d.MeetingSessionStatusCode||(d.MeetingSessionStatusCode={})),d.default=g},pewp:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=h("crgu"),m=p(h("sfTB"));let s=a(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(i){this.logger.error(`Event Reporting - Error starting the event buffer ${i}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(i){this.logger.error(`Event Reporting - Error stopping the event buffer ${i}`)}}reportEvent(i,e,t){return g(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${i}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:i,name:e,attributes:t})}catch(n){this.logger.error(`Event Reporting - Error adding event to buffer ${n}`)}})}destroy(){return g(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),u.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(i,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:n,eventBufferConfiguration:r}=i,{eventsToIgnore:c}=t;this.eventBuffer=new m.default(r,t,n,this.importantEvents,e),this.logger=e,this.eventsToIgnore=c,this.start()}},"DefaultMeetingEventReporter");d.default=s},plSA:function(W,d,h){"use strict";h.d(d,"b",function(){return g}),h.d(d,"a",function(){return p});const g={Channel:"channel",Im:"im",Workspace:"workspace"},p={Channel:"channel",Im:"im",Workspace:"workspace"}},ppUg:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("r3TB"));let u=a(class Ls{id(){return this._id}base(){return this._id?this._id.split(Ls.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const s=this._id.split(Ls.MODALITY_SEPARATOR);return s.length===2?s[1]:""}hasModality(s){return s!==""&&this.modality()===s}withModality(s){const o=new Ls(this.base()+Ls.MODALITY_SEPARATOR+s);return s===""||this.base()===""||new Ls(o._id).modality()!==s?new Ls(this.base()):o}constructor(s){this._id=s}},"DefaultModality");d.default=u,u.MODALITY_SEPARATOR=p.default.Modality[0],u.MODALITY_CONTENT=p.default.Modality.substr(1)},qhdC:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={},t=Object(s.a)("help.productHelpCard.list generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"help.productHelpCard.list",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to help.productHelpCard.list
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpProductHelpCardListFetcher",description:"help.productHelpCard.list generated fetcher"}},qr10:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={UserNotFound:"user_not_found",AlreadyInCall:"already_in_call",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",InvalidResponse:"invalid_response",InviteNotFound:"invite_not_found",PermissionDenied:"permission_denied",TeamNotFound:"team_not_found"},t=Object(s.a)("rooms.inviteResponse generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"rooms.inviteResponse",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to rooms.inviteResponse
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsInviteResponseFetcher",description:"rooms.inviteResponse generated fetcher"}},qvnc:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const g=h("jhQD");d.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let p=a(class{subscribeToTranscriptEvent(m){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(d.TRANSCRIPTION_DATA_MESSAGE_TOPIC,s=>{for(const o of g.TranscriptEventConverter.from(s))for(const i of this.transcriptEventCallbacks)i(o)}),this.transcriptEventCallbacks.add(m)}unsubscribeFromTranscriptEvent(m){this.transcriptEventCallbacks.delete(m),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(d.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(m){this.realtimeController=m,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");d.default=p},r3TB:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g;(function(p){p.Modality="#content"})(g||(g={})),d.default=g},r7zX:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});const p=h("KvYa"),u=h("nJ1/"),m={ready:0,enabled:1},s={disabled:0,enabled:1,stopped:2};let o=a(class extends u.VoiceFocusAudioWorkletNode{enable(){return g(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,s.enabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return g(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,s.disabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return g(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,m.enabled,s.stopped),Atomics.notify(this.state,m.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const n=e.data;switch(n.message){case"ready":if(!n.shared)throw new Error("No shared state.");this.state=new Int32Array(n.shared.state),this.port.postMessage(n);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(n);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(n);break;default:return}}onProcessorMessage(e){var t;const n=e.data;switch(n.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(n);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:n,resamplerURL:r,worker:c,fetchBehavior:f,delegate:S}=t;this.delegate=S,this.worker=c,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:l,supportFarendStream:y}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:l,model:n,supportFarendStream:y});const T=p.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:T,key:"resampler",fetchBehavior:f,path:r})}},"VoiceFocusWorkerBufferNode");d.default=o},r9Lw:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(u){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(u){}removeMediaStreamBrokerObserver(u){}},"NoOpMediaStreamBroker");d.default=g},rCkh:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("r3TB")),u=g(h("h96U")),m=h("T44/"),s=g(h("5/lR"));let o=a(class extends s.default{reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(e){super.updateIndex(e);const t=m.VideoPreferences.prepare();let n=!1;const r=e.remoteStreamDescriptions();for(const c of r)t.some(f=>f.attendeeId===c.attendeeId)||(c.attendeeId.endsWith(p.default.Modality)?(t.add(new u.default(c.attendeeId,1)),n=!0):t.add(new u.default(c.attendeeId,2)));n?(this.videoPreferences=t.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(e){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(e){super(e),this.logger=e,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");d.default=o},rEUf:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,d.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let g=a(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=d.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=d.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.prioritizedSendVideoCodecCapabilities=[],this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null}},"AudioVideoControllerState");d.default=g},rIeS:function(W,d,h){"use strict";var g=d;g.Service=h("DJgg")},rLvK:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(y,T,O,R){function F(U){return U instanceof O?U:new O(function(_){_(U)})}return a(F,"adopt"),new(O||(O=Promise))(function(U,_){function P(M){try{A(R.next(M))}catch(k){_(k)}}a(P,"fulfilled");function L(M){try{A(R.throw(M))}catch(k){_(k)}}a(L,"rejected");function A(M){M.done?U(M.value):F(M.value).then(P,L)}a(A,"step"),A((R=R.apply(y,T||[])).next())})},p=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(d,"__esModule",{value:!0});const u=h("XEV2"),m=h("GEtQ"),s=h("hlxM"),o=p(h("Sa54")),i=p(h("2y31")),e=h("R4Nl"),t=p(h("59sL")),n=p(h("KsuK")),r=h("2ede"),c=h("VcdL"),f=h("6qF3"),S=h("EjQB");let l=a(class va{process(T){return g(this,void 0,void 0,function*(){return T})}fxProcess(T){return g(this,void 0,void 0,function*(){const O=T[0].asCanvasElement();this.didStreamParametersChange(O)&&(yield this.adjustProcessorForNewStreamParameters(O));try{yield this.manageSegmentationMask(O)}catch(R){throw this.logger.error(R),new Error("Video stream could not be processed")}return yield this.renderer.render(O,this.segmentationMask),T[0]=this.canvasVideoFrameBuffer,T})}noOpProcess(T){return g(this,void 0,void 0,function*(){return T})}didStreamParametersChange(T){return T.width!==this.streamParameters.width||T.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(T){return g(this,void 0,void 0,function*(){this.streamParameters.width=T.width,this.streamParameters.height=T.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return g(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new r.DeferredPromise,this.engineWorker.postMessage({msg:f.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:f.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(T){return g(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const O=this.canvasOpsManager.getInferenceInputData(T);this.segmentationMask=yield this.generateSegmentationMask(O),this.segmentationRateManager.completeSegmentation()}}catch(O){throw this.logger.error(O.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(T){return g(this,void 0,void 0,function*(){va.isSharedArrayBufferSupported?(this.sharedImageData.set(T.data),this.engineWorker.postMessage({msg:f.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:f.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:T},[T.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(O){throw this.logger.error(O.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(T){return{backgroundBlur:{isEnabled:T.backgroundBlur.isEnabled,strength:T.backgroundBlur.strength},backgroundReplacement:{isEnabled:T.backgroundReplacement.isEnabled,backgroundImageURL:T.backgroundReplacement.backgroundImageURL,defaultColor:T.backgroundReplacement.defaultColor}}}setEffectConfig(T){return g(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(T,this.effectConfig))return;const O=this.cloneConfigFrom(T);try{yield this.validateEffectConfig(O)}catch(R){throw this.logger.error(R.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}O.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(O),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,O),this.effectConfig=O,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(T){return g(this,void 0,void 0,function*(){if(T.backgroundBlur.isEnabled&&T.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");T.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(T))})}validateReplacementConfig(T){return g(this,void 0,void 0,function*(){if(T.backgroundReplacement.backgroundImageURL&&T.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!T.backgroundReplacement.backgroundImageURL&&!T.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{T.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(T.backgroundReplacement.backgroundImageURL))}catch(R){throw this.logger.error(R.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const O=T.backgroundReplacement.defaultColor;if(O&&O!=="black"&&O!=="#000000"&&O!=="#000"){if(O.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(O))throw new Error(`Invalid hexadecimal color code for default replacement background: ${O}`);const F=document.createElement("canvas").getContext("2d"),U=F.fillStyle;if(F.fillStyle=O,F.fillStyle===U)throw new Error(`Invalid color for default replacement background: ${O}`)}})}validateProcessingBudgetPerFrame(T){if(T<f.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||T>f.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${f.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${f.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return g(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const T=this.getVideoFxAssetParams();yield this.loadEngineWorker(T),yield this.buildEngine(T),yield this.loadFxLib(T),this.renderer=constructRenderer(f.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,f.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(T){throw this.logger.error(T.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const T=e.getDefaultAssetSpec();return{assetGroup:T.assetGroup,revisionID:T.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(T,O){const R=new URL(T);for(const[F,U]of Object.entries(O))if(U!==void 0){const _=encodeURIComponent(F),P=encodeURIComponent(U);R.searchParams.set(_,P)}return R.toString()}loadEngineWorker(T){return g(this,void 0,void 0,function*(){try{const O=this.getPathFromVideoFxAssetParams(f.CDN_BASE_PATH+f.WORKER_PATH,T);this.engineWorker=yield m.loadWorker(O,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",R=>this.engineWorkerReceiver(R))}catch(O){throw this.logger.error(O.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(T){return g(this,void 0,void 0,function*(){this.buildEnginePromise=new r.DeferredPromise,this.engineWorker.postMessage({msg:f.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:f.CDN_BASE_PATH,sdkVersioningParams:T}});try{yield this.buildEnginePromise.getPromise()}catch(O){throw this.logger.error(O.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(T){return g(this,void 0,void 0,function*(){const O=this.getPathFromVideoFxAssetParams(f.CDN_BASE_PATH+f.FXLIB_PATH,T),R={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const F=yield u.fetchWithBehavior(O,R,{});if(!F.ok)throw new Error("Fetch failed.");const U=window.URL.createObjectURL(yield F.blob());yield new Promise((_,P)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",U),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",_),this.fxLibScript.addEventListener("error",P),document.body.appendChild(this.fxLibScript)})}catch(F){throw this.logger.error(F.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(T){const O=T.data;switch(O.msg){case f.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(O.payload);break;case f.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(O.payload.output);break;case f.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case f.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(O)}`);break}}settleEngineBuildPromise(T){T!==f.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(T){T?this.segmentationRequestPromise.resolveAndReplacePromise(T):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const T=new ImageData(new Uint8ClampedArray(this.sharedImageData),f.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,f.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(T)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new i.default,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return g(this,void 0,void 0,function*(){let R=!0;const F=a((P,L)=>{P&&(T.info(L),R=!1)},"checkEnv");F(typeof globalThis>"u","Browser does not have globalThis."),F(!s.supportsWorker(globalThis,T),"Browser does not support web workers."),F(!s.supportsWASM(globalThis,T),"Browser does not support wasm."),F(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const U=new o.default;F(!U.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const _=a(()=>g(this,void 0,void 0,function*(){if(O)try{const P=new va(T);yield P.loadAssets(),yield P.destroy()}catch{return T.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(R?yield _():!1)})}static create(T,O){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME;return g(this,void 0,void 0,function*(){const F=new va(T,R);try{return yield F.loadAssets(),yield F.setEffectConfig(O),F}catch(U){throw T.error(U.toString()),F.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(T){this.eventController?this.eventController=T:(this.eventController=T,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const T={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",T)}sameVideoFxConfig(T,O){return T.backgroundBlur.isEnabled===O.backgroundBlur.isEnabled&&T.backgroundBlur.strength===O.backgroundBlur.strength&&T.backgroundReplacement.backgroundImageURL===O.backgroundReplacement.backgroundImageURL&&T.backgroundReplacement.defaultColor===O.backgroundReplacement.defaultColor&&T.backgroundReplacement.isEnabled===O.backgroundReplacement.isEnabled}constructor(T,O=f.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,R){this.logger=T,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new n.default(this.outputCanvas);try{this.validateProcessingBudgetPerFrame(O)}catch(F){throw this.logger.error(F),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${O}`)}R&&(this.eventController=R),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new r.DeferredPromise,this.segmentationRateManager=new S.VideoFxSegmentationRateManager(this.logger,O),this.streamParameters={framerate:f.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:f.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:f.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:f.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},va.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(f.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*f.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${va.isSharedArrayBufferSupported}`),this.canvasOpsManager=new c.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${O}`)}},"VideoFxProcessor");d.default=l,l.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},rU8T:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0})},raQ4:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("CmE0")),m=p(h("3ZJV"));let s=a(class rc extends u.default{setImageBlob(i){return g(this,void 0,void 0,function*(){this.replacementBlob=i,this.replacementImage=yield rc.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(i,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:n,targetCanvas:r}=this,{width:c,height:f}=r;n.save(),n.clearRect(0,0,c,f),n.drawImage(this.scaledCanvas,0,0,c,f),n.globalCompositeOperation="source-in",n.drawImage(i,0,0,c,f),n.globalCompositeOperation="destination-over",n.drawImage(this.replacementImage,0,0,r.width,r.height),n.restore()}static loadImageExecutor(i,e,t){const n=new Image;n.crossOrigin="Anonymous",n.addEventListener("load",()=>{i(n)},!1),n.addEventListener("error",r=>{e(new Error(`Could not load replacement image ${n.src}: ${r.message}`))},!1),n.src=t}static loadImage(i){return g(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,i))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const i=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return g(this,void 0,void 0,function*(){this.replacementImage=yield rc.loadImage(this.createReplacementObjectUrl()),i.loadAssets.call(this)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});return g(this,void 0,void 0,function*(){i.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(i){this.eventController?this.eventController=i:(this.eventController=i,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const i={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",i)}constructor(i,e){super("background replacement",i,e,new m.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: ${this.stringify(e)}`)}},"BackgroundReplacementFilter");d.default=s},rbNI:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");d.default=g},rcF0:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("JTre"));let u=a(class{makeTile(s,o,i,e){return new p.default(s,o,i,e)}},"DefaultVideoTileFactory");d.default=u},reWd:function(W,d,h){"use strict";(function(g){var p=this&&this.__awaiter||function(e,t,n,r){function c(f){return f instanceof n?f:new n(function(S){S(f)})}return a(c,"adopt"),new(n||(n=Promise))(function(f,S){function l(O){try{T(r.next(O))}catch(R){S(R)}}a(l,"fulfilled");function y(O){try{T(r.throw(O))}catch(R){S(R)}}a(y,"rejected");function T(O){O.done?f(O.value):c(O.value).then(l,y)}a(T,"step"),T((r=r.apply(e,t||[])).next())})},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0});const m=u(h("BkFD")),s=u(h("KCGh")),o=u(h("mlaT"));let i=a(class oc{addEventListener(){!this.eventListener||!("window"in g)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in g)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(t){o.default.DEBUG<this.logLevel||(typeof t=="string"?this.log(o.default.DEBUG,t):t?this.log(o.default.DEBUG,t()):this.log(o.default.DEBUG,""+t))}info(t){this.log(o.default.INFO,t)}warn(t){this.log(o.default.WARN,t)}error(t){this.log(o.default.ERROR,t)}setLogLevel(t){this.logLevel=t}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new m.default(this.intervalMs),this.intervalScheduler.start(()=>p(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const t=this.logCapture.slice(0,this.batchSize),n=this.makeRequestBody(t);try{(yield fetch(this.url,Object.assign({method:"POST",body:n},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(t.length))}catch(r){console.warn("[POSTLogger] "+r.message)}finally{this.lock=!1}}))}stop(){var t;(t=this.intervalScheduler)===null||t===void 0||t.stop(),this.intervalScheduler=void 0,this.removeEventListener();const n=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,n)}destroy(){return p(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(t){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:t}))}log(t,n){if(t<this.logLevel)return;const r=Date.now();this.logCapture.push(new s.default(this.sequenceNumber,n,r,o.default[t])),this.sequenceNumber+=1}constructor(t){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:n,batchSize:r=oc.BATCH_SIZE,intervalMs:c=oc.INTERVAL_MS,logLevel:f=o.default.WARN,metadata:S,headers:l}=t;this.url=n,this.batchSize=r,this.intervalMs=c,this.logLevel=f,this.metadata=S,this.headers=l,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");d.default=i,i.BATCH_SIZE=85,i.INTERVAL_MS=2e3}).call(this,h("yLpj"))},rhlI:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class Ns{static isTimestampRecent(u,m){return Date.now()<u+m}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}isConnectionStartRecent(u){return Ns.isTimestampRecent(this.connectionStartTimestampMs,u)}isLastPacketLossRecent(u){return Ns.isTimestampRecent(this.lastPacketLossInboundTimestampMs,u)}isGoodSignalRecent(u){return Ns.isTimestampRecent(this.lastGoodSignalTimestampMs,u)}isWeakSignalRecent(u){return Ns.isTimestampRecent(this.lastWeakSignalTimestampMs,u)}isNoSignalRecent(u){return Ns.isTimestampRecent(this.lastNoSignalTimestampMs,u)}clone(){const u=new Ns;return u.connectionStartTimestampMs=this.connectionStartTimestampMs,u.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,u.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,u.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,u.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,u.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,u.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,u.consecutiveMissedPongs=this.consecutiveMissedPongs,u.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),u.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),u.audioSpeakerDelayMs=this.audioSpeakerDelayMs,u}setConsecutiveMissedPongs(u){this.consecutiveMissedPongs=u}setConsecutiveStatsWithNoPackets(u){this.consecutiveStatsWithNoPackets=u}setConsecutiveStatsWithNoAudioPacketsSent(u){this.consecutiveStatsWithNoAudioPacketsSent=u}setLastPacketLossInboundTimestampMs(u){this.lastPacketLossInboundTimestampMs=u}setLastNoSignalTimestampMs(u){this.lastNoSignalTimestampMs=u}setLastWeakSignalTimestampMs(u){this.lastWeakSignalTimestampMs=u}setLastGoodSignalTimestampMs(u){this.lastGoodSignalTimestampMs=u}setAudioSpeakerDelayMs(u){this.audioSpeakerDelayMs=u}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");d.default=g},riOr:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("OND3"));let m=a(class dl extends u.default{setEncodingParameters(o){return g(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(o.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(let n=0;n<t.encodings.length;n++)t.encodings[n].rid===u.default.LOW_LEVEL_NAME&&this.copyEncodingParams(o.get(u.default.LOW_LEVEL_NAME),t.encodings[n]),t.encodings[n].rid===u.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(o.get(u.default.HIGH_LEVEL_NAME),t.encodings[n]);yield i.setParameters(t),this.logVideoTransceiverParameters()})}constructor(o,i,e){super(o,i,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let n=0;n<dl.NAME_ARR_ASCENDING.length;n++){const r=dl.NAME_ARR_ASCENDING[n];this.videoQualityControlParameterMap.set(r,{rid:r,scaleResolutionDownBy:t,maxBitrate:dl.BITRATE_ARR_ASCENDING[n]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");d.default=m,m.NAME_ARR_ASCENDING=["low","hi"],m.BITRATE_ARR_ASCENDING=[300,1200]},riVe:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(R,F,U,_){function P(L){return L instanceof U?L:new U(function(A){A(L)})}return a(P,"adopt"),new(U||(U=Promise))(function(L,A){function M(K){try{G(_.next(K))}catch(H){A(H)}}a(M,"fulfilled");function k(K){try{G(_.throw(K))}catch(H){A(H)}}a(k,"rejected");function G(K){K.done?L(K.value):P(K.value).then(M,k)}a(G,"step"),G((_=_.apply(R,F||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.decideModel=d.measureAndDecideExecutionApproach=void 0;const p=h("GEtQ"),u=h("hlxM"),m=3,s=2.5,o=2.63,i=.6,e=.65,t=.5,n=.7,r={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let c=a(class{roundtrip(F,U,_){return new Promise((P,L)=>{this.worker.then(A=>{let M;M=a(k=>{const{message:G,key:K}=k.data;G===U&&K===_&&(A.removeEventListener("message",M),P(k.data))},"listener"),A.addEventListener("message",M),A.postMessage(F)}).catch(A=>{var M;(M=this.logger)===null||M===void 0||M.error("Failed to load worker.",A),L(A)})})}supportsSIMD(F){const U="simd",_=F||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,P={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:_,key:U};return this.roundtrip(P,"simd-support",U).then(L=>L.supports)}measure(F,U){const _=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,P=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,L=F?P:_,A=`bench:${F}`,M={message:"measure",fetchBehavior:this.fetchBehavior,budget:U,path:L,key:A};return this.roundtrip(M,"measurement",A).then(k=>{if(k.measurement)return k.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(F=>{var U;(U=this.logger)===null||U===void 0||U.debug("Stopping estimator worker."),F.terminate()}).catch(F=>{})}constructor(F,U){this.fetchConfig=F,this.logger=U;const _=`${F.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:F.headers,escapedQueryString:F.escapedQueryString},this.worker=p.loadWorker(_,"VoiceFocusEstimator",this.fetchBehavior,U)}},"Estimator");const f=a((R,F)=>R===1?i:F==="quality"?e*R:t*R,"inlineScoreMultiplier"),S=a(function(R){let{supportsSIMD:F,supportsSAB:U,duration:_,executionPreference:P="auto",simdPreference:L,variantPreference:A="auto",namePreference:M="default",usagePreference:k,executionQuantaPreference:G=m}=R,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,H=arguments.length>2?arguments[2]:void 0;const oe=L==="force"||L!=="disable"&&F,le=_!==-1,re=le?(oe?s:o)/_:0,he=oe?K.simd:K.wasm,Pe=le?f(G,k)*re:0,pe=le?n*re:0,Me=M,We=a(Xe=>({supported:!1,reason:Xe}),"unsupported");if(le){if(re<he.noSupport)return We(`Performance score ${re} worse than threshold ${he.noSupport}.`)}else if(P==="auto"||A==="auto")return We(`Missing explicit execution (${P}) or variant (${A}) preference, but no scoring performed.`);H==null||H.debug(`Bench duration ${_} yields inline score ${Pe} and worker score ${pe}.`);const Ae=a((Xe,je,Te)=>({supported:!0,useSIMD:oe,processor:Xe,executionApproach:je,variant:Te,executionQuanta:je==="inline"?G:void 0,name:Me}),"succeed"),lt=a((Xe,je,Te)=>je!=="auto"?!le||Xe>Te[je]?je:"failed":Xe>Te.c100?"c100":Xe>Te.c50?"c50":Xe>Te.c20?"c20":Xe>Te.c10?"c10":"failed","resolveVariant"),Ne=a(Xe=>{switch(Xe||"auto"){case"auto":{let je=Ne("inline"),Te=Ne("worker");return H==null||H.debug(`Reducing auto preference: ${JSON.stringify(je)} vs ${JSON.stringify(Te)}`),je.supported===!1||Te.supported===!1?Te:je.variant===Te.variant||je.variant==="c50"?je:Te}case"worker":return u.supportsSharedArrayBuffer(globalThis,window,H)?Ne("worker-sab"):Ne("worker-postMessage");case"inline":{const je=lt(Pe,A,he.inline);return je==="failed"?We(`Performance score ${Pe} not sufficient for inline use with variant preference ${A}.`):Ae("voicefocus-inline-processor","inline",je)}case"worker-sab":{if(!U){const Te="Requested worker-sab but no SharedArrayBuffer support.";return H==null||H.warn(Te),{supported:!1,reason:Te}}const je=lt(pe,A,he.worker);return je==="failed"?We(`Performance score ${pe} not sufficient for worker use with variant preference ${A}.`):Ae("voicefocus-worker-sab-processor","worker-sab",je)}case"worker-postMessage":{const je=lt(pe,A,he.worker);if(je==="failed")return We(`Performance score ${pe} not sufficient for worker use.`);if(Me==="ns_es"){const Te="Requested echo suppression but postMessage executor does not support it.";return H==null||H.warn(Te),{supported:!1,reason:Te}}return Ae("voicefocus-worker-postMessage-processor","worker-postMessage",je)}}},"reducePreference");return Ne(P)},"decideExecutionApproach"),l=a((R,F,U,_)=>g(void 0,void 0,void 0,function*(){const P={supportsSIMD:R,supportsSAB:u.supportsSharedArrayBuffer(globalThis,window,U),duration:-1};if(R)return U==null||U.info("Supports SIMD: true (force)"),P;const L=!_,A=_||new c(F,U);try{const M=!u.isOldChrome(window,U)&&(yield A.supportsSIMD());return U==null||U.info(`Supports SIMD: ${M} (force: ${R})`),P.supportsSIMD=M,P}finally{L&&A.stop()}}),"featureCheck"),y=a((R,F,U,_)=>g(void 0,void 0,void 0,function*(){const P=new c(F,_);try{const L=yield l(R,F,_,P);if(L.supportsSIMD)try{return L.duration=yield P.measure(!0,U),_==null||_.info("SIMD timing:",L.duration),L}catch{_==null||_.warn("Failed SIMD estimation; falling back to non-SIMD."),L.supportsSIMD=!1}return L.duration=yield P.measure(!1,U),_==null||_.info("No-SIMD timing:",L.duration),L}catch(L){throw _==null||_.error("Could not feature check.",L),L}finally{P.stop()}}),"estimateAndFeatureCheck"),T=a(function(R,F,U){let _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;return g(void 0,void 0,void 0,function*(){let P=R.executionPreference;const{usagePreference:L,variantPreference:A,namePreference:M,simdPreference:k,estimatorBudget:G,executionQuantaPreference:K}=R;L==="interactivity"&&P!=="inline"&&(U==null||U.debug(`Overriding execution preference ${P} to reflect interactivity preference.`),P="inline");const H=k==="force",X=A!=="auto",oe=P!=="auto";let le;try{X&&oe?le=yield l(H,F,U):le=yield y(H,F,G,U)}catch(re){throw U==null||U.error("Could not load estimator.",re),new Error("Could not load Voice Focus estimator.")}return S(Object.assign(Object.assign({},le),{simdPreference:k,executionPreference:P,variantPreference:A,namePreference:M,usagePreference:L,executionQuantaPreference:K}),_,U)})},"measureAndDecideExecutionApproach");d.measureAndDecideExecutionApproach=T;const O=a(R=>{let{category:F,name:U,variant:_,simd:P,url:L}=R;return`${F}-${U}-${_}-v1${P?"_simd":""}`},"decideModel");d.decideModel=O},rkwE:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("j+uH"));let m=a(class extends u.default{run(){var o,i;return g(this,void 0,void 0,function*(){if(!(!((i=(o=this.context.meetingSessionConfiguration)===null||o===void 0?void 0:o.urls)===null||i===void 0)&&i.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(o){super(o.logger),this.context=o,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");d.default=m},rw3l:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(r,c,f,S){function l(y){return y instanceof f?y:new f(function(T){T(y)})}return a(l,"adopt"),new(f||(f=Promise))(function(y,T){function O(U){try{F(S.next(U))}catch(_){T(_)}}a(O,"fulfilled");function R(U){try{F(S.throw(U))}catch(_){T(_)}}a(R,"rejected");function F(U){U.done?y(U.value):l(U.value).then(O,R)}a(F,"step"),F((S=S.apply(r,c||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("ZS2b")),m=p(h("ppUg")),s=p(h("CAce")),o=p(h("HbHZ")),i=h("XCDq"),e=h("Aplu"),t=p(h("j+uH"));let n=a(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return g(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(c){if(c.type!==o.default.ReceivedSignalFrame||c.message.type!==i.SdkSignalFrame.Type.INDEX)return;const f=c.message.index;this.context.logger.info(`received new index ${JSON.stringify(f)}`),this.handleIndexFrame(f)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(c){if(!c)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=c;return}else this.pendingIndex=null;const f=this.context.audioVideoController.configuration.credentials.attendeeId;c.sources=c.sources.filter(R=>{const F=new m.default(R.attendeeId);return!(F.base()===f&&F.hasModality(m.default.MODALITY_CONTENT))});const{videoStreamIndex:S,videoDownlinkBandwidthPolicy:l,videoUplinkBandwidthPolicy:y}=this.context,T=S.allVideoSendingSourcesExcludingSelf(f);S.integrateIndexFrame(c),l.updateIndex(S),y.updateIndex(S),this.resubscribe(l,y),this.updateVideoAvailability(c),this.handleIndexVideosPausedAtSource(),c.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(c);const O=S.allVideoSendingSourcesExcludingSelf(f);this.areVideoSourcesEqual(T,O)||this.context.audioVideoController.forEachObserver(R=>{e.Maybe.of(R.remoteVideoSourcesDidChange).map(F=>F.bind(R)(O))})}areVideoSourcesEqual(c,f){if(c.length!==f.length)return!1;const S=a((T,O)=>T.attendee.attendeeId.localeCompare(O.attendee.attendeeId),"compare"),l=[...c].sort(S),y=[...f].sort(S);for(let T=0;T<l.length;T++)if(l[T].attendee.attendeeId!==y[T].attendee.attendeeId)return!1;return!0}resubscribe(c,f){const S=c.wantsResubscribe(),l=(this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX)&&f.wantsResubscribe(),y=S||l;if(this.logger.info(`should resubscribe: ${y} (downlink: ${S} uplink: ${l})`),!y)return;const T=c.chooseSubscriptions();this.context.videosToReceive=T.truncate(this.context.videoSubscriptionLimit),T.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=f.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${l} down=${S}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(c){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const f=new u.default;f.remoteVideoAvailable=!this.context.videosToReceive.empty(),f.canStartLocalVideo=!c.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(f))&&(this.context.lastKnownVideoAvailability=f.clone(),this.context.audioVideoController.forEachObserver(S=>{e.Maybe.of(S.videoAvailabilityDidChange).map(l=>l.bind(S)(f.clone()))}))}handleSupportedVideoReceiveCodecIntersection(c){if(this.context.videoSendCodecPreferences===void 0)return;const f=[];let S=!1;for(const l of this.context.videoSendCodecPreferences)for(const y of c.supportedReceiveCodecIntersection)if(l.equals(s.default.fromSignaled(y))){f.push(l);break}if(f.length>0){const l=f.find(y=>this.context.prioritizedSendVideoCodecCapabilities.some(T=>y.equals(T)));this.context.currentVideoSendCodec!==void 0&&(l===void 0||!this.context.currentVideoSendCodec.equals(l))&&(S=!0),this.context.meetingSupportedVideoSendCodecPreferences=f}else this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0;this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),S&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const c=this.context.videoStreamIndex.streamsPausedAtSource();for(const f of this.context.videoTileController.getAllVideoTiles()){const S=f.state();c.contain(S.streamId)?f.markPoorConnection()&&this.logger.info(`marks the tile ${S.tileId} as having a poor connection`):f.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${S.tileId} as having a poor connection`)}}constructor(c){super(c.logger),this.context=c,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");d.default=n},rwhO:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.isDestroyable=void 0;function g(p){return p&&"destroy"in p}a(g,"isDestroyable"),d.isDestroyable=g},s0Ci:function(W,d,h){"use strict";W.exports=o;var g=h("kU+7"),p,u=g.LongBits,m=g.utf8;function s(c,f){return RangeError("index out of range: "+c.pos+" + "+(f||1)+" > "+c.len)}a(s,"indexOutOfRange");function o(c){this.buf=c,this.pos=0,this.len=c.length}a(o,"Reader");var i=typeof Uint8Array<"u"?a(function(f){if(f instanceof Uint8Array||Array.isArray(f))return new o(f);throw Error("illegal buffer")},"create_typed_array"):a(function(f){if(Array.isArray(f))return new o(f);throw Error("illegal buffer")},"create_array"),e=a(function(){return g.Buffer?a(function(S){return(o.create=a(function(y){return g.Buffer.isBuffer(y)?new p(y):i(y)},"create_buffer"))(S)},"create_buffer_setup"):i},"create");o.create=e(),o.prototype._slice=g.Array.prototype.subarray||g.Array.prototype.slice,o.prototype.uint32=a(function(){var f=4294967295;return a(function(){if(f=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(f=(f|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(f=(f|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(f=(f|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(f=(f|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return f;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return f},"read_uint32")},"read_uint32_setup")(),o.prototype.int32=a(function(){return this.uint32()|0},"read_int32"),o.prototype.sint32=a(function(){var f=this.uint32();return f>>>1^-(f&1)|0},"read_sint32");function t(){var c=new u(0,0),f=0;if(this.len-this.pos>4){for(;f<4;++f)if(c.lo=(c.lo|(this.buf[this.pos]&127)<<f*7)>>>0,this.buf[this.pos++]<128)return c;if(c.lo=(c.lo|(this.buf[this.pos]&127)<<28)>>>0,c.hi=(c.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return c;f=0}else{for(;f<3;++f){if(this.pos>=this.len)throw s(this);if(c.lo=(c.lo|(this.buf[this.pos]&127)<<f*7)>>>0,this.buf[this.pos++]<128)return c}return c.lo=(c.lo|(this.buf[this.pos++]&127)<<f*7)>>>0,c}if(this.len-this.pos>4){for(;f<5;++f)if(c.hi=(c.hi|(this.buf[this.pos]&127)<<f*7+3)>>>0,this.buf[this.pos++]<128)return c}else for(;f<5;++f){if(this.pos>=this.len)throw s(this);if(c.hi=(c.hi|(this.buf[this.pos]&127)<<f*7+3)>>>0,this.buf[this.pos++]<128)return c}throw Error("invalid varint encoding")}a(t,"readLongVarint"),o.prototype.bool=a(function(){return this.uint32()!==0},"read_bool");function n(c,f){return(c[f-4]|c[f-3]<<8|c[f-2]<<16|c[f-1]<<24)>>>0}a(n,"readFixed32_end"),o.prototype.fixed32=a(function(){if(this.pos+4>this.len)throw s(this,4);return n(this.buf,this.pos+=4)},"read_fixed32"),o.prototype.sfixed32=a(function(){if(this.pos+4>this.len)throw s(this,4);return n(this.buf,this.pos+=4)|0},"read_sfixed32");function r(){if(this.pos+8>this.len)throw s(this,8);return new u(n(this.buf,this.pos+=4),n(this.buf,this.pos+=4))}a(r,"readFixed64"),o.prototype.float=a(function(){if(this.pos+4>this.len)throw s(this,4);var f=g.float.readFloatLE(this.buf,this.pos);return this.pos+=4,f},"read_float"),o.prototype.double=a(function(){if(this.pos+8>this.len)throw s(this,4);var f=g.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,f},"read_double"),o.prototype.bytes=a(function(){var f=this.uint32(),S=this.pos,l=this.pos+f;if(l>this.len)throw s(this,f);if(this.pos+=f,Array.isArray(this.buf))return this.buf.slice(S,l);if(S===l){var y=g.Buffer;return y?y.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,S,l)},"read_bytes"),o.prototype.string=a(function(){var f=this.bytes();return m.read(f,0,f.length)},"read_string"),o.prototype.skip=a(function(f){if(typeof f=="number"){if(this.pos+f>this.len)throw s(this,f);this.pos+=f}else do if(this.pos>=this.len)throw s(this);while(this.buf[this.pos++]&128);return this},"skip"),o.prototype.skipType=function(c){switch(c){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(c=this.uint32()&7)!==4;)this.skipType(c);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+c+" at offset "+this.pos)}return this},o._configure=function(c){p=c,o.create=e(),p._configure();var f=g.Long?"toLong":"toNumber";g.merge(o.prototype,{int64:a(function(){return t.call(this)[f](!1)},"read_int64"),uint64:a(function(){return t.call(this)[f](!0)},"read_uint64"),sint64:a(function(){return t.call(this).zzDecode()[f](!1)},"read_sint64"),fixed64:a(function(){return r.call(this)[f](!0)},"read_fixed64"),sfixed64:a(function(){return r.call(this)[f](!1)},"read_sfixed64")})}},s3Gi:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckContentShareConnectivityFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.Failed=1]="Failed",p[p.PermissionDenied=2]="PermissionDenied",p[p.TimedOut=3]="TimedOut",p[p.ConnectionFailed=4]="ConnectionFailed"})(g=d.CheckContentShareConnectivityFeedback||(d.CheckContentShareConnectivityFeedback={})),d.default=g},sSHp:function(W,d,h){"use strict";h.d(d,"a",function(){return e});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e=Object(s.a)("help.issues.ticketStats generated fetcher",function(){var t=Object(g.coroutine)(function*(n,r,c){try{const f=["reason"],S=Object(u.a)(c,f),l=Object(i.b)(S);return yield n(Object(m.apiCall)({method:"help.issues.ticketStats",args:l,reason:c.reason}))}catch(f){throw Object(o.a)({getState:r}).error(`API call to help.issues.ticketStats
				with reason ${c.reason} failed, initiated by generated fetcher`),f}});return function(n,r,c){return t.apply(this,arguments)}}());e.meta={name:"createFetcher",key:"createFetcherhelpIssuesTicketStatsFetcher",description:"help.issues.ticketStats generated fetcher"}},sTsL:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckVideoConnectivityFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.VideoInputRequestFailed=1]="VideoInputRequestFailed",p[p.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",p[p.ConnectionFailed=3]="ConnectionFailed",p[p.VideoNotSent=4]="VideoNotSent"})(g=d.CheckVideoConnectivityFeedback||(d.CheckVideoConnectivityFeedback={})),d.default=g},sd34:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.numToUint8=void 0;function g(p){return new Uint8Array([(p&4278190080)>>24,(p&16711680)>>16,(p&65280)>>8,p&255])}a(g,"numToUint8"),d.numToUint8=g},sdHd:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{reportEvent(u,m,s){}start(){}stop(){}constructor(){}},"NoOpEventReporter");d.default=g},sf8V:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("KJDN"));let u=a(class extends p.default{constructor(s){super(s),this.name="TypeError"}},"TypeError");d.default=u},sfTB:function(W,d,h){"use strict";(function(g){var p=this&&this.__awaiter||function(n,r,c,f){function S(l){return l instanceof c?l:new c(function(y){y(l)})}return a(S,"adopt"),new(c||(c=Promise))(function(l,y){function T(F){try{R(f.next(F))}catch(U){y(U)}}a(T,"fulfilled");function O(F){try{R(f.throw(F))}catch(U){y(U)}}a(O,"rejected");function R(F){F.done?l(F.value):S(F.value).then(T,O)}a(R,"step"),R((f=f.apply(n,r||[])).next())})},u=this&&this.__rest||function(n,r){var c={};for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&r.indexOf(f)<0&&(c[f]=n[f]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,f=Object.getOwnPropertySymbols(n);S<f.length;S++)r.indexOf(f[S])<0&&Object.prototype.propertyIsEnumerable.call(n,f[S])&&(c[f[S]]=n[f[S]]);return c},m=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(d,"__esModule",{value:!0});const s=m(h("cKqT")),o=m(h("BkFD")),i=m(h("BEtg")),e=h("VCUZ");let t=a(class es{addEventListeners(){!this.beaconEventListener||!("window"in g)||!window.addEventListener||!("document"in g)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(r){(r.type==="visibilitychange"&&document.visibilityState==="hidden"||r.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in g)||!window.removeEventListener||!("document"in g)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var r;this.removeEventListeners(),this.addEventListeners(),(r=this.intervalScheduler)===null||r===void 0||r.stop(),this.intervalScheduler=new o.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var r;(r=this.intervalScheduler)===null||r===void 0||r.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(r){return p(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(r)}`);const{name:c,ts:f,attributes:S}=r,l=S&&this.filterAttributes(S,this.attributesToFilter),y=Object.assign({name:c,ts:f},l);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(y)}`);const T=this.getSize(y);if(T>es.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${T} bytes. Item cannot exceed max item size allowed of ${es.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(c)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(y)}`),this.sendEventImmediately({name:c,ts:f,attributes:l});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(y),this.ingestionEventSize+=T,this.bufferItemThresholdReached(T)){const O=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(O),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(r,c){const f=new Set(c);return Object.keys(r).filter(l=>f.has(l)).forEach(l=>delete r[l]),r}initializeAndGetCurrentIngestionEvent(){const r={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(r),r}bufferItemThresholdReached(r){return r+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===es.MAX_PAYLOAD_ITEMS}getSize(r){let c=0;if(typeof r=="object")for(const[f,S]of Object.entries(r))c+=this.getPrimitiveSize(f),c+=this.getSize(S);else c+=this.getPrimitiveSize(r);return c}getPrimitiveSize(r){let c=0;return typeof r=="string"?c+=r.length*2:typeof r=="number"&&(c+=8),c}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(r){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(r=Math.min(this.buffer.length,r+1),this.buffer.splice(c,r))}makeBeaconRequestBody(r){const c={metadata:this.metadata,events:r,authorization:this.authenticationToken};return JSON.stringify(c)}makeRequestBody(r){const c={metadata:this.metadata,events:r};return JSON.stringify(c)}sendEventImmediately(r){return p(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(r)}`);const{name:c,ts:f,attributes:S}=r,l={type:this.type,v:this.v,payloads:[Object.assign({name:c,ts:f},S)]};let y=!1,T=null;const O=this.makeRequestBody([l]);try{if(T=yield this.send(O),T.ok){try{const R=yield T.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${O}, message: ${JSON.stringify(R)}`)}catch(R){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${R} for event ${O}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${O} with response status ${T.status}`),y=!0}catch(R){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${O} to the ingestion endpoint ${R}.`),y=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const F=this.makeBeaconRequestBody([l]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${F}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,F)?y=!1:y=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${O}`),y=!0}}y&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${O}`),this.failedIngestionEvents.push(l))})}send(r){return p(this,void 0,void 0,function*(){const c=new s.default(es.RETRY_FIXED_BACKOFF_WAIT_MS,es.RETRY_SHORT_BACKOFF_MS,es.RETRY_LONG_BACKOFF_MS);try{let f=0;for(;f<this.retryCountLimit;){const S=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:r});if(S.ok||!es.SENDING_FAILURE_CODES.has(S.status))return S;if(this.logger.warn(`Will retry sending failure for ${r} due to status code ${S.status}.`),f++,f<this.retryCountLimit){const l=c.nextBackoffAmountMs();yield e.wait(l)}}if(f===this.retryCountLimit)throw new Error(`Retry count limit reached for ${r}`)}catch(f){throw f}})}sendBeacon(){return p(this,void 0,void 0,function*(){const r=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(r)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const f=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);r.push(f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(f)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const f=this.failedIngestionEvents.map(S=>this.deepCopyCurrentIngestionEvent(S));r.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(f)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(f=>{r.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(f)}`)}),this.cancellableEvents.clear()),r.length===0)return;const c=this.makeBeaconRequestBody(r);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${c}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,c)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${c}`)}catch(f){this.logger.warn(`Event Reporting - Sending beacon data ${c} failed with error ${f}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return p(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(r,c,f,S,l){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=G=>({type:G.type,v:G.v,payloads:[...G.payloads]}),this.sendEvents=()=>p(this,void 0,void 0,function*(){if(this.lock)return;const G=this.getItems(this.flushSize);if(G.length===0)return;this.lock=!0;const K=this.makeRequestBody(G);let H=!1;const X=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(X,G);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${K}`);const oe=yield this.send(K);if(this.cancellableEvents.delete(X),!oe.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${K} with response status ${oe.status}`),H=!0;else try{const le=yield oe.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${K} message: ${JSON.stringify(le)}`)}catch(le){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${le} for events ${K}`)}}catch(oe){H=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${K} to the ingestion endpoint ${oe}`)}finally{this.lock=!1}H&&(this.cancellableEvents.delete(X),this.failedIngestionEvents.push(...G))});const y=new i.default(l).getParserResult(),{browserMajorVersion:T}=y,O=u(y,["browserMajorVersion"]),R=c.toJSON(),{type:F,v:U}=R,_=u(R,["type","v"]);this.authenticationToken=c.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},O),_),Object.keys(this.metadata).forEach(G=>this.attributesToFilter.push(G)),this.type=F,this.v=U,this.ingestionURL=f,this.logger=l,this.importantEvents=new Set(S);const{maxBufferCapacityKb:P,totalBufferItems:L,flushSize:A,flushIntervalMs:M,retryCountLimit:k}=r;this.maxBufferCapacityBytes=P*1024,this.totalBufferItems=L,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/L),this.flushIntervalMs=M,this.flushSize=A,this.retryCountLimit=k,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=G=>this.beaconEventHandler(G),this.addEventListeners()}},"InMemoryJSONEventBuffer");d.default=t,t.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),t.RETRY_FIXED_BACKOFF_WAIT_MS=0,t.RETRY_SHORT_BACKOFF_MS=1e3,t.RETRY_LONG_BACKOFF_MS=15e3,t.MAX_PAYLOAD_ITEMS=2,t.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3}).call(this,h("yLpj"))},sudc:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(A,M,k,G){function K(H){return H instanceof k?H:new k(function(X){X(H)})}return a(K,"adopt"),new(k||(k=Promise))(function(H,X){function oe(he){try{re(G.next(he))}catch(Pe){X(Pe)}}a(oe,"fulfilled");function le(he){try{re(G.throw(he))}catch(Pe){X(Pe)}}a(le,"rejected");function re(he){he.done?H(he.value):K(he.value).then(oe,le)}a(re,"step"),re((G=G.apply(A,M||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.getAudioInput=d.createAudioContext=d.VoiceFocus=void 0;const p=h("hxn6"),u=h("o3U+"),m=h("EkyC"),s=h("KvYa"),o=h("tFDz"),i=h("r7zX"),e=h("9AGb"),n={useVoiceFocusAGC:!1,useBuiltInAGC:!0},r="stable-v1",c="https://static.sdkassets.chime.aws",f={processors:`${c}/processors/`,workers:`${c}/workers/`,wasm:`${c}/wasm/`,models:`${c}/wasm/`},S={latencyHint:0},l={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},y=Object.assign(Object.assign({},l),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),T=Object.assign(Object.assign({},l),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),O={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:i.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:o.default}},R=a((A,M)=>{if(A!==void 0&&!u.isValidAssetGroup(A))throw new Error(`Invalid asset group ${A}`);if(M!==void 0&&!u.isValidRevisionID(M))throw new Error(`Invalid revision ID ${M}`)},"validateAssetSpec"),F=a((A,M)=>{let k;if(M.useBuiltInAGC?k=y:k=T,!A)return{audio:k};if(!A.audio)return A;if(A.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},A),{audio:A.audio===!0?k:Object.assign(Object.assign({},A.audio),k)})},"mungeConstraints"),U=a((A,M)=>`${M.models}${p.decideModel(A)}.wasm`,"urlForModel");let _=a(class rf{static isSupported(M,k){const{fetchBehavior:G,logger:K}=k||{};if(typeof globalThis>"u")return K==null||K.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!s.supportsAudioWorklet(globalThis,K))return K==null||K.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!s.supportsWASM(globalThis,K))return K==null||K.debug("Browser does not support WASM."),Promise.resolve(!1);s.supportsWASMStreaming(globalThis,K)||K==null||K.debug("Browser does not support streaming WASM compilation.");const{assetGroup:H=r,revisionID:X,paths:oe=f}=M||{};R(H,X);const le=X?{revisionID:X}:{assetGroup:H},re=u.addQueryParams(G,le),he=Object.assign(Object.assign({},re),{paths:oe});return s.supportsVoiceFocusWorker(globalThis,he,K)}static mungeExecutionPreference(M,k){const G=M===void 0||M==="auto";if(s.isSafari(globalThis)){if(G||M==="inline")return"inline";if(!G)throw new Error(`Unsupported execution preference ${M}`)}if(M==="worker-sab"&&!s.supportsSharedArrayBuffer(globalThis,globalThis,k))throw new Error(`Unsupported execution preference ${M}`);return M||"auto"}static configure(M,k){return g(this,void 0,void 0,function*(){const{fetchBehavior:G,preResolve:K,logger:H}=k||{},{category:X="voicefocus",name:oe="default",variant:le="auto",assetGroup:re=r,revisionID:he,simd:Pe="detect",executionPreference:pe="auto",executionQuantaPreference:Me,usagePreference:We="interactivity",estimatorBudget:Ae=100,paths:lt=f,thresholds:Ne}=M||{};if(H==null||H.debug("Configuring Voice Focus with spec",M),X!==void 0&&X!=="voicefocus")throw new Error(`Unrecognized category ${X}`);if(oe!==void 0&&oe!=="default"&&oe!=="ns_es")throw new Error(`Unrecognized feature name ${oe}`);if(le!==void 0&&!["auto","c100","c50","c20","c10"].includes(le))throw new Error(`Unrecognized feature variant ${le}`);if(Me!==void 0&&![1,2,3].includes(Me))throw new Error(`Unrecognized execution quanta preference ${Me}`);if(R(re,he),Pe!==void 0&&!["detect","force","disable"].includes(Pe))throw new Error(`Unrecognized SIMD option ${Pe}`);if(pe!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(pe))throw new Error(`Unrecognized execution preference ${pe}`);if(We!==void 0&&!["quality","interactivity"].includes(We))throw new Error(`Unrecognized usage preference ${We}`);const Xe={executionPreference:this.mungeExecutionPreference(pe,H),usagePreference:We,executionQuantaPreference:Me,variantPreference:le,namePreference:oe,simdPreference:Pe,estimatorBudget:Ae},je=he?{revisionID:he}:{assetGroup:re},Te=u.addQueryParams(G,je),At=Object.assign({paths:lt},Te),sn=yield p.measureAndDecideExecutionApproach(Xe,At,H,Ne);if(sn.supported===!1)return{supported:!1,reason:sn.reason};H==null||H.info("Decided execution approach",sn);const{useSIMD:Dt,processor:tn,variant:Yt,executionQuanta:Tn}=sn,Xt={category:X||"voicefocus",name:oe||"default",variant:Yt,simd:Dt};if(K){const Cn=U(Xt,lt);Xt.url=yield u.resolveURL(Cn,Te)}return{fetchConfig:At,model:Xt,processor:tn,executionQuanta:Tn,supported:!0}})}static init(M,k){let{delegate:G,preload:K=!0,logger:H}=k;return g(this,void 0,void 0,function*(){if(M.supported===!1)throw new Error("Voice Focus not supported. Reason: "+M.reason);const{model:X,processor:oe,fetchConfig:le,executionQuanta:re}=M,{simd:he,name:Pe}=X,{paths:pe}=le;if(oe!=="voicefocus-inline-processor"&&oe!=="voicefocus-worker-postMessage-processor"&&oe!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${oe}`);const Me=X.url||U(X,pe);H==null||H.debug(`Using model URL ${Me}.`);const We=`${pe.wasm}audio_buffer-v1${he?"_simd":""}.wasm`,Ae=`${pe.wasm}resampler-v1${he?"_simd":""}.wasm`,lt=`${pe.workers}worker-v1.js`,{file:Ne,node:Xe}=O[oe],je=`${pe.processors}${Ne}`,Te=yield m.loadWorker(lt,"VoiceFocusWorker",le,H);if(K){H==null||H.debug("Preloading",Me);let tn=s.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";Te.postMessage({message:tn,preload:!0,key:"model",fetchBehavior:le,path:Me})}const sn={processor:oe,worker:Te,audioBufferURL:We,resamplerURL:Ae,fetchBehavior:le,modelURL:Me,delegate:G,logger:H,numberOfInputs:Pe==="ns_es"?2:1},Dt=new rf(Te,je,Xe,sn,re);return Promise.resolve(Dt)})}createNode(M,k){var G;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:K=M.sampleRate===16e3?16e3:48e3,enabled:H=!0,agc:X=n}=k||{},oe=k==null?void 0:k.es,le={voiceFocusSampleRate:K,enabled:H,sendBufferCount:10,prefill:6,agc:X,executionQuanta:this.executionQuanta,supportFarendStream:oe},re=u.withQueryString(this.processorURL,(G=this.nodeOptions)===null||G===void 0?void 0:G.fetchBehavior);return M.audioWorklet.addModule(re).then(()=>new this.nodeConstructor(M,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:le})))}applyToStream(M,k,G){return g(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const K=k.createMediaStreamSource(M),H=yield this.applyToSourceNode(K,k,G),X=k.createMediaStreamDestination();return H.connect(X),{node:H,source:K,destination:X,stream:X.stream}})}applyToSourceNode(M,k,G){return g(this,void 0,void 0,function*(){const K=yield this.createNode(k,G);return M.connect(K),K})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(M,k,G,K,H){this.processorURL=k,this.nodeConstructor=G,this.nodeOptions=K,this.executionQuanta=H,this.internal={worker:M,nodeOptions:K,isDestroyed:!1}}},"VoiceFocus");d.VoiceFocus=_;const P=a(function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S;return new(window.AudioContext||window.webkitAudioContext)(A)},"createAudioContext");d.createAudioContext=P;const L=a((A,M,k)=>g(void 0,void 0,void 0,function*(){var G,K;const{constraints:H,spec:X,delegate:oe,preload:le=!0,options:re}=M,{logger:he}=k,Pe=yield _.configure(X,k);if(!Pe.supported)return(G=k.logger)===null||G===void 0||G.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(H);const pe=yield _.init(Pe,{delegate:oe,preload:le,logger:he}),Me=((K=M.options)===null||K===void 0?void 0:K.agc)||n,We=yield window.navigator.mediaDevices.getUserMedia(F(H,Me));return pe.applyToStream(We,A,re).then(Ae=>Ae.stream)}),"getAudioInput");d.getAudioInput=L},syoQ:function(W){W.exports=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}')},"t4/s":function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={AuthError:"auth_error"},t=Object(s.a)("search.autocomplete.triggers generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"search.autocomplete.triggers",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to search.autocomplete.triggers
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersearchAutocompleteTriggersFetcher",description:"search.autocomplete.triggers generated fetcher"}},t9Fz:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(u,m,s,o){function i(e){return e instanceof s?e:new s(function(t){t(e)})}return a(i,"adopt"),new(s||(s=Promise))(function(e,t){function n(f){try{c(o.next(f))}catch(S){t(S)}}a(n,"fulfilled");function r(f){try{c(o.throw(f))}catch(S){t(S)}}a(r,"rejected");function c(f){f.done?e(f.value):i(f.value).then(n,r)}a(c,"step"),c((o=o.apply(u,m||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});let p=a(class{destroy(){return g(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(m){this.observerQueue.add(m),m.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(m){this.observerQueue.delete(m)}constructor(m,s){if(this.devicePixelRatioSource=m,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(i=>{i.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const o=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof o.addEventListener=="function"?(o.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=o):typeof o.addListener=="function"?(o.addListener(this.mediaQueryListener),this.mediaQueryList=o):s.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");d.default=p},tA0R:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(Si){return Si&&Si.__esModule?Si:{default:Si}};Object.defineProperty(d,"__esModule",{value:!0}),d.DefaultEventController=d.DefaultDevicePixelRatioMonitor=d.DefaultDeviceController=d.DefaultContentShareController=d.DefaultBrowserBehavior=d.DefaultAudioVideoFacade=d.DefaultAudioVideoController=d.DefaultAudioMixController=d.DefaultActiveSpeakerPolicy=d.DefaultActiveSpeakerDetector=d.DataMessage=d.CreateSDPTask=d.CreatePeerConnectionTask=d.ContentShareMediaStreamBroker=d.ContentShareConstants=d.ConsoleLogger=d.ConnectionHealthPolicyConfiguration=d.ConnectionHealthData=d.ClientVideoStreamReceivingReport=d.ClientMetricReportMediaType=d.ClientMetricReportDirection=d.ClientMetricReport=d.CleanStoppedSessionTask=d.CleanRestartedSessionTask=d.CheckVideoInputFeedback=d.CheckVideoConnectivityFeedback=d.CheckNetworkUDPConnectivityFeedback=d.CheckNetworkTCPConnectivityFeedback=d.CheckContentShareConnectivityFeedback=d.CheckCameraResolutionFeedback=d.CheckAudioOutputFeedback=d.CheckAudioInputFeedback=d.CheckAudioConnectivityFeedback=d.CanvasVideoFrameBuffer=d.CSPMonitor=d.BitrateParameters=d.BaseTask=d.BaseConnectionHealthPolicy=d.BackgroundReplacementVideoFrameProcessor=d.BackgroundFilterVideoFrameProcessor=d.BackgroundBlurVideoFrameProcessor=d.BackgroundBlurStrength=d.AudioVideoControllerState=d.AudioProfile=d.AudioLogEvent=d.Attendee=d.AttachMediaInputTask=d.AsyncScheduler=d.ApplicationMetadata=d.AllHighestVideoBandwidthPolicy=void 0,d.MeetingReadinessCheckerConfiguration=d.MeetingFeatures=d.MeetingEventsClientConfiguration=d.MediaDeviceProxyHandler=d.Maybe=d.LogLevel=d.Log=d.ListenForVolumeIndicatorsTask=d.LeaveAndReceiveLeaveAckTask=d.JoinAndReceiveIndexTask=d.IntervalScheduler=d.InMemoryJSONEventBuffer=d.GlobalMetricReport=d.GetUserMediaError=d.FullJitterLimitedBackoff=d.FullJitterBackoffFactory=d.FullJitterBackoff=d.FinishGatheringICECandidatesTask=d.EventIngestionConfiguration=d.EventBufferConfiguration=d.DeviceSelection=d.DevicePixelRatioWindowSource=d.DefaultWebSocketAdapter=d.DefaultVolumeIndicatorAdapter=d.DefaultVideoTransformDevice=d.DefaultVideoTileFactory=d.DefaultVideoTileController=d.DefaultVideoTile=d.DefaultVideoStreamIndex=d.DefaultVideoStreamIdSet=d.DefaultVideoFrameProcessorTimer=d.DefaultVideoFrameProcessorPipeline=d.DefaultVideoCaptureAndEncodeParameter=d.DefaultUserAgentParser=d.DefaultTranscriptionController=d.DefaultTransceiverController=d.DefaultSimulcastUplinkPolicyForContentShare=d.DefaultSimulcastUplinkPolicy=d.DefaultSignalingClient=d.DefaultSigV4=d.DefaultSessionStateController=d.DefaultReconnectController=d.DefaultRealtimeController=d.DefaultPingPong=d.DefaultModality=d.DefaultMessagingSession=d.DefaultMeetingSession=d.DefaultMeetingReadinessChecker=d.DefaultMeetingEventReporter=d.DefaultMediaDeviceFactory=void 0,d.RedundantAudioEncoderWorkerCode=d.RedundantAudioEncoder=d.ReconnectionHealthPolicy=d.ReceiveVideoStreamIndexTask=d.ReceiveVideoInputTask=d.ReceiveRemoteVideoPauseResumeTask=d.ReceiveAudioInputTask=d.RealtimeVolumeIndicator=d.RealtimeState=d.RealtimeAttendeePositionInFrame=d.PromoteToPrimaryMeetingTask=d.PromiseQueue=d.PrefetchSortBy=d.PrefetchOn=d.PermissionDeniedError=d.ParallelGroupTask=d.POSTLogger=d.OverconstrainedError=d.OpenSignalingConnectionTask=d.OnceTask=d.NotReadableError=d.NotFoundError=d.None=d.NoVideoUplinkBandwidthPolicy=d.NoVideoDownlinkBandwidthPolicy=d.NoOpVideoFrameProcessor=d.NoOpVideoElementFactory=d.NoOpTask=d.NoOpMediaStreamBroker=d.NoOpLogger=d.NoOpEventReporter=d.NoOpDeviceController=d.NoOpDebugLogger=d.NoOpAudioVideoController=d.NScaleVideoUplinkBandwidthPolicy=d.MutableVideoPreferences=d.MultiLogger=d.MonitorTask=d.ModelSpecBuilder=d.MessagingSessionConfiguration=d.Message=d.MeetingSessionVideoAvailability=d.MeetingSessionURLs=d.MeetingSessionTURNCredentials=d.MeetingSessionStatusCode=d.MeetingSessionStatus=d.MeetingSessionLifecycleEventCondition=d.MeetingSessionLifecycleEvent=d.MeetingSessionCredentials=d.MeetingSessionConfiguration=void 0,d.VideoLogEvent=d.VideoFxProcessor=d.VideoCodecCapability=d.VideoAdaptiveProbePolicy=d.Versioning=d.UnusableAudioWarningConnectionHealthPolicy=d.TypeError=d.TranscriptionStatusType=d.TranscriptionStatus=d.TranscriptResult=d.TranscriptLanguageWithScore=d.TranscriptItemType=d.TranscriptItem=d.TranscriptEntity=d.TranscriptAlternative=d.Transcript=d.TimeoutTask=d.TimeoutScheduler=d.TaskStatus=d.TargetDisplaySize=d.SubscribeAndReceiveSubscribeAckTask=d.StreamMetricReport=d.Some=d.SingleNodeAudioTransformDevice=d.SimulcastVideoStreamIndex=d.SimulcastTransceiverController=d.SimulcastLayers=d.SimulcastContentShareTransceiverController=d.SignalingClientVideoSubscriptionConfiguration=d.SignalingClientSubscribe=d.SignalingClientJoin=d.SignalingClientEventType=d.SignalingClientEvent=d.SignalingClientConnectionRequest=d.SignalingAndMetricsConnectionMonitor=d.SetRemoteDescriptionTask=d.SetLocalDescriptionTask=d.SessionStateControllerTransitionResult=d.SessionStateControllerState=d.SessionStateControllerDeferPriority=d.SessionStateControllerAction=d.ServerSideNetworkAdaption=d.SerialGroupTask=d.SendingAudioFailureConnectionHealthPolicy=d.SendAndReceiveDataMessagesTask=d.SDPMediaSection=d.SDPCandidateType=d.SDP=d.RunnableTask=d.RedundantAudioRecoveryMetricReport=void 0,d.isVideoTransformDevice=d.isDestroyable=d.isAudioTransformDevice=d.ZLIBTextCompressor=d.WebSocketReadyState=d.WaitForAttendeePresenceTask=d.VoiceFocusTransformDevice=d.VoiceFocusDeviceTransformer=d.VideoTileState=d.VideoStreamDescription=d.VideoSource=d.VideoQualitySettings=d.VideoQualityAdaptationPreference=d.VideoPriorityBasedPolicyConfig=d.VideoPriorityBasedPolicy=d.VideoPreferences=d.VideoPreference=d.VideoOnlyTransceiverController=void 0;const p=g(h("uTAD"));d.AllHighestVideoBandwidthPolicy=p.default;const u=g(h("DmQM"));d.ApplicationMetadata=u.default;const m=g(h("F7zz"));d.AsyncScheduler=m.default;const s=g(h("nDuE"));d.AttachMediaInputTask=s.default;const o=g(h("beBF"));d.Attendee=o.default;const i=g(h("PPZC"));d.AudioLogEvent=i.default;const e=g(h("f3u9"));d.AudioProfile=e.default;const t=g(h("1uai"));d.AudioVideoControllerState=t.default;const n=g(h("gLI0"));d.BackgroundBlurStrength=n.default;const r=g(h("Obod"));d.BackgroundBlurVideoFrameProcessor=r.default;const c=g(h("IsLT"));d.BackgroundFilterVideoFrameProcessor=c.default;const f=g(h("ySOd"));d.BackgroundReplacementVideoFrameProcessor=f.default;const S=g(h("oHvd"));d.BaseConnectionHealthPolicy=S.default;const l=g(h("j+uH"));d.BaseTask=l.default;const y=g(h("p5Ac"));d.BitrateParameters=y.default;const T=g(h("p7bP"));d.CSPMonitor=T.default;const O=g(h("Xv43"));d.CanvasVideoFrameBuffer=O.default;const R=g(h("PmG3"));d.CheckAudioConnectivityFeedback=R.default;const F=g(h("ig3o"));d.CheckAudioInputFeedback=F.default;const U=g(h("Rx4Y"));d.CheckAudioOutputFeedback=U.default;const _=g(h("nWLk"));d.CheckCameraResolutionFeedback=_.default;const P=g(h("s3Gi"));d.CheckContentShareConnectivityFeedback=P.default;const L=g(h("VKrp"));d.CheckNetworkTCPConnectivityFeedback=L.default;const A=g(h("M1uR"));d.CheckNetworkUDPConnectivityFeedback=A.default;const M=g(h("sTsL"));d.CheckVideoConnectivityFeedback=M.default;const k=g(h("6k9T"));d.CheckVideoInputFeedback=k.default;const G=g(h("7EAL"));d.CleanRestartedSessionTask=G.default;const K=g(h("wjYw"));d.CleanStoppedSessionTask=K.default;const H=g(h("6SO8"));d.ClientMetricReport=H.default;const X=g(h("bjg3"));d.ClientMetricReportDirection=X.default;const oe=g(h("x8On"));d.ClientMetricReportMediaType=oe.default;const le=g(h("7JpI"));d.ClientVideoStreamReceivingReport=le.default;const re=g(h("rhlI"));d.ConnectionHealthData=re.default;const he=g(h("U++r"));d.ConnectionHealthPolicyConfiguration=he.default;const Pe=g(h("zd8f"));d.ConsoleLogger=Pe.default;const pe=g(h("r3TB"));d.ContentShareConstants=pe.default;const Me=g(h("InPl"));d.ContentShareMediaStreamBroker=Me.default;const We=g(h("7UVU"));d.CreatePeerConnectionTask=We.default;const Ae=g(h("lFzH"));d.CreateSDPTask=Ae.default;const lt=g(h("3i7i"));d.DataMessage=lt.default;const Ne=g(h("HAqy"));d.DefaultActiveSpeakerDetector=Ne.default;const Xe=g(h("CxCb"));d.DefaultActiveSpeakerPolicy=Xe.default;const je=g(h("kUL9"));d.DefaultAudioMixController=je.default;const Te=g(h("a6MJ"));d.DefaultAudioVideoController=Te.default;const At=g(h("Fm4y"));d.DefaultAudioVideoFacade=At.default;const sn=g(h("U9CR"));d.DefaultBrowserBehavior=sn.default;const Dt=g(h("egzF"));d.DefaultContentShareController=Dt.default;const tn=g(h("ZsEg"));d.DefaultDeviceController=tn.default;const Yt=g(h("+DE9"));d.DefaultDevicePixelRatioMonitor=Yt.default;const Tn=g(h("KEX5"));d.DefaultEventController=Tn.default;const Xt=g(h("Gs2/"));d.DefaultMediaDeviceFactory=Xt.default;const Cn=g(h("pewp"));d.DefaultMeetingEventReporter=Cn.default;const Dn=g(h("PSPT"));d.DefaultMeetingReadinessChecker=Dn.default;const cn=g(h("CWxj"));d.DefaultMeetingSession=cn.default;const Mn=g(h("pacc"));d.DefaultMessagingSession=Mn.default;const _n=g(h("ppUg"));d.DefaultModality=_n.default;const nt=g(h("igcJ"));d.DefaultPingPong=nt.default;const $t=g(h("iRMv"));d.DefaultRealtimeController=$t.default;const It=g(h("l7oq"));d.DefaultReconnectController=It.default;const Fe=g(h("on9F"));d.DefaultSessionStateController=Fe.default;const Rt=g(h("dPyZ"));d.DefaultSigV4=Rt.default;const Qe=g(h("HG8V"));d.DefaultSignalingClient=Qe.default;const Qt=g(h("BGMr"));d.DefaultSimulcastUplinkPolicy=Qt.default;const Nn=g(h("VgUL"));d.DefaultSimulcastUplinkPolicyForContentShare=Nn.default;const Zt=g(h("ZdbB"));d.DefaultTransceiverController=Zt.default;const mn=g(h("J5JU"));d.DefaultTranscriptionController=mn.default;const ni=g(h("BEtg"));d.DefaultUserAgentParser=ni.default;const fi=g(h("Biyp"));d.DefaultVideoCaptureAndEncodeParameter=fi.default;const di=g(h("eFki"));d.DefaultVideoFrameProcessorPipeline=di.default;const Wn=g(h("h8NR"));d.DefaultVideoFrameProcessorTimer=Wn.default;const Rn=g(h("MpTp"));d.DefaultVideoStreamIdSet=Rn.default;const bt=g(h("0LIx"));d.DefaultVideoStreamIndex=bt.default;const ee=g(h("Z/hr"));d.DefaultVideoTile=ee.default;const ae=g(h("yS4C"));d.DefaultVideoTileController=ae.default;const fe=g(h("Wnnr"));d.DefaultVideoTileFactory=fe.default;const Ue=g(h("7TH8"));d.DefaultVideoTransformDevice=Ue.default;const we=g(h("kabN"));d.DefaultVolumeIndicatorAdapter=we.default;const Ce=g(h("3jln"));d.DefaultWebSocketAdapter=Ce.default;const De=g(h("R+jL"));d.DevicePixelRatioWindowSource=De.default;const pt=g(h("6DYs"));d.DeviceSelection=pt.default;const gt=g(h("IKDz"));d.EventBufferConfiguration=gt.default;const ct=g(h("HK1f"));d.EventIngestionConfiguration=ct.default;const _t=g(h("tMH2"));d.FinishGatheringICECandidatesTask=_t.default;const zn=g(h("cKqT"));d.FullJitterBackoff=zn.default;const vn=g(h("o5nl"));d.FullJitterBackoffFactory=vn.default;const li=g(h("HCbE"));d.FullJitterLimitedBackoff=li.default;const Gn=g(h("KJDN"));d.GetUserMediaError=Gn.default;const gn=g(h("U3GI"));d.GlobalMetricReport=gn.default;const yi=g(h("sfTB"));d.InMemoryJSONEventBuffer=yi.default;const un=g(h("BkFD"));d.IntervalScheduler=un.default;const Xn=g(h("Wdtm"));d.JoinAndReceiveIndexTask=Xn.default;const an=g(h("2vi8"));d.LeaveAndReceiveLeaveAckTask=an.default;const hi=g(h("3taG"));d.ListenForVolumeIndicatorsTask=hi.default;const xn=g(h("KCGh"));d.Log=xn.default;const bi=g(h("mlaT"));d.LogLevel=bi.default;const Ei=g(h("zH6K"));d.MediaDeviceProxyHandler=Ei.default;const Kn=g(h("V2kw"));d.MeetingEventsClientConfiguration=Kn.default;const Oi=g(h("2M37"));d.MeetingFeatures=Oi.default;const Re=g(h("dazq"));d.MeetingReadinessCheckerConfiguration=Re.default;const Oe=g(h("94P3"));d.MeetingSessionConfiguration=Oe.default;const Et=g(h("/N6y"));d.MeetingSessionCredentials=Et.default;const it=g(h("m/NO"));d.MeetingSessionLifecycleEvent=it.default;const Pt=g(h("fi20"));d.MeetingSessionLifecycleEventCondition=Pt.default;const qt=g(h("aZba"));d.MeetingSessionStatus=qt.default;const Jt=g(h("papz"));d.MeetingSessionStatusCode=Jt.default;const kt=g(h("42jQ"));d.MeetingSessionTURNCredentials=kt.default;const nn=g(h("GZjp"));d.MeetingSessionURLs=nn.default;const N=g(h("ZS2b"));d.MeetingSessionVideoAvailability=N.default;const Z=g(h("HXIC"));d.Message=Z.default;const de=g(h("wSXL"));d.MessagingSessionConfiguration=de.default;const ce=g(h("DE61"));d.ModelSpecBuilder=ce.default;const ve=g(h("Hi4k"));d.MonitorTask=ve.default;const me=g(h("N8ne"));d.MultiLogger=me.default;const He=g(h("P7Xm"));d.NScaleVideoUplinkBandwidthPolicy=He.default;const ke=g(h("4w5z"));d.NoOpAudioVideoController=ke.default;const $e=g(h("ZHiL"));d.NoOpDebugLogger=$e.default;const Be=g(h("9oOt"));d.NoOpDeviceController=Be.default;const ot=g(h("sdHd"));d.NoOpEventReporter=ot.default;const Kt=g(h("aZJ3"));d.NoOpLogger=Kt.default;const Wt=g(h("3niY"));d.NoOpMediaStreamBroker=Wt.default;const fn=g(h("mZDK"));d.NoOpTask=fn.default;const on=g(h("9bRS"));d.NoOpVideoElementFactory=on.default;const hn=g(h("ZZPe"));d.NoOpVideoFrameProcessor=hn.default;const Ot=g(h("1i73"));d.NoVideoDownlinkBandwidthPolicy=Ot.default;const wn=g(h("VWHd"));d.NoVideoUplinkBandwidthPolicy=wn.default;const Sn=g(h("QUzi"));d.NotFoundError=Sn.default;const yn=g(h("u3ud"));d.NotReadableError=yn.default;const pi=g(h("ZnGd"));d.OnceTask=pi.default;const In=g(h("uB5g"));d.OpenSignalingConnectionTask=In.default;const ci=g(h("wJ81"));d.OverconstrainedError=ci.default;const pn=g(h("reWd"));d.POSTLogger=pn.default;const wi=g(h("W+eo"));d.ParallelGroupTask=wi.default;const On=g(h("wkYg"));d.PermissionDeniedError=On.default;const rn=g(h("18tZ"));d.PrefetchOn=rn.default;const ut=g(h("aApz"));d.PrefetchSortBy=ut.default;const ze=g(h("FMuk"));d.PromiseQueue=ze.default;const Bn=g(h("hspq"));d.PromoteToPrimaryMeetingTask=Bn.default;const Bi=g(h("iA6Z"));d.RealtimeAttendeePositionInFrame=Bi.default;const Qn=g(h("9Bli"));d.RealtimeState=Qn.default;const An=g(h("vhVE"));d.RealtimeVolumeIndicator=An.default;const xi=g(h("rkwE"));d.ReceiveAudioInputTask=xi.default;const Di=g(h("5Y0c"));d.ReceiveRemoteVideoPauseResumeTask=Di.default;const Zn=g(h("fxRI"));d.ReceiveVideoInputTask=Zn.default;const wo=g(h("rw3l"));d.ReceiveVideoStreamIndexTask=wo.default;const Ao=g(h("Zful"));d.ReconnectionHealthPolicy=Ao.default;const Pn=g(h("3sEM"));d.RedundantAudioEncoder=Pn.default;const mi=g(h("IrJe"));d.RedundantAudioEncoderWorkerCode=mi.default;const sr=g(h("OcJO"));d.RedundantAudioRecoveryMetricReport=sr.default;const Po=g(h("e/M0"));d.RunnableTask=Po.default;const Ai=g(h("wXa7"));d.SDP=Ai.default;const Wi=g(h("JsnC"));d.SDPCandidateType=Wi.default;const Vi=g(h("2wCG"));d.SDPMediaSection=Vi.default;const ar=g(h("D7wJ"));d.SendAndReceiveDataMessagesTask=ar.default;const zr=g(h("1GR6"));d.SendingAudioFailureConnectionHealthPolicy=zr.default;const Gr=g(h("K+bq"));d.SerialGroupTask=Gr.default;const Cr=g(h("/AJg"));d.ServerSideNetworkAdaption=Cr.default;const Kr=g(h("K5tc"));d.SessionStateControllerAction=Kr.default;const $r=g(h("JOZa"));d.SessionStateControllerDeferPriority=$r.default;const Ir=g(h("AXyi"));d.SessionStateControllerState=Ir.default;const Or=g(h("Q2ix"));d.SessionStateControllerTransitionResult=Or.default;const Mo=g(h("XzFx"));d.SetLocalDescriptionTask=Mo.default;const wr=g(h("fZkv"));d.SetRemoteDescriptionTask=wr.default;const Ar=g(h("da6e"));d.SignalingAndMetricsConnectionMonitor=Ar.default;const Ro=g(h("Sz6V"));d.SignalingClientConnectionRequest=Ro.default;const Jr=g(h("0JTw"));d.SignalingClientEvent=Jr.default;const Yr=g(h("HbHZ"));d.SignalingClientEventType=Yr.default;const ui=g(h("OV1w"));d.SignalingClientJoin=ui.default;const Xr=g(h("VhCr"));d.SignalingClientSubscribe=Xr.default;const ko=g(h("bQ+R"));d.SignalingClientVideoSubscriptionConfiguration=ko.default;const Qr=g(h("wQGL"));d.SimulcastContentShareTransceiverController=Qr.default;const _i=g(h("ezoW"));d.SimulcastLayers=_i.default;const dr=g(h("VYs+"));d.SimulcastTransceiverController=dr.default;const Pi=g(h("LIUS"));d.SimulcastVideoStreamIndex=Pi.default;const lr=g(h("GW5S"));d.SingleNodeAudioTransformDevice=lr.default;const Do=g(h("Tsvd"));d.StreamMetricReport=Do.default;const Zr=g(h("ZISg"));d.SubscribeAndReceiveSubscribeAckTask=Zr.default;const qr=g(h("w1x/"));d.TargetDisplaySize=qr.default;const Ti=g(h("IGBW"));d.TaskStatus=Ti.default;const Pr=g(h("zcg+"));d.TimeoutScheduler=Pr.default;const cr=g(h("iQPr"));d.TimeoutTask=cr.default;const Mi=g(h("VPK4"));d.Transcript=Mi.default;const zi=g(h("Z0UI"));d.TranscriptAlternative=zi.default;const ur=g(h("XYJD"));d.TranscriptEntity=ur.default;const eo=g(h("epkm"));d.TranscriptItem=eo.default;const _o=g(h("QPT4"));d.TranscriptItemType=_o.default;const Ri=g(h("Ka3M"));d.TranscriptLanguageWithScore=Ri.default;const Mr=g(h("nXJe"));d.TranscriptResult=Mr.default;const ki=g(h("PbSJ"));d.TranscriptionStatus=ki.default;const to=g(h("HrOX"));d.TranscriptionStatusType=to.default;const Lo=g(h("sf8V"));d.TypeError=Lo.default;const Ci=g(h("I/xa"));d.UnusableAudioWarningConnectionHealthPolicy=Ci.default;const Hi=g(h("ac3q"));d.Versioning=Hi.default;const fr=g(h("rCkh"));d.VideoAdaptiveProbePolicy=fr.default;const no=g(h("CAce"));d.VideoCodecCapability=no.default;const No=g(h("AtlK"));d.VideoFxProcessor=No.default;const Bo=g(h("10yS"));d.VideoLogEvent=Bo.default;const Rr=g(h("XJKy"));d.VideoOnlyTransceiverController=Rr.default;const io=g(h("h96U"));d.VideoPreference=io.default;const ro=g(h("T44/"));d.VideoPreferences=ro.default;const kr=g(h("5/lR"));d.VideoPriorityBasedPolicy=kr.default;const Li=g(h("BY2i"));d.VideoPriorityBasedPolicyConfig=Li.default;const oo=g(h("aCJD"));d.VideoQualityAdaptationPreference=oo.default;const Gi=g(h("my46"));d.VideoQualitySettings=Gi.default;const $n=g(h("7p5e"));d.VideoSource=$n.default;const Ki=g(h("OEM7"));d.VideoStreamDescription=Ki.default;const hr=g(h("uQnq"));d.VideoTileState=hr.default;const pr=g(h("eWGP"));d.VoiceFocusDeviceTransformer=pr.default;const $i=g(h("aMTh"));d.VoiceFocusTransformDevice=$i.default;const Ji=g(h("xeHQ"));d.WaitForAttendeePresenceTask=Ji.default;const Dr=g(h("z8+u"));d.WebSocketReadyState=Dr.default;const so=g(h("aTUL"));d.ZLIBTextCompressor=so.default;const _r=h("T44/");Object.defineProperty(d,"MutableVideoPreferences",{enumerable:!0,get:function(){return _r.MutableVideoPreferences}});const ji=h("Aplu");Object.defineProperty(d,"Some",{enumerable:!0,get:function(){return ji.Some}}),Object.defineProperty(d,"None",{enumerable:!0,get:function(){return ji.None}}),Object.defineProperty(d,"Maybe",{enumerable:!0,get:function(){return ji.Maybe}});const ao=h("6k+I");Object.defineProperty(d,"isAudioTransformDevice",{enumerable:!0,get:function(){return ao.isAudioTransformDevice}});const gi=h("crgu");Object.defineProperty(d,"isDestroyable",{enumerable:!0,get:function(){return gi.isDestroyable}});const lo=h("0OOd");Object.defineProperty(d,"isVideoTransformDevice",{enumerable:!0,get:function(){return lo.isVideoTransformDevice}})},tFDz:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});const p=h("KvYa"),u=h("nJ1/"),m=5*1e3;let s=a(class extends u.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(i,e){this.port.postMessage({message:"module-buffer",buffer:i,key:e})}onModuleLoaded(i,e){this.port.postMessage({message:"module",module:i,key:e})}enable(){return g(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return g(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var i;return g(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(i=this.worker)===null||i===void 0||i.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(i){var e,t,n;const r=i.data;switch(r.message){case"cpu":this.cpuWarningCount++;const c=Date.now(),f=this.cpuWarningLastTriggered||c,S=Math.abs(c-f);(!this.cpuWarningLastTriggered||S>m)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,r.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=c),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(n=this.logger)===null||n===void 0||n.debug("Ignoring processor message.")}}onWorkerMessage(i){const e=i.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(i,e){super(i,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:n,fetchBehavior:r,logger:c,delegate:f}=e;this.logger=c,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=f,c&&c.debug("VoiceFocusInlineNode:",t),this.worker=n,this.worker.onmessage=this.onWorkerMessage.bind(this);const S=p.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:S,key:"model",fetchBehavior:r,path:t})}},"VoiceFocusInlineNode");d.default=s},tK6J:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("6/h7")),m=p(h("8wPz"));let s=a(class of{sortedDeviceList(){return g(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const i of this.deviceChangeListeners)u.default.nextTick(()=>{if(this.deviceChangeListeners.has(i)){const e=new Event("devicechange");typeof i=="function"?i(e):i.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(i,e,t)=>{if(!Reflect.has(i,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(i,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(i,e,t)}const n=Reflect.get(i,e,t);return typeof n=="function"?n.bind(i):n},this.patchAddEventListener=(i,e,t)=>{const n=Reflect.get(i,e,t);return(r,c,f)=>{if(r==="devicechange")this.deviceChangeListeners.add(c),this.scheduler||(this.scheduler=new m.default(of.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(n,i,[r,c,f])}},this.patchRemoveEventListener=(i,e,t)=>{const n=Reflect.get(i,e,t);return(r,c,f)=>{if(r==="devicechange")this.deviceChangeListeners.delete(c),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(n,i,[r,c,f])}},this.pollDeviceLists=()=>g(this,void 0,void 0,function*(){const i=yield this.sortedDeviceList();this.devices&&(i.length!==this.devices.length||i.some((t,n)=>t.deviceId!==this.devices[n].deviceId))&&this.handleDeviceChangeEvent(),this.devices=i})}},"MediaDeviceProxyHandler");d.default=s,s.INTERVAL_MS=1e3},tMH2:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("papz")),m=p(h("wXa7")),s=p(h("j+uH"));let o=a(class sf extends s.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return g(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new m.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new m.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=n=>{this.removeEventListener(),t(n)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=n=>{if(this.context.logger.info(`ice candidate: ${n.candidate?n.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),n.candidate&&(m.default.isRTPCandidate(n.candidate.candidate)&&this.context.iceCandidates.push(n.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new m.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=sf.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");d.default=o,o.CHROME_VPN_TIMEOUT_MS=5e3},tcc5:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.MeetingSessionLifecycleEvent=void 0;var g;(function(p){p[p.Connecting=0]="Connecting",p[p.Started=1]="Started",p[p.Stopped=2]="Stopped"})(g=d.MeetingSessionLifecycleEvent||(d.MeetingSessionLifecycleEvent={})),d.default=g},teem:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("hEYi")),m=p(h("aVV0"));let s=a(class extends m.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return g(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(i){throw i}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const i=this.context.videoTileController.getLocalVideoTile();i&&i.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((i,e)=>{let t=a(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(c){c.type===u.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),i())}constructor(c){this.signalingClient=c}},"Interceptor");const n=new t(this.context.signalingClient);this.taskCanceler=n,this.context.signalingClient.registerObserver(n)})}constructor(i){super(i.logger),this.context=i,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");d.default=s},u3ud:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("KJDN"));let u=a(class extends p.default{constructor(s){super(s),this.name="NotReadableError"}},"NotReadableError");d.default=u},uB5g:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("Sz6V")),m=p(h("HbHZ")),s=p(h("j+uH"));let o=a(class extends s.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return g(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new u.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((n,r)=>{let c=a(class{cancel(){this.signalingClient.removeObserver(this),r(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(l){switch(l.type){case m.default.WebSocketOpen:this.signalingClient.removeObserver(this),n();break;case m.default.WebSocketFailed:this.signalingClient.removeObserver(this),r(new Error("WebSocket connection failed"));break}}constructor(l){this.signalingClient=l}},"WebSocketOpenInterceptor");const f=new c(this.context.signalingClient);this.context.signalingClient.registerObserver(f),this.taskCanceler=f})}catch(n){throw n}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");d.default=o},uCvS:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0});const p=h("f2XL"),u=g(h("LmyK")),m=g(h("mpmV")),s=g(h("2oFa"));let o=a(class af{getMetricMap(e,t){switch(e){case m.default.AUDIO:switch(t){case u.default.UPSTREAM:return this.audioUpstreamMetricMap;case u.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case m.default.VIDEO:switch(t){case u.default.UPSTREAM:return this.videoUpstreamMetricMap;case u.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],r=this.getMetricMap(t.media,t.dir)[t.source],{transform:c,source:f}=r;if(t.hasOwnProperty("media"))for(const S in this.streamMetricReports){const l=this.streamMetricReports[S];if(l.direction===t.dir&&l.mediaType===t.media)return c(f||t.source,Number(S))}else return c(f||t.source);return 0}getObservableVideoMetricValue(e,t){const n=this.observableVideoMetricSpec[e],c=this.getMetricMap(n.media,n.dir)[n.source],{transform:f,source:S}=c;return f(S||n.source,t)}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===m.default.VIDEO){const n={};for(const S in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[S].dir===this.streamMetricReports[t].direction){const l=this.getObservableVideoMetricValue(S,Number(t));isNaN(l)||(n[S]=l)}const r=this.streamMetricReports[t].groupId,c=this.streamMetricReports[t].streamId;let f="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?f=r?this.videoStreamIndex.attendeeIdForGroupId(r):this.selfAttendeeId:f=c?this.videoStreamIndex.attendeeIdForStreamId(c):this.selfAttendeeId,e[f]=e[f]?e[f]:{},e[f][t]=n}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new af(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,n){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=n,this.globalMetricReport=new s.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(r,c)=>{const f=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(f.currentMetrics[r])},this.decoderLossPercent=(r,c)=>{const f=this.streamMetricReports[c],S=f.currentMetrics.concealedSamples-(f.previousMetrics.concealedSamples||0),l=f.currentMetrics.totalSamplesReceived-(f.previousMetrics.totalSamplesReceived||0);return l<=0||l-S<=0?0:S/l*100},this.packetLossPercent=(r,c)=>{const f=this.streamMetricReports[c],S=f.currentMetrics[r]-(f.previousMetrics[r]||0),l=f.currentMetrics.packetsLost-(f.previousMetrics.packetsLost||0),y=S+l;return y<=0||l<=0?0:l*100/y},this.jitterBufferMs=(r,c)=>{const f=this.streamMetricReports[c],S=f.currentMetrics.jitterBufferDelay-(f.previousMetrics.jitterBufferDelay||0),l=f.currentMetrics.jitterBufferEmittedCount-(f.previousMetrics.jitterBufferEmittedCount||0);return S<=0||l<=0?0:S/l*1e3},this.countPerSecond=(r,c)=>{const f=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const l=f.currentMetrics[r]-(f.previousMetrics[r]||0);return l<=0?0:Math.trunc(l/S)},this.bitsPerSecond=(r,c)=>{const f=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const l=(f.currentMetrics[r]-(f.previousMetrics[r]||0))*8;return l<=0?0:Math.trunc(l/S)},this.secondsToMilliseconds=(r,c)=>{const f=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(f.currentMetrics[r]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(r,c)=>{const f=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const l=f.currentMetrics[r]-(f.previousMetrics[r]||0);return l<=0?0:l*1e3/S},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(r,c)=>{const f=this.streamMetricReports[c];let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);let l=0,y=0;for(const[O,R]of Object.entries(f.previousObjectMetrics[r]))O==="cpu"&&(l=R);for(const[O,R]of Object.entries(f.currentObjectMetrics[r]))O==="cpu"&&(y=R);const T=y-l;return T<=0?0:T*1e3/S},this.isHardwareImplementation=(r,c)=>{const f=this.streamMetricReports[c],S=String(f.currentStringMetrics[r]),l=S.includes("ExternalDecoder")||S.includes("ExternalEncoder")||S.includes("EncodeAccelerator")||S.includes("DecodeAccelerator"),y=S.includes("fallback from");return l&&!y?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:p.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:p.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:p.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:p.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:p.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:p.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:p.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:p.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_DROPPED_FPS}},this.streamDimensionMap={encoderImplementation:p.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:p.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:m.default.VIDEO,dir:u.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:m.default.AUDIO,dir:u.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:m.default.AUDIO,dir:u.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.AUDIO,dir:u.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:u.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:m.default.VIDEO,dir:u.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");d.default=o},uKXT:function(W,d,h){"use strict";var g=h("YBmv"),p=h("eP7z"),u=h("+Xah");function m(s){return s&&s.length?Object(g.a)(s,u.a,p.a):void 0}a(m,"min"),d.a=m},uQnq:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class df{clone(){const u=new df;return u.tileId=this.tileId,u.localTile=this.localTile,u.isContent=this.isContent,u.active=this.active,u.paused=this.paused,u.poorConnection=this.poorConnection,u.boundAttendeeId=this.boundAttendeeId,u.boundExternalUserId=this.boundExternalUserId,u.boundVideoStream=this.boundVideoStream,u.boundVideoElement=this.boundVideoElement,u.nameplate=this.nameplate,u.videoStreamContentWidth=this.videoStreamContentWidth,u.videoStreamContentHeight=this.videoStreamContentHeight,u.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,u.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,u.devicePixelRatio=this.devicePixelRatio,u.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,u.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,u.streamId=this.streamId,u}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null}},"VideoTileState");d.default=g},uTAD:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("MpTp"));let u=a(class lf{reset(){this.optimalReceiveSet=new p.default,this.subscribedReceiveSet=new p.default,this.videoSources=void 0}updateIndex(s){this.videoIndex=s,this.optimalReceiveSet=this.calculateOptimalReceiveSet(s)}updateMetrics(s){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(s){this.videoSources=s,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(s){const o=new p.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return o;const i=s.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),n=new Map;for(const c of t)i.contain(c.streamId)&&n.set(c.attendeeId,c);let r=0;for(const c of e){const f=c.attendee.attendeeId;if(n.has(f)){const S=n.get(f);if(r+S.maxBitrateKbps<=lf.maxReceiveBitrateKbps)o.add(S.streamId),r+=S.maxBitrateKbps;else{console.warn("total bitrate "+(r+S.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return o}constructor(s){this.selfAttendeeId=s,this.reset()}},"AllHighestVideoBandwidthPolicy");d.default=u,u.maxReceiveBitrateKbps=15e3},uaNU:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("Lspx")),u=g(h("NBIk"));let m=a(class ya{partialCompare(o){return this.priority-o.priority}equals(o){return this.attendeeId===o.attendeeId&&this.targetSize===o.targetSize&&this.priority===o.priority&&this.degradationPreference===o.degradationPreference}clone(){return new ya(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(o){switch(o){case p.default.Maximum:return ya.MAXIMUM_BITRATE_KBPS;case p.default.High:return ya.HIGH_BITRATE_KBPS;case p.default.Medium:return ya.MID_BITRATE_KBPS;case p.default.Low:return ya.LOW_BITRATE_KBPS}}constructor(o,i,e,t){this.attendeeId=o,this.priority=i,this.targetSize=e!==void 0?e:p.default.Maximum,this.degradationPreference=t!==void 0?t:u.default.Balanced}},"VideoPreference");d.default=m,m.LOW_BITRATE_KBPS=300,m.MID_BITRATE_KBPS=600,m.HIGH_BITRATE_KBPS=1500,m.MAXIMUM_BITRATE_KBPS=1e4},uctb:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.LogLevel=void 0;var g;(function(p){p[p.DEBUG=0]="DEBUG",p[p.INFO=1]="INFO",p[p.WARN=2]="WARN",p[p.ERROR=3]="ERROR",p[p.OFF=4]="OFF"})(g=d.LogLevel||(d.LogLevel={})),d.default=g},ukPp:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{create(){const u={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{u.paused=!0},play:()=>(u.paused=!1,Promise.resolve())};return u}},"NoOpVideoElementFactory");d.default=g},v4l7:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.uint32ArrayFrom=d.numToUint8=d.isEmptyData=d.convertToBuffer=void 0;var g=h("AI3F");Object.defineProperty(d,"convertToBuffer",{enumerable:!0,get:function(){return g.convertToBuffer}});var p=h("N7sO");Object.defineProperty(d,"isEmptyData",{enumerable:!0,get:function(){return p.isEmptyData}});var u=h("sd34");Object.defineProperty(d,"numToUint8",{enumerable:!0,get:function(){return u.numToUint8}});var m=h("eeAN");Object.defineProperty(d,"uint32ArrayFrom",{enumerable:!0,get:function(){return m.uint32ArrayFrom}})},v5L4:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={InvalidAccess:"invalid_access",EmptyQueryNotSupported:"empty_query_not_supported",InvalidSobjectApiName:"invalid_sobject_api_name",QueryTooShort:"query_too_short",AccessTokenExchangeFailed:"access_token_exchange_failed",TokenNotFound:"token_not_found",SalesforceOrgIdRequired:"salesforce_org_id_required"},t=Object(s.a)("sfdc.searchObjects generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"sfdc.searchObjects",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to sfdc.searchObjects
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersfdcSearchObjectsFetcher",description:"sfdc.searchObjects generated fetcher"}},v8aG:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class cf{equal(u){return this.remoteVideoAvailable===u.remoteVideoAvailable&&this.canStartLocalVideo===u.canStartLocalVideo}clone(){const u=new cf;return u.remoteVideoAvailable=this.remoteVideoAvailable,u.canStartLocalVideo=this.canStartLocalVideo,u}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");d.default=g},v9PG:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("dWQL"));let u=a(class uf{clone(){return new uf(this.videoMaxResolution,this.contentMaxResolution)}constructor(s=p.default.VideoResolutionHD,o=p.default.VideoResolutionFHD){this.videoMaxResolution=s,this.contentMaxResolution=o}},"MeetingFeatures");d.default=u},vapa:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.RawSha256=void 0;var g=h("9IN5"),p=function(){function u(){this.state=Int32Array.from(g.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return a(u,"RawSha2561"),u.prototype.update=function(m){if(this.finished)throw new Error("Attempted to update an already finished hash.");var s=0,o=m.byteLength;if(this.bytesHashed+=o,this.bytesHashed*8>g.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=m[s++],o--,this.bufferLength===g.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},u.prototype.digest=function(){if(!this.finished){var m=this.bytesHashed*8,s=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(s.setUint8(this.bufferLength++,128),o%g.BLOCK_SIZE>=g.BLOCK_SIZE-8){for(var i=this.bufferLength;i<g.BLOCK_SIZE;i++)s.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<g.BLOCK_SIZE-8;i++)s.setUint8(i,0);s.setUint32(g.BLOCK_SIZE-8,Math.floor(m/4294967296),!0),s.setUint32(g.BLOCK_SIZE-4,m),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(g.DIGEST_LENGTH),i=0;i<8;i++)e[i*4]=this.state[i]>>>24&255,e[i*4+1]=this.state[i]>>>16&255,e[i*4+2]=this.state[i]>>>8&255,e[i*4+3]=this.state[i]>>>0&255;return e},u.prototype.hashBuffer=function(){for(var m=this,s=m.buffer,o=m.state,i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],c=o[5],f=o[6],S=o[7],l=0;l<g.BLOCK_SIZE;l++){if(l<16)this.temp[l]=(s[l*4]&255)<<24|(s[l*4+1]&255)<<16|(s[l*4+2]&255)<<8|s[l*4+3]&255;else{var y=this.temp[l-2],T=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10;y=this.temp[l-15];var O=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;this.temp[l]=(T+this.temp[l-7]|0)+(O+this.temp[l-16]|0)}var R=(((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(r&c^~r&f)|0)+(S+(g.KEY[l]+this.temp[l]|0)|0)|0,F=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&e^i&t^e&t)|0;S=f,f=c,c=r,r=n+R|0,n=t,t=e,e=i,i=R+F|0}o[0]+=i,o[1]+=e,o[2]+=t,o[3]+=n,o[4]+=r,o[5]+=c,o[6]+=f,o[7]+=S},u}();d.RawSha256=p},vdHl:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.MAX_HASHABLE_LENGTH=d.INIT=d.KEY=d.DIGEST_LENGTH=d.BLOCK_SIZE=void 0,d.BLOCK_SIZE=64,d.DIGEST_LENGTH=32,d.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),d.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],d.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},vhAZ:function(W,d,h){"use strict";W.exports=p;var g=h("j4TH");(p.prototype=Object.create(g.EventEmitter.prototype)).constructor=p;function p(u,m,s){if(typeof u!="function")throw TypeError("rpcImpl must be a function");g.EventEmitter.call(this),this.rpcImpl=u,this.requestDelimited=Boolean(m),this.responseDelimited=Boolean(s)}a(p,"Service"),p.prototype.rpcCall=a(function u(m,s,o,i,e){if(!i)throw TypeError("request must be specified");var t=this;if(!e)return g.asPromise(u,t,m,s,o,i);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(m,s[t.requestDelimited?"encodeDelimited":"encode"](i).finish(),a(function(r,c){if(r)return t.emit("error",r,m),e(r);if(c===null){t.end(!0);return}if(!(c instanceof o))try{c=o[t.responseDelimited?"decodeDelimited":"decode"](c)}catch(f){return t.emit("error",f,m),e(f)}return t.emit("data",c,m),e(null,c)},"rpcCallback"))}catch(n){t.emit("error",n,m),setTimeout(function(){e(n)},0);return}},"rpcCall"),p.prototype.end=a(function(m){return this.rpcImpl&&(m||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},vhVE:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");d.default=g},viNG:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.WebCryptoSha256=d.Ie11Sha256=void 0;var g=h("D3pN");g.__exportStar(h("ZIxo"),d);var p=h("dFEU");Object.defineProperty(d,"Ie11Sha256",{enumerable:!0,get:function(){return p.Sha256}});var u=h("b4Ml");Object.defineProperty(d,"WebCryptoSha256",{enumerable:!0,get:function(){return u.Sha256}})},vjEy:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.BlurStrengthMapper=void 0;const g={LOW:7,MEDIUM:15,HIGH:30};let p=a(class{static getBlurAmount(m,s){if(m<=0)throw new Error(`invalid value for blur strength: ${m}`);return Math.round(m*s.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");d.BlurStrengthMapper=p,p.BLUR_STRENGTH_DIVISOR=540,d.default=g},vvx0:function(W,d,h){"use strict";h.d(d,"a",function(){return e}),h.d(d,"b",function(){return n});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={Unknown:"unknown",UserCannotCreateChannel:"user_cannot_create_channel",IsPendingConnectedToOrg:"is_pending_connected_to_org",HasAlreadyConnectedToOrg:"has_already_connected_to_org",EmailDoesNotMatch:"email_does_not_match",InviteFromSameOrg:"invite_from_same_org",UserIsRestricted:"user_is_restricted",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",GridWorkspaceRequired:"grid_workspace_required",RestrictedAction:"restricted_action",ConnectionLimitExceeded:"connection_limit_exceeded",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot",NotPaid:"not_paid",UpgradeRequiredButUserCannot:"upgrade_required_but_user_cannot",InvalidRecipientTeam:"invalid_recipient_team"},t={InvalidArguments:"invalid_arguments",InviteNotFound:"invite_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found"},n=Object(s.a)("conversations.sharedInviteAcceptanceEligibility generated fetcher",function(){var r=Object(g.coroutine)(function*(c,f,S){try{const l=["reason"],y=Object(u.a)(S,l),T=Object(i.b)(y);return yield c(Object(m.apiCall)({method:"conversations.sharedInviteAcceptanceEligibility",args:T,reason:S.reason}))}catch(l){throw Object(o.a)({getState:f}).error(`API call to conversations.sharedInviteAcceptanceEligibility
				with reason ${S.reason} failed, initiated by generated fetcher`),l}});return function(c,f,S){return r.apply(this,arguments)}}());n.meta={name:"createFetcher",key:"createFetcherconversationsSharedInviteAcceptanceEligibilityFetcher",description:"conversations.sharedInviteAcceptanceEligibility generated fetcher"}},"w1x/":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.TargetDisplaySize=void 0;var g;(function(p){p[p.Low=0]="Low",p[p.Medium=1]="Medium",p[p.High=2]="High",p[p.Maximum=3]="Maximum"})(g=d.TargetDisplaySize||(d.TargetDisplaySize={})),d.default=g},wDi9:function(W,d,h){"use strict";W.exports=t;var g=h("j4TH"),p,u=g.LongBits,m=g.base64,s=g.utf8;function o(T,O,R){this.fn=T,this.len=O,this.next=void 0,this.val=R}a(o,"Op");function i(){}a(i,"noop");function e(T){this.head=T.head,this.tail=T.tail,this.len=T.len,this.next=T.states}a(e,"State");function t(){this.len=0,this.head=new o(i,0,0),this.tail=this.head,this.states=null}a(t,"Writer");var n=a(function(){return g.Buffer?a(function(){return(t.create=a(function(){return new p},"create_buffer"))()},"create_buffer_setup"):a(function(){return new t},"create_array")},"create");t.create=n(),t.alloc=a(function(O){return new g.Array(O)},"alloc"),g.Array!==Array&&(t.alloc=g.pool(t.alloc,g.Array.prototype.subarray)),t.prototype._push=a(function(O,R,F){return this.tail=this.tail.next=new o(O,R,F),this.len+=R,this},"push");function r(T,O,R){O[R]=T&255}a(r,"writeByte");function c(T,O,R){for(;T>127;)O[R++]=T&127|128,T>>>=7;O[R]=T}a(c,"writeVarint32");function f(T,O){this.len=T,this.next=void 0,this.val=O}a(f,"VarintOp"),f.prototype=Object.create(o.prototype),f.prototype.fn=c,t.prototype.uint32=a(function(O){return this.len+=(this.tail=this.tail.next=new f((O=O>>>0)<128?1:O<16384?2:O<2097152?3:O<268435456?4:5,O)).len,this},"write_uint32"),t.prototype.int32=a(function(O){return O<0?this._push(S,10,u.fromNumber(O)):this.uint32(O)},"write_int32"),t.prototype.sint32=a(function(O){return this.uint32((O<<1^O>>31)>>>0)},"write_sint32");function S(T,O,R){for(;T.hi;)O[R++]=T.lo&127|128,T.lo=(T.lo>>>7|T.hi<<25)>>>0,T.hi>>>=7;for(;T.lo>127;)O[R++]=T.lo&127|128,T.lo=T.lo>>>7;O[R++]=T.lo}a(S,"writeVarint64"),t.prototype.uint64=a(function(O){var R=u.from(O);return this._push(S,R.length(),R)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=a(function(O){var R=u.from(O).zzEncode();return this._push(S,R.length(),R)},"write_sint64"),t.prototype.bool=a(function(O){return this._push(r,1,O?1:0)},"write_bool");function l(T,O,R){O[R]=T&255,O[R+1]=T>>>8&255,O[R+2]=T>>>16&255,O[R+3]=T>>>24}a(l,"writeFixed32"),t.prototype.fixed32=a(function(O){return this._push(l,4,O>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=a(function(O){var R=u.from(O);return this._push(l,4,R.lo)._push(l,4,R.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=a(function(O){return this._push(g.float.writeFloatLE,4,O)},"write_float"),t.prototype.double=a(function(O){return this._push(g.float.writeDoubleLE,8,O)},"write_double");var y=g.Array.prototype.set?a(function(O,R,F){R.set(O,F)},"writeBytes_set"):a(function(O,R,F){for(var U=0;U<O.length;++U)R[F+U]=O[U]},"writeBytes_for");t.prototype.bytes=a(function(O){var R=O.length>>>0;if(!R)return this._push(r,1,0);if(g.isString(O)){var F=t.alloc(R=m.length(O));m.decode(O,F,0),O=F}return this.uint32(R)._push(y,R,O)},"write_bytes"),t.prototype.string=a(function(O){var R=s.length(O);return R?this.uint32(R)._push(s.write,R,O):this._push(r,1,0)},"write_string"),t.prototype.fork=a(function(){return this.states=new e(this),this.head=this.tail=new o(i,0,0),this.len=0,this},"fork"),t.prototype.reset=a(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new o(i,0,0),this.len=0),this},"reset"),t.prototype.ldelim=a(function(){var O=this.head,R=this.tail,F=this.len;return this.reset().uint32(F),F&&(this.tail.next=O.next,this.tail=R,this.len+=F),this},"ldelim"),t.prototype.finish=a(function(){for(var O=this.head.next,R=this.constructor.alloc(this.len),F=0;O;)O.fn(O.val,R,F),F+=O.len,O=O.next;return R},"finish"),t._configure=function(T){p=T,t.create=n(),p._configure()}},wJ81:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("KJDN"));let u=a(class extends p.default{constructor(s,o){super(s),this.constraint=o,this.name="OverconstrainedError"}},"OverconstrainedError");d.default=u},wQGL:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("VYs+"));let m=a(class ll extends u.default{setEncodingParameters(o){return g(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(o.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(let n=0;n<t.encodings.length;n++)t.encodings[n].rid===u.default.LOW_LEVEL_NAME&&this.copyEncodingParams(o.get(u.default.LOW_LEVEL_NAME),t.encodings[n]),t.encodings[n].rid===u.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(o.get(u.default.HIGH_LEVEL_NAME),t.encodings[n]);yield i.setParameters(t),this.logVideoTransceiverParameters()})}constructor(o,i,e){super(o,i,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let n=0;n<ll.NAME_ARR_ASCENDING.length;n++){const r=ll.NAME_ARR_ASCENDING[n];this.videoQualityControlParameterMap.set(r,{rid:r,scaleResolutionDownBy:t,maxBitrate:ll.BITRATE_ARR_ASCENDING[n]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");d.default=m,m.NAME_ARR_ASCENDING=["low","hi"],m.BITRATE_ARR_ASCENDING=[300,1200]},"wR/T":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3}},"ConnectionHealthPolicyConfiguration");d.default=g},wSXL:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});const g=h("VCUZ");let p=a(class{generateSessionId(){const m=new Uint32Array(1);return g.getRandomValues(m),m[0].toString()}constructor(m,s,o,i){this.userArn=m,this.messagingSessionId=s,this.endpointUrl=o,this.chimeClient=i,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");d.default=p},wXa7:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("JsnC")),u=g(h("2wCG")),m=g(h("CAce"));let s=a(class et{clone(){return new et(this.sdp)}static isRTPCandidate(i){const e=/candidate[:](\S+) (\d+)/g.exec(i);return!(e===null||e[2]!=="1")}static linesToSDP(i){return new et(i.join(et.CRLF))}static candidateTypeFromString(i){switch(i){case p.default.Host:return p.default.Host;case p.default.ServerReflexive:return p.default.ServerReflexive;case p.default.PeerReflexive:return p.default.PeerReflexive;case p.default.Relay:return p.default.Relay}return null}static candidateType(i){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(i);return e===null?null:et.candidateTypeFromString(e[1])}static mediaType(i){const e=/m=(audio|video)/g.exec(i);if(e!==null)return e[1]}static mid(i){if(i.includes("a=mid:"))return i.replace(/^(a=mid:)/,"")}static direction(i){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(i);if(e!==null)return e[1]}static splitLines(i){return i.trim().split(`
`).map(e=>e.trim())}static splitSections(i){return i.split(`
m=`).map((t,n)=>(n>0?"m="+t:t).trim()+et.CRLF)}static findActiveCameraSection(i){let e=0,t=!1;for(const n of i){if(/^m=video/.test(n)&&(n.indexOf("sendrecv")>-1||n.indexOf("sendonly")===-1&&n.indexOf("recvonly")===-1&&n.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(i){return/^a=ssrc-group:FID\s(.+)/.exec(i)[1]}static matchPrefix(i,e){return et.splitLines(i).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(et.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(i){return et.linesToSDP(this.lines().filter(e=>et.candidateType(e)!==i))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(p.default.ServerReflexive)}withAudioMaxAverageBitrate(i){if(!i)return this.clone();i=Math.trunc(Math.min(Math.max(i,et.rfc7587LowestBitrate),et.rfc7587HighestBitrate));const e=this.lines(),t=et.findOpusFmtpAttributes(e),n=et.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${i}`]);return et.linesToSDP(n)}withStereoAudio(){const i=this.lines(),e=et.findOpusFmtpAttributes(i),t=et.updateOpusFmtpAttributes(i,e,["stereo=1","sprop-stereo=1"]);return et.linesToSDP(t)}static findOpusFmtpAttributes(i){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const n=[];for(const r of i)if(r.startsWith("m=audio")&&(n.push(null),t=!0),r.startsWith("m=video")&&(t=!1),t){const c=e.exec(r);c!==null&&(n[n.length-1]=`a=fmtp:${c[1]} `)}return n}static updateOpusFmtpAttributes(i,e,t){const n=[];let r=0,c=null;for(const f of i)if(f.startsWith("m=audio")&&(c=e[r],r++),f.startsWith("m=video")&&(c=null),c&&f.startsWith(c)){const S=f.slice(c.length).split(";"),l=[];for(const y of S)t.findIndex(O=>O.startsWith(y.split("=")[0]))<0&&l.push(y);for(const y of t)l.push(y);n.push(c+l.join(";"))}else n.push(f);return n}withUnifiedPlanFormat(){let i=this.sdp;return i.includes("mozilla")?this.clone():(i=i.replace("o=-","o=mozilla-chrome"),new et(i))}getUniqueRtpHeaderExtensionId(i){const e=[];for(const n of i)if(/^a=extmap:/.test(n.trim())){const c=+n.split("a=extmap:")[1].split(" ")[0];e.includes(c)||e.push(c)}e.sort((n,r)=>n-r);let t=0;for(const n of e){if(n-t>1)return t+1;t=n}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,et.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,et.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const i=et.splitLines(this.sdp).filter(e=>!e.includes(et.dependencyDescriptorRtpHeaderExtensionUrl));return new et(i.join(et.CRLF)+et.CRLF)}withRtpHeaderExtension(i,e){const t=i?i.getRtpHeaderExtensionId(e):-1,n=t===-1?this.getUniqueRtpHeaderExtensionId(et.splitLines(this.sdp)):t,r=et.splitSections(this.sdp),c=[];for(let S of r){if(/^m=video/.test(S)&&et.getRtpHeaderExtensionIdInSection(S,e)===-1){const l=et.splitLines(S),y=[];if(n===-1||this.hasRtpHeaderExtensionId(n)){c.push(S);continue}for(const T of l)if(y.push(T),/^a=sendrecv/.test(T.trim())){const O="a=extmap:"+n+" "+e;y.push(O)}S=y.join(et.CRLF)+et.CRLF}else if(t!==-1&&/^m=video/.test(S)&&et.getRtpHeaderExtensionIdInSection(S,e)!==t){const l=et.splitLines(S),y=[];for(const T of l){if(/^a=extmap:/.test(T.trim())&&T.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const R="a=extmap:"+t+" "+e;y.push(R)}continue}y.push(T)}S=y.join(et.CRLF)+et.CRLF}c.push(S)}const f=c.join("");return new et(f)}ssrcForVideoSendingSection(){const i=this.sdp,e=et.splitSections(i);if(e.length<2)return"";const t=et.findActiveCameraSection(e);if(t===-1)return"";const n=et.matchPrefix(e[t],"a=ssrc-group:FID ");if(n.length<1)return"";const r=et.extractSSRCsFromFIDGroupLine(n[0]),[c]=r.split(" ").map(f=>parseInt(f,10));return c.toString()}videoSendSectionHasDifferentSSRC(i){const e=this.ssrcForVideoSendingSection(),t=i.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const n=parseInt(e,10),r=parseInt(t,10);return n!==r}removeH264SupportFromSendSection(){const i=this.sdp,e=et.splitSections(i),t=et.findActiveCameraSection(e);if(t===-1)return new et(this.sdp);const n=e[t],r=et.splitLines(n),c=[],f=new Map;r.forEach(T=>{if(/^a=rtpmap:/.test(T)){const O=/^a=rtpmap:([0-9]+)\s/.exec(T);O&&T.toLowerCase().includes("h264")&&c.push(parseInt(O[1],10))}if(/^a=fmtp:/.test(T)){const O=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(T);if(O&&O.length===3){const R=parseInt(O[1],10),F=parseInt(O[2],10);f.has(F)?f.get(F).push(R):f.set(F,[R])}}});const S=new Set;for(const T of c){S.add(T);const O=f.get(T);if(O)for(const R of O)S.add(R)}if(c.length>0){const T=r[0].split(" ");r[0]=T.filter(O=>!S.has(parseInt(O))).join(" ")}const l=r.filter(T=>{if(!T.includes("rtpmap")&&!T.includes("rtcp-fb")&&!T.includes("fmtp"))return!0;for(const O of S)if(T.includes(O.toString()))return!1;return!0});e[t]=l.join(et.CRLF)+et.CRLF;const y=e.join("");return new et(y)}mediaSections(){const i=et.splitSections(this.sdp);if(i.length<2)return[];const e=[];for(let t=1;t<i.length;t++){const n=new u.default,r=et.splitLines(i[t]);for(const c of r){const f=et.mediaType(c);if(f!==void 0){n.mediaType=f;continue}const S=et.direction(c);if(S!==void 0){n.direction=S;continue}const l=et.mid(c);if(l!==void 0){n.mid=l;continue}}e.push(n)}return e}static getRtpHeaderExtensionIdInSection(i,e){const t=et.splitLines(i);for(const n of t)if(/^a=extmap:/.test(n.trim())){const r=n.split("a=extmap:")[1].split(" "),c=+r[0];if(r[1]===e)return c}return-1}getRtpHeaderExtensionId(i){const e=et.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const n=et.getRtpHeaderExtensionIdInSection(t,i);if(n!==-1)return n}return-1}hasRtpHeaderExtensionId(i){const e=et.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===i)return!0;return!1}withVideoSendCodecPreferences(i){const e=this.sdp,t=et.splitSections(e),n=et.findActiveCameraSection(t);if(n===-1)return new et(this.sdp);t[n]=this.sectionWithCodecPreferences(t[n],i);const r=t.join("");return new et(r)}sectionWithCodecPreferences(i,e){const t=new Map,n=et.splitLines(i);n.forEach(S=>{if(!S.startsWith("a=rtpmap:"))return;const l=/^a=rtpmap:(\d+)\s/.exec(S);if(!l)return;const y=l[1];for(const T of e){if(!S.includes(`${T.codecName}/${T.codecCapability.clockRate}`))continue;let O=!1;if(T.codecCapability.sdpFmtpLine!==void 0){let R=!1;for(const F of n){if(T.fmtpLineMatches(F,parseInt(y))){O=!0;break}R||(R=F.startsWith(`a=fmtp:${y} profile-id=`))}T.equals(m.default.vp9Profile0())&&!R&&(O=!0)}else O=!0;if(O){t.set(y,T);break}}});const r=new Set(t.keys()),c=n[0].split(" ").filter(S=>!r.has(S)),f=Array.from(t.entries()).sort((S,l)=>{let[y,T]=S,[O,R]=l;const F=e.indexOf(T),U=e.indexOf(R);return F-U}).map(S=>{let[l,y]=S;return l});return c.splice(3,0,...f),n[0]=c.join(" "),n.join(et.CRLF)+et.CRLF}highestPriorityVideoSendCodec(){const i=this.prioritizedSendVideoCodecCapabilities();return i.length>0?i[0]:void 0}prioritizedSendVideoCodecCapabilities(){const i=this.sdp,e=et.splitSections(i),t=et.findActiveCameraSection(e);if(t===-1)return[];const n=et.splitLines(e[t]),r=n[0].split(" ");return r.length<4?[]:r.slice(3).map(S=>this.videoCodecCapabilityForPayloadType(n,S)).filter(S=>S!==void 0&&["VP8","H264","VP9","AV1"].includes(S.codecName))}videoCodecCapabilityForPayloadType(i,e){let t,n,r;for(const c of i){const f=/^a=rtpmap:([0-9]+)\s/.exec(c);if(f&&f[1]===e){const l=c.split(" ")[1].split("/");l.length>=2&&(t=l[0],n=l[1])}c.startsWith(`a=fmtp:${e} `)&&(r=c.split(" ")[1])}if(t!==void 0)return new m.default(t,{clockRate:parseInt(n),mimeType:`video/${t}`,sdpFmtpLine:r})}getAudioPayloadTypes(){const i=new Map,e=this.sdp,t=et.splitSections(e);return i.set("opus",et.findAudioPayloadType("opus",t)),i.set("red",et.findAudioPayloadType("red",t)),i}static findAudioPayloadType(i,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${i}\\/48000`,n=new RegExp(t);for(const r of e)if(/^m=audio/.test(r)){const c=n.exec(r);if(c!==null)return Number(c[1])}return 0}withStartingVideoSendBitrate(i){const e=et.splitSections(this.sdp),t=et.findActiveCameraSection(e);if(t===-1)return this;const n=et.splitLines(e[t]),r=[];for(const f of n)if(/^a=fmtp:\d*/.test(f)){const S=f+`;x-google-start-bitrate=${i*1e3}`;r.push(S)}else r.push(f);e[t]=r.join(et.CRLF)+et.CRLF;const c=e.join("");return new et(c)}constructor(i){this.sdp=i}},"SDP");d.default=s,s.CRLF=`\r
`,s.rfc7587LowestBitrate=6e3,s.rfc7587HighestBitrate=51e4,s.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",s.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},wcin:function(W,d){(function(){var h=["user-blocking","user-visible","background"];class g{constructor(){this.channel_=new MessageChannel,this.sendPort_=this.channel_.port2,this.messages_={},this.nextMessageHandle_=1,this.channel_.port1.onmessage=t=>this.onMessageReceived_(t)}queueCallback(t){var n=this.nextMessageHandle_++;return this.messages_[n]=t,this.sendPort_.postMessage(n),n}cancelCallback(t){delete this.messages_[t]}onMessageReceived_(t){var n=t.data;if(n in this.messages_){var r=this.messages_[n];delete this.messages_[n],r()}}}a(g,"t");function p(){return p.instance_||(p.instance_=new g),p.instance_}a(p,"i");class u{constructor(t,n,r){r===void 0&&(r=0),this.callback_=t,this.callbackType_=null,this.handle_=null,this.canceled_=!1,this.schedule_(n,r)}isIdleCallback(){return this.callbackType_===0}isMessageChannelCallback(){return this.callbackType_===2}cancel(){if(!this.canceled_)switch(this.canceled_=!0,this.callbackType_){case 0:cancelIdleCallback(this.handle_);break;case 1:clearTimeout(this.handle_);break;case 2:p().cancelCallback(this.handle_);break;default:throw new TypeError("Unknown CallbackType")}}schedule_(t,n){if(n&&n>0)return this.callbackType_=1,void(this.handle_=setTimeout(()=>{this.runCallback_()},n));if(!h.includes(t))throw new TypeError("Invalid task priority : "+t);return t==="background"&&typeof requestIdleCallback=="function"?(this.callbackType_=0,void(this.handle_=requestIdleCallback(()=>{this.runCallback_()}))):typeof MessageChannel=="function"?(this.callbackType_=2,void(this.handle_=p().queueCallback(()=>{this.runCallback_()}))):(this.callbackType_=1,void(this.handle_=setTimeout(()=>{this.runCallback_()})))}runCallback_(){this.canceled_||this.callback_()}}a(u,"s");var m=0;class s{constructor(){this.head_=null,this.tail_=null}isEmpty(){return this.head_==null}push(t){if(typeof t!="object")throw new TypeError("Task must be an Object");t.tq_sequence_=m++,this.isEmpty()?(t.tq_prev_=null,this.head_=t):(t.tq_prev_=this.tail_,this.tail_.tq_next_=t),t.tq_next_=null,this.tail_=t}takeNextTask(){if(this.isEmpty())return null;var t=this.head_;return this.remove_(t),t}merge(t,n){if(typeof n!="function")throw new TypeError("Must provide a selector function.");if(t==null)throw new Error("sourceQueue cannot be null");for(var r=this.head_,c=null,f=t.head_;f;){var S=f;if(f=f.tq_next_,n(S)){for(t.remove_(S);r&&r.tq_sequence_<S.tq_sequence_;)c=r,r=r.tq_next_;this.insert_(S,c),c=S}}}toArray(){for(var t=this.head_,n=[];t!==null;)n.push(t),t=t.tq_next_;return n}insert_(t,n){if(n!=this.tail_){var r=n?n.tq_next_:this.head_;t.tq_next_=r,r.tq_prev_=t,t.tq_prev_=n,n!=null?n.tq_next_=t:this.head_=t}else this.push(t)}remove_(t){if(t==null)throw new Error("Expected task to be non-null");t===this.head_&&(this.head_=t.tq_next_),t===this.tail_&&(this.tail_=this.tail_.tq_prev_),t.tq_next_&&(t.tq_next_.tq_prev_=t.tq_prev_),t.tq_prev_&&(t.tq_prev_.tq_next_=t.tq_next_)}}a(s,"a");class o extends Event{constructor(t,n){if(!n||!h.includes(n.previousPriority))throw new TypeError("Invalid task priority: '"+n.previousPriority+"'");super(t),this.previousPriority=n.previousPriority}}a(o,"n");class i extends AbortController{constructor(t){if(t===void 0&&(t={}),super(),t==null&&(t={}),typeof t!="object")throw new TypeError("'init' is not an object");var n,r,c=t.priority===void 0?"user-visible":t.priority;if(!h.includes(c))throw new TypeError("Invalid task priority: '"+c+"'");this.priority_=c,this.isPriorityChanging_=!1,r=(n=this).signal,Object.defineProperties(r,{priority:{get:function(){return n.priority_},enumerable:!0},onprioritychange:{value:null,writable:!0,enumerable:!0}}),r.addEventListener("prioritychange",f=>{r.onprioritychange&&r.onprioritychange(f)})}setPriority(t){if(!h.includes(t))throw new TypeError("Invalid task priority: "+t);if(this.isPriorityChanging_)throw new DOMException("","NotAllowedError");if(this.signal.priority!==t){this.isPriorityChanging_=!0;var n=this.priority_;this.priority_=t;var r=new o("prioritychange",{previousPriority:n});this.signal.dispatchEvent(r),this.isPriorityChanging_=!1}}}a(i,"l"),self.scheduler===void 0&&(self.scheduler=new class{constructor(){this.queues_={},h.forEach(e=>{this.queues_[e]=new s}),this.pendingHostCallback_=null,this.signals_=new WeakMap}postTask(e,t){if((t=Object.assign({},t)).signal!==void 0){if(t.signal===null||!("aborted"in t.signal)||typeof t.signal.addEventListener!="function")return Promise.reject(new TypeError("'signal' is not a valid 'AbortSignal'"));if(t.signal&&t.signal.priority&&!h.includes(t.signal.priority))return Promise.reject(new TypeError("Invalid task priority: '"+t.signal.priority+"'"))}if(t.priority!==void 0&&(t.priority===null||!h.includes(t.priority)))return Promise.reject(new TypeError("Invalid task priority: '"+t.priority+"'"));if(t.delay===void 0&&(t.delay=0),t.delay=Number(t.delay),t.delay<0)return Promise.reject(new TypeError("'delay' must be a positive number."));var n={callback:e,options:t,resolve:null,reject:null,hostCallback:null,abortCallback:null,onTaskCompleted:function(){this.options.signal&&this.abortCallback&&(this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null)},onTaskAborted:function(){this.hostCallback&&(this.hostCallback.cancel(),this.hostCallback=null),this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null,this.reject(this.options.signal.reason)},isAborted:function(){return this.options.signal&&this.options.signal.aborted}},r=new Promise((c,f)=>{n.resolve=c,n.reject=f});return this.schedule_(n),r}schedule_(e){var t=e.options.signal;if(t){if(t.aborted)return void e.reject(t.reason);e.abortCallback=()=>{e.onTaskAborted()},t.addEventListener("abort",e.abortCallback)}e.options.delay>0?e.hostCallback=new u(()=>{e.hostCallback=null,this.onTaskDelayExpired_(e)},null,e.options.delay):(this.pushTask_(e),this.scheduleHostCallbackIfNeeded_())}onTaskDelayExpired_(e){this.pushTask_(e),this.pendingHostCallback_&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.schedulerEntryCallback_()}onPriorityChange_(e){var t=this.signals_.get(e);if(t===void 0)throw new Error("Attempting to change priority on an unregistered signal");t!==e.priority&&(this.queues_[e.priority].merge(this.queues_[t],n=>n.options.signal===e),this.signals_.set(e,e.priority))}schedulerEntryCallback_(){this.pendingHostCallback_=null,this.runNextTask_(),this.scheduleHostCallbackIfNeeded_()}scheduleHostCallbackIfNeeded_(){var e=this.nextTaskPriority_();e!=null&&(e!=="background"&&this.pendingHostCallback_&&this.pendingHostCallback_.isIdleCallback()&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.pendingHostCallback_||(this.pendingHostCallback_=new u(()=>{this.schedulerEntryCallback_()},e,0)))}pushTask_(e){var t;if(!h.includes(t=e.options.priority?e.options.priority:e.options.signal&&e.options.signal.priority?e.options.signal.priority:"user-visible"))throw new TypeError("Invalid task priority: "+t);if(e.options.signal&&e.options.signal.priority){var n=e.options.signal;this.signals_.has(n)||(n.addEventListener("prioritychange",()=>{this.onPriorityChange_(n)}),this.signals_.set(n,n.priority))}this.queues_[t].push(e)}runNextTask_(){var e=null;do{var t=this.nextTaskPriority_();if(t==null)return;e=this.queues_[t].takeNextTask()}while(e.isAborted());try{var n=e.callback();e.resolve(n)}catch(r){e.reject(r)}finally{e.onTaskCompleted()}}nextTaskPriority_(){for(var e=0;e<h.length;e++){var t=h[e];if(!this.queues_[t].isEmpty())return t}return null}},self.TaskController=i,self.TaskPriorityChangeEvent=o)})()},wiFD:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.uint32ArrayFrom=void 0;function g(p){if(!Uint32Array.from){for(var u=new Uint32Array(p.length),m=0;m<p.length;)u[m]=p[m],m+=1;return u}return Uint32Array.from(p)}a(g,"uint32ArrayFrom"),d.uint32ArrayFrom=g},wjYw:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("HbHZ")),m=p(h("j+uH"));let s=a(class extends m.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return g(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(i){throw i}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const i=this.context.videoTileController.getLocalVideoTile();i&&i.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((i,e)=>{let t=a(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(c){c.type===u.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),i())}constructor(c){this.signalingClient=c}},"Interceptor");const n=new t(this.context.signalingClient);this.taskCanceler=n,this.context.signalingClient.registerObserver(n)})}constructor(i){super(i.logger),this.context=i,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");d.default=s},wkYg:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("KJDN"));let u=a(class extends p.default{constructor(s,o){super(s,o),this.name="PermissionDeniedError"}},"PermissionDeniedError");d.default=u},wpDl:function(W,d,h){"use strict";var g=h("Ju5/"),p=h("fshX"),u=h("SiRs"),m=h("efZk"),s=g.a.isFinite,o=Math.min;function i(e){var t=Math[e];return function(n,r){if(n=Object(u.a)(n),r=r==null?0:o(Object(p.a)(r),292),r&&s(n)){var c=(Object(m.a)(n)+"e").split("e"),f=t(c[0]+"e"+(+c[1]+r));return c=(Object(m.a)(f)+"e").split("e"),+(c[0]+"e"+(+c[1]-r))}return t(n)}}a(i,"createRound"),d.a=i},ws8j:function(W,d,h){"use strict";h.d(d,"a",function(){return e}),h.d(d,"b",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={ChannelConversionInProgress:"channel_conversion_in_progress",ConnectionLimitExceeded:"connection_limit_exceeded",EmailDoesNotMatch:"email_does_not_match",FailedToStartTrial:"failed_to_start_trial",HasAlreadyConnectedToOrg:"has_already_connected_to_org",InvalidArguments:"invalid_arguments",InvalidEmojiNotAllowed:"invalid_emoji_not_allowed",InvalidHostTeam:"invalid_host_team",InvalidLink:"invalid_link",InvalidName:"invalid_name",InvalidNameMaxlength:"invalid_name_maxlength",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InviteFromSameOrg:"invite_from_same_org",InviteNotFound:"invite_not_found",InvalidPrivacy:"invalid_privacy",InvalidRecipientTeam:"invalid_recipient_team",InvalidTargetTeam:"invalid_target_team",InviteUsed:"invite_used",IsPendingConnectedToOrg:"is_pending_connected_to_org",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",NameTaken:"name_taken",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",NotPaid:"not_paid",RestrictedAction:"restricted_action",TeamNotFound:"team_not_found",UserCannotCreateChannel:"user_cannot_create_channel",UserIsRestricted:"user_is_restricted",UserNotFound:"user_not_found",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot"},t=Object(s.a)("conversations.acceptSharedInvite generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"conversations.acceptSharedInvite",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to conversations.acceptSharedInvite
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsAcceptSharedInviteFetcher",description:"conversations.acceptSharedInvite generated fetcher"}},x8On:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.ClientMetricReportMediaType=void 0;var g;(function(p){p[p.AUDIO=0]="AUDIO",p[p.VIDEO=1]="VIDEO"})(g=d.ClientMetricReportMediaType||(d.ClientMetricReportMediaType={})),d.default=g},xGEd:function(W,d,h){"use strict";W.exports=p;var g=h("kU+7");function p(o,i){this.lo=o>>>0,this.hi=i>>>0}a(p,"LongBits");var u=p.zero=new p(0,0);u.toNumber=function(){return 0},u.zzEncode=u.zzDecode=function(){return this},u.length=function(){return 1};var m=p.zeroHash="\0\0\0\0\0\0\0\0";p.fromNumber=a(function(i){if(i===0)return u;var e=i<0;e&&(i=-i);var t=i>>>0,n=(i-t)/4294967296>>>0;return e&&(n=~n>>>0,t=~t>>>0,++t>4294967295&&(t=0,++n>4294967295&&(n=0))),new p(t,n)},"fromNumber"),p.from=a(function(i){if(typeof i=="number")return p.fromNumber(i);if(g.isString(i))if(g.Long)i=g.Long.fromString(i);else return p.fromNumber(parseInt(i,10));return i.low||i.high?new p(i.low>>>0,i.high>>>0):u},"from"),p.prototype.toNumber=a(function(i){if(!i&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),p.prototype.toLong=a(function(i){return g.Long?new g.Long(this.lo|0,this.hi|0,Boolean(i)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(i)}},"toLong");var s=String.prototype.charCodeAt;p.fromHash=a(function(i){return i===m?u:new p((s.call(i,0)|s.call(i,1)<<8|s.call(i,2)<<16|s.call(i,3)<<24)>>>0,(s.call(i,4)|s.call(i,5)<<8|s.call(i,6)<<16|s.call(i,7)<<24)>>>0)},"fromHash"),p.prototype.toHash=a(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),p.prototype.zzEncode=a(function(){var i=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^i)>>>0,this.lo=(this.lo<<1^i)>>>0,this},"zzEncode"),p.prototype.zzDecode=a(function(){var i=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^i)>>>0,this.hi=(this.hi>>>1^i)>>>0,this},"zzDecode"),p.prototype.length=a(function(){var i=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?i<16384?i<128?1:2:i<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},xJ9D:function(W,d,h){"use strict";var g=this&&this.__createBinding||(Object.create?function(l,y,T,O){O===void 0&&(O=T),Object.defineProperty(l,O,{enumerable:!0,get:function(){return y[T]}})}:function(l,y,T,O){O===void 0&&(O=T),l[O]=y[T]}),p=this&&this.__setModuleDefault||(Object.create?function(l,y){Object.defineProperty(l,"default",{enumerable:!0,value:y})}:function(l,y){l.default=y}),u=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var y={};if(l!=null)for(var T in l)T!=="default"&&Object.prototype.hasOwnProperty.call(l,T)&&g(y,l,T);return p(y,l),y},m=this&&this.__awaiter||function(l,y,T,O){function R(F){return F instanceof T?F:new T(function(U){U(F)})}return a(R,"adopt"),new(T||(T=Promise))(function(F,U){function _(A){try{L(O.next(A))}catch(M){U(M)}}a(_,"fulfilled");function P(A){try{L(O.throw(A))}catch(M){U(M)}}a(P,"rejected");function L(A){A.done?F(A.value):R(A.value).then(_,P)}a(L,"step"),L((O=O.apply(l,y||[])).next())})},s=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(d,"__esModule",{value:!0});const o=s(h("6Bxv")),i=s(h("lUhs")),e=s(h("V5IF")),t=u(h("DUgj")),n=s(h("hEYi")),r=s(h("COTZ")),c=h("f2XL"),f=s(h("aVV0"));let S=a(class extends f.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return m(this,void 0,void 0,function*(){const y=yield new Promise((T,O)=>{const R=this.context;R.turnCredentials=null;let F=a(class{cancel(){this.signalingClient.removeObserver(this),O(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(L){if(L.type===n.default.WebSocketClosed){let M=`The signaling connection was closed with code ${L.closeCode} and reason: ${L.closeReason}`;R.logger.warn(M);let k=i.default.SignalingBadRequest;L.closeCode===4410?(M="The meeting already ended.",R.logger.warn(M),k=i.default.MeetingEnded):L.closeCode>=4500&&L.closeCode<4600&&(k=i.default.SignalingInternalServerError),R.audioVideoController.handleMeetingSessionStatus(new o.default(k),new Error(M));return}if(L.type!==n.default.ReceivedSignalFrame)return;if(L.message.type===c.SdkSignalFrame.Type.JOIN_ACK){const M=L.message.joinack;if(!M){R.audioVideoController.handleMeetingSessionStatus(new o.default(i.default.SignalingRequestFailed),new Error("Join ACK message did not include expected frame"));return}if(M.videoSubscriptionLimit&&(R.videoSubscriptionLimit=M.videoSubscriptionLimit),R.serverSupportsCompression=M.wantsCompressedSdp,M.defaultServerSideNetworkAdaption!==void 0&&M.defaultServerSideNetworkAdaption!==t.default.Default&&R.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const k=M.defaultServerSideNetworkAdaption;R.logger.info(`Overriding server side network adaption value to ${k}`),R.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(k))}M&&M.turnCredentials?(R.turnCredentials=new e.default,R.turnCredentials.username=M.turnCredentials.username,R.turnCredentials.password=M.turnCredentials.password,R.turnCredentials.ttl=M.turnCredentials.ttl,R.turnCredentials.uris=M.turnCredentials.uris.map(k=>R.meetingSessionConfiguration.urls.urlRewriter(k)).filter(k=>!!k)):R.logger.error("missing TURN credentials in JoinAckFrame");return}if(L.message.type!==c.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const A=L.message.index;T(A)}constructor(L){this.signalingClient=L}},"IndexFrameInterceptor");const U=new F(this.context.signalingClient);this.context.signalingClient.registerObserver(U),this.taskCanceler=U,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const _=new r.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(_.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),_.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(_.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),_.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(_)});this.context.logger.info(`received first index ${JSON.stringify(y)}`),this.context.indexFrame=y})}constructor(y){super(y.logger),this.context=y,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");d.default=S},xc8p:function(W,d,h){"use strict";h.d(d,"a",function(){return t});var g=h("9oTK"),p=h.n(g),u=h("m8R6"),m=h("2XU3"),s=h("WCk1"),o=h("s4P+"),i=h("pjW8");const e={FeatureNotEnabled:"feature_not_enabled",OperationNotAllowed:"operation_not_allowed"},t=Object(s.a)("externalWorkspaces.invites.listReceived generated fetcher",function(){var n=Object(g.coroutine)(function*(r,c,f){try{const S=["reason"],l=Object(u.a)(f,S),y=Object(i.b)(l);return yield r(Object(m.apiCall)({method:"externalWorkspaces.invites.listReceived",args:y,reason:f.reason}))}catch(S){throw Object(o.a)({getState:c}).error(`API call to externalWorkspaces.invites.listReceived
				with reason ${f.reason} failed, initiated by generated fetcher`),S}});return function(r,c,f){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesListReceivedFetcher",description:"externalWorkspaces.invites.listReceived generated fetcher"}},xeHQ:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("papz")),m=p(h("j+uH"));let s=a(class extends m.default{cancel(){if(this.cancelPromise){const i=new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.NoAttendeePresent}`);this.cancelPromise(i),delete this.cancelPromise}}run(){return g(this,void 0,void 0,function*(){const i=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const n=a((r,c,f,S,l)=>{i===r&&c&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n),e(),delete this.cancelPromise)},"handler");this.cancelPromise=r=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n),t(r)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(n)})})}constructor(i){super(i.logger),this.context=i,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");d.default=s},xsFo:function(W,d,h){"use strict";(function(g){Object.defineProperty(d,"__esModule",{value:!0}),d.convertToBuffer=void 0;var p=h("f/KM"),u=typeof g<"u"&&g.from?function(s){return g.from(s,"utf8")}:p.fromUtf8;function m(s){return s instanceof Uint8Array?s:typeof s=="string"?u(s):ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(s)}a(m,"convertToBuffer"),d.convertToBuffer=m}).call(this,h("HDXh").Buffer)},xxdO:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g=h("7JaV");g.__exportStar(h("je3o"),d)},xzjI:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class extends Error{constructor(u,m){super(m||"Error fetching device."),this.cause=u,this.name="GetUserMediaError"}},"GetUserMediaError");d.default=g},yMiq:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(s,o,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return a(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(l){try{S(e.next(l))}catch(y){r(y)}}a(c,"fulfilled");function f(l){try{S(e.throw(l))}catch(y){r(y)}}a(f,"rejected");function S(l){l.done?n(l.value):t(l.value).then(c,f)}a(S,"step"),S((e=e.apply(s,o||[])).next())})},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("aVV0"));let m=a(class extends u.default{run(){return g(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(o){super(o.logger),this.context=o,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");d.default=m},yQ3g:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{start(u){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),u()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(u){this.timeoutMs=u,this.timer=null}},"TimeoutScheduler");d.default=g},yS4C:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(t,n,r,c){function f(S){return S instanceof r?S:new r(function(l){l(S)})}return a(f,"adopt"),new(r||(r=Promise))(function(S,l){function y(R){try{O(c.next(R))}catch(F){l(F)}}a(y,"fulfilled");function T(R){try{O(c.throw(R))}catch(F){l(F)}}a(T,"rejected");function O(R){R.done?S(R.value):f(R.value).then(y,T)}a(O,"step"),O((c=c.apply(t,n||[])).next())})},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("my46")),m=p(h("+DE9")),s=p(h("R+jL")),o=h("Aplu"),i=p(h("Z/hr"));let e=a(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new m.default(new s.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return g(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const n=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,n.destroy()})}bindVideoElement(n,r){const c=this.getVideoTile(n);if(c===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${n}`);return}c.bindVideoElement(r)}unbindVideoElement(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const c=this.getVideoTile(n);if(c===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${n}`);return}this.logger.info("Unbinding the video element");const f=c.stateRef().boundVideoElement;c.bindVideoElement(null),r&&(this.logger.info("Cleaning up the video element"),i.default.disconnectVideoStreamFromVideoElement(f,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===u.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const n=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),n.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(n){const r=this.getVideoTile(n);r&&(this.currentPausedTilesByIds.has(n)||(this.audioVideoController.pauseReceivingStream(r.stateRef().streamId),this.currentPausedTilesByIds.add(n)),r.pause())}unpauseVideoTile(n){const r=this.getVideoTile(n);r&&(this.currentPausedTilesByIds.has(n)&&(this.audioVideoController.resumeReceivingStream(r.stateRef().streamId),this.currentPausedTilesByIds.delete(n)),r.unpause())}getVideoTile(n){return this.tileMap.has(n)?this.tileMap.get(n):null}getVideoTileArea(n){const r=n.state();let c=0,f=0;return r.boundVideoElement&&(c=r.boundVideoElement.clientHeight*r.devicePixelRatio,f=r.boundVideoElement.clientWidth*r.devicePixelRatio),c*f}getAllRemoteVideoTiles(){const n=new Array;return this.tileMap.forEach((r,c)=>{(!this.currentLocalTile||c!==this.currentLocalTile.id())&&n.push(r)}),n}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const r=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const c=this.tileFactory.makeTile(r,n,this,this.devicePixelRatioMonitor);return this.tileMap.set(r,c),c}removeVideoTile(n){if(!this.tileMap.has(n))return;const r=this.tileMap.get(n);this.currentLocalTile===r&&(this.currentLocalTile=null),r.destroy(),this.tileMap.delete(n),this.audioVideoController.forEachObserver(c=>{o.Maybe.of(c.videoTileWasRemoved).map(f=>f.bind(c)(n))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(n){const r=[];for(const c of this.getAllVideoTiles()){const f=c.state();f.boundAttendeeId===n&&(this.removeVideoTile(f.tileId),r.push(f.tileId))}return r}removeAllVideoTiles(){const n=Array.from(this.tileMap.keys());for(const r of n)this.removeVideoTile(r)}sendTileStateUpdate(n){this.audioVideoController.forEachObserver(r=>{o.Maybe.of(r.videoTileDidUpdate).map(c=>c.bind(r)(n))})}haveVideoTilesWithStreams(){for(const n of this.getAllVideoTiles())if(n.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(n){return!!this.getVideoTileForAttendeeId(n)}getVideoTileForAttendeeId(n){for(const r of this.getAllVideoTiles())if(r.state().boundAttendeeId===n)return r}captureVideoTile(n){const r=this.getVideoTile(n);return r?r.capture():null}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(n,r,c){this.tileFactory=n,this.audioVideoController=r,this.logger=c,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=r.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");d.default=e},ySOd:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(n,r,c,f){function S(l){return l instanceof c?l:new c(function(y){y(l)})}return a(S,"adopt"),new(c||(c=Promise))(function(l,y){function T(F){try{R(f.next(F))}catch(U){y(U)}}a(T,"fulfilled");function O(F){try{R(f.throw(F))}catch(U){y(U)}}a(O,"rejected");function R(F){F.done?l(F.value):S(F.value).then(T,O)}a(R,"step"),R((f=f.apply(n,r||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("IsLT")),m=p(h("zd8f")),s=p(h("mlaT")),o=p(h("ZZPe")),i=p(h("kud1"));let e=a(class extends o.default{loadAssets(){return g(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return g(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=a(class ff extends u.default{static create(r,c){return g(this,void 0,void 0,function*(){r=this.resolveSpec(r),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const{logger:f}=c;if(!(yield ff.isSupported(r,c)))return f.warn("Using no-op processor because background replacement is not supported"),new e;f.info("Using background replacement filter");const l=new i.default(r,c);return yield l.loadAssets(),l})}static resolveOptions(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const c=Object.assign({},r);return c.logger||(c.logger=new m.default("BackgroundReplacementProcessor",s.default.INFO)),super.resolveOptions(c)}static resolveOptionsAsync(r){return g(this,void 0,void 0,function*(){if(!r.imageBlob){const c=document.createElement("canvas");c.width=100,c.height=100;const f=c.getContext("2d");f.fillStyle="blue",f.fillRect(0,0,100,100);const S=yield new Promise(l=>{c.toBlob(l)});r.imageBlob=S}})}static isSupported(r,c){const f=Object.create(null,{isSupported:{get:()=>super.isSupported}});return g(this,void 0,void 0,function*(){r=this.resolveSpec(r),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const S=c.imageBlob,l=URL.createObjectURL(S);try{yield i.default.loadImage(l)}catch(y){return c.logger.info(`Failed to fetch load replacement image ${y.message}`),!1}finally{URL.revokeObjectURL(l)}return f.isSupported.call(this,r,c)})}},"BackgroundReplacementVideoFrameProcessor");d.default=t},ya0l:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{},"ClientVideoStreamReceivingReport");d.default=g},yqyw:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("lUhs")),m=p(h("aVV0"));let s=a(class extends m.default{cancel(){if(this.cancelPromise){const i=new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.NoAttendeePresent}`);this.cancelPromise(i),delete this.cancelPromise}}run(){return g(this,void 0,void 0,function*(){const i=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const n=a((r,c,f,S,l)=>{i===r&&c&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n),e(),delete this.cancelPromise)},"handler");this.cancelPromise=r=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n),t(r)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(n)})})}constructor(i){super(i.logger),this.context=i,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");d.default=s},yvTz:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(l,y,T,O){function R(F){return F instanceof T?F:new T(function(U){U(F)})}return a(R,"adopt"),new(T||(T=Promise))(function(F,U){function _(A){try{L(O.next(A))}catch(M){U(M)}}a(_,"fulfilled");function P(A){try{L(O.throw(A))}catch(M){U(M)}}a(P,"rejected");function L(A){A.done?F(A.value):R(A.value).then(_,P)}a(L,"step"),L((O=O.apply(l,y||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("2nae")),m=p(h("HLgz")),s=p(h("Np2I")),o=p(h("Sa54")),i=p(h("Lrln")),e=p(h("0NFC")),t=p(h("Q8+J")),n=h("rwhO"),r=p(h("eeYi")),c=p(h("ULlC")),f=p(h("jHTc"));let S=a(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return g(this,void 0,void 0,function*(){n.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),n.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),n.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const y=new o.default,T=`${y.name()} ${y.majorVersion()} (${y.version()})`;if(this.logger.info(`browser is ${T}`),y.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${y.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!y.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(y.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${y.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!y.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(y){return!!(y&&y.addObserver)}constructor(y,T,O,R){this._eventController=R,this._configuration=y,this._logger=T,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new r.default(y,T)),O.eventController||(O.eventController=this.eventController),this.audioVideoController=new u.default(this._configuration,this._logger,new f.default(this._logger),O,new c.default(this._configuration.reconnectTimeoutMs,new s.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=O,this.logger.info(`MeetingFeatures: ${JSON.stringify(y.meetingFeatures)}`);const F=new i.default(this._logger);this.contentShareController=new e.default(F,new u.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new f.default(this._logger),F,new c.default(this._configuration.reconnectTimeoutMs,new s.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new m.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");d.default=S},ywpn:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(c,f,S,l){function y(T){return T instanceof S?T:new S(function(O){O(T)})}return a(y,"adopt"),new(S||(S=Promise))(function(T,O){function R(_){try{U(l.next(_))}catch(P){O(P)}}a(R,"fulfilled");function F(_){try{U(l.throw(_))}catch(P){O(P)}}a(F,"rejected");function U(_){_.done?T(_.value):y(_.value).then(R,F)}a(U,"step"),U((l=l.apply(c,f||[])).next())})},p=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(d,"__esModule",{value:!0});const u=h("GEtQ"),m=h("hlxM"),s=p(h("J93s")),o=p(h("Sa54")),i=p(h("59sL")),e=a(()=>s.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",n={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let r=a(class{static defaultAssetSpec(){const f=i.default.sdkVersionSemVer;return{assetGroup:`sdk-${f.major}.${f.minor}`}}static createUrlWithParams(f,S){const l=new URL(f),y=Object.keys(S);for(const T of y)S[T]!==void 0&&l.searchParams.set(T,S[T]);return l.toString()}static resolveSpec(f){const{paths:S=n,model:l=e(),assetGroup:y=this.defaultAssetSpec().assetGroup,revisionID:T=this.defaultAssetSpec().revisionID}=f||{},O={assetGroup:y,revisionID:T,sdk:encodeURIComponent(i.default.sdkVersion),ua:encodeURIComponent(i.default.sdkUserAgentLowResolution)};return S.worker=this.createUrlWithParams(S.worker,O),S.wasm=this.createUrlWithParams(S.wasm,O),S.simd=this.createUrlWithParams(S.simd,O),l.path=this.createUrlWithParams(l.path,O),{paths:S,model:l,assetGroup:y,revisionID:T}}static resolveOptions(f){f.reportingPeriodMillis||(f.reportingPeriodMillis=1e3);const S=30;return f.filterCPUUtilization?(f.filterCPUUtilization<0||f.filterCPUUtilization>100)&&(f.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${S} percent`),f.filterCPUUtilization=S):f.filterCPUUtilization=S,f}static isSupported(f,S){const{logger:l}=S;return typeof globalThis>"u"?(l.info("Browser does not have globalThis."),Promise.resolve(!1)):new o.default().supportsBackgroundFilter()?m.supportsWASM(globalThis,l)?this.supportsBackgroundFilter(globalThis,f,l):(l.info("Browser does not support WASM."),Promise.resolve(!1)):(l.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,S=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0;return g(this,void 0,void 0,function*(){if(!m.supportsWorker(f,l))return l.info("Browser does not support web workers."),!1;const y=S.paths.worker;try{const T=yield u.loadWorker(y,"BackgroundFilterWorker",{},null);try{T.terminate()}catch(O){l.info(`Failed to terminate worker. ${O.message}`)}return!0}catch(T){return l.info(`Failed to fetch and instantiate test worker ${T.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");d.default=r},yx2K:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(F,U,_,P){function L(A){return A instanceof _?A:new _(function(M){M(A)})}return a(L,"adopt"),new(_||(_=Promise))(function(A,M){function k(H){try{K(P.next(H))}catch(X){M(X)}}a(k,"fulfilled");function G(H){try{K(P.throw(H))}catch(X){M(X)}}a(G,"rejected");function K(H){H.done?A(H.value):L(H.value).then(k,G)}a(K,"step"),K((P=P.apply(F,U||[])).next())})},p=this&&this.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("WHnE")),m=p(h("Sa54")),s=p(h("RUbL")),o=p(h("V4cD")),i=p(h("aVV0")),e=p(h("L+i+")),t=p(h("Yvks")),n=p(h("jmx1")),r=p(h("zN22")),c=p(h("CPHI")),f=p(h("2Bsk")),S=p(h("aSsB")),l=p(h("kph0")),y=p(h("SdmA")),T=p(h("NFcc")),O=p(h("+7ft"));let R=a(class hf{static delay(U){return g(this,void 0,void 0,function*(){return new Promise(_=>setTimeout(_,U))})}checkAudioInput(U){return g(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(U),yield this.meetingSession.audioVideo.stopAudioInput(),n.default.Succeeded}catch(_){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${_}`),_ instanceof o.default?n.default.PermissionDenied:n.default.Failed}})}checkAudioOutput(U,_){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return g(this,void 0,void 0,function*(){try{const L=U?s.default.getIntrinsicDeviceId(U):"";return yield this.playTone(L,this.configuration.audioOutputFrequency,P),(yield _())?r.default.Succeeded:r.default.Failed}catch(L){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${L}`),r.default.Failed}finally{this.stopTone()}})}playTone(U,_,P){return g(this,void 0,void 0,function*(){const A=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=s.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=_,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const k=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,k),this.gainNode.gain.linearRampToValueAtTime(A,k+.1),this.oscillatorNode.start();const G=new u.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield G.bindAudioDevice({deviceId:U}))}catch(K){this.logger.error(`Failed to bind audio device: ${K}`)}try{yield G.bindAudioElement(P||new Audio)}catch(K){this.logger.error(`Failed to bind audio element: ${K}`)}yield G.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const U=1,_=.1,P=this.configuration.audioOutputGain,L=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(P,L+_+U),this.gainNode.gain.linearRampToValueAtTime(0,L+_*2+U),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(U){return g(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(U),yield this.meetingSession.audioVideo.stopVideoInput(),T.default.Succeeded}catch(_){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${_}`),_ instanceof o.default?T.default.PermissionDenied:T.default.Failed}})}checkCameraResolution(U,_,P){return g(this,void 0,void 0,function*(){let L;try{const A=s.default.getIntrinsicDeviceId(U),M={video:this.calculateVideoConstraint(A,_,P)};L=yield navigator.mediaDevices.getUserMedia(M)}catch(A){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${_} height ${P} failed with error ${A}`),A&&A.name==="OverconstrainedError"?c.default.ResolutionNotSupported:A&&A.name==="NotAllowedError"?c.default.PermissionDenied:c.default.Failed}finally{L&&L.getTracks().forEach(function(A){A.stop()})}return c.default.Succeeded})}calculateVideoConstraint(U,_,P){const L=this.browserBehavior.requiresResolutionAlignment(_,P),A={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(A.deviceId=U,A.width=_,A.height=P):(A.deviceId={exact:U},A.width={exact:L[0]},A.height={exact:L[1]}),A}checkContentShareConnectivity(U){return g(this,void 0,void 0,function*(){let _=!1,P=!1;const L={contentShareDidStart:()=>{_=!0}},A={audioVideoDidStart:()=>{P=!0}};try{return this.meetingSession.audioVideo.addObserver(A),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(L),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(U),yield this.executeTimeoutTask(()=>g(this,void 0,void 0,function*(){return P&&_})),P?(yield this.stopMeeting(),_?f.default.Succeeded:f.default.TimedOut):f.default.ConnectionFailed}catch(M){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${M}`),M.name==="NotAllowedError"?f.default.PermissionDenied:f.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(A),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(L)}})}checkAudioConnectivity(U){return g(this,void 0,void 0,function*(){let _=!1;const P={packetsReceived:0},L=this.meetingSession.audioVideo,A={metricsDidReceive(k){k.getRTCStatsReport().forEach(G=>{G.type==="inbound-rtp"&&(G.mediaType==="audio"||G.kind==="audio")&&(P.packetsReceived=G.packetsReceived)})}},M=a((k,G,K,H)=>{k===this.meetingSession.configuration.credentials.attendeeId&&G&&(_=!0)},"attendeePresenceHandler");try{yield L.startAudioInput(U)}catch(k){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${k}`),k instanceof o.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return L.realtimeSubscribeToAttendeeIdPresence(M),L.addObserver(A),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>g(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(_,P)})),L.removeObserver(A),L.realtimeUnsubscribeToAttendeeIdPresence(M),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(_,P)?t.default.Succeeded:t.default.AudioNotReceived):(L.removeObserver(A),L.realtimeUnsubscribeToAttendeeIdPresence(M),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(U){return g(this,void 0,void 0,function*(){const _=this.meetingSession.audioVideo;let P=0;const L={metricsDidReceive(A){A.getRTCStatsReport().forEach(k=>{k.type==="outbound-rtp"&&(k.mediaType==="video"||k.kind==="video")&&(P=k.packetsSent)})}};try{yield _.startVideoInput(U)}catch(A){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${A}`),A instanceof o.default?y.default.VideoInputPermissionDenied:y.default.VideoInputRequestFailed}return _.addObserver(L),(yield this.startMeeting())?(_.startLocalVideoTile(),yield this.executeTimeoutTask(()=>g(this,void 0,void 0,function*(){return P>0})),yield _.stopVideoInput(),yield this.stopMeeting(),_.removeObserver(L),P<=0?y.default.VideoNotSent:y.default.Succeeded):y.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return g(this,void 0,void 0,function*(){let U=!1;const _={metricsDidReceive(L){L.getRTCStatsReport().forEach(M=>{M.type==="candidate-pair"&&M.state==="succeeded"&&(U=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(L){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${L}`),l.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=L=>{const A=this.originalURLRewriter(L);return A.includes("transport=tcp")?"":A};const P=this.meetingSession.audioVideo;return P.addObserver(_),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>g(this,void 0,void 0,function*(){return U})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),P.removeObserver(_),U?l.default.Succeeded:l.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,l.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return g(this,void 0,void 0,function*(){let U=!1;const _={metricsDidReceive(L){L.getRTCStatsReport().forEach(M=>{M.type==="candidate-pair"&&M.state==="succeeded"&&(U=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(L){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${L}`),S.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=L=>{const A=this.originalURLRewriter(L);return A.includes("transport=udp")?"":A};const P=this.meetingSession.audioVideo;return P.addObserver(_),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>g(this,void 0,void 0,function*(){return U})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),P.removeObserver(_),U?S.default.Succeeded:S.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,S.default.ConnectionFailed)})}startMeeting(){return g(this,void 0,void 0,function*(){let U=!1;const _={audioVideoDidStart:()=>{U=!0}};return this.meetingSession.audioVideo.addObserver(_),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>g(this,void 0,void 0,function*(){return U})),this.meetingSession.audioVideo.removeObserver(_),U})}stopMeeting(){return g(this,void 0,void 0,function*(){let U=!1;const _={audioVideoDidStop:P=>{U=!0}};return this.meetingSession.audioVideo.addObserver(_),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>g(this,void 0,void 0,function*(){return U})),this.meetingSession.audioVideo.removeObserver(_),U})}executeTimeoutTask(U){return g(this,void 0,void 0,function*(){let _=!1,P=a(class extends i.default{cancel(){this.isCancelled=!0}run(){return g(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield U()){_=!0;break}yield hf.delay(this.waitDurationMs)}})}constructor(M,k){super(M),this.waitDurationMs=k,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new P(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),_})}isAudioConnectionSuccessful(U,_){return U&&_.packetsReceived>0}constructor(U,_,P=new O.default){this.logger=U,this.meetingSession=_,this.configuration=P,this.browserBehavior=new m.default}},"DefaultMeetingReadinessChecker");d.default=R},"z8+u":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.WebSocketReadyState=void 0;var g;(function(p){p[p.None=0]="None",p[p.Connecting=1]="Connecting",p[p.Open=2]="Open",p[p.Closing=3]="Closing",p[p.Closed=4]="Closed"})(g=d.WebSocketReadyState||(d.WebSocketReadyState={})),d.default=g},zH6K:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(o,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return a(n,"adopt"),new(e||(e=Promise))(function(r,c){function f(y){try{l(t.next(y))}catch(T){c(T)}}a(f,"fulfilled");function S(y){try{l(t.throw(y))}catch(T){c(T)}}a(S,"rejected");function l(y){y.done?r(y.value):n(y.value).then(f,S)}a(l,"step"),l((t=t.apply(o,i||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(d,"__esModule",{value:!0});const u=p(h("F7zz")),m=p(h("BkFD"));let s=a(class pf{sortedDeviceList(){return g(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const i of this.deviceChangeListeners)u.default.nextTick(()=>{if(this.deviceChangeListeners.has(i)){const e=new Event("devicechange");typeof i=="function"?i(e):i.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(i,e,t)=>{if(!Reflect.has(i,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(i,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(i,e,t)}const n=Reflect.get(i,e,t);return typeof n=="function"?n.bind(i):n},this.patchAddEventListener=(i,e,t)=>{const n=Reflect.get(i,e,t);return(r,c,f)=>{if(r==="devicechange")this.deviceChangeListeners.add(c),this.scheduler||(this.scheduler=new m.default(pf.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(n,i,[r,c,f])}},this.patchRemoveEventListener=(i,e,t)=>{const n=Reflect.get(i,e,t);return(r,c,f)=>{if(r==="devicechange")this.deviceChangeListeners.delete(c),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(n,i,[r,c,f])}},this.pollDeviceLists=()=>g(this,void 0,void 0,function*(){const i=yield this.sortedDeviceList();this.devices&&(i.length!==this.devices.length||i.some((t,n)=>t.deviceId!==this.devices[n].deviceId))&&this.handleDeviceChangeEvent(),this.devices=i})}},"MediaDeviceProxyHandler");d.default=s,s.INTERVAL_MS=1e3},zN22:function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.CheckAudioOutputFeedback=void 0;var g;(function(p){p[p.Succeeded=0]="Succeeded",p[p.Failed=1]="Failed"})(g=d.CheckAudioOutputFeedback||(d.CheckAudioOutputFeedback={})),d.default=g},zNm1:function(W,d,h){"use strict";var g=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(f){f(c)})}return a(r,"adopt"),new(t||(t=Promise))(function(c,f){function S(T){try{y(n.next(T))}catch(O){f(O)}}a(S,"fulfilled");function l(T){try{y(n.throw(T))}catch(O){f(O)}}a(l,"rejected");function y(T){T.done?c(T.value):r(T.value).then(S,l)}a(y,"step"),y((n=n.apply(i,e||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(d,"__esModule",{value:!0}),d.NoOpDeviceControllerWithEventController=void 0;const u=p(h("r9Lw")),m=p(h("dWQL"));let s=a(class extends u.default{destroy(){return g(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,n){}getVideoInputQualitySettings(){return m.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");d.default=s;let o=a(class extends s{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");d.NoOpDeviceControllerWithEventController=o},"zW/2":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.isEmptyData=void 0;function g(p){return typeof p=="string"?p.length===0:p.byteLength===0}a(g,"isEmptyData"),d.isEmptyData=g},"zcg+":function(W,d,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0});let g=a(class{start(u){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),u()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(u){this.timeoutMs=u,this.timer=null}},"TimeoutScheduler");d.default=g},zd8f:function(W,d,h){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0});const p=g(h("mlaT"));let u=a(class{info(s){this.log(p.default.INFO,s)}warn(s){this.log(p.default.WARN,s)}error(s){this.log(p.default.ERROR,s)}debug(s){p.default.DEBUG<this.level||(typeof s=="string"?this.log(p.default.DEBUG,s):s?this.log(p.default.DEBUG,s()):this.log(p.default.DEBUG,""+s))}setLogLevel(s){this.level=s}getLogLevel(){return this.level}log(s,o){if(s<this.level)return;const e=`${new Date().toISOString()} [${p.default[s]}] ${this.name} - ${o}`;switch(s){case p.default.ERROR:console.error(e);break;case p.default.WARN:console.warn(e);break;case p.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case p.default.INFO:console.info(e);break}}constructor(s,o=p.default.WARN){this.name=s,this.level=o}},"ConsoleLogger");d.default=u}}]);})();
